<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>optimized clip</title>
    <script type="module" crossorigin>function f8(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function fh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var t2={exports:{}},j0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v3;function h8(){if(v3)return j0;v3=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var o in r)o!=="key"&&(s[o]=r[o])}else s=r;return r=s.ref,{$$typeof:n,type:i,key:a,ref:r!==void 0?r:null,props:s}}return j0.Fragment=e,j0.jsx=t,j0.jsxs=t,j0}var y3;function d8(){return y3||(y3=1,t2.exports=h8()),t2.exports}var ge=d8(),n2={exports:{}},Nn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _3;function p8(){if(_3)return Nn;_3=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(G){return G===null||typeof G!="object"?null:(G=p&&G[p]||G["@@iterator"],typeof G=="function"?G:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,M={};function b(G,X,ie){this.props=G,this.context=X,this.refs=M,this.updater=ie||y}b.prototype.isReactComponent={},b.prototype.setState=function(G,X){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,X,"setState")},b.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function S(){}S.prototype=b.prototype;function T(G,X,ie){this.props=G,this.context=X,this.refs=M,this.updater=ie||y}var A=T.prototype=new S;A.constructor=T,x(A,b.prototype),A.isPureReactComponent=!0;var w=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function P(G,X,ie,se,ee,ue){return ie=ue.ref,{$$typeof:n,type:G,key:X,ref:ie!==void 0?ie:null,props:ue}}function B(G,X){return P(G.type,X,void 0,void 0,void 0,G.props)}function I(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function z(G){var X={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(ie){return X[ie]})}var k=/\/+/g;function V(G,X){return typeof G=="object"&&G!==null&&G.key!=null?z(""+G.key):X.toString(36)}function j(){}function W(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(j,j):(G.status="pending",G.then(function(X){G.status==="pending"&&(G.status="fulfilled",G.value=X)},function(X){G.status==="pending"&&(G.status="rejected",G.reason=X)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function te(G,X,ie,se,ee){var ue=typeof G;(ue==="undefined"||ue==="boolean")&&(G=null);var pe=!1;if(G===null)pe=!0;else switch(ue){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(G.$$typeof){case n:case e:pe=!0;break;case h:return pe=G._init,te(pe(G._payload),X,ie,se,ee)}}if(pe)return ee=ee(G),pe=se===""?"."+V(G,0):se,w(ee)?(ie="",pe!=null&&(ie=pe.replace(k,"$&/")+"/"),te(ee,X,ie,"",function(Xe){return Xe})):ee!=null&&(I(ee)&&(ee=B(ee,ie+(ee.key==null||G&&G.key===ee.key?"":(""+ee.key).replace(k,"$&/")+"/")+pe)),X.push(ee)),1;pe=0;var ve=se===""?".":se+":";if(w(G))for(var _e=0;_e<G.length;_e++)se=G[_e],ue=ve+V(se,_e),pe+=te(se,X,ie,ue,ee);else if(_e=g(G),typeof _e=="function")for(G=_e.call(G),_e=0;!(se=G.next()).done;)se=se.value,ue=ve+V(se,_e++),pe+=te(se,X,ie,ue,ee);else if(ue==="object"){if(typeof G.then=="function")return te(W(G),X,ie,se,ee);throw X=String(G),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return pe}function H(G,X,ie){if(G==null)return G;var se=[],ee=0;return te(G,se,"","",function(ue){return X.call(ie,ue,ee++)}),se}function Q(G){if(G._status===-1){var X=G._result;X=X(),X.then(function(ie){(G._status===0||G._status===-1)&&(G._status=1,G._result=ie)},function(ie){(G._status===0||G._status===-1)&&(G._status=2,G._result=ie)}),G._status===-1&&(G._status=0,G._result=X)}if(G._status===1)return G._result.default;throw G._result}var ne=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)};function re(){}return Nn.Children={map:H,forEach:function(G,X,ie){H(G,function(){X.apply(this,arguments)},ie)},count:function(G){var X=0;return H(G,function(){X++}),X},toArray:function(G){return H(G,function(X){return X})||[]},only:function(G){if(!I(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Nn.Component=b,Nn.Fragment=t,Nn.Profiler=r,Nn.PureComponent=T,Nn.StrictMode=i,Nn.Suspense=c,Nn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Nn.__COMPILER_RUNTIME={__proto__:null,c:function(G){return D.H.useMemoCache(G)}},Nn.cache=function(G){return function(){return G.apply(null,arguments)}},Nn.cloneElement=function(G,X,ie){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var se=x({},G.props),ee=G.key,ue=void 0;if(X!=null)for(pe in X.ref!==void 0&&(ue=void 0),X.key!==void 0&&(ee=""+X.key),X)!O.call(X,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&X.ref===void 0||(se[pe]=X[pe]);var pe=arguments.length-2;if(pe===1)se.children=ie;else if(1<pe){for(var ve=Array(pe),_e=0;_e<pe;_e++)ve[_e]=arguments[_e+2];se.children=ve}return P(G.type,ee,void 0,void 0,ue,se)},Nn.createContext=function(G){return G={$$typeof:a,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:s,_context:G},G},Nn.createElement=function(G,X,ie){var se,ee={},ue=null;if(X!=null)for(se in X.key!==void 0&&(ue=""+X.key),X)O.call(X,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ee[se]=X[se]);var pe=arguments.length-2;if(pe===1)ee.children=ie;else if(1<pe){for(var ve=Array(pe),_e=0;_e<pe;_e++)ve[_e]=arguments[_e+2];ee.children=ve}if(G&&G.defaultProps)for(se in pe=G.defaultProps,pe)ee[se]===void 0&&(ee[se]=pe[se]);return P(G,ue,void 0,void 0,null,ee)},Nn.createRef=function(){return{current:null}},Nn.forwardRef=function(G){return{$$typeof:o,render:G}},Nn.isValidElement=I,Nn.lazy=function(G){return{$$typeof:h,_payload:{_status:-1,_result:G},_init:Q}},Nn.memo=function(G,X){return{$$typeof:u,type:G,compare:X===void 0?null:X}},Nn.startTransition=function(G){var X=D.T,ie={};D.T=ie;try{var se=G(),ee=D.S;ee!==null&&ee(ie,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(re,ne)}catch(ue){ne(ue)}finally{D.T=X}},Nn.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Nn.use=function(G){return D.H.use(G)},Nn.useActionState=function(G,X,ie){return D.H.useActionState(G,X,ie)},Nn.useCallback=function(G,X){return D.H.useCallback(G,X)},Nn.useContext=function(G){return D.H.useContext(G)},Nn.useDebugValue=function(){},Nn.useDeferredValue=function(G,X){return D.H.useDeferredValue(G,X)},Nn.useEffect=function(G,X,ie){var se=D.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(G,X)},Nn.useId=function(){return D.H.useId()},Nn.useImperativeHandle=function(G,X,ie){return D.H.useImperativeHandle(G,X,ie)},Nn.useInsertionEffect=function(G,X){return D.H.useInsertionEffect(G,X)},Nn.useLayoutEffect=function(G,X){return D.H.useLayoutEffect(G,X)},Nn.useMemo=function(G,X){return D.H.useMemo(G,X)},Nn.useOptimistic=function(G,X){return D.H.useOptimistic(G,X)},Nn.useReducer=function(G,X,ie){return D.H.useReducer(G,X,ie)},Nn.useRef=function(G){return D.H.useRef(G)},Nn.useState=function(G){return D.H.useState(G)},Nn.useSyncExternalStore=function(G,X,ie){return D.H.useSyncExternalStore(G,X,ie)},Nn.useTransition=function(){return D.H.useTransition()},Nn.version="19.1.1",Nn}var x3;function _g(){return x3||(x3=1,n2.exports=p8()),n2.exports}var L=_g();const de=fh(L),m8=f8({__proto__:null,default:de},[L]);var i2={exports:{}},W0={},r2={exports:{}},s2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b3;function g8(){return b3||(b3=1,(function(n){function e(H,Q){var ne=H.length;H.push(Q);e:for(;0<ne;){var re=ne-1>>>1,G=H[re];if(0<r(G,Q))H[re]=Q,H[ne]=G,ne=re;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var Q=H[0],ne=H.pop();if(ne!==Q){H[0]=ne;e:for(var re=0,G=H.length,X=G>>>1;re<X;){var ie=2*(re+1)-1,se=H[ie],ee=ie+1,ue=H[ee];if(0>r(se,ne))ee<G&&0>r(ue,se)?(H[re]=ue,H[ee]=ne,re=ee):(H[re]=se,H[ie]=ne,re=ie);else if(ee<G&&0>r(ue,ne))H[re]=ue,H[ee]=ne,re=ee;else break e}}return Q}function r(H,Q){var ne=H.sortIndex-Q.sortIndex;return ne!==0?ne:H.id-Q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,p=null,g=3,y=!1,x=!1,M=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function w(H){for(var Q=t(u);Q!==null;){if(Q.callback===null)i(u);else if(Q.startTime<=H)i(u),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=t(u)}}function D(H){if(M=!1,w(H),!x)if(t(c)!==null)x=!0,O||(O=!0,V());else{var Q=t(u);Q!==null&&te(D,Q.startTime-H)}}var O=!1,P=-1,B=5,I=-1;function z(){return b?!0:!(n.unstable_now()-I<B)}function k(){if(b=!1,O){var H=n.unstable_now();I=H;var Q=!0;try{e:{x=!1,M&&(M=!1,T(P),P=-1),y=!0;var ne=g;try{t:{for(w(H),p=t(c);p!==null&&!(p.expirationTime>H&&z());){var re=p.callback;if(typeof re=="function"){p.callback=null,g=p.priorityLevel;var G=re(p.expirationTime<=H);if(H=n.unstable_now(),typeof G=="function"){p.callback=G,w(H),Q=!0;break t}p===t(c)&&i(c),w(H)}else i(c);p=t(c)}if(p!==null)Q=!0;else{var X=t(u);X!==null&&te(D,X.startTime-H),Q=!1}}break e}finally{p=null,g=ne,y=!1}Q=void 0}}finally{Q?V():O=!1}}}var V;if(typeof A=="function")V=function(){A(k)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,W=j.port2;j.port1.onmessage=k,V=function(){W.postMessage(null)}}else V=function(){S(k,0)};function te(H,Q){P=S(function(){H(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(H){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var ne=g;g=Q;try{return H()}finally{g=ne}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=g;g=H;try{return Q()}finally{g=ne}},n.unstable_scheduleCallback=function(H,Q,ne){var re=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?re+ne:re):ne=re,H){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ne+G,H={id:h++,callback:Q,priorityLevel:H,startTime:ne,expirationTime:G,sortIndex:-1},ne>re?(H.sortIndex=ne,e(u,H),t(c)===null&&H===t(u)&&(M?(T(P),P=-1):M=!0,te(D,ne-re))):(H.sortIndex=G,e(c,H),x||y||(x=!0,O||(O=!0,V()))),H},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(H){var Q=g;return function(){var ne=g;g=Q;try{return H.apply(this,arguments)}finally{g=ne}}}})(s2)),s2}var S3;function v8(){return S3||(S3=1,r2.exports=g8()),r2.exports}var a2={exports:{}},Us={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E3;function y8(){if(E3)return Us;E3=1;var n=_g();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(c,u,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:c,containerInfo:u,implementation:h}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Us.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Us.createPortal=function(c,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(c,u,null,h)},Us.flushSync=function(c){var u=a.T,h=i.p;try{if(a.T=null,i.p=2,c)return c()}finally{a.T=u,i.p=h,i.d.f()}},Us.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(c,u))},Us.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},Us.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var h=u.as,p=o(h,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?i.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):h==="script"&&i.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Us.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=o(u.as,u.crossOrigin);i.d.M(c,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(c)},Us.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,p=o(h,u.crossOrigin);i.d.L(c,h,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Us.preloadModule=function(c,u){if(typeof c=="string")if(u){var h=o(u.as,u.crossOrigin);i.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(c)},Us.requestFormReset=function(c){i.d.r(c)},Us.unstable_batchedUpdates=function(c,u){return c(u)},Us.useFormState=function(c,u,h){return a.H.useFormState(c,u,h)},Us.useFormStatus=function(){return a.H.useHostTransitionStatus()},Us.version="19.1.1",Us}var M3;function Y5(){if(M3)return a2.exports;M3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),a2.exports=y8(),a2.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T3;function _8(){if(T3)return W0;T3=1;var n=v8(),e=_g(),t=Y5();function i(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function s(l){var f=l,v=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(v=f.return),l=f.return;while(l)}return f.tag===3?v:null}function a(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function o(l){if(s(l)!==l)throw Error(i(188))}function c(l){var f=l.alternate;if(!f){if(f=s(l),f===null)throw Error(i(188));return f!==l?null:l}for(var v=l,_=f;;){var C=v.return;if(C===null)break;var U=C.alternate;if(U===null){if(_=C.return,_!==null){v=_;continue}break}if(C.child===U.child){for(U=C.child;U;){if(U===v)return o(C),l;if(U===_)return o(C),f;U=U.sibling}throw Error(i(188))}if(v.return!==_.return)v=C,_=U;else{for(var q=!1,ae=C.child;ae;){if(ae===v){q=!0,v=C,_=U;break}if(ae===_){q=!0,_=C,v=U;break}ae=ae.sibling}if(!q){for(ae=U.child;ae;){if(ae===v){q=!0,v=U,_=C;break}if(ae===_){q=!0,_=U,v=C;break}ae=ae.sibling}if(!q)throw Error(i(189))}}if(v.alternate!==_)throw Error(i(190))}if(v.tag!==3)throw Error(i(188));return v.stateNode.current===v?l:f}function u(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l;for(l=l.child;l!==null;){if(f=u(l),f!==null)return f;l=l.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),A=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function V(l){return l===null||typeof l!="object"?null:(l=k&&l[k]||l["@@iterator"],typeof l=="function"?l:null)}var j=Symbol.for("react.client.reference");function W(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===j?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case b:return"Profiler";case M:return"StrictMode";case D:return"Suspense";case O:return"SuspenseList";case I:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case A:return(l.displayName||"Context")+".Provider";case T:return(l._context.displayName||"Context")+".Consumer";case w:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case P:return f=l.displayName||null,f!==null?f:W(l.type)||"Memo";case B:f=l._payload,l=l._init;try{return W(l(f))}catch{}}return null}var te=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},re=[],G=-1;function X(l){return{current:l}}function ie(l){0>G||(l.current=re[G],re[G]=null,G--)}function se(l,f){G++,re[G]=l.current,l.current=f}var ee=X(null),ue=X(null),pe=X(null),ve=X(null);function _e(l,f){switch(se(pe,f),se(ue,l),se(ee,null),f.nodeType){case 9:case 11:l=(l=f.documentElement)&&(l=l.namespaceURI)?WC(l):0;break;default:if(l=f.tagName,f=f.namespaceURI)f=WC(f),l=XC(f,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ie(ee),se(ee,l)}function Xe(){ie(ee),ie(ue),ie(pe)}function qe(l){l.memoizedState!==null&&se(ve,l);var f=ee.current,v=XC(f,l.type);f!==v&&(se(ue,l),se(ee,v))}function Be(l){ue.current===l&&(ie(ee),ie(ue)),ve.current===l&&(ie(ve),F0._currentValue=ne)}var Se=Object.prototype.hasOwnProperty,He=n.unstable_scheduleCallback,oe=n.unstable_cancelCallback,lt=n.unstable_shouldYield,ze=n.unstable_requestPaint,Qe=n.unstable_now,De=n.unstable_getCurrentPriorityLevel,st=n.unstable_ImmediatePriority,ke=n.unstable_UserBlockingPriority,$=n.unstable_NormalPriority,Y=n.unstable_LowPriority,fe=n.unstable_IdlePriority,Ee=n.log,Re=n.unstable_setDisableYieldValue,Le=null,Fe=null;function et(l){if(typeof Ee=="function"&&Re(l),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(Le,l)}catch{}}var tt=Math.clz32?Math.clz32:yt,Ot=Math.log,at=Math.LN2;function yt(l){return l>>>=0,l===0?32:31-(Ot(l)/at|0)|0}var gt=256,ht=4194304;function nt(l){var f=l&42;if(f!==0)return f;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function wt(l,f,v){var _=l.pendingLanes;if(_===0)return 0;var C=0,U=l.suspendedLanes,q=l.pingedLanes;l=l.warmLanes;var ae=_&134217727;return ae!==0?(_=ae&~U,_!==0?C=nt(_):(q&=ae,q!==0?C=nt(q):v||(v=ae&~l,v!==0&&(C=nt(v))))):(ae=_&~U,ae!==0?C=nt(ae):q!==0?C=nt(q):v||(v=_&~l,v!==0&&(C=nt(v)))),C===0?0:f!==0&&f!==C&&(f&U)===0&&(U=C&-C,v=f&-f,U>=v||U===32&&(v&4194048)!==0)?f:C}function St(l,f){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&f)===0}function Ht(l,f){switch(l){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Te(){var l=gt;return gt<<=1,(gt&4194048)===0&&(gt=256),l}function Oe(){var l=ht;return ht<<=1,(ht&62914560)===0&&(ht=4194304),l}function Pe(l){for(var f=[],v=0;31>v;v++)f.push(l);return f}function ct(l,f){l.pendingLanes|=f,f!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function xt(l,f,v,_,C,U){var q=l.pendingLanes;l.pendingLanes=v,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=v,l.entangledLanes&=v,l.errorRecoveryDisabledLanes&=v,l.shellSuspendCounter=0;var ae=l.entanglements,be=l.expirationTimes,Ve=l.hiddenUpdates;for(v=q&~v;0<v;){var mt=31-tt(v),_t=1<<mt;ae[mt]=0,be[mt]=-1;var Ze=Ve[mt];if(Ze!==null)for(Ve[mt]=null,mt=0;mt<Ze.length;mt++){var $e=Ze[mt];$e!==null&&($e.lane&=-536870913)}v&=~_t}_!==0&&je(l,_,0),U!==0&&C===0&&l.tag!==0&&(l.suspendedLanes|=U&~(q&~f))}function je(l,f,v){l.pendingLanes|=f,l.suspendedLanes&=~f;var _=31-tt(f);l.entangledLanes|=f,l.entanglements[_]=l.entanglements[_]|1073741824|v&4194090}function Ct(l,f){var v=l.entangledLanes|=f;for(l=l.entanglements;v;){var _=31-tt(v),C=1<<_;C&f|l[_]&f&&(l[_]|=f),v&=~C}}function zt(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Dt(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Gt(){var l=Q.p;return l!==0?l:(l=window.event,l===void 0?32:f3(l.type))}function tn(l,f){var v=Q.p;try{return Q.p=l,f()}finally{Q.p=v}}var Jt=Math.random().toString(36).slice(2),un="__reactFiber$"+Jt,mn="__reactProps$"+Jt,bn="__reactContainer$"+Jt,hi="__reactEvents$"+Jt,gi="__reactListeners$"+Jt,Mi="__reactHandles$"+Jt,Xt="__reactResources$"+Jt,ri="__reactMarker$"+Jt;function In(l){delete l[un],delete l[mn],delete l[hi],delete l[gi],delete l[Mi]}function K(l){var f=l[un];if(f)return f;for(var v=l.parentNode;v;){if(f=v[bn]||v[un]){if(v=f.alternate,f.child!==null||v!==null&&v.child!==null)for(l=KC(l);l!==null;){if(v=l[un])return v;l=KC(l)}return f}l=v,v=l.parentNode}return null}function le(l){if(l=l[un]||l[bn]){var f=l.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return l}return null}function Ae(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l.stateNode;throw Error(i(33))}function Ge(l){var f=l[Xt];return f||(f=l[Xt]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function We(l){l[ri]=!0}var rt=new Set,bt={};function Z(l,f){me(l,f),me(l+"Capture",f)}function me(l,f){for(bt[l]=f,l=0;l<f.length;l++)rt.add(f[l])}var ye=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xe={},he={};function ut(l){return Se.call(he,l)?!0:Se.call(xe,l)?!1:ye.test(l)?he[l]=!0:(xe[l]=!0,!1)}function it(l,f,v){if(ut(f))if(v===null)l.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":l.removeAttribute(f);return;case"boolean":var _=f.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){l.removeAttribute(f);return}}l.setAttribute(f,""+v)}}function ot(l,f,v){if(v===null)l.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttribute(f,""+v)}}function dt(l,f,v,_){if(_===null)l.removeAttribute(v);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(v);return}l.setAttributeNS(f,v,""+_)}}var Et,Lt;function Mt(l){if(Et===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);Et=f&&f[1]||"",Lt=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Et+l+Lt}var Vt=!1;function $t(l,f){if(!l||Vt)return"";Vt=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(f){var _t=function(){throw Error()};if(Object.defineProperty(_t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_t,[])}catch($e){var Ze=$e}Reflect.construct(l,[],_t)}else{try{_t.call()}catch($e){Ze=$e}l.call(_t.prototype)}}else{try{throw Error()}catch($e){Ze=$e}(_t=l())&&typeof _t.catch=="function"&&_t.catch(function(){})}}catch($e){if($e&&Ze&&typeof $e.stack=="string")return[$e.stack,Ze.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=_.DetermineComponentFrameRoot(),q=U[0],ae=U[1];if(q&&ae){var be=q.split(`
`),Ve=ae.split(`
`);for(C=_=0;_<be.length&&!be[_].includes("DetermineComponentFrameRoot");)_++;for(;C<Ve.length&&!Ve[C].includes("DetermineComponentFrameRoot");)C++;if(_===be.length||C===Ve.length)for(_=be.length-1,C=Ve.length-1;1<=_&&0<=C&&be[_]!==Ve[C];)C--;for(;1<=_&&0<=C;_--,C--)if(be[_]!==Ve[C]){if(_!==1||C!==1)do if(_--,C--,0>C||be[_]!==Ve[C]){var mt=`
`+be[_].replace(" at new "," at ");return l.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",l.displayName)),mt}while(1<=_&&0<=C);break}}}finally{Vt=!1,Error.prepareStackTrace=v}return(v=l?l.displayName||l.name:"")?Mt(v):""}function Zt(l){switch(l.tag){case 26:case 27:case 5:return Mt(l.type);case 16:return Mt("Lazy");case 13:return Mt("Suspense");case 19:return Mt("SuspenseList");case 0:case 15:return $t(l.type,!1);case 11:return $t(l.type.render,!1);case 1:return $t(l.type,!0);case 31:return Mt("Activity");default:return""}}function Rn(l){try{var f="";do f+=Zt(l),l=l.return;while(l);return f}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function Nt(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Pt(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Vn(l){var f=Pt(l)?"checked":"value",v=Object.getOwnPropertyDescriptor(l.constructor.prototype,f),_=""+l[f];if(!l.hasOwnProperty(f)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var C=v.get,U=v.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return C.call(this)},set:function(q){_=""+q,U.call(this,q)}}),Object.defineProperty(l,f,{enumerable:v.enumerable}),{getValue:function(){return _},setValue:function(q){_=""+q},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function dn(l){l._valueTracker||(l._valueTracker=Vn(l))}function jn(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var v=f.getValue(),_="";return l&&(_=Pt(l)?l.checked?"true":"false":l.value),l=_,l!==v?(f.setValue(l),!0):!1}function vn(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Bn=/[\n"\\]/g;function ln(l){return l.replace(Bn,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function kt(l,f,v,_,C,U,q,ae){l.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?l.type=q:l.removeAttribute("type"),f!=null?q==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+Nt(f)):l.value!==""+Nt(f)&&(l.value=""+Nt(f)):q!=="submit"&&q!=="reset"||l.removeAttribute("value"),f!=null?si(l,q,Nt(f)):v!=null?si(l,q,Nt(v)):_!=null&&l.removeAttribute("value"),C==null&&U!=null&&(l.defaultChecked=!!U),C!=null&&(l.checked=C&&typeof C!="function"&&typeof C!="symbol"),ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?l.name=""+Nt(ae):l.removeAttribute("name")}function ii(l,f,v,_,C,U,q,ae){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(l.type=U),f!=null||v!=null){if(!(U!=="submit"&&U!=="reset"||f!=null))return;v=v!=null?""+Nt(v):"",f=f!=null?""+Nt(f):v,ae||f===l.value||(l.value=f),l.defaultValue=f}_=_??C,_=typeof _!="function"&&typeof _!="symbol"&&!!_,l.checked=ae?l.checked:!!_,l.defaultChecked=!!_,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(l.name=q)}function si(l,f,v){f==="number"&&vn(l.ownerDocument)===l||l.defaultValue===""+v||(l.defaultValue=""+v)}function yn(l,f,v,_){if(l=l.options,f){f={};for(var C=0;C<v.length;C++)f["$"+v[C]]=!0;for(v=0;v<l.length;v++)C=f.hasOwnProperty("$"+l[v].value),l[v].selected!==C&&(l[v].selected=C),C&&_&&(l[v].defaultSelected=!0)}else{for(v=""+Nt(v),f=null,C=0;C<l.length;C++){if(l[C].value===v){l[C].selected=!0,_&&(l[C].defaultSelected=!0);return}f!==null||l[C].disabled||(f=l[C])}f!==null&&(f.selected=!0)}}function di(l,f,v){if(f!=null&&(f=""+Nt(f),f!==l.value&&(l.value=f),v==null)){l.defaultValue!==f&&(l.defaultValue=f);return}l.defaultValue=v!=null?""+Nt(v):""}function ya(l,f,v,_){if(f==null){if(_!=null){if(v!=null)throw Error(i(92));if(te(_)){if(1<_.length)throw Error(i(93));_=_[0]}v=_}v==null&&(v=""),f=v}v=Nt(f),l.defaultValue=v,_=l.textContent,_===v&&_!==""&&_!==null&&(l.value=_)}function Ni(l,f){if(f){var v=l.firstChild;if(v&&v===l.lastChild&&v.nodeType===3){v.nodeValue=f;return}}l.textContent=f}var qu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kl(l,f,v){var _=f.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?_?l.setProperty(f,""):f==="float"?l.cssFloat="":l[f]="":_?l.setProperty(f,v):typeof v!="number"||v===0||qu.has(f)?f==="float"?l.cssFloat=v:l[f]=(""+v).trim():l[f]=v+"px"}function $l(l,f,v){if(f!=null&&typeof f!="object")throw Error(i(62));if(l=l.style,v!=null){for(var _ in v)!v.hasOwnProperty(_)||f!=null&&f.hasOwnProperty(_)||(_.indexOf("--")===0?l.setProperty(_,""):_==="float"?l.cssFloat="":l[_]="");for(var C in f)_=f[C],f.hasOwnProperty(C)&&v[C]!==_&&Kl(l,C,_)}else for(var U in f)f.hasOwnProperty(U)&&Kl(l,U,f[U])}function Ql(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mo(l){return gh.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Xa=null;function qa(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var bs=null,go=null;function il(l){var f=le(l);if(f&&(l=f.stateNode)){var v=l[mn]||null;e:switch(l=f.stateNode,f.type){case"input":if(kt(l,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),f=v.name,v.type==="radio"&&f!=null){for(v=l;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+ln(""+f)+'"][type="radio"]'),f=0;f<v.length;f++){var _=v[f];if(_!==l&&_.form===l.form){var C=_[mn]||null;if(!C)throw Error(i(90));kt(_,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(f=0;f<v.length;f++)_=v[f],_.form===l.form&&jn(_)}break e;case"textarea":di(l,v.value,v.defaultValue);break e;case"select":f=v.value,f!=null&&yn(l,!!v.multiple,f,!1)}}}var rl=!1;function Yc(l,f,v){if(rl)return l(f,v);rl=!0;try{var _=l(f);return _}finally{if(rl=!1,(bs!==null||go!==null)&&(Do(),bs&&(f=bs,l=go,go=bs=null,il(f),l)))for(f=0;f<l.length;f++)il(l[f])}}function sl(l,f){var v=l.stateNode;if(v===null)return null;var _=v[mn]||null;if(_===null)return null;v=_[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(l=l.type,_=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!_;break e;default:l=!1}if(l)return null;if(v&&typeof v!="function")throw Error(i(231,f,typeof v));return v}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),al=!1;if(as)try{var ol={};Object.defineProperty(ol,"passive",{get:function(){al=!0}}),window.addEventListener("test",ol,ol),window.removeEventListener("test",ol,ol)}catch{al=!1}var Zi=null,Zc=null,Kc=null;function Yu(){if(Kc)return Kc;var l,f=Zc,v=f.length,_,C="value"in Zi?Zi.value:Zi.textContent,U=C.length;for(l=0;l<v&&f[l]===C[l];l++);var q=v-l;for(_=1;_<=q&&f[v-_]===C[U-_];_++);return Kc=C.slice(l,1<_?1-_:void 0)}function _a(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function ll(){return!0}function Jl(){return!1}function Ki(l){function f(v,_,C,U,q){this._reactName=v,this._targetInst=C,this.type=_,this.nativeEvent=U,this.target=q,this.currentTarget=null;for(var ae in l)l.hasOwnProperty(ae)&&(v=l[ae],this[ae]=v?v(U):U[ae]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?ll:Jl,this.isPropagationStopped=Jl,this}return h(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),f}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},os=Ki(Ss),cl=h({},Ss,{view:0,detail:0}),Zu=Ki(cl),js,xa,ul,ba=h({},cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_h,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ul&&(ul&&l.type==="mousemove"?(js=l.screenX-ul.screenX,xa=l.screenY-ul.screenY):xa=js=0,ul=l),js)},movementY:function(l){return"movementY"in l?l.movementY:xa}}),$c=Ki(ba),Qr=h({},ba,{dataTransfer:0}),Ig=Ki(Qr),Gi=h({},cl,{relatedTarget:0}),fl=Ki(Gi),vh=h({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),op=Ki(vh),Br=h({},Ss,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Es=Ki(Br),lr=h({},Ss,{data:0}),Ws=Ki(lr),yh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bg(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=qy[l])?!!f[l]:!1}function _h(){return Bg}var Yy=h({},cl,{key:function(l){if(l.key){var f=yh[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=_a(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Xy[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_h,charCode:function(l){return l.type==="keypress"?_a(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?_a(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),zg=Ki(Yy),Fg=h({},ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lp=Ki(Fg),Zy=h({},cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_h}),Hg=Ki(Zy),Ky=h({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),hl=Ki(Ky),kg=h({},ba,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xE=Ki(kg),$y=h({},Ss,{newState:0,oldState:0}),ec=Ki($y),dl=[9,13,27,32],xh=as&&"CompositionEvent"in window,Qc=null;as&&"documentMode"in document&&(Qc=document.documentMode);var bh=as&&"TextEvent"in window&&!Qc,Sh=as&&(!xh||Qc&&8<Qc&&11>=Qc),tc=" ",zr=!1;function Eh(l,f){switch(l){case"keyup":return dl.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gg(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var nc=!1;function Mh(l,f){switch(l){case"compositionend":return Gg(f);case"keypress":return f.which!==32?null:(zr=!0,tc);case"textInput":return l=f.data,l===tc&&zr?null:l;default:return null}}function Vg(l,f){if(nc)return l==="compositionend"||!xh&&Eh(l,f)?(l=Yu(),Kc=Zc=Zi=null,nc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Sh&&f.locale!=="ko"?null:f.data;default:return null}}var cp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jg(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!cp[l.type]:f==="textarea"}function Ms(l,f,v,_){bs?go?go.push(_):go=[_]:bs=_,f=K1(f,"onChange"),0<f.length&&(v=new os("onChange","change",null,v,_),l.push({event:v,listeners:f}))}var Ku=null,Jc=null;function Qy(l){HC(l,0)}function Th(l){var f=Ae(l);if(jn(f))return l}function up(l,f){if(l==="change")return f}var fp=!1;if(as){var hp;if(as){var $u="oninput"in document;if(!$u){var Qu=document.createElement("div");Qu.setAttribute("oninput","return;"),$u=typeof Qu.oninput=="function"}hp=$u}else hp=!1;fp=hp&&(!document.documentMode||9<document.documentMode)}function Pi(){Ku&&(Ku.detachEvent("onpropertychange",Jy),Jc=Ku=null)}function Jy(l){if(l.propertyName==="value"&&Th(Jc)){var f=[];Ms(f,Jc,l,qa(l)),Yc(Qy,f)}}function bE(l,f,v){l==="focusin"?(Pi(),Ku=f,Jc=v,Ku.attachEvent("onpropertychange",Jy)):l==="focusout"&&Pi()}function e1(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Th(Jc)}function Ah(l,f){if(l==="click")return Th(f)}function ic(l,f){if(l==="input"||l==="change")return Th(f)}function t1(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var Ts=typeof Object.is=="function"?Object.is:t1;function Ya(l,f){if(Ts(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var v=Object.keys(l),_=Object.keys(f);if(v.length!==_.length)return!1;for(_=0;_<v.length;_++){var C=v[_];if(!Se.call(f,C)||!Ts(l[C],f[C]))return!1}return!0}function As(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Wg(l,f){var v=As(l);l=0;for(var _;v;){if(v.nodeType===3){if(_=l+v.textContent.length,l<=f&&_>=f)return{node:v,offset:f-l};l=_}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=As(v)}}function Xg(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?Xg(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function qg(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var f=vn(l.document);f instanceof l.HTMLIFrameElement;){try{var v=typeof f.contentWindow.location.href=="string"}catch{v=!1}if(v)l=f.contentWindow;else break;f=vn(l.document)}return f}function wh(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}var Yg=as&&"documentMode"in document&&11>=document.documentMode,pl=null,dp=null,Ch=null,pp=!1;function Zg(l,f,v){var _=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;pp||pl==null||pl!==vn(_)||(_=pl,"selectionStart"in _&&wh(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Ch&&Ya(Ch,_)||(Ch=_,_=K1(dp,"onSelect"),0<_.length&&(f=new os("onSelect","select",null,f,v),l.push({event:f,listeners:_}),f.target=pl)))}function Fr(l,f){var v={};return v[l.toLowerCase()]=f.toLowerCase(),v["Webkit"+l]="webkit"+f,v["Moz"+l]="moz"+f,v}var rc={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},mp={},n1={};as&&(n1=document.createElement("div").style,"AnimationEvent"in window||(delete rc.animationend.animation,delete rc.animationiteration.animation,delete rc.animationstart.animation),"TransitionEvent"in window||delete rc.transitionend.transition);function ml(l){if(mp[l])return mp[l];if(!rc[l])return l;var f=rc[l],v;for(v in f)if(f.hasOwnProperty(v)&&v in n1)return mp[l]=f[v];return l}var ls=ml("animationend"),Kg=ml("animationiteration"),ws=ml("animationstart"),i1=ml("transitionrun"),gl=ml("transitionstart"),Ju=ml("transitioncancel"),vl=ml("transitionend"),gp=new Map,Rh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rh.push("scrollEnd");function Cr(l,f){gp.set(l,f),Z(f,[l])}var $g=new WeakMap;function Hr(l,f){if(typeof l=="object"&&l!==null){var v=$g.get(l);return v!==void 0?v:(f={value:l,source:f,stack:Rn(f)},$g.set(l,f),f)}return{value:l,source:f,stack:Rn(f)}}var Jr=[],Sa=0,vp=0;function Oh(){for(var l=Sa,f=vp=Sa=0;f<l;){var v=Jr[f];Jr[f++]=null;var _=Jr[f];Jr[f++]=null;var C=Jr[f];Jr[f++]=null;var U=Jr[f];if(Jr[f++]=null,_!==null&&C!==null){var q=_.pending;q===null?C.next=C:(C.next=q.next,q.next=C),_.pending=C}U!==0&&Qg(v,C,U)}}function sc(l,f,v,_){Jr[Sa++]=l,Jr[Sa++]=f,Jr[Sa++]=v,Jr[Sa++]=_,vp|=_,l.lanes|=_,l=l.alternate,l!==null&&(l.lanes|=_)}function yp(l,f,v,_){return sc(l,f,v,_),ef(l)}function yl(l,f){return sc(l,null,null,f),ef(l)}function Qg(l,f,v){l.lanes|=v;var _=l.alternate;_!==null&&(_.lanes|=v);for(var C=!1,U=l.return;U!==null;)U.childLanes|=v,_=U.alternate,_!==null&&(_.childLanes|=v),U.tag===22&&(l=U.stateNode,l===null||l._visibility&1||(C=!0)),l=U,U=U.return;return l.tag===3?(U=l.stateNode,C&&f!==null&&(C=31-tt(v),l=U.hiddenUpdates,_=l[C],_===null?l[C]=[f]:_.push(f),f.lane=v|536870912),U):null}function ef(l){if(50<Oo)throw Oo=0,vu=null,Error(i(185));for(var f=l.return;f!==null;)l=f,f=l.return;return l.tag===3?l.stateNode:null}var ac={};function Jg(l,f,v,_){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(l,f,v,_){return new Jg(l,f,v,_)}function Dh(l){return l=l.prototype,!(!l||!l.isReactComponent)}function $i(l,f){var v=l.alternate;return v===null?(v=Cs(l.tag,f,l.key,l.mode),v.elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=f,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=l.flags&65011712,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,f=l.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v.refCleanup=l.refCleanup,v}function e0(l,f){l.flags&=65011714;var v=l.alternate;return v===null?(l.childLanes=0,l.lanes=f,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=v.childLanes,l.lanes=v.lanes,l.child=v.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=v.memoizedProps,l.memoizedState=v.memoizedState,l.updateQueue=v.updateQueue,l.type=v.type,f=v.dependencies,l.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),l}function Rr(l,f,v,_,C,U){var q=0;if(_=l,typeof l=="function")Dh(l)&&(q=1);else if(typeof l=="string")q=QI(l,v,ee.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case I:return l=Cs(31,v,f,C),l.elementType=I,l.lanes=U,l;case x:return oc(v.children,C,U,f);case M:q=8,C|=24;break;case b:return l=Cs(12,v,f,C|2),l.elementType=b,l.lanes=U,l;case D:return l=Cs(13,v,f,C),l.elementType=D,l.lanes=U,l;case O:return l=Cs(19,v,f,C),l.elementType=O,l.lanes=U,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case S:case A:q=10;break e;case T:q=9;break e;case w:q=11;break e;case P:q=14;break e;case B:q=16,_=null;break e}q=29,v=Error(i(130,l===null?"null":typeof l,"")),_=null}return f=Cs(q,v,f,C),f.elementType=l,f.type=_,f.lanes=U,f}function oc(l,f,v,_){return l=Cs(7,l,_,f),l.lanes=v,l}function Uh(l,f,v){return l=Cs(6,l,null,f),l.lanes=v,l}function _p(l,f,v){return f=Cs(4,l.children!==null?l.children:[],l.key,f),f.lanes=v,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}var tf=[],Rs=0,Lh=null,nf=0,kr=[],Xs=0,lc=null,vo=1,yo="";function _l(l,f){tf[Rs++]=nf,tf[Rs++]=Lh,Lh=l,nf=f}function xp(l,f,v){kr[Xs++]=vo,kr[Xs++]=yo,kr[Xs++]=lc,lc=l;var _=vo;l=yo;var C=32-tt(_)-1;_&=~(1<<C),v+=1;var U=32-tt(f)+C;if(30<U){var q=C-C%5;U=(_&(1<<q)-1).toString(32),_>>=q,C-=q,vo=1<<32-tt(f)+C|v<<C|_,yo=U+l}else vo=1<<U|v<<C|_,yo=l}function t0(l){l.return!==null&&(_l(l,1),xp(l,1,0))}function n0(l){for(;l===Lh;)Lh=tf[--Rs],tf[Rs]=null,nf=tf[--Rs],tf[Rs]=null;for(;l===lc;)lc=kr[--Xs],kr[Xs]=null,yo=kr[--Xs],kr[Xs]=null,vo=kr[--Xs],kr[Xs]=null}var cs=null,zi=null,ei=!1,Ea=null,qs=!1,bp=Error(i(519));function cc(l){var f=Error(i(418,""));throw eu(Hr(f,l)),bp}function r1(l){var f=l.stateNode,v=l.type,_=l.memoizedProps;switch(f[un]=l,f[mn]=_,v){case"dialog":Wn("cancel",f),Wn("close",f);break;case"iframe":case"object":case"embed":Wn("load",f);break;case"video":case"audio":for(v=0;v<L0.length;v++)Wn(L0[v],f);break;case"source":Wn("error",f);break;case"img":case"image":case"link":Wn("error",f),Wn("load",f);break;case"details":Wn("toggle",f);break;case"input":Wn("invalid",f),ii(f,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),dn(f);break;case"select":Wn("invalid",f);break;case"textarea":Wn("invalid",f),ya(f,_.value,_.defaultValue,_.children),dn(f)}v=_.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||f.textContent===""+v||_.suppressHydrationWarning===!0||jC(f.textContent,v)?(_.popover!=null&&(Wn("beforetoggle",f),Wn("toggle",f)),_.onScroll!=null&&Wn("scroll",f),_.onScrollEnd!=null&&Wn("scrollend",f),_.onClick!=null&&(f.onclick=$1),f=!0):f=!1,f||cc(l)}function i0(l){for(cs=l.return;cs;)switch(cs.tag){case 5:case 13:qs=!1;return;case 27:case 3:qs=!0;return;default:cs=cs.return}}function Za(l){if(l!==cs)return!1;if(!ei)return i0(l),ei=!0,!1;var f=l.tag,v;if((v=f!==3&&f!==27)&&((v=f===5)&&(v=l.type,v=!(v!=="form"&&v!=="button")||kE(l.type,l.memoizedProps)),v=!v),v&&zi&&cc(l),i0(l),f===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));e:{for(l=l.nextSibling,f=0;l;){if(l.nodeType===8)if(v=l.data,v==="/$"){if(f===0){zi=Ll(l.nextSibling);break e}f--}else v!=="$"&&v!=="$!"&&v!=="$?"||f++;l=l.nextSibling}zi=null}}else f===27?(f=zi,Cf(l.type)?(l=WE,WE=null,zi=l):zi=f):zi=cs?Ll(l.stateNode.nextSibling):null;return!0}function rf(){zi=cs=null,ei=!1}function ai(){var l=Ea;return l!==null&&(nn===null?nn=l:nn.push.apply(nn,l),Ea=null),l}function eu(l){Ea===null?Ea=[l]:Ea.push(l)}var r0=X(null),uc=null,xl=null;function fc(l,f,v){se(r0,f._currentValue),f._currentValue=v}function bl(l){l._currentValue=r0.current,ie(r0)}function s0(l,f,v){for(;l!==null;){var _=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),l===v)break;l=l.return}}function Nh(l,f,v,_){var C=l.child;for(C!==null&&(C.return=l);C!==null;){var U=C.dependencies;if(U!==null){var q=C.child;U=U.firstContext;e:for(;U!==null;){var ae=U;U=C;for(var be=0;be<f.length;be++)if(ae.context===f[be]){U.lanes|=v,ae=U.alternate,ae!==null&&(ae.lanes|=v),s0(U.return,v,l),_||(q=null);break e}U=ae.next}}else if(C.tag===18){if(q=C.return,q===null)throw Error(i(341));q.lanes|=v,U=q.alternate,U!==null&&(U.lanes|=v),s0(q,v,l),q=null}else q=C.child;if(q!==null)q.return=C;else for(q=C;q!==null;){if(q===l){q=null;break}if(C=q.sibling,C!==null){C.return=q.return,q=C;break}q=q.return}C=q}}function Ma(l,f,v,_){l=null;for(var C=f,U=!1;C!==null;){if(!U){if((C.flags&524288)!==0)U=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var q=C.alternate;if(q===null)throw Error(i(387));if(q=q.memoizedProps,q!==null){var ae=C.type;Ts(C.pendingProps.value,q.value)||(l!==null?l.push(ae):l=[ae])}}else if(C===ve.current){if(q=C.alternate,q===null)throw Error(i(387));q.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(l!==null?l.push(F0):l=[F0])}C=C.return}l!==null&&Nh(f,l,v,_),f.flags|=262144}function Ph(l){for(l=l.firstContext;l!==null;){if(!Ts(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function _o(l){uc=l,xl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Vi(l){return Sp(uc,l)}function Ih(l,f){return uc===null&&_o(l),Sp(l,f)}function Sp(l,f){var v=f._currentValue;if(f={context:f,memoizedValue:v,next:null},xl===null){if(l===null)throw Error(i(308));xl=f,l.dependencies={lanes:0,firstContext:f},l.flags|=524288}else xl=xl.next=f;return v}var a0=typeof AbortController<"u"?AbortController:function(){var l=[],f=this.signal={aborted:!1,addEventListener:function(v,_){l.push(_)}};this.abort=function(){f.aborted=!0,l.forEach(function(v){return v()})}},SE=n.unstable_scheduleCallback,s1=n.unstable_NormalPriority,cr={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ep(){return{controller:new a0,data:new Map,refCount:0}}function sf(l){l.refCount--,l.refCount===0&&SE(s1,function(){l.controller.abort()})}var af=null,Bh=0,Sn=0,of=null;function Ys(l,f){if(af===null){var v=af=[];Bh=0,Sn=UE(),of={status:"pending",value:void 0,then:function(_){v.push(_)}}}return Bh++,f.then(Mp,Mp),f}function Mp(){if(--Bh===0&&af!==null){of!==null&&(of.status="fulfilled");var l=af;af=null,Sn=0,of=null;for(var f=0;f<l.length;f++)(0,l[f])()}}function EE(l,f){var v=[],_={status:"pending",value:null,reason:null,then:function(C){v.push(C)}};return l.then(function(){_.status="fulfilled",_.value=f;for(var C=0;C<v.length;C++)(0,v[C])(f)},function(C){for(_.status="rejected",_.reason=C,C=0;C<v.length;C++)(0,v[C])(void 0)}),_}var zh=H.S;H.S=function(l,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&Ys(l,f),zh!==null&&zh(l,f)};var Ta=X(null);function hc(){var l=Ta.current;return l!==null?l:_n.pooledCache}function Fh(l,f){f===null?se(Ta,Ta.current):se(Ta,f.pool)}function Tp(){var l=hc();return l===null?null:{parent:cr._currentValue,pool:l}}var Hh=Error(i(460)),o0=Error(i(474)),Ka=Error(i(542)),kh={then:function(){}};function Ap(l){return l=l.status,l==="fulfilled"||l==="rejected"}function lf(){}function wp(l,f,v){switch(v=l[v],v===void 0?l.push(f):v!==f&&(f.then(lf,lf),f=v),f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,a1(l),l;default:if(typeof f.status=="string")f.then(lf,lf);else{if(l=_n,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=f,l.status="pending",l.then(function(_){if(f.status==="pending"){var C=f;C.status="fulfilled",C.value=_}},function(_){if(f.status==="pending"){var C=f;C.status="rejected",C.reason=_}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,a1(l),l}throw Aa=f,Hh}}var Aa=null;function l0(){if(Aa===null)throw Error(i(459));var l=Aa;return Aa=null,l}function a1(l){if(l===Hh||l===Ka)throw Error(i(483))}var Sl=!1;function c0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fn(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function xo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function El(l,f,v){var _=l.updateQueue;if(_===null)return null;if(_=_.shared,(oi&2)!==0){var C=_.pending;return C===null?f.next=f:(f.next=C.next,C.next=f),_.pending=f,f=ef(l),Qg(l,null,v),f}return sc(l,_,f,v),ef(l)}function tu(l,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194048)!==0)){var _=f.lanes;_&=l.pendingLanes,v|=_,f.lanes=v,Ct(l,v)}}function cf(l,f){var v=l.updateQueue,_=l.alternate;if(_!==null&&(_=_.updateQueue,v===_)){var C=null,U=null;if(v=v.firstBaseUpdate,v!==null){do{var q={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};U===null?C=U=q:U=U.next=q,v=v.next}while(v!==null);U===null?C=U=f:U=U.next=f}else C=U=f;v={baseState:_.baseState,firstBaseUpdate:C,lastBaseUpdate:U,shared:_.shared,callbacks:_.callbacks},l.updateQueue=v;return}l=v.lastBaseUpdate,l===null?v.firstBaseUpdate=f:l.next=f,v.lastBaseUpdate=f}var u0=!1;function Gh(){if(u0){var l=of;if(l!==null)throw l}}function uf(l,f,v,_){u0=!1;var C=l.updateQueue;Sl=!1;var U=C.firstBaseUpdate,q=C.lastBaseUpdate,ae=C.shared.pending;if(ae!==null){C.shared.pending=null;var be=ae,Ve=be.next;be.next=null,q===null?U=Ve:q.next=Ve,q=be;var mt=l.alternate;mt!==null&&(mt=mt.updateQueue,ae=mt.lastBaseUpdate,ae!==q&&(ae===null?mt.firstBaseUpdate=Ve:ae.next=Ve,mt.lastBaseUpdate=be))}if(U!==null){var _t=C.baseState;q=0,mt=Ve=be=null,ae=U;do{var Ze=ae.lane&-536870913,$e=Ze!==ae.lane;if($e?(Qt&Ze)===Ze:(_&Ze)===Ze){Ze!==0&&Ze===Sn&&(u0=!0),mt!==null&&(mt=mt.next={lane:0,tag:ae.tag,payload:ae.payload,callback:null,next:null});e:{var pn=l,sn=ae;Ze=f;var Ri=v;switch(sn.tag){case 1:if(pn=sn.payload,typeof pn=="function"){_t=pn.call(Ri,_t,Ze);break e}_t=pn;break e;case 3:pn.flags=pn.flags&-65537|128;case 0:if(pn=sn.payload,Ze=typeof pn=="function"?pn.call(Ri,_t,Ze):pn,Ze==null)break e;_t=h({},_t,Ze);break e;case 2:Sl=!0}}Ze=ae.callback,Ze!==null&&(l.flags|=64,$e&&(l.flags|=8192),$e=C.callbacks,$e===null?C.callbacks=[Ze]:$e.push(Ze))}else $e={lane:Ze,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},mt===null?(Ve=mt=$e,be=_t):mt=mt.next=$e,q|=Ze;if(ae=ae.next,ae===null){if(ae=C.shared.pending,ae===null)break;$e=ae,ae=$e.next,$e.next=null,C.lastBaseUpdate=$e,C.shared.pending=null}}while(!0);mt===null&&(be=_t),C.baseState=be,C.firstBaseUpdate=Ve,C.lastBaseUpdate=mt,U===null&&(C.shared.lanes=0),ro|=q,l.lanes=q,l.memoizedState=_t}}function ff(l,f){if(typeof l!="function")throw Error(i(191,l));l.call(f)}function o1(l,f){var v=l.callbacks;if(v!==null)for(l.callbacks=null,l=0;l<v.length;l++)ff(v[l],f)}var hf=X(null),Cp=X(0);function l1(l,f){l=Ua,se(Cp,l),se(hf,f),Ua=l|f.baseLanes}function f0(){se(Cp,Ua),se(hf,hf.current)}function Vh(){Ua=Cp.current,ie(hf),ie(Cp)}var Ml=0,En=null,pi=null,ur=null,Rp=!1,dc=!1,us=!1,yr=0,wa=0,Gr=null,c1=0;function Qi(){throw Error(i(321))}function es(l,f){if(f===null)return!1;for(var v=0;v<f.length&&v<l.length;v++)if(!Ts(l[v],f[v]))return!1;return!0}function Tl(l,f,v,_,C,U){return Ml=U,En=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,H.H=l===null||l.memoizedState===null?zp:w0,us=!1,U=v(_,C),us=!1,dc&&(U=f1(f,v,_,C)),u1(l),U}function u1(l){H.H=Xh;var f=pi!==null&&pi.next!==null;if(Ml=0,ur=pi=En=null,Rp=!1,wa=0,Gr=null,f)throw Error(i(300));l===null||Or||(l=l.dependencies,l!==null&&Ph(l)&&(Or=!0))}function f1(l,f,v,_){En=l;var C=0;do{if(dc&&(Gr=null),wa=0,dc=!1,25<=C)throw Error(i(301));if(C+=1,ur=pi=null,l.updateQueue!=null){var U=l.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}H.H=B1,U=f(v,_)}while(dc);return U}function ME(){var l=H.H,f=l.useState()[0];return f=typeof f.then=="function"?$a(f):f,l=l.useState()[0],(pi!==null?pi.memoizedState:null)!==l&&(En.flags|=1024),f}function h0(){var l=yr!==0;return yr=0,l}function Op(l,f,v){f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~v}function d0(l){if(Rp){for(l=l.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}Rp=!1}Ml=0,ur=pi=En=null,dc=!1,wa=yr=0,Gr=null}function fs(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ur===null?En.memoizedState=ur=l:ur=ur.next=l,ur}function fr(){if(pi===null){var l=En.alternate;l=l!==null?l.memoizedState:null}else l=pi.next;var f=ur===null?En.memoizedState:ur.next;if(f!==null)ur=f,pi=l;else{if(l===null)throw En.alternate===null?Error(i(467)):Error(i(310));pi=l,l={memoizedState:pi.memoizedState,baseState:pi.baseState,baseQueue:pi.baseQueue,queue:pi.queue,next:null},ur===null?En.memoizedState=ur=l:ur=ur.next=l}return ur}function pc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $a(l){var f=wa;return wa+=1,Gr===null&&(Gr=[]),l=wp(Gr,l,f),f=En,(ur===null?f.memoizedState:ur.next)===null&&(f=f.alternate,H.H=f===null||f.memoizedState===null?zp:w0),l}function Dp(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return $a(l);if(l.$$typeof===A)return Vi(l)}throw Error(i(438,String(l)))}function p0(l){var f=null,v=En.updateQueue;if(v!==null&&(f=v.memoCache),f==null){var _=En.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(f={data:_.data.map(function(C){return C.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),v===null&&(v=pc(),En.updateQueue=v),v.memoCache=f,v=f.data[f.index],v===void 0)for(v=f.data[f.index]=Array(l),_=0;_<l;_++)v[_]=z;return f.index++,v}function Al(l,f){return typeof f=="function"?f(l):f}function mc(l){var f=fr();return m0(f,pi,l)}function m0(l,f,v){var _=l.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=v;var C=l.baseQueue,U=_.pending;if(U!==null){if(C!==null){var q=C.next;C.next=U.next,U.next=q}f.baseQueue=C=U,_.pending=null}if(U=l.baseState,C===null)l.memoizedState=U;else{f=C.next;var ae=q=null,be=null,Ve=f,mt=!1;do{var _t=Ve.lane&-536870913;if(_t!==Ve.lane?(Qt&_t)===_t:(Ml&_t)===_t){var Ze=Ve.revertLane;if(Ze===0)be!==null&&(be=be.next={lane:0,revertLane:0,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),_t===Sn&&(mt=!0);else if((Ml&Ze)===Ze){Ve=Ve.next,Ze===Sn&&(mt=!0);continue}else _t={lane:0,revertLane:Ve.revertLane,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null},be===null?(ae=be=_t,q=U):be=be.next=_t,En.lanes|=Ze,ro|=Ze;_t=Ve.action,us&&v(U,_t),U=Ve.hasEagerState?Ve.eagerState:v(U,_t)}else Ze={lane:_t,revertLane:Ve.revertLane,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null},be===null?(ae=be=Ze,q=U):be=be.next=Ze,En.lanes|=_t,ro|=_t;Ve=Ve.next}while(Ve!==null&&Ve!==f);if(be===null?q=U:be.next=ae,!Ts(U,l.memoizedState)&&(Or=!0,mt&&(v=of,v!==null)))throw v;l.memoizedState=U,l.baseState=q,l.baseQueue=be,_.lastRenderedState=U}return C===null&&(_.lanes=0),[l.memoizedState,_.dispatch]}function g0(l){var f=fr(),v=f.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=l;var _=v.dispatch,C=v.pending,U=f.memoizedState;if(C!==null){v.pending=null;var q=C=C.next;do U=l(U,q.action),q=q.next;while(q!==C);Ts(U,f.memoizedState)||(Or=!0),f.memoizedState=U,f.baseQueue===null&&(f.baseState=U),v.lastRenderedState=U}return[U,_]}function h1(l,f,v){var _=En,C=fr(),U=ei;if(U){if(v===void 0)throw Error(i(407));v=v()}else v=f();var q=!Ts((pi||C).memoizedState,v);q&&(C.memoizedState=v,Or=!0),C=C.queue;var ae=p1.bind(null,_,C,l);if(mf(2048,8,ae,[l]),C.getSnapshot!==f||q||ur!==null&&ur.memoizedState.tag&1){if(_.flags|=2048,pf(9,jh(),d1.bind(null,_,C,v,f),null),_n===null)throw Error(i(349));U||(Ml&124)!==0||df(_,f,v)}return v}function df(l,f,v){l.flags|=16384,l={getSnapshot:f,value:v},f=En.updateQueue,f===null?(f=pc(),En.updateQueue=f,f.stores=[l]):(v=f.stores,v===null?f.stores=[l]:v.push(l))}function d1(l,f,v,_){f.value=v,f.getSnapshot=_,m1(f)&&g1(l)}function p1(l,f,v){return v(function(){m1(f)&&g1(l)})}function m1(l){var f=l.getSnapshot;l=l.value;try{var v=f();return!Ts(l,v)}catch{return!0}}function g1(l){var f=yl(l,2);f!==null&&ps(f,l,2)}function v0(l){var f=fs();if(typeof l=="function"){var v=l;if(l=v(),us){et(!0);try{v()}finally{et(!1)}}}return f.memoizedState=f.baseState=l,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:l},f}function v1(l,f,v,_){return l.baseState=v,m0(l,pi,typeof _=="function"?_:Al)}function TE(l,f,v,_,C){if(Bp(l))throw Error(i(485));if(l=f.action,l!==null){var U={payload:C,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){U.listeners.push(q)}};H.T!==null?v(!0):U.isTransition=!1,_(U),v=f.pending,v===null?(U.next=f.pending=U,y1(f,U)):(U.next=v.next,f.pending=v.next=U)}}function y1(l,f){var v=f.action,_=f.payload,C=l.state;if(f.isTransition){var U=H.T,q={};H.T=q;try{var ae=v(C,_),be=H.S;be!==null&&be(q,ae),_1(l,f,ae)}catch(Ve){y0(l,f,Ve)}finally{H.T=U}}else try{U=v(C,_),_1(l,f,U)}catch(Ve){y0(l,f,Ve)}}function _1(l,f,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(_){x1(l,f,_)},function(_){return y0(l,f,_)}):x1(l,f,v)}function x1(l,f,v){f.status="fulfilled",f.value=v,b1(f),l.state=v,f=l.pending,f!==null&&(v=f.next,v===f?l.pending=null:(v=v.next,f.next=v,y1(l,v)))}function y0(l,f,v){var _=l.pending;if(l.pending=null,_!==null){_=_.next;do f.status="rejected",f.reason=v,b1(f),f=f.next;while(f!==_)}l.action=null}function b1(l){l=l.listeners;for(var f=0;f<l.length;f++)(0,l[f])()}function _0(l,f){return f}function S1(l,f){if(ei){var v=_n.formState;if(v!==null){e:{var _=En;if(ei){if(zi){t:{for(var C=zi,U=qs;C.nodeType!==8;){if(!U){C=null;break t}if(C=Ll(C.nextSibling),C===null){C=null;break t}}U=C.data,C=U==="F!"||U==="F"?C:null}if(C){zi=Ll(C.nextSibling),_=C.data==="F!";break e}}cc(_)}_=!1}_&&(f=v[0])}}return v=fs(),v.memoizedState=v.baseState=f,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_0,lastRenderedState:f},v.queue=_,v=P1.bind(null,En,_),_.dispatch=v,_=v0(!1),U=Ip.bind(null,En,!1,_.queue),_=fs(),C={state:f,dispatch:null,action:l,pending:null},_.queue=C,v=TE.bind(null,En,C,U,v),C.dispatch=v,_.memoizedState=l,[f,v,!1]}function E1(l){var f=fr();return M1(f,pi,l)}function M1(l,f,v){if(f=m0(l,f,_0)[0],l=mc(Al)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var _=$a(f)}catch(q){throw q===Hh?Ka:q}else _=f;f=fr();var C=f.queue,U=C.dispatch;return v!==f.memoizedState&&(En.flags|=2048,pf(9,jh(),AE.bind(null,C,v),null)),[_,U,l]}function AE(l,f){l.action=f}function T1(l){var f=fr(),v=pi;if(v!==null)return M1(f,v,l);fr(),f=f.memoizedState,v=fr();var _=v.queue.dispatch;return v.memoizedState=l,[f,_,!1]}function pf(l,f,v,_){return l={tag:l,create:v,deps:_,inst:f,next:null},f=En.updateQueue,f===null&&(f=pc(),En.updateQueue=f),v=f.lastEffect,v===null?f.lastEffect=l.next=l:(_=v.next,v.next=l,l.next=_,f.lastEffect=l),l}function jh(){return{destroy:void 0,resource:void 0}}function x0(){return fr().memoizedState}function Up(l,f,v,_){var C=fs();_=_===void 0?null:_,En.flags|=l,C.memoizedState=pf(1|f,jh(),v,_)}function mf(l,f,v,_){var C=fr();_=_===void 0?null:_;var U=C.memoizedState.inst;pi!==null&&_!==null&&es(_,pi.memoizedState.deps)?C.memoizedState=pf(f,U,v,_):(En.flags|=l,C.memoizedState=pf(1|f,U,v,_))}function b0(l,f){Up(8390656,8,l,f)}function S0(l,f){mf(2048,8,l,f)}function Lp(l,f){return mf(4,2,l,f)}function Np(l,f){return mf(4,4,l,f)}function A1(l,f){if(typeof f=="function"){l=l();var v=f(l);return function(){typeof v=="function"?v():f(null)}}if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function w1(l,f,v){v=v!=null?v.concat([l]):null,mf(4,4,A1.bind(null,f,l),v)}function E0(){}function C1(l,f){var v=fr();f=f===void 0?null:f;var _=v.memoizedState;return f!==null&&es(f,_[1])?_[0]:(v.memoizedState=[l,f],l)}function M0(l,f){var v=fr();f=f===void 0?null:f;var _=v.memoizedState;if(f!==null&&es(f,_[1]))return _[0];if(_=l(),us){et(!0);try{l()}finally{et(!1)}}return v.memoizedState=[_,f],_}function Pp(l,f,v){return v===void 0||(Ml&1073741824)!==0?l.memoizedState=f:(l.memoizedState=v,l=Zp(),En.lanes|=l,ro|=l,v)}function R1(l,f,v,_){return Ts(v,f)?v:hf.current!==null?(l=Pp(l,v,_),Ts(l,f)||(Or=!0),l):(Ml&42)===0?(Or=!0,l.memoizedState=v):(l=Zp(),En.lanes|=l,ro|=l,f)}function O1(l,f,v,_,C){var U=Q.p;Q.p=U!==0&&8>U?U:8;var q=H.T,ae={};H.T=ae,Ip(l,!1,f,v);try{var be=C(),Ve=H.S;if(Ve!==null&&Ve(ae,be),be!==null&&typeof be=="object"&&typeof be.then=="function"){var mt=EE(be,_);Wh(l,f,mt,Xi(l))}else Wh(l,f,_,Xi(l))}catch(_t){Wh(l,f,{then:function(){},status:"rejected",reason:_t},Xi())}finally{Q.p=U,H.T=q}}function wE(){}function T0(l,f,v,_){if(l.tag!==5)throw Error(i(476));var C=D1(l).queue;O1(l,C,f,ne,v===null?wE:function(){return U1(l),v(_)})}function D1(l){var f=l.memoizedState;if(f!==null)return f;f={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:ne},next:null};var v={};return f.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:v},next:null},l.memoizedState=f,l=l.alternate,l!==null&&(l.memoizedState=f),f}function U1(l){var f=D1(l).next.queue;Wh(l,f,{},Xi())}function A0(){return Vi(F0)}function L1(){return fr().memoizedState}function N1(){return fr().memoizedState}function CE(l){for(var f=l.return;f!==null;){switch(f.tag){case 24:case 3:var v=Xi();l=xo(v);var _=El(f,l,v);_!==null&&(ps(_,f,v),tu(_,f,v)),f={cache:Ep()},l.payload=f;return}f=f.return}}function RE(l,f,v){var _=Xi();v={lane:_,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},Bp(l)?I1(f,v):(v=yp(l,f,v,_),v!==null&&(ps(v,l,_),Zs(v,f,_)))}function P1(l,f,v){var _=Xi();Wh(l,f,v,_)}function Wh(l,f,v,_){var C={lane:_,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(Bp(l))I1(f,C);else{var U=l.alternate;if(l.lanes===0&&(U===null||U.lanes===0)&&(U=f.lastRenderedReducer,U!==null))try{var q=f.lastRenderedState,ae=U(q,v);if(C.hasEagerState=!0,C.eagerState=ae,Ts(ae,q))return sc(l,f,C,0),_n===null&&Oh(),!1}catch{}finally{}if(v=yp(l,f,C,_),v!==null)return ps(v,l,_),Zs(v,f,_),!0}return!1}function Ip(l,f,v,_){if(_={lane:2,revertLane:UE(),action:_,hasEagerState:!1,eagerState:null,next:null},Bp(l)){if(f)throw Error(i(479))}else f=yp(l,v,_,2),f!==null&&ps(f,l,2)}function Bp(l){var f=l.alternate;return l===En||f!==null&&f===En}function I1(l,f){dc=Rp=!0;var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}function Zs(l,f,v){if((v&4194048)!==0){var _=f.lanes;_&=l.pendingLanes,v|=_,f.lanes=v,Ct(l,v)}}var Xh={readContext:Vi,use:Dp,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useLayoutEffect:Qi,useInsertionEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi,useDeferredValue:Qi,useTransition:Qi,useSyncExternalStore:Qi,useId:Qi,useHostTransitionStatus:Qi,useFormState:Qi,useActionState:Qi,useOptimistic:Qi,useMemoCache:Qi,useCacheRefresh:Qi},zp={readContext:Vi,use:Dp,useCallback:function(l,f){return fs().memoizedState=[l,f===void 0?null:f],l},useContext:Vi,useEffect:b0,useImperativeHandle:function(l,f,v){v=v!=null?v.concat([l]):null,Up(4194308,4,A1.bind(null,f,l),v)},useLayoutEffect:function(l,f){return Up(4194308,4,l,f)},useInsertionEffect:function(l,f){Up(4,2,l,f)},useMemo:function(l,f){var v=fs();f=f===void 0?null:f;var _=l();if(us){et(!0);try{l()}finally{et(!1)}}return v.memoizedState=[_,f],_},useReducer:function(l,f,v){var _=fs();if(v!==void 0){var C=v(f);if(us){et(!0);try{v(f)}finally{et(!1)}}}else C=f;return _.memoizedState=_.baseState=C,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:C},_.queue=l,l=l.dispatch=RE.bind(null,En,l),[_.memoizedState,l]},useRef:function(l){var f=fs();return l={current:l},f.memoizedState=l},useState:function(l){l=v0(l);var f=l.queue,v=P1.bind(null,En,f);return f.dispatch=v,[l.memoizedState,v]},useDebugValue:E0,useDeferredValue:function(l,f){var v=fs();return Pp(v,l,f)},useTransition:function(){var l=v0(!1);return l=O1.bind(null,En,l.queue,!0,!1),fs().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,f,v){var _=En,C=fs();if(ei){if(v===void 0)throw Error(i(407));v=v()}else{if(v=f(),_n===null)throw Error(i(349));(Qt&124)!==0||df(_,f,v)}C.memoizedState=v;var U={value:v,getSnapshot:f};return C.queue=U,b0(p1.bind(null,_,U,l),[l]),_.flags|=2048,pf(9,jh(),d1.bind(null,_,U,v,f),null),v},useId:function(){var l=fs(),f=_n.identifierPrefix;if(ei){var v=yo,_=vo;v=(_&~(1<<32-tt(_)-1)).toString(32)+v,f=""+f+"R"+v,v=yr++,0<v&&(f+="H"+v.toString(32)),f+=""}else v=c1++,f=""+f+"r"+v.toString(32)+"";return l.memoizedState=f},useHostTransitionStatus:A0,useFormState:S1,useActionState:S1,useOptimistic:function(l){var f=fs();f.memoizedState=f.baseState=l;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=v,f=Ip.bind(null,En,!0,v),v.dispatch=f,[l,f]},useMemoCache:p0,useCacheRefresh:function(){return fs().memoizedState=CE.bind(null,En)}},w0={readContext:Vi,use:Dp,useCallback:C1,useContext:Vi,useEffect:S0,useImperativeHandle:w1,useInsertionEffect:Lp,useLayoutEffect:Np,useMemo:M0,useReducer:mc,useRef:x0,useState:function(){return mc(Al)},useDebugValue:E0,useDeferredValue:function(l,f){var v=fr();return R1(v,pi.memoizedState,l,f)},useTransition:function(){var l=mc(Al)[0],f=fr().memoizedState;return[typeof l=="boolean"?l:$a(l),f]},useSyncExternalStore:h1,useId:L1,useHostTransitionStatus:A0,useFormState:E1,useActionState:E1,useOptimistic:function(l,f){var v=fr();return v1(v,pi,l,f)},useMemoCache:p0,useCacheRefresh:N1},B1={readContext:Vi,use:Dp,useCallback:C1,useContext:Vi,useEffect:S0,useImperativeHandle:w1,useInsertionEffect:Lp,useLayoutEffect:Np,useMemo:M0,useReducer:g0,useRef:x0,useState:function(){return g0(Al)},useDebugValue:E0,useDeferredValue:function(l,f){var v=fr();return pi===null?Pp(v,l,f):R1(v,pi.memoizedState,l,f)},useTransition:function(){var l=g0(Al)[0],f=fr().memoizedState;return[typeof l=="boolean"?l:$a(l),f]},useSyncExternalStore:h1,useId:L1,useHostTransitionStatus:A0,useFormState:T1,useActionState:T1,useOptimistic:function(l,f){var v=fr();return pi!==null?v1(v,pi,l,f):(v.baseState=l,[l,v.queue.dispatch])},useMemoCache:p0,useCacheRefresh:N1},nu=null,qh=0;function Yh(l){var f=qh;return qh+=1,nu===null&&(nu=[]),wp(nu,l,f)}function gf(l,f){f=f.props.ref,l.ref=f!==void 0?f:null}function Fp(l,f){throw f.$$typeof===p?Error(i(525)):(l=Object.prototype.toString.call(f),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l)))}function z1(l){var f=l._init;return f(l._payload)}function F1(l){function f(Ue,Ce){if(l){var Ie=Ue.deletions;Ie===null?(Ue.deletions=[Ce],Ue.flags|=16):Ie.push(Ce)}}function v(Ue,Ce){if(!l)return null;for(;Ce!==null;)f(Ue,Ce),Ce=Ce.sibling;return null}function _(Ue){for(var Ce=new Map;Ue!==null;)Ue.key!==null?Ce.set(Ue.key,Ue):Ce.set(Ue.index,Ue),Ue=Ue.sibling;return Ce}function C(Ue,Ce){return Ue=$i(Ue,Ce),Ue.index=0,Ue.sibling=null,Ue}function U(Ue,Ce,Ie){return Ue.index=Ie,l?(Ie=Ue.alternate,Ie!==null?(Ie=Ie.index,Ie<Ce?(Ue.flags|=67108866,Ce):Ie):(Ue.flags|=67108866,Ce)):(Ue.flags|=1048576,Ce)}function q(Ue){return l&&Ue.alternate===null&&(Ue.flags|=67108866),Ue}function ae(Ue,Ce,Ie,vt){return Ce===null||Ce.tag!==6?(Ce=Uh(Ie,Ue.mode,vt),Ce.return=Ue,Ce):(Ce=C(Ce,Ie),Ce.return=Ue,Ce)}function be(Ue,Ce,Ie,vt){var Wt=Ie.type;return Wt===x?mt(Ue,Ce,Ie.props.children,vt,Ie.key):Ce!==null&&(Ce.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===B&&z1(Wt)===Ce.type)?(Ce=C(Ce,Ie.props),gf(Ce,Ie),Ce.return=Ue,Ce):(Ce=Rr(Ie.type,Ie.key,Ie.props,null,Ue.mode,vt),gf(Ce,Ie),Ce.return=Ue,Ce)}function Ve(Ue,Ce,Ie,vt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Ie.containerInfo||Ce.stateNode.implementation!==Ie.implementation?(Ce=_p(Ie,Ue.mode,vt),Ce.return=Ue,Ce):(Ce=C(Ce,Ie.children||[]),Ce.return=Ue,Ce)}function mt(Ue,Ce,Ie,vt,Wt){return Ce===null||Ce.tag!==7?(Ce=oc(Ie,Ue.mode,vt,Wt),Ce.return=Ue,Ce):(Ce=C(Ce,Ie),Ce.return=Ue,Ce)}function _t(Ue,Ce,Ie){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ce=Uh(""+Ce,Ue.mode,Ie),Ce.return=Ue,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case g:return Ie=Rr(Ce.type,Ce.key,Ce.props,null,Ue.mode,Ie),gf(Ie,Ce),Ie.return=Ue,Ie;case y:return Ce=_p(Ce,Ue.mode,Ie),Ce.return=Ue,Ce;case B:var vt=Ce._init;return Ce=vt(Ce._payload),_t(Ue,Ce,Ie)}if(te(Ce)||V(Ce))return Ce=oc(Ce,Ue.mode,Ie,null),Ce.return=Ue,Ce;if(typeof Ce.then=="function")return _t(Ue,Yh(Ce),Ie);if(Ce.$$typeof===A)return _t(Ue,Ih(Ue,Ce),Ie);Fp(Ue,Ce)}return null}function Ze(Ue,Ce,Ie,vt){var Wt=Ce!==null?Ce.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Wt!==null?null:ae(Ue,Ce,""+Ie,vt);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case g:return Ie.key===Wt?be(Ue,Ce,Ie,vt):null;case y:return Ie.key===Wt?Ve(Ue,Ce,Ie,vt):null;case B:return Wt=Ie._init,Ie=Wt(Ie._payload),Ze(Ue,Ce,Ie,vt)}if(te(Ie)||V(Ie))return Wt!==null?null:mt(Ue,Ce,Ie,vt,null);if(typeof Ie.then=="function")return Ze(Ue,Ce,Yh(Ie),vt);if(Ie.$$typeof===A)return Ze(Ue,Ce,Ih(Ue,Ie),vt);Fp(Ue,Ie)}return null}function $e(Ue,Ce,Ie,vt,Wt){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return Ue=Ue.get(Ie)||null,ae(Ce,Ue,""+vt,Wt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case g:return Ue=Ue.get(vt.key===null?Ie:vt.key)||null,be(Ce,Ue,vt,Wt);case y:return Ue=Ue.get(vt.key===null?Ie:vt.key)||null,Ve(Ce,Ue,vt,Wt);case B:var kn=vt._init;return vt=kn(vt._payload),$e(Ue,Ce,Ie,vt,Wt)}if(te(vt)||V(vt))return Ue=Ue.get(Ie)||null,mt(Ce,Ue,vt,Wt,null);if(typeof vt.then=="function")return $e(Ue,Ce,Ie,Yh(vt),Wt);if(vt.$$typeof===A)return $e(Ue,Ce,Ie,Ih(Ce,vt),Wt);Fp(Ce,vt)}return null}function pn(Ue,Ce,Ie,vt){for(var Wt=null,kn=null,Kt=Ce,cn=Ce=0,is=null;Kt!==null&&cn<Ie.length;cn++){Kt.index>cn?(is=Kt,Kt=null):is=Kt.sibling;var ci=Ze(Ue,Kt,Ie[cn],vt);if(ci===null){Kt===null&&(Kt=is);break}l&&Kt&&ci.alternate===null&&f(Ue,Kt),Ce=U(ci,Ce,cn),kn===null?Wt=ci:kn.sibling=ci,kn=ci,Kt=is}if(cn===Ie.length)return v(Ue,Kt),ei&&_l(Ue,cn),Wt;if(Kt===null){for(;cn<Ie.length;cn++)Kt=_t(Ue,Ie[cn],vt),Kt!==null&&(Ce=U(Kt,Ce,cn),kn===null?Wt=Kt:kn.sibling=Kt,kn=Kt);return ei&&_l(Ue,cn),Wt}for(Kt=_(Kt);cn<Ie.length;cn++)is=$e(Kt,Ue,cn,Ie[cn],vt),is!==null&&(l&&is.alternate!==null&&Kt.delete(is.key===null?cn:is.key),Ce=U(is,Ce,cn),kn===null?Wt=is:kn.sibling=is,kn=is);return l&&Kt.forEach(function(Lf){return f(Ue,Lf)}),ei&&_l(Ue,cn),Wt}function sn(Ue,Ce,Ie,vt){if(Ie==null)throw Error(i(151));for(var Wt=null,kn=null,Kt=Ce,cn=Ce=0,is=null,ci=Ie.next();Kt!==null&&!ci.done;cn++,ci=Ie.next()){Kt.index>cn?(is=Kt,Kt=null):is=Kt.sibling;var Lf=Ze(Ue,Kt,ci.value,vt);if(Lf===null){Kt===null&&(Kt=is);break}l&&Kt&&Lf.alternate===null&&f(Ue,Kt),Ce=U(Lf,Ce,cn),kn===null?Wt=Lf:kn.sibling=Lf,kn=Lf,Kt=is}if(ci.done)return v(Ue,Kt),ei&&_l(Ue,cn),Wt;if(Kt===null){for(;!ci.done;cn++,ci=Ie.next())ci=_t(Ue,ci.value,vt),ci!==null&&(Ce=U(ci,Ce,cn),kn===null?Wt=ci:kn.sibling=ci,kn=ci);return ei&&_l(Ue,cn),Wt}for(Kt=_(Kt);!ci.done;cn++,ci=Ie.next())ci=$e(Kt,Ue,cn,ci.value,vt),ci!==null&&(l&&ci.alternate!==null&&Kt.delete(ci.key===null?cn:ci.key),Ce=U(ci,Ce,cn),kn===null?Wt=ci:kn.sibling=ci,kn=ci);return l&&Kt.forEach(function(u8){return f(Ue,u8)}),ei&&_l(Ue,cn),Wt}function Ri(Ue,Ce,Ie,vt){if(typeof Ie=="object"&&Ie!==null&&Ie.type===x&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case g:e:{for(var Wt=Ie.key;Ce!==null;){if(Ce.key===Wt){if(Wt=Ie.type,Wt===x){if(Ce.tag===7){v(Ue,Ce.sibling),vt=C(Ce,Ie.props.children),vt.return=Ue,Ue=vt;break e}}else if(Ce.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===B&&z1(Wt)===Ce.type){v(Ue,Ce.sibling),vt=C(Ce,Ie.props),gf(vt,Ie),vt.return=Ue,Ue=vt;break e}v(Ue,Ce);break}else f(Ue,Ce);Ce=Ce.sibling}Ie.type===x?(vt=oc(Ie.props.children,Ue.mode,vt,Ie.key),vt.return=Ue,Ue=vt):(vt=Rr(Ie.type,Ie.key,Ie.props,null,Ue.mode,vt),gf(vt,Ie),vt.return=Ue,Ue=vt)}return q(Ue);case y:e:{for(Wt=Ie.key;Ce!==null;){if(Ce.key===Wt)if(Ce.tag===4&&Ce.stateNode.containerInfo===Ie.containerInfo&&Ce.stateNode.implementation===Ie.implementation){v(Ue,Ce.sibling),vt=C(Ce,Ie.children||[]),vt.return=Ue,Ue=vt;break e}else{v(Ue,Ce);break}else f(Ue,Ce);Ce=Ce.sibling}vt=_p(Ie,Ue.mode,vt),vt.return=Ue,Ue=vt}return q(Ue);case B:return Wt=Ie._init,Ie=Wt(Ie._payload),Ri(Ue,Ce,Ie,vt)}if(te(Ie))return pn(Ue,Ce,Ie,vt);if(V(Ie)){if(Wt=V(Ie),typeof Wt!="function")throw Error(i(150));return Ie=Wt.call(Ie),sn(Ue,Ce,Ie,vt)}if(typeof Ie.then=="function")return Ri(Ue,Ce,Yh(Ie),vt);if(Ie.$$typeof===A)return Ri(Ue,Ce,Ih(Ue,Ie),vt);Fp(Ue,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,Ce!==null&&Ce.tag===6?(v(Ue,Ce.sibling),vt=C(Ce,Ie),vt.return=Ue,Ue=vt):(v(Ue,Ce),vt=Uh(Ie,Ue.mode,vt),vt.return=Ue,Ue=vt),q(Ue)):v(Ue,Ce)}return function(Ue,Ce,Ie,vt){try{qh=0;var Wt=Ri(Ue,Ce,Ie,vt);return nu=null,Wt}catch(Kt){if(Kt===Hh||Kt===Ka)throw Kt;var kn=Cs(29,Kt,null,Ue.mode);return kn.lanes=vt,kn.return=Ue,kn}finally{}}}var iu=F1(!0),H1=F1(!1),_i=X(null),Qa=null;function gc(l){var f=l.alternate;se(Ji,Ji.current&1),se(_i,l),Qa===null&&(f===null||hf.current!==null||f.memoizedState!==null)&&(Qa=l)}function k1(l){if(l.tag===22){if(se(Ji,Ji.current),se(_i,l),Qa===null){var f=l.alternate;f!==null&&f.memoizedState!==null&&(Qa=l)}}else vc()}function vc(){se(Ji,Ji.current),se(_i,_i.current)}function bo(l){ie(_i),Qa===l&&(Qa=null),ie(Ji)}var Ji=X(0);function wl(l){for(var f=l;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||jE(v)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function yc(l,f,v,_){f=l.memoizedState,v=v(_,f),v=v==null?f:h({},f,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}var hs={enqueueSetState:function(l,f,v){l=l._reactInternals;var _=Xi(),C=xo(_);C.payload=f,v!=null&&(C.callback=v),f=El(l,C,_),f!==null&&(ps(f,l,_),tu(f,l,_))},enqueueReplaceState:function(l,f,v){l=l._reactInternals;var _=Xi(),C=xo(_);C.tag=1,C.payload=f,v!=null&&(C.callback=v),f=El(l,C,_),f!==null&&(ps(f,l,_),tu(f,l,_))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var v=Xi(),_=xo(v);_.tag=2,f!=null&&(_.callback=f),f=El(l,_,v),f!==null&&(ps(f,l,v),tu(f,l,v))}};function G1(l,f,v,_,C,U,q){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(_,U,q):f.prototype&&f.prototype.isPureReactComponent?!Ya(v,_)||!Ya(C,U):!0}function V1(l,f,v,_){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,_),f.state!==l&&hs.enqueueReplaceState(f,f.state,null)}function So(l,f){var v=f;if("ref"in f){v={};for(var _ in f)_!=="ref"&&(v[_]=f[_])}if(l=l.defaultProps){v===f&&(v=h({},v));for(var C in l)v[C]===void 0&&(v[C]=l[C])}return v}var ru=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function Zh(l){ru(l)}function Hp(l){console.error(l)}function j1(l){ru(l)}function kp(l,f){try{var v=l.onUncaughtError;v(f.value,{componentStack:f.stack})}catch(_){setTimeout(function(){throw _})}}function Ca(l,f,v){try{var _=l.onCaughtError;_(v.value,{componentStack:v.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Gp(l,f,v){return v=xo(v),v.tag=3,v.payload={element:null},v.callback=function(){kp(l,f)},v}function W1(l){return l=xo(l),l.tag=3,l}function Vp(l,f,v,_){var C=v.type.getDerivedStateFromError;if(typeof C=="function"){var U=_.value;l.payload=function(){return C(U)},l.callback=function(){Ca(f,v,_)}}var q=v.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(l.callback=function(){Ca(f,v,_),typeof C!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var ae=_.stack;this.componentDidCatch(_.value,{componentStack:ae!==null?ae:""})})}function OE(l,f,v,_,C){if(v.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(f=v.alternate,f!==null&&Ma(f,v,C,!0),v=_i.current,v!==null){switch(v.tag){case 13:return Qa===null?d():v.alternate===null&&Ui===0&&(Ui=3),v.flags&=-257,v.flags|=65536,v.lanes=C,_===kh?v.flags|=16384:(f=v.updateQueue,f===null?v.updateQueue=new Set([_]):f.add(_),Je(l,_,C)),!1;case 22:return v.flags|=65536,_===kh?v.flags|=16384:(f=v.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([_])},v.updateQueue=f):(v=f.retryQueue,v===null?f.retryQueue=new Set([_]):v.add(_)),Je(l,_,C)),!1}throw Error(i(435,v.tag))}return Je(l,_,C),d(),!1}if(ei)return f=_i.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=C,_!==bp&&(l=Error(i(422),{cause:_}),eu(Hr(l,v)))):(_!==bp&&(f=Error(i(423),{cause:_}),eu(Hr(f,v))),l=l.current.alternate,l.flags|=65536,C&=-C,l.lanes|=C,_=Hr(_,v),C=Gp(l.stateNode,_,C),cf(l,C),Ui!==4&&(Ui=2)),!1;var U=Error(i(520),{cause:_});if(U=Hr(U,v),li===null?li=[U]:li.push(U),Ui!==4&&(Ui=2),f===null)return!0;_=Hr(_,v),v=f;do{switch(v.tag){case 3:return v.flags|=65536,l=C&-C,v.lanes|=l,l=Gp(v.stateNode,_,l),cf(v,l),!1;case 1:if(f=v.type,U=v.stateNode,(v.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(ia===null||!ia.has(U))))return v.flags|=65536,C&=-C,v.lanes|=C,C=W1(C),Vp(C,l,v,_),cf(v,C),!1}v=v.return}while(v!==null);return!1}var X1=Error(i(461)),Or=!1;function er(l,f,v,_){f.child=l===null?H1(f,null,v,_):iu(f,l.child,v,_)}function Os(l,f,v,_,C){v=v.render;var U=f.ref;if("ref"in _){var q={};for(var ae in _)ae!=="ref"&&(q[ae]=_[ae])}else q=_;return _o(f),_=Tl(l,f,v,q,U,C),ae=h0(),l!==null&&!Or?(Op(l,f,C),Dr(l,f,C)):(ei&&ae&&t0(f),f.flags|=1,er(l,f,_,C),f.child)}function Ds(l,f,v,_,C){if(l===null){var U=v.type;return typeof U=="function"&&!Dh(U)&&U.defaultProps===void 0&&v.compare===null?(f.tag=15,f.type=U,C0(l,f,U,_,C)):(l=Rr(v.type,null,_,f,f.mode,C),l.ref=f.ref,l.return=f,f.child=l)}if(U=l.child,!Kh(l,C)){var q=U.memoizedProps;if(v=v.compare,v=v!==null?v:Ya,v(q,_)&&l.ref===f.ref)return Dr(l,f,C)}return f.flags|=1,l=$i(U,_),l.ref=f.ref,l.return=f,f.child=l}function C0(l,f,v,_,C){if(l!==null){var U=l.memoizedProps;if(Ya(U,_)&&l.ref===f.ref)if(Or=!1,f.pendingProps=_=U,Kh(l,C))(l.flags&131072)!==0&&(Or=!0);else return f.lanes=l.lanes,Dr(l,f,C)}return vf(l,f,v,_,C)}function su(l,f,v){var _=f.pendingProps,C=_.children,U=l!==null?l.memoizedState:null;if(_.mode==="hidden"){if((f.flags&128)!==0){if(_=U!==null?U.baseLanes|v:v,l!==null){for(C=f.child=l.child,U=0;C!==null;)U=U|C.lanes|C.childLanes,C=C.sibling;f.childLanes=U&~_}else f.childLanes=0,f.child=null;return au(l,f,_,v)}if((v&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},l!==null&&Fh(f,U!==null?U.cachePool:null),U!==null?l1(f,U):f0(),k1(f);else return f.lanes=f.childLanes=536870912,au(l,f,U!==null?U.baseLanes|v:v,v)}else U!==null?(Fh(f,U.cachePool),l1(f,U),vc(),f.memoizedState=null):(l!==null&&Fh(f,null),f0(),vc());return er(l,f,C,v),f.child}function au(l,f,v,_){var C=hc();return C=C===null?null:{parent:cr._currentValue,pool:C},f.memoizedState={baseLanes:v,cachePool:C},l!==null&&Fh(f,null),f0(),k1(f),l!==null&&Ma(l,f,_,!0),null}function ou(l,f){var v=f.ref;if(v===null)l!==null&&l.ref!==null&&(f.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(i(284));(l===null||l.ref!==v)&&(f.flags|=4194816)}}function vf(l,f,v,_,C){return _o(f),v=Tl(l,f,v,_,void 0,C),_=h0(),l!==null&&!Or?(Op(l,f,C),Dr(l,f,C)):(ei&&_&&t0(f),f.flags|=1,er(l,f,v,C),f.child)}function Ks(l,f,v,_,C,U){return _o(f),f.updateQueue=null,v=f1(f,_,v,C),u1(l),_=h0(),l!==null&&!Or?(Op(l,f,U),Dr(l,f,U)):(ei&&_&&t0(f),f.flags|=1,er(l,f,v,U),f.child)}function $s(l,f,v,_,C){if(_o(f),f.stateNode===null){var U=ac,q=v.contextType;typeof q=="object"&&q!==null&&(U=Vi(q)),U=new v(_,U),f.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=hs,f.stateNode=U,U._reactInternals=f,U=f.stateNode,U.props=_,U.state=f.memoizedState,U.refs={},c0(f),q=v.contextType,U.context=typeof q=="object"&&q!==null?Vi(q):ac,U.state=f.memoizedState,q=v.getDerivedStateFromProps,typeof q=="function"&&(yc(f,v,q,_),U.state=f.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(q=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),q!==U.state&&hs.enqueueReplaceState(U,U.state,null),uf(f,_,U,C),Gh(),U.state=f.memoizedState),typeof U.componentDidMount=="function"&&(f.flags|=4194308),_=!0}else if(l===null){U=f.stateNode;var ae=f.memoizedProps,be=So(v,ae);U.props=be;var Ve=U.context,mt=v.contextType;q=ac,typeof mt=="object"&&mt!==null&&(q=Vi(mt));var _t=v.getDerivedStateFromProps;mt=typeof _t=="function"||typeof U.getSnapshotBeforeUpdate=="function",ae=f.pendingProps!==ae,mt||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ae||Ve!==q)&&V1(f,U,_,q),Sl=!1;var Ze=f.memoizedState;U.state=Ze,uf(f,_,U,C),Gh(),Ve=f.memoizedState,ae||Ze!==Ve||Sl?(typeof _t=="function"&&(yc(f,v,_t,_),Ve=f.memoizedState),(be=Sl||G1(f,v,be,_,Ze,Ve,q))?(mt||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(f.flags|=4194308)):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=Ve),U.props=_,U.state=Ve,U.context=q,_=be):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{U=f.stateNode,fn(l,f),q=f.memoizedProps,mt=So(v,q),U.props=mt,_t=f.pendingProps,Ze=U.context,Ve=v.contextType,be=ac,typeof Ve=="object"&&Ve!==null&&(be=Vi(Ve)),ae=v.getDerivedStateFromProps,(Ve=typeof ae=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(q!==_t||Ze!==be)&&V1(f,U,_,be),Sl=!1,Ze=f.memoizedState,U.state=Ze,uf(f,_,U,C),Gh();var $e=f.memoizedState;q!==_t||Ze!==$e||Sl||l!==null&&l.dependencies!==null&&Ph(l.dependencies)?(typeof ae=="function"&&(yc(f,v,ae,_),$e=f.memoizedState),(mt=Sl||G1(f,v,mt,_,Ze,$e,be)||l!==null&&l.dependencies!==null&&Ph(l.dependencies))?(Ve||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(_,$e,be),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(_,$e,be)),typeof U.componentDidUpdate=="function"&&(f.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof U.componentDidUpdate!="function"||q===l.memoizedProps&&Ze===l.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||q===l.memoizedProps&&Ze===l.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=$e),U.props=_,U.state=$e,U.context=be,_=mt):(typeof U.componentDidUpdate!="function"||q===l.memoizedProps&&Ze===l.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||q===l.memoizedProps&&Ze===l.memoizedState||(f.flags|=1024),_=!1)}return U=_,ou(l,f),_=(f.flags&128)!==0,U||_?(U=f.stateNode,v=_&&typeof v.getDerivedStateFromError!="function"?null:U.render(),f.flags|=1,l!==null&&_?(f.child=iu(f,l.child,null,C),f.child=iu(f,null,v,C)):er(l,f,v,C),f.memoizedState=U.state,l=f.child):l=Dr(l,f,C),l}function _c(l,f,v,_){return rf(),f.flags|=256,er(l,f,v,_),f.child}var Ja={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eo(l){return{baseLanes:l,cachePool:Tp()}}function _r(l,f,v){return l=l!==null?l.childLanes&~v:0,f&&(l|=La),l}function yf(l,f,v){var _=f.pendingProps,C=!1,U=(f.flags&128)!==0,q;if((q=U)||(q=l!==null&&l.memoizedState===null?!1:(Ji.current&2)!==0),q&&(C=!0,f.flags&=-129),q=(f.flags&32)!==0,f.flags&=-33,l===null){if(ei){if(C?gc(f):vc(),ei){var ae=zi,be;if(be=ae){e:{for(be=ae,ae=qs;be.nodeType!==8;){if(!ae){ae=null;break e}if(be=Ll(be.nextSibling),be===null){ae=null;break e}}ae=be}ae!==null?(f.memoizedState={dehydrated:ae,treeContext:lc!==null?{id:vo,overflow:yo}:null,retryLane:536870912,hydrationErrors:null},be=Cs(18,null,null,0),be.stateNode=ae,be.return=f,f.child=be,cs=f,zi=null,be=!0):be=!1}be||cc(f)}if(ae=f.memoizedState,ae!==null&&(ae=ae.dehydrated,ae!==null))return jE(ae)?f.lanes=32:f.lanes=536870912,null;bo(f)}return ae=_.children,_=_.fallback,C?(vc(),C=f.mode,ae=lu({mode:"hidden",children:ae},C),_=oc(_,C,v,null),ae.return=f,_.return=f,ae.sibling=_,f.child=ae,C=f.child,C.memoizedState=eo(v),C.childLanes=_r(l,q,v),f.memoizedState=Ja,_):(gc(f),Eo(f,ae))}if(be=l.memoizedState,be!==null&&(ae=be.dehydrated,ae!==null)){if(U)f.flags&256?(gc(f),f.flags&=-257,f=Vr(l,f,v)):f.memoizedState!==null?(vc(),f.child=l.child,f.flags|=128,f=null):(vc(),C=_.fallback,ae=f.mode,_=lu({mode:"visible",children:_.children},ae),C=oc(C,ae,v,null),C.flags|=2,_.return=f,C.return=f,_.sibling=C,f.child=_,iu(f,l.child,null,v),_=f.child,_.memoizedState=eo(v),_.childLanes=_r(l,q,v),f.memoizedState=Ja,f=C);else if(gc(f),jE(ae)){if(q=ae.nextSibling&&ae.nextSibling.dataset,q)var Ve=q.dgst;q=Ve,_=Error(i(419)),_.stack="",_.digest=q,eu({value:_,source:null,stack:null}),f=Vr(l,f,v)}else if(Or||Ma(l,f,v,!1),q=(v&l.childLanes)!==0,Or||q){if(q=_n,q!==null&&(_=v&-v,_=(_&42)!==0?1:zt(_),_=(_&(q.suspendedLanes|v))!==0?0:_,_!==0&&_!==be.retryLane))throw be.retryLane=_,yl(l,_),ps(q,l,_),X1;ae.data==="$?"||d(),f=Vr(l,f,v)}else ae.data==="$?"?(f.flags|=192,f.child=l.child,f=null):(l=be.treeContext,zi=Ll(ae.nextSibling),cs=f,ei=!0,Ea=null,qs=!1,l!==null&&(kr[Xs++]=vo,kr[Xs++]=yo,kr[Xs++]=lc,vo=l.id,yo=l.overflow,lc=f),f=Eo(f,_.children),f.flags|=4096);return f}return C?(vc(),C=_.fallback,ae=f.mode,be=l.child,Ve=be.sibling,_=$i(be,{mode:"hidden",children:_.children}),_.subtreeFlags=be.subtreeFlags&65011712,Ve!==null?C=$i(Ve,C):(C=oc(C,ae,v,null),C.flags|=2),C.return=f,_.return=f,_.sibling=C,f.child=_,_=C,C=f.child,ae=l.child.memoizedState,ae===null?ae=eo(v):(be=ae.cachePool,be!==null?(Ve=cr._currentValue,be=be.parent!==Ve?{parent:Ve,pool:Ve}:be):be=Tp(),ae={baseLanes:ae.baseLanes|v,cachePool:be}),C.memoizedState=ae,C.childLanes=_r(l,q,v),f.memoizedState=Ja,_):(gc(f),v=l.child,l=v.sibling,v=$i(v,{mode:"visible",children:_.children}),v.return=f,v.sibling=null,l!==null&&(q=f.deletions,q===null?(f.deletions=[l],f.flags|=16):q.push(l)),f.child=v,f.memoizedState=null,v)}function Eo(l,f){return f=lu({mode:"visible",children:f},l.mode),f.return=l,l.child=f}function lu(l,f){return l=Cs(22,l,null,f),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Vr(l,f,v){return iu(f,l.child,null,v),l=Eo(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function jr(l,f,v){l.lanes|=f;var _=l.alternate;_!==null&&(_.lanes|=f),s0(l.return,f,v)}function Yn(l,f,v,_,C){var U=l.memoizedState;U===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:v,tailMode:C}:(U.isBackwards=f,U.rendering=null,U.renderingStartTime=0,U.last=_,U.tail=v,U.tailMode=C)}function Ra(l,f,v){var _=f.pendingProps,C=_.revealOrder,U=_.tail;if(er(l,f,_.children,v),_=Ji.current,(_&2)!==0)_=_&1|2,f.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&jr(l,v,f);else if(l.tag===19)jr(l,v,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}_&=1}switch(se(Ji,_),C){case"forwards":for(v=f.child,C=null;v!==null;)l=v.alternate,l!==null&&wl(l)===null&&(C=v),v=v.sibling;v=C,v===null?(C=f.child,f.child=null):(C=v.sibling,v.sibling=null),Yn(f,!1,C,v,U);break;case"backwards":for(v=null,C=f.child,f.child=null;C!==null;){if(l=C.alternate,l!==null&&wl(l)===null){f.child=C;break}l=C.sibling,C.sibling=v,v=C,C=l}Yn(f,!0,v,null,U);break;case"together":Yn(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Dr(l,f,v){if(l!==null&&(f.dependencies=l.dependencies),ro|=f.lanes,(v&f.childLanes)===0)if(l!==null){if(Ma(l,f,v,!1),(v&f.childLanes)===0)return null}else return null;if(l!==null&&f.child!==l.child)throw Error(i(153));if(f.child!==null){for(l=f.child,v=$i(l,l.pendingProps),f.child=v,v.return=f;l.sibling!==null;)l=l.sibling,v=v.sibling=$i(l,l.pendingProps),v.return=f;v.sibling=null}return f.child}function Kh(l,f){return(l.lanes&f)!==0?!0:(l=l.dependencies,!!(l!==null&&Ph(l)))}function Oa(l,f,v){switch(f.tag){case 3:_e(f,f.stateNode.containerInfo),fc(f,cr,l.memoizedState.cache),rf();break;case 27:case 5:qe(f);break;case 4:_e(f,f.stateNode.containerInfo);break;case 10:fc(f,f.type,f.memoizedProps.value);break;case 13:var _=f.memoizedState;if(_!==null)return _.dehydrated!==null?(gc(f),f.flags|=128,null):(v&f.child.childLanes)!==0?yf(l,f,v):(gc(f),l=Dr(l,f,v),l!==null?l.sibling:null);gc(f);break;case 19:var C=(l.flags&128)!==0;if(_=(v&f.childLanes)!==0,_||(Ma(l,f,v,!1),_=(v&f.childLanes)!==0),C){if(_)return Ra(l,f,v);f.flags|=128}if(C=f.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),se(Ji,Ji.current),_)break;return null;case 22:case 23:return f.lanes=0,su(l,f,v);case 24:fc(f,cr,l.memoizedState.cache)}return Dr(l,f,v)}function cu(l,f,v){if(l!==null)if(l.memoizedProps!==f.pendingProps)Or=!0;else{if(!Kh(l,v)&&(f.flags&128)===0)return Or=!1,Oa(l,f,v);Or=(l.flags&131072)!==0}else Or=!1,ei&&(f.flags&1048576)!==0&&xp(f,nf,f.index);switch(f.lanes=0,f.tag){case 16:e:{l=f.pendingProps;var _=f.elementType,C=_._init;if(_=C(_._payload),f.type=_,typeof _=="function")Dh(_)?(l=So(_,l),f.tag=1,f=$s(null,f,_,l,v)):(f.tag=0,f=vf(null,f,_,l,v));else{if(_!=null){if(C=_.$$typeof,C===w){f.tag=11,f=Os(null,f,_,l,v);break e}else if(C===P){f.tag=14,f=Ds(null,f,_,l,v);break e}}throw f=W(_)||_,Error(i(306,f,""))}}return f;case 0:return vf(l,f,f.type,f.pendingProps,v);case 1:return _=f.type,C=So(_,f.pendingProps),$s(l,f,_,C,v);case 3:e:{if(_e(f,f.stateNode.containerInfo),l===null)throw Error(i(387));_=f.pendingProps;var U=f.memoizedState;C=U.element,fn(l,f),uf(f,_,null,v);var q=f.memoizedState;if(_=q.cache,fc(f,cr,_),_!==U.cache&&Nh(f,[cr],v,!0),Gh(),_=q.element,U.isDehydrated)if(U={element:_,isDehydrated:!1,cache:q.cache},f.updateQueue.baseState=U,f.memoizedState=U,f.flags&256){f=_c(l,f,_,v);break e}else if(_!==C){C=Hr(Error(i(424)),f),eu(C),f=_c(l,f,_,v);break e}else{switch(l=f.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(zi=Ll(l.firstChild),cs=f,ei=!0,Ea=null,qs=!0,v=H1(f,null,_,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(rf(),_===C){f=Dr(l,f,v);break e}er(l,f,_,v)}f=f.child}return f;case 26:return ou(l,f),l===null?(v=e3(f.type,null,f.pendingProps,null))?f.memoizedState=v:ei||(v=f.type,l=f.pendingProps,_=Q1(pe.current).createElement(v),_[un]=f,_[mn]=l,ms(_,v,l),We(_),f.stateNode=_):f.memoizedState=e3(f.type,l.memoizedProps,f.pendingProps,l.memoizedState),null;case 27:return qe(f),l===null&&ei&&(_=f.stateNode=$C(f.type,f.pendingProps,pe.current),cs=f,qs=!0,C=zi,Cf(f.type)?(WE=C,zi=Ll(_.firstChild)):zi=C),er(l,f,f.pendingProps.children,v),ou(l,f),l===null&&(f.flags|=4194304),f.child;case 5:return l===null&&ei&&((C=_=zi)&&(_=FI(_,f.type,f.pendingProps,qs),_!==null?(f.stateNode=_,cs=f,zi=Ll(_.firstChild),qs=!1,C=!0):C=!1),C||cc(f)),qe(f),C=f.type,U=f.pendingProps,q=l!==null?l.memoizedProps:null,_=U.children,kE(C,U)?_=null:q!==null&&kE(C,q)&&(f.flags|=32),f.memoizedState!==null&&(C=Tl(l,f,ME,null,null,v),F0._currentValue=C),ou(l,f),er(l,f,_,v),f.child;case 6:return l===null&&ei&&((l=v=zi)&&(v=HI(v,f.pendingProps,qs),v!==null?(f.stateNode=v,cs=f,zi=null,l=!0):l=!1),l||cc(f)),null;case 13:return yf(l,f,v);case 4:return _e(f,f.stateNode.containerInfo),_=f.pendingProps,l===null?f.child=iu(f,null,_,v):er(l,f,_,v),f.child;case 11:return Os(l,f,f.type,f.pendingProps,v);case 7:return er(l,f,f.pendingProps,v),f.child;case 8:return er(l,f,f.pendingProps.children,v),f.child;case 12:return er(l,f,f.pendingProps.children,v),f.child;case 10:return _=f.pendingProps,fc(f,f.type,_.value),er(l,f,_.children,v),f.child;case 9:return C=f.type._context,_=f.pendingProps.children,_o(f),C=Vi(C),_=_(C),f.flags|=1,er(l,f,_,v),f.child;case 14:return Ds(l,f,f.type,f.pendingProps,v);case 15:return C0(l,f,f.type,f.pendingProps,v);case 19:return Ra(l,f,v);case 31:return _=f.pendingProps,v=f.mode,_={mode:_.mode,children:_.children},l===null?(v=lu(_,v),v.ref=f.ref,f.child=v,v.return=f,f=v):(v=$i(l.child,_),v.ref=f.ref,f.child=v,v.return=f,f=v),f;case 22:return su(l,f,v);case 24:return _o(f),_=Vi(cr),l===null?(C=hc(),C===null&&(C=_n,U=Ep(),C.pooledCache=U,U.refCount++,U!==null&&(C.pooledCacheLanes|=v),C=U),f.memoizedState={parent:_,cache:C},c0(f),fc(f,cr,C)):((l.lanes&v)!==0&&(fn(l,f),uf(f,null,null,v),Gh()),C=l.memoizedState,U=f.memoizedState,C.parent!==_?(C={parent:_,cache:_},f.memoizedState=C,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=C),fc(f,cr,_)):(_=U.cache,fc(f,cr,_),_!==C.cache&&Nh(f,[cr],v,!0))),er(l,f,f.pendingProps.children,v),f.child;case 29:throw f.pendingProps}throw Error(i(156,f.tag))}function to(l){l.flags|=4}function $h(l,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!s3(f)){if(f=_i.current,f!==null&&((Qt&4194048)===Qt?Qa!==null:(Qt&62914560)!==Qt&&(Qt&536870912)===0||f!==Qa))throw Aa=kh,o0;l.flags|=8192}}function Cl(l,f){f!==null&&(l.flags|=4),l.flags&16384&&(f=l.tag!==22?Oe():536870912,l.lanes|=f,Qn|=f)}function uu(l,f){if(!ei)switch(l.tailMode){case"hidden":f=l.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var _=null;v!==null;)v.alternate!==null&&(_=v),v=v.sibling;_===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:_.sibling=null}}function Ti(l){var f=l.alternate!==null&&l.alternate.child===l.child,v=0,_=0;if(f)for(var C=l.child;C!==null;)v|=C.lanes|C.childLanes,_|=C.subtreeFlags&65011712,_|=C.flags&65011712,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)v|=C.lanes|C.childLanes,_|=C.subtreeFlags,_|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=_,l.childLanes=v,f}function R0(l,f,v){var _=f.pendingProps;switch(n0(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(f),null;case 1:return Ti(f),null;case 3:return v=f.stateNode,_=null,l!==null&&(_=l.memoizedState.cache),f.memoizedState.cache!==_&&(f.flags|=2048),bl(cr),Xe(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(l===null||l.child===null)&&(Za(f)?to(f):l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,ai())),Ti(f),null;case 26:return v=f.memoizedState,l===null?(to(f),v!==null?(Ti(f),$h(f,v)):(Ti(f),f.flags&=-16777217)):v?v!==l.memoizedState?(to(f),Ti(f),$h(f,v)):(Ti(f),f.flags&=-16777217):(l.memoizedProps!==_&&to(f),Ti(f),f.flags&=-16777217),null;case 27:Be(f),v=pe.current;var C=f.type;if(l!==null&&f.stateNode!=null)l.memoizedProps!==_&&to(f);else{if(!_){if(f.stateNode===null)throw Error(i(166));return Ti(f),null}l=ee.current,Za(f)?r1(f):(l=$C(C,_,v),f.stateNode=l,to(f))}return Ti(f),null;case 5:if(Be(f),v=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==_&&to(f);else{if(!_){if(f.stateNode===null)throw Error(i(166));return Ti(f),null}if(l=ee.current,Za(f))r1(f);else{switch(C=Q1(pe.current),l){case 1:l=C.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:l=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":l=C.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":l=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":l=C.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof _.is=="string"?C.createElement("select",{is:_.is}):C.createElement("select"),_.multiple?l.multiple=!0:_.size&&(l.size=_.size);break;default:l=typeof _.is=="string"?C.createElement(v,{is:_.is}):C.createElement(v)}}l[un]=f,l[mn]=_;e:for(C=f.child;C!==null;){if(C.tag===5||C.tag===6)l.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===f)break e;for(;C.sibling===null;){if(C.return===null||C.return===f)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}f.stateNode=l;e:switch(ms(l,v,_),v){case"button":case"input":case"select":case"textarea":l=!!_.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&to(f)}}return Ti(f),f.flags&=-16777217,null;case 6:if(l&&f.stateNode!=null)l.memoizedProps!==_&&to(f);else{if(typeof _!="string"&&f.stateNode===null)throw Error(i(166));if(l=pe.current,Za(f)){if(l=f.stateNode,v=f.memoizedProps,_=null,C=cs,C!==null)switch(C.tag){case 27:case 5:_=C.memoizedProps}l[un]=f,l=!!(l.nodeValue===v||_!==null&&_.suppressHydrationWarning===!0||jC(l.nodeValue,v)),l||cc(f)}else l=Q1(l).createTextNode(_),l[un]=f,f.stateNode=l}return Ti(f),null;case 13:if(_=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(C=Za(f),_!==null&&_.dehydrated!==null){if(l===null){if(!C)throw Error(i(318));if(C=f.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(i(317));C[un]=f}else rf(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ti(f),C=!1}else C=ai(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=C),C=!0;if(!C)return f.flags&256?(bo(f),f):(bo(f),null)}if(bo(f),(f.flags&128)!==0)return f.lanes=v,f;if(v=_!==null,l=l!==null&&l.memoizedState!==null,v){_=f.child,C=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(C=_.alternate.memoizedState.cachePool.pool);var U=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(U=_.memoizedState.cachePool.pool),U!==C&&(_.flags|=2048)}return v!==l&&v&&(f.child.flags|=8192),Cl(f,f.updateQueue),Ti(f),null;case 4:return Xe(),l===null&&IE(f.stateNode.containerInfo),Ti(f),null;case 10:return bl(f.type),Ti(f),null;case 19:if(ie(Ji),C=f.memoizedState,C===null)return Ti(f),null;if(_=(f.flags&128)!==0,U=C.rendering,U===null)if(_)uu(C,!1);else{if(Ui!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(U=wl(l),U!==null){for(f.flags|=128,uu(C,!1),l=U.updateQueue,f.updateQueue=l,Cl(f,l),f.subtreeFlags=0,l=v,v=f.child;v!==null;)e0(v,l),v=v.sibling;return se(Ji,Ji.current&1|2),f.child}l=l.sibling}C.tail!==null&&Qe()>ts&&(f.flags|=128,_=!0,uu(C,!1),f.lanes=4194304)}else{if(!_)if(l=wl(U),l!==null){if(f.flags|=128,_=!0,l=l.updateQueue,f.updateQueue=l,Cl(f,l),uu(C,!0),C.tail===null&&C.tailMode==="hidden"&&!U.alternate&&!ei)return Ti(f),null}else 2*Qe()-C.renderingStartTime>ts&&v!==536870912&&(f.flags|=128,_=!0,uu(C,!1),f.lanes=4194304);C.isBackwards?(U.sibling=f.child,f.child=U):(l=C.last,l!==null?l.sibling=U:f.child=U,C.last=U)}return C.tail!==null?(f=C.tail,C.rendering=f,C.tail=f.sibling,C.renderingStartTime=Qe(),f.sibling=null,l=Ji.current,se(Ji,_?l&1|2:l&1),f):(Ti(f),null);case 22:case 23:return bo(f),Vh(),_=f.memoizedState!==null,l!==null?l.memoizedState!==null!==_&&(f.flags|=8192):_&&(f.flags|=8192),_?(v&536870912)!==0&&(f.flags&128)===0&&(Ti(f),f.subtreeFlags&6&&(f.flags|=8192)):Ti(f),v=f.updateQueue,v!==null&&Cl(f,v.retryQueue),v=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048),l!==null&&ie(Ta),null;case 24:return v=null,l!==null&&(v=l.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),bl(cr),Ti(f),null;case 25:return null;case 30:return null}throw Error(i(156,f.tag))}function _f(l,f){switch(n0(f),f.tag){case 1:return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return bl(cr),Xe(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 26:case 27:case 5:return Be(f),null;case 13:if(bo(f),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(i(340));rf()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return ie(Ji),null;case 4:return Xe(),null;case 10:return bl(f.type),null;case 22:case 23:return bo(f),Vh(),l!==null&&ie(Ta),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 24:return bl(cr),null;case 25:return null;default:return null}}function xf(l,f){switch(n0(f),f.tag){case 3:bl(cr),Xe();break;case 26:case 27:case 5:Be(f);break;case 4:Xe();break;case 13:bo(f);break;case 19:ie(Ji);break;case 10:bl(f.type);break;case 22:case 23:bo(f),Vh(),l!==null&&ie(Ta);break;case 24:bl(cr)}}function fu(l,f){try{var v=f.updateQueue,_=v!==null?v.lastEffect:null;if(_!==null){var C=_.next;v=C;do{if((v.tag&l)===l){_=void 0;var U=v.create,q=v.inst;_=U(),q.destroy=_}v=v.next}while(v!==C)}}catch(ae){we(f,f.return,ae)}}function Qs(l,f,v){try{var _=f.updateQueue,C=_!==null?_.lastEffect:null;if(C!==null){var U=C.next;_=U;do{if((_.tag&l)===l){var q=_.inst,ae=q.destroy;if(ae!==void 0){q.destroy=void 0,C=f;var be=v,Ve=ae;try{Ve()}catch(mt){we(C,be,mt)}}}_=_.next}while(_!==U)}}catch(mt){we(f,f.return,mt)}}function hu(l){var f=l.updateQueue;if(f!==null){var v=l.stateNode;try{o1(f,v)}catch(_){we(l,l.return,_)}}}function Rl(l,f,v){v.props=So(l.type,l.memoizedProps),v.state=l.memoizedState;try{v.componentWillUnmount()}catch(_){we(l,f,_)}}function du(l,f){try{var v=l.ref;if(v!==null){switch(l.tag){case 26:case 27:case 5:var _=l.stateNode;break;case 30:_=l.stateNode;break;default:_=l.stateNode}typeof v=="function"?l.refCleanup=v(_):v.current=_}}catch(C){we(l,f,C)}}function Mo(l,f){var v=l.ref,_=l.refCleanup;if(v!==null)if(typeof _=="function")try{_()}catch(C){we(l,f,C)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(C){we(l,f,C)}else v.current=null}function bf(l){var f=l.type,v=l.memoizedProps,_=l.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":v.autoFocus&&_.focus();break e;case"img":v.src?_.src=v.src:v.srcSet&&(_.srcset=v.srcSet)}}catch(C){we(l,l.return,C)}}function Qh(l,f,v){try{var _=l.stateNode;NI(_,l.type,v,f),_[mn]=f}catch(C){we(l,l.return,C)}}function Jh(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Cf(l.type)||l.tag===4}function xc(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Jh(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Cf(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function bc(l,f,v){var _=l.tag;if(_===5||_===6)l=l.stateNode,f?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(l,f):(f=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,f.appendChild(l),v=v._reactRootContainer,v!=null||f.onclick!==null||(f.onclick=$1));else if(_!==4&&(_===27&&Cf(l.type)&&(v=l.stateNode,f=null),l=l.child,l!==null))for(bc(l,f,v),l=l.sibling;l!==null;)bc(l,f,v),l=l.sibling}function Sc(l,f,v){var _=l.tag;if(_===5||_===6)l=l.stateNode,f?v.insertBefore(l,f):v.appendChild(l);else if(_!==4&&(_===27&&Cf(l.type)&&(v=l.stateNode),l=l.child,l!==null))for(Sc(l,f,v),l=l.sibling;l!==null;)Sc(l,f,v),l=l.sibling}function Ec(l){var f=l.stateNode,v=l.memoizedProps;try{for(var _=l.type,C=f.attributes;C.length;)f.removeAttributeNode(C[0]);ms(f,_,v),f[un]=l,f[mn]=v}catch(U){we(l,l.return,U)}}var To=!1,Ai=!1,Sf=!1,Js=typeof WeakSet=="function"?WeakSet:Set,xi=null;function xr(l,f){if(l=l.containerInfo,FE=r_,l=qg(l),wh(l)){if("selectionStart"in l)var v={start:l.selectionStart,end:l.selectionEnd};else e:{v=(v=l.ownerDocument)&&v.defaultView||window;var _=v.getSelection&&v.getSelection();if(_&&_.rangeCount!==0){v=_.anchorNode;var C=_.anchorOffset,U=_.focusNode;_=_.focusOffset;try{v.nodeType,U.nodeType}catch{v=null;break e}var q=0,ae=-1,be=-1,Ve=0,mt=0,_t=l,Ze=null;t:for(;;){for(var $e;_t!==v||C!==0&&_t.nodeType!==3||(ae=q+C),_t!==U||_!==0&&_t.nodeType!==3||(be=q+_),_t.nodeType===3&&(q+=_t.nodeValue.length),($e=_t.firstChild)!==null;)Ze=_t,_t=$e;for(;;){if(_t===l)break t;if(Ze===v&&++Ve===C&&(ae=q),Ze===U&&++mt===_&&(be=q),($e=_t.nextSibling)!==null)break;_t=Ze,Ze=_t.parentNode}_t=$e}v=ae===-1||be===-1?null:{start:ae,end:be}}else v=null}v=v||{start:0,end:0}}else v=null;for(HE={focusedElem:l,selectionRange:v},r_=!1,xi=f;xi!==null;)if(f=xi,l=f.child,(f.subtreeFlags&1024)!==0&&l!==null)l.return=f,xi=l;else for(;xi!==null;){switch(f=xi,U=f.alternate,l=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&U!==null){l=void 0,v=f,C=U.memoizedProps,U=U.memoizedState,_=v.stateNode;try{var pn=So(v.type,C,v.elementType===v.type);l=_.getSnapshotBeforeUpdate(pn,U),_.__reactInternalSnapshotBeforeUpdate=l}catch(sn){we(v,v.return,sn)}}break;case 3:if((l&1024)!==0){if(l=f.stateNode.containerInfo,v=l.nodeType,v===9)VE(l);else if(v===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":VE(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(i(163))}if(l=f.sibling,l!==null){l.return=f.return,xi=l;break}xi=f.return}}function Ol(l,f,v){var _=v.flags;switch(v.tag){case 0:case 11:case 15:ds(l,v),_&4&&fu(5,v);break;case 1:if(ds(l,v),_&4)if(l=v.stateNode,f===null)try{l.componentDidMount()}catch(q){we(v,v.return,q)}else{var C=So(v.type,f.memoizedProps);f=f.memoizedState;try{l.componentDidUpdate(C,f,l.__reactInternalSnapshotBeforeUpdate)}catch(q){we(v,v.return,q)}}_&64&&hu(v),_&512&&du(v,v.return);break;case 3:if(ds(l,v),_&64&&(l=v.updateQueue,l!==null)){if(f=null,v.child!==null)switch(v.child.tag){case 27:case 5:f=v.child.stateNode;break;case 1:f=v.child.stateNode}try{o1(l,f)}catch(q){we(v,v.return,q)}}break;case 27:f===null&&_&4&&Ec(v);case 26:case 5:ds(l,v),f===null&&_&4&&bf(v),_&512&&du(v,v.return);break;case 12:ds(l,v);break;case 13:ds(l,v),_&4&&Mc(l,v),_&64&&(l=v.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(v=Li.bind(null,v),kI(l,v))));break;case 22:if(_=v.memoizedState!==null||To,!_){f=f!==null&&f.memoizedState!==null||Ai,C=To;var U=Ai;To=_,(Ai=f)&&!U?Ao(l,v,(v.subtreeFlags&8772)!==0):ds(l,v),To=C,Ai=U}break;case 30:break;default:ds(l,v)}}function On(l){var f=l.alternate;f!==null&&(l.alternate=null,On(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&In(f)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var en=null,$n=!1;function Da(l,f,v){for(v=v.child;v!==null;)pu(l,f,v),v=v.sibling}function pu(l,f,v){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(Le,v)}catch{}switch(v.tag){case 26:Ai||Mo(v,f),Da(l,f,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Ai||Mo(v,f);var _=en,C=$n;Cf(v.type)&&(en=v.stateNode,$n=!1),Da(l,f,v),P0(v.stateNode),en=_,$n=C;break;case 5:Ai||Mo(v,f);case 6:if(_=en,C=$n,en=null,Da(l,f,v),en=_,$n=C,en!==null)if($n)try{(en.nodeType===9?en.body:en.nodeName==="HTML"?en.ownerDocument.body:en).removeChild(v.stateNode)}catch(U){we(v,f,U)}else try{en.removeChild(v.stateNode)}catch(U){we(v,f,U)}break;case 18:en!==null&&($n?(l=en,ZC(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,v.stateNode),V0(l)):ZC(en,v.stateNode));break;case 4:_=en,C=$n,en=v.stateNode.containerInfo,$n=!0,Da(l,f,v),en=_,$n=C;break;case 0:case 11:case 14:case 15:Ai||Qs(2,v,f),Ai||Qs(4,v,f),Da(l,f,v);break;case 1:Ai||(Mo(v,f),_=v.stateNode,typeof _.componentWillUnmount=="function"&&Rl(v,f,_)),Da(l,f,v);break;case 21:Da(l,f,v);break;case 22:Ai=(_=Ai)||v.memoizedState!==null,Da(l,f,v),Ai=_;break;default:Da(l,f,v)}}function Mc(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{V0(l)}catch(v){we(f,f.return,v)}}function jp(l){switch(l.tag){case 13:case 19:var f=l.stateNode;return f===null&&(f=l.stateNode=new Js),f;case 22:return l=l.stateNode,f=l._retryCache,f===null&&(f=l._retryCache=new Js),f;default:throw Error(i(435,l.tag))}}function mu(l,f){var v=jp(l);f.forEach(function(_){var C=hn.bind(null,l,_);v.has(_)||(v.add(_),_.then(C,C))})}function Ur(l,f){var v=f.deletions;if(v!==null)for(var _=0;_<v.length;_++){var C=v[_],U=l,q=f,ae=q;e:for(;ae!==null;){switch(ae.tag){case 27:if(Cf(ae.type)){en=ae.stateNode,$n=!1;break e}break;case 5:en=ae.stateNode,$n=!1;break e;case 3:case 4:en=ae.stateNode.containerInfo,$n=!0;break e}ae=ae.return}if(en===null)throw Error(i(160));pu(U,q,C),en=null,$n=!1,U=C.alternate,U!==null&&(U.return=null),C.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)Wp(f,l),f=f.sibling}var no=null;function Wp(l,f){var v=l.alternate,_=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ur(f,l),ji(l),_&4&&(Qs(3,l,l.return),fu(3,l),Qs(5,l,l.return));break;case 1:Ur(f,l),ji(l),_&512&&(Ai||v===null||Mo(v,v.return)),_&64&&To&&(l=l.updateQueue,l!==null&&(_=l.callbacks,_!==null&&(v=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=v===null?_:v.concat(_))));break;case 26:var C=no;if(Ur(f,l),ji(l),_&512&&(Ai||v===null||Mo(v,v.return)),_&4){var U=v!==null?v.memoizedState:null;if(_=l.memoizedState,v===null)if(_===null)if(l.stateNode===null){e:{_=l.type,v=l.memoizedProps,C=C.ownerDocument||C;t:switch(_){case"title":U=C.getElementsByTagName("title")[0],(!U||U[ri]||U[un]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=C.createElement(_),C.head.insertBefore(U,C.querySelector("head > title"))),ms(U,_,v),U[un]=l,We(U),_=U;break e;case"link":var q=i3("link","href",C).get(_+(v.href||""));if(q){for(var ae=0;ae<q.length;ae++)if(U=q[ae],U.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&U.getAttribute("rel")===(v.rel==null?null:v.rel)&&U.getAttribute("title")===(v.title==null?null:v.title)&&U.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){q.splice(ae,1);break t}}U=C.createElement(_),ms(U,_,v),C.head.appendChild(U);break;case"meta":if(q=i3("meta","content",C).get(_+(v.content||""))){for(ae=0;ae<q.length;ae++)if(U=q[ae],U.getAttribute("content")===(v.content==null?null:""+v.content)&&U.getAttribute("name")===(v.name==null?null:v.name)&&U.getAttribute("property")===(v.property==null?null:v.property)&&U.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&U.getAttribute("charset")===(v.charSet==null?null:v.charSet)){q.splice(ae,1);break t}}U=C.createElement(_),ms(U,_,v),C.head.appendChild(U);break;default:throw Error(i(468,_))}U[un]=l,We(U),_=U}l.stateNode=_}else r3(C,l.type,l.stateNode);else l.stateNode=n3(C,_,l.memoizedProps);else U!==_?(U===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):U.count--,_===null?r3(C,l.type,l.stateNode):n3(C,_,l.memoizedProps)):_===null&&l.stateNode!==null&&Qh(l,l.memoizedProps,v.memoizedProps)}break;case 27:Ur(f,l),ji(l),_&512&&(Ai||v===null||Mo(v,v.return)),v!==null&&_&4&&Qh(l,l.memoizedProps,v.memoizedProps);break;case 5:if(Ur(f,l),ji(l),_&512&&(Ai||v===null||Mo(v,v.return)),l.flags&32){C=l.stateNode;try{Ni(C,"")}catch($e){we(l,l.return,$e)}}_&4&&l.stateNode!=null&&(C=l.memoizedProps,Qh(l,C,v!==null?v.memoizedProps:C)),_&1024&&(Sf=!0);break;case 6:if(Ur(f,l),ji(l),_&4){if(l.stateNode===null)throw Error(i(162));_=l.memoizedProps,v=l.stateNode;try{v.nodeValue=_}catch($e){we(l,l.return,$e)}}break;case 3:if(t_=null,C=no,no=J1(f.containerInfo),Ur(f,l),no=C,ji(l),_&4&&v!==null&&v.memoizedState.isDehydrated)try{V0(f.containerInfo)}catch($e){we(l,l.return,$e)}Sf&&(Sf=!1,Tc(l));break;case 4:_=no,no=J1(l.stateNode.containerInfo),Ur(f,l),ji(l),no=_;break;case 12:Ur(f,l),ji(l);break;case 13:Ur(f,l),ji(l),l.child.flags&8192&&l.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(vi=Qe()),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,mu(l,_)));break;case 22:C=l.memoizedState!==null;var be=v!==null&&v.memoizedState!==null,Ve=To,mt=Ai;if(To=Ve||C,Ai=mt||be,Ur(f,l),Ai=mt,To=Ve,ji(l),_&8192)e:for(f=l.stateNode,f._visibility=C?f._visibility&-2:f._visibility|1,C&&(v===null||be||To||Ai||ea(l)),v=null,f=l;;){if(f.tag===5||f.tag===26){if(v===null){be=v=f;try{if(U=be.stateNode,C)q=U.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{ae=be.stateNode;var _t=be.memoizedProps.style,Ze=_t!=null&&_t.hasOwnProperty("display")?_t.display:null;ae.style.display=Ze==null||typeof Ze=="boolean"?"":(""+Ze).trim()}}catch($e){we(be,be.return,$e)}}}else if(f.tag===6){if(v===null){be=f;try{be.stateNode.nodeValue=C?"":be.memoizedProps}catch($e){we(be,be.return,$e)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===l)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break e;for(;f.sibling===null;){if(f.return===null||f.return===l)break e;v===f&&(v=null),f=f.return}v===f&&(v=null),f.sibling.return=f.return,f=f.sibling}_&4&&(_=l.updateQueue,_!==null&&(v=_.retryQueue,v!==null&&(_.retryQueue=null,mu(l,v))));break;case 19:Ur(f,l),ji(l),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,mu(l,_)));break;case 30:break;case 21:break;default:Ur(f,l),ji(l)}}function ji(l){var f=l.flags;if(f&2){try{for(var v,_=l.return;_!==null;){if(Jh(_)){v=_;break}_=_.return}if(v==null)throw Error(i(160));switch(v.tag){case 27:var C=v.stateNode,U=xc(l);Sc(l,U,C);break;case 5:var q=v.stateNode;v.flags&32&&(Ni(q,""),v.flags&=-33);var ae=xc(l);Sc(l,ae,q);break;case 3:case 4:var be=v.stateNode.containerInfo,Ve=xc(l);bc(l,Ve,be);break;default:throw Error(i(161))}}catch(mt){we(l,l.return,mt)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function Tc(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var f=l;Tc(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),l=l.sibling}}function ds(l,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)Ol(l,f.alternate,f),f=f.sibling}function ea(l){for(l=l.child;l!==null;){var f=l;switch(f.tag){case 0:case 11:case 14:case 15:Qs(4,f,f.return),ea(f);break;case 1:Mo(f,f.return);var v=f.stateNode;typeof v.componentWillUnmount=="function"&&Rl(f,f.return,v),ea(f);break;case 27:P0(f.stateNode);case 26:case 5:Mo(f,f.return),ea(f);break;case 22:f.memoizedState===null&&ea(f);break;case 30:ea(f);break;default:ea(f)}l=l.sibling}}function Ao(l,f,v){for(v=v&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var _=f.alternate,C=l,U=f,q=U.flags;switch(U.tag){case 0:case 11:case 15:Ao(C,U,v),fu(4,U);break;case 1:if(Ao(C,U,v),_=U,C=_.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Ve){we(_,_.return,Ve)}if(_=U,C=_.updateQueue,C!==null){var ae=_.stateNode;try{var be=C.shared.hiddenCallbacks;if(be!==null)for(C.shared.hiddenCallbacks=null,C=0;C<be.length;C++)ff(be[C],ae)}catch(Ve){we(_,_.return,Ve)}}v&&q&64&&hu(U),du(U,U.return);break;case 27:Ec(U);case 26:case 5:Ao(C,U,v),v&&_===null&&q&4&&bf(U),du(U,U.return);break;case 12:Ao(C,U,v);break;case 13:Ao(C,U,v),v&&q&4&&Mc(C,U);break;case 22:U.memoizedState===null&&Ao(C,U,v),du(U,U.return);break;case 30:break;default:Ao(C,U,v)}f=f.sibling}}function Xp(l,f){var v=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),l=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(l=f.memoizedState.cachePool.pool),l!==v&&(l!=null&&l.refCount++,v!=null&&sf(v))}function qp(l,f){l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&sf(l))}function bi(l,f,v,_){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Yp(l,f,v,_),f=f.sibling}function Yp(l,f,v,_){var C=f.flags;switch(f.tag){case 0:case 11:case 15:bi(l,f,v,_),C&2048&&fu(9,f);break;case 1:bi(l,f,v,_);break;case 3:bi(l,f,v,_),C&2048&&(l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&sf(l)));break;case 12:if(C&2048){bi(l,f,v,_),l=f.stateNode;try{var U=f.memoizedProps,q=U.id,ae=U.onPostCommit;typeof ae=="function"&&ae(q,f.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(be){we(f,f.return,be)}}else bi(l,f,v,_);break;case 13:bi(l,f,v,_);break;case 23:break;case 22:U=f.stateNode,q=f.alternate,f.memoizedState!==null?U._visibility&2?bi(l,f,v,_):io(l,f):U._visibility&2?bi(l,f,v,_):(U._visibility|=2,Dl(l,f,v,_,(f.subtreeFlags&10256)!==0)),C&2048&&Xp(q,f);break;case 24:bi(l,f,v,_),C&2048&&qp(f.alternate,f);break;default:bi(l,f,v,_)}}function Dl(l,f,v,_,C){for(C=C&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var U=l,q=f,ae=v,be=_,Ve=q.flags;switch(q.tag){case 0:case 11:case 15:Dl(U,q,ae,be,C),fu(8,q);break;case 23:break;case 22:var mt=q.stateNode;q.memoizedState!==null?mt._visibility&2?Dl(U,q,ae,be,C):io(U,q):(mt._visibility|=2,Dl(U,q,ae,be,C)),C&&Ve&2048&&Xp(q.alternate,q);break;case 24:Dl(U,q,ae,be,C),C&&Ve&2048&&qp(q.alternate,q);break;default:Dl(U,q,ae,be,C)}f=f.sibling}}function io(l,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var v=l,_=f,C=_.flags;switch(_.tag){case 22:io(v,_),C&2048&&Xp(_.alternate,_);break;case 24:io(v,_),C&2048&&qp(_.alternate,_);break;default:io(v,_)}f=f.sibling}}var ta=8192;function Ef(l){if(l.subtreeFlags&ta)for(l=l.child;l!==null;)q1(l),l=l.sibling}function q1(l){switch(l.tag){case 26:Ef(l),l.flags&ta&&l.memoizedState!==null&&e8(no,l.memoizedState,l.memoizedProps);break;case 5:Ef(l);break;case 3:case 4:var f=no;no=J1(l.stateNode.containerInfo),Ef(l),no=f;break;case 22:l.memoizedState===null&&(f=l.alternate,f!==null&&f.memoizedState!==null?(f=ta,ta=16777216,Ef(l),ta=f):Ef(l));break;default:Ef(l)}}function Y1(l){var f=l.alternate;if(f!==null&&(l=f.child,l!==null)){f.child=null;do f=l.sibling,l.sibling=null,l=f;while(l!==null)}}function wi(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var _=f[v];xi=_,Co(_,l)}Y1(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)O0(l),l=l.sibling}function O0(l){switch(l.tag){case 0:case 11:case 15:wi(l),l.flags&2048&&Qs(9,l,l.return);break;case 3:wi(l);break;case 12:wi(l);break;case 22:var f=l.stateNode;l.memoizedState!==null&&f._visibility&2&&(l.return===null||l.return.tag!==13)?(f._visibility&=-3,wo(l)):wi(l);break;default:wi(l)}}function wo(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var _=f[v];xi=_,Co(_,l)}Y1(l)}for(l=l.child;l!==null;){switch(f=l,f.tag){case 0:case 11:case 15:Qs(8,f,f.return),wo(f);break;case 22:v=f.stateNode,v._visibility&2&&(v._visibility&=-3,wo(f));break;default:wo(f)}l=l.sibling}}function Co(l,f){for(;xi!==null;){var v=xi;switch(v.tag){case 0:case 11:case 15:Qs(8,v,f);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var _=v.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:sf(v.memoizedState.cache)}if(_=v.child,_!==null)_.return=v,xi=_;else e:for(v=l;xi!==null;){_=xi;var C=_.sibling,U=_.return;if(On(_),_===v){xi=null;break e}if(C!==null){C.return=U,xi=C;break e}xi=U}}}var Wi={getCacheForType:function(l){var f=Vi(cr),v=f.data.get(l);return v===void 0&&(v=l(),f.data.set(l,v)),v}},D0=typeof WeakMap=="function"?WeakMap:Map,oi=0,_n=null,zn=null,Qt=0,wn=0,Fi=null,na=!1,Mf=!1,Tf=!1,Ua=0,Ui=0,ro=0,Ro=0,gu=0,La=0,Qn=0,li=null,nn=null,Hn=!1,vi=0,ts=1/0,Na=null,ia=null,br=0,ns=null,Si=null,ra=0,Ul=0,ed=null,sa=null,Oo=0,vu=null;function Xi(){if((oi&2)!==0&&Qt!==0)return Qt&-Qt;if(H.T!==null){var l=Sn;return l!==0?l:UE()}return Gt()}function Zp(){La===0&&(La=(Qt&536870912)===0||ei?Te():536870912);var l=_i.current;return l!==null&&(l.flags|=32),La}function ps(l,f,v){(l===_n&&(wn===2||wn===9)||l.cancelPendingCommit!==null)&&(wc(l,0),so(l,Qt,La,!1)),ct(l,v),((oi&2)===0||l!==_n)&&(l===_n&&((oi&2)===0&&(Ro|=v),Ui===4&&so(l,Qt,La,!1)),Oc(l))}function Af(l,f,v){if((oi&6)!==0)throw Error(i(327));var _=!v&&(f&124)===0&&(f&l.expiredLanes)===0||St(l,f),C=_?R(l,f):m(l,f,!0),U=_;do{if(C===0){Mf&&!_&&so(l,f,0,!1);break}else{if(v=l.current.alternate,U&&!Ac(v)){C=m(l,f,!1),U=!1;continue}if(C===2){if(U=f,l.errorRecoveryDisabledLanes&U)var q=0;else q=l.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){f=q;e:{var ae=l;C=li;var be=ae.current.memoizedState.isDehydrated;if(be&&(wc(ae,q).flags|=256),q=m(ae,q,!1),q!==2){if(Tf&&!be){ae.errorRecoveryDisabledLanes|=U,Ro|=U,C=4;break e}U=nn,nn=C,U!==null&&(nn===null?nn=U:nn.push.apply(nn,U))}C=q}if(U=!1,C!==2)continue}}if(C===1){wc(l,0),so(l,f,0,!0);break}e:{switch(_=l,U=C,U){case 0:case 1:throw Error(i(345));case 4:if((f&4194048)!==f)break;case 6:so(_,f,La,!na);break e;case 2:nn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((f&62914560)===f&&(C=vi+300-Qe(),10<C)){if(so(_,f,La,!na),wt(_,0,!0)!==0)break e;_.timeoutHandle=qC(td.bind(null,_,v,nn,Na,Hn,f,La,Ro,Qn,na,U,2,-0,0),C);break e}td(_,v,nn,Na,Hn,f,La,Ro,Qn,na,U,0,-0,0)}}break}while(!0);Oc(l)}function td(l,f,v,_,C,U,q,ae,be,Ve,mt,_t,Ze,$e){if(l.timeoutHandle=-1,_t=f.subtreeFlags,(_t&8192||(_t&16785408)===16785408)&&(z0={stylesheets:null,count:0,unsuspend:JI},q1(f),_t=t8(),_t!==null)){l.cancelPendingCommit=_t(At.bind(null,l,f,U,v,_,C,q,ae,be,mt,1,Ze,$e)),so(l,U,q,!Ve);return}At(l,f,U,v,_,C,q,ae,be)}function Ac(l){for(var f=l;;){var v=f.tag;if((v===0||v===11||v===15)&&f.flags&16384&&(v=f.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var _=0;_<v.length;_++){var C=v[_],U=C.getSnapshot;C=C.value;try{if(!Ts(U(),C))return!1}catch{return!1}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function so(l,f,v,_){f&=~gu,f&=~Ro,l.suspendedLanes|=f,l.pingedLanes&=~f,_&&(l.warmLanes|=f),_=l.expirationTimes;for(var C=f;0<C;){var U=31-tt(C),q=1<<U;_[U]=-1,C&=~q}v!==0&&je(l,v,f)}function Do(){return(oi&6)===0?(U0(0),!1):!0}function yu(){if(zn!==null){if(wn===0)var l=zn.return;else l=zn,xl=uc=null,d0(l),nu=null,qh=0,l=zn;for(;l!==null;)xf(l.alternate,l),l=l.return;zn=null}}function wc(l,f){var v=l.timeoutHandle;v!==-1&&(l.timeoutHandle=-1,II(v)),v=l.cancelPendingCommit,v!==null&&(l.cancelPendingCommit=null,v()),yu(),_n=l,zn=v=$i(l.current,null),Qt=f,wn=0,Fi=null,na=!1,Mf=St(l,f),Tf=!1,Qn=La=gu=Ro=ro=Ui=0,nn=li=null,Hn=!1,(f&8)!==0&&(f|=f&32);var _=l.entangledLanes;if(_!==0)for(l=l.entanglements,_&=f;0<_;){var C=31-tt(_),U=1<<C;f|=l[C],_&=~U}return Ua=f,Oh(),v}function Kp(l,f){En=null,H.H=Xh,f===Hh||f===Ka?(f=l0(),wn=3):f===o0?(f=l0(),wn=4):wn=f===X1?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Fi=f,zn===null&&(Ui=1,kp(l,Hr(f,l.current)))}function wf(){var l=H.H;return H.H=Xh,l===null?Xh:l}function $p(){var l=H.A;return H.A=Wi,l}function d(){Ui=4,na||(Qt&4194048)!==Qt&&_i.current!==null||(Mf=!0),(ro&134217727)===0&&(Ro&134217727)===0||_n===null||so(_n,Qt,La,!1)}function m(l,f,v){var _=oi;oi|=2;var C=wf(),U=$p();(_n!==l||Qt!==f)&&(Na=null,wc(l,f)),f=!1;var q=Ui;e:do try{if(wn!==0&&zn!==null){var ae=zn,be=Fi;switch(wn){case 8:yu(),q=6;break e;case 3:case 2:case 9:case 6:_i.current===null&&(f=!0);var Ve=wn;if(wn=0,Fi=null,Me(l,ae,be,Ve),v&&Mf){q=0;break e}break;default:Ve=wn,wn=0,Fi=null,Me(l,ae,be,Ve)}}E(),q=Ui;break}catch(mt){Kp(l,mt)}while(!0);return f&&l.shellSuspendCounter++,xl=uc=null,oi=_,H.H=C,H.A=U,zn===null&&(_n=null,Qt=0,Oh()),q}function E(){for(;zn!==null;)F(zn)}function R(l,f){var v=oi;oi|=2;var _=wf(),C=$p();_n!==l||Qt!==f?(Na=null,ts=Qe()+500,wc(l,f)):Mf=St(l,f);e:do try{if(wn!==0&&zn!==null){f=zn;var U=Fi;t:switch(wn){case 1:wn=0,Fi=null,Me(l,f,U,1);break;case 2:case 9:if(Ap(U)){wn=0,Fi=null,ce(f);break}f=function(){wn!==2&&wn!==9||_n!==l||(wn=7),Oc(l)},U.then(f,f);break e;case 3:wn=7;break e;case 4:wn=5;break e;case 7:Ap(U)?(wn=0,Fi=null,ce(f)):(wn=0,Fi=null,Me(l,f,U,7));break;case 5:var q=null;switch(zn.tag){case 26:q=zn.memoizedState;case 5:case 27:var ae=zn;if(!q||s3(q)){wn=0,Fi=null;var be=ae.sibling;if(be!==null)zn=be;else{var Ve=ae.return;Ve!==null?(zn=Ve,Ne(Ve)):zn=null}break t}}wn=0,Fi=null,Me(l,f,U,5);break;case 6:wn=0,Fi=null,Me(l,f,U,6);break;case 8:yu(),Ui=6;break e;default:throw Error(i(462))}}N();break}catch(mt){Kp(l,mt)}while(!0);return xl=uc=null,H.H=_,H.A=C,oi=v,zn!==null?0:(_n=null,Qt=0,Oh(),Ui)}function N(){for(;zn!==null&&!lt();)F(zn)}function F(l){var f=cu(l.alternate,l,Ua);l.memoizedProps=l.pendingProps,f===null?Ne(l):zn=f}function ce(l){var f=l,v=f.alternate;switch(f.tag){case 15:case 0:f=Ks(v,f,f.pendingProps,f.type,void 0,Qt);break;case 11:f=Ks(v,f,f.pendingProps,f.type.render,f.ref,Qt);break;case 5:d0(f);default:xf(v,f),f=zn=e0(f,Ua),f=cu(v,f,Ua)}l.memoizedProps=l.pendingProps,f===null?Ne(l):zn=f}function Me(l,f,v,_){xl=uc=null,d0(f),nu=null,qh=0;var C=f.return;try{if(OE(l,C,f,v,Qt)){Ui=1,kp(l,Hr(v,l.current)),zn=null;return}}catch(U){if(C!==null)throw zn=C,U;Ui=1,kp(l,Hr(v,l.current)),zn=null;return}f.flags&32768?(ei||_===1?l=!0:Mf||(Qt&536870912)!==0?l=!1:(na=l=!0,(_===2||_===9||_===3||_===6)&&(_=_i.current,_!==null&&_.tag===13&&(_.flags|=16384))),pt(f,l)):Ne(f)}function Ne(l){var f=l;do{if((f.flags&32768)!==0){pt(f,na);return}l=f.return;var v=R0(f.alternate,f,Ua);if(v!==null){zn=v;return}if(f=f.sibling,f!==null){zn=f;return}zn=f=l}while(f!==null);Ui===0&&(Ui=5)}function pt(l,f){do{var v=_f(l.alternate,l);if(v!==null){v.flags&=32767,zn=v;return}if(v=l.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!f&&(l=l.sibling,l!==null)){zn=l;return}zn=l=v}while(l!==null);Ui=6,zn=null}function At(l,f,v,_,C,U,q,ae,be){l.cancelPendingCommit=null;do Cc();while(br!==0);if((oi&6)!==0)throw Error(i(327));if(f!==null){if(f===l.current)throw Error(i(177));if(U=f.lanes|f.childLanes,U|=vp,xt(l,v,U,q,ae,be),l===_n&&(zn=_n=null,Qt=0),Si=f,ns=l,ra=v,Ul=U,ed=C,sa=_,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,ti($,function(){return Rc(),null})):(l.callbackNode=null,l.callbackPriority=0),_=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||_){_=H.T,H.T=null,C=Q.p,Q.p=2,q=oi,oi|=4;try{xr(l,f,v)}finally{oi=q,Q.p=C,H.T=_}}br=1,Bt(),Ft(),xn()}}function Bt(){if(br===1){br=0;var l=ns,f=Si,v=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||v){v=H.T,H.T=null;var _=Q.p;Q.p=2;var C=oi;oi|=4;try{Wp(f,l);var U=HE,q=qg(l.containerInfo),ae=U.focusedElem,be=U.selectionRange;if(q!==ae&&ae&&ae.ownerDocument&&Xg(ae.ownerDocument.documentElement,ae)){if(be!==null&&wh(ae)){var Ve=be.start,mt=be.end;if(mt===void 0&&(mt=Ve),"selectionStart"in ae)ae.selectionStart=Ve,ae.selectionEnd=Math.min(mt,ae.value.length);else{var _t=ae.ownerDocument||document,Ze=_t&&_t.defaultView||window;if(Ze.getSelection){var $e=Ze.getSelection(),pn=ae.textContent.length,sn=Math.min(be.start,pn),Ri=be.end===void 0?sn:Math.min(be.end,pn);!$e.extend&&sn>Ri&&(q=Ri,Ri=sn,sn=q);var Ue=Wg(ae,sn),Ce=Wg(ae,Ri);if(Ue&&Ce&&($e.rangeCount!==1||$e.anchorNode!==Ue.node||$e.anchorOffset!==Ue.offset||$e.focusNode!==Ce.node||$e.focusOffset!==Ce.offset)){var Ie=_t.createRange();Ie.setStart(Ue.node,Ue.offset),$e.removeAllRanges(),sn>Ri?($e.addRange(Ie),$e.extend(Ce.node,Ce.offset)):(Ie.setEnd(Ce.node,Ce.offset),$e.addRange(Ie))}}}}for(_t=[],$e=ae;$e=$e.parentNode;)$e.nodeType===1&&_t.push({element:$e,left:$e.scrollLeft,top:$e.scrollTop});for(typeof ae.focus=="function"&&ae.focus(),ae=0;ae<_t.length;ae++){var vt=_t[ae];vt.element.scrollLeft=vt.left,vt.element.scrollTop=vt.top}}r_=!!FE,HE=FE=null}finally{oi=C,Q.p=_,H.T=v}}l.current=f,br=2}}function Ft(){if(br===2){br=0;var l=ns,f=Si,v=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||v){v=H.T,H.T=null;var _=Q.p;Q.p=2;var C=oi;oi|=4;try{Ol(l,f.alternate,f)}finally{oi=C,Q.p=_,H.T=v}}br=3}}function xn(){if(br===4||br===3){br=0,ze();var l=ns,f=Si,v=ra,_=sa;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?br=5:(br=0,Si=ns=null,aa(l,l.pendingLanes));var C=l.pendingLanes;if(C===0&&(ia=null),Dt(v),f=f.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(Le,f,void 0,(f.current.flags&128)===128)}catch{}if(_!==null){f=H.T,C=Q.p,Q.p=2,H.T=null;try{for(var U=l.onRecoverableError,q=0;q<_.length;q++){var ae=_[q];U(ae.value,{componentStack:ae.stack})}}finally{H.T=f,Q.p=C}}(ra&3)!==0&&Cc(),Oc(l),C=l.pendingLanes,(v&4194090)!==0&&(C&42)!==0?l===vu?Oo++:(Oo=0,vu=l):Oo=0,U0(0)}}function aa(l,f){(l.pooledCacheLanes&=f)===0&&(f=l.pooledCache,f!=null&&(l.pooledCache=null,sf(f)))}function Cc(l){return Bt(),Ft(),xn(),Rc()}function Rc(){if(br!==5)return!1;var l=ns,f=Ul;Ul=0;var v=Dt(ra),_=H.T,C=Q.p;try{Q.p=32>v?32:v,H.T=null,v=ed,ed=null;var U=ns,q=ra;if(br=0,Si=ns=null,ra=0,(oi&6)!==0)throw Error(i(331));var ae=oi;if(oi|=4,O0(U.current),Yp(U,U.current,q,v),oi=ae,U0(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(Le,U)}catch{}return!0}finally{Q.p=C,H.T=_,aa(l,f)}}function Ye(l,f,v){f=Hr(v,f),f=Gp(l.stateNode,f,2),l=El(l,f,2),l!==null&&(ct(l,2),Oc(l))}function we(l,f,v){if(l.tag===3)Ye(l,l,v);else for(;f!==null;){if(f.tag===3){Ye(f,l,v);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(ia===null||!ia.has(_))){l=Hr(v,l),v=W1(2),_=El(f,v,2),_!==null&&(Vp(v,_,f,l),ct(_,2),Oc(_));break}}f=f.return}}function Je(l,f,v){var _=l.pingCache;if(_===null){_=l.pingCache=new D0;var C=new Set;_.set(f,C)}else C=_.get(f),C===void 0&&(C=new Set,_.set(f,C));C.has(v)||(Tf=!0,C.add(v),l=Tt.bind(null,l,f,v),f.then(l,l))}function Tt(l,f,v){var _=l.pingCache;_!==null&&_.delete(f),l.pingedLanes|=l.suspendedLanes&v,l.warmLanes&=~v,_n===l&&(Qt&v)===v&&(Ui===4||Ui===3&&(Qt&62914560)===Qt&&300>Qe()-vi?(oi&2)===0&&wc(l,0):gu|=v,Qn===Qt&&(Qn=0)),Oc(l)}function Yt(l,f){f===0&&(f=Oe()),l=yl(l,f),l!==null&&(ct(l,f),Oc(l))}function Li(l){var f=l.memoizedState,v=0;f!==null&&(v=f.retryLane),Yt(l,v)}function hn(l,f){var v=0;switch(l.tag){case 13:var _=l.stateNode,C=l.memoizedState;C!==null&&(v=C.retryLane);break;case 19:_=l.stateNode;break;case 22:_=l.stateNode._retryCache;break;default:throw Error(i(314))}_!==null&&_.delete(f),Yt(l,v)}function ti(l,f){return He(l,f)}var tr=null,Fn=null,Uo=!1,Qp=!1,DE=!1,nd=0;function Oc(l){l!==Fn&&l.next===null&&(Fn===null?tr=Fn=l:Fn=Fn.next=l),Qp=!0,Uo||(Uo=!0,wI())}function U0(l,f){if(!DE&&Qp){DE=!0;do for(var v=!1,_=tr;_!==null;){if(l!==0){var C=_.pendingLanes;if(C===0)var U=0;else{var q=_.suspendedLanes,ae=_.pingedLanes;U=(1<<31-tt(42|l)+1)-1,U&=C&~(q&~ae),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(v=!0,BC(_,U))}else U=Qt,U=wt(_,_===_n?U:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(U&3)===0||St(_,U)||(v=!0,BC(_,U));_=_.next}while(v);DE=!1}}function AI(){NC()}function NC(){Qp=Uo=!1;var l=0;nd!==0&&(PI()&&(l=nd),nd=0);for(var f=Qe(),v=null,_=tr;_!==null;){var C=_.next,U=PC(_,f);U===0?(_.next=null,v===null?tr=C:v.next=C,C===null&&(Fn=v)):(v=_,(l!==0||(U&3)!==0)&&(Qp=!0)),_=C}U0(l)}function PC(l,f){for(var v=l.suspendedLanes,_=l.pingedLanes,C=l.expirationTimes,U=l.pendingLanes&-62914561;0<U;){var q=31-tt(U),ae=1<<q,be=C[q];be===-1?((ae&v)===0||(ae&_)!==0)&&(C[q]=Ht(ae,f)):be<=f&&(l.expiredLanes|=ae),U&=~ae}if(f=_n,v=Qt,v=wt(l,l===f?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),_=l.callbackNode,v===0||l===f&&(wn===2||wn===9)||l.cancelPendingCommit!==null)return _!==null&&_!==null&&oe(_),l.callbackNode=null,l.callbackPriority=0;if((v&3)===0||St(l,v)){if(f=v&-v,f===l.callbackPriority)return f;switch(_!==null&&oe(_),Dt(v)){case 2:case 8:v=ke;break;case 32:v=$;break;case 268435456:v=fe;break;default:v=$}return _=IC.bind(null,l),v=He(v,_),l.callbackPriority=f,l.callbackNode=v,f}return _!==null&&_!==null&&oe(_),l.callbackPriority=2,l.callbackNode=null,2}function IC(l,f){if(br!==0&&br!==5)return l.callbackNode=null,l.callbackPriority=0,null;var v=l.callbackNode;if(Cc()&&l.callbackNode!==v)return null;var _=Qt;return _=wt(l,l===_n?_:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),_===0?null:(Af(l,_,f),PC(l,Qe()),l.callbackNode!=null&&l.callbackNode===v?IC.bind(null,l):null)}function BC(l,f){if(Cc())return null;Af(l,f,!0)}function wI(){BI(function(){(oi&6)!==0?He(st,AI):NC()})}function UE(){return nd===0&&(nd=Te()),nd}function zC(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:mo(""+l)}function FC(l,f){var v=f.ownerDocument.createElement("input");return v.name=f.name,v.value=f.value,l.id&&v.setAttribute("form",l.id),f.parentNode.insertBefore(v,f),l=new FormData(l),v.parentNode.removeChild(v),l}function CI(l,f,v,_,C){if(f==="submit"&&v&&v.stateNode===C){var U=zC((C[mn]||null).action),q=_.submitter;q&&(f=(f=q[mn]||null)?zC(f.formAction):q.getAttribute("formAction"),f!==null&&(U=f,q=null));var ae=new os("action","action",null,_,C);l.push({event:ae,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(nd!==0){var be=q?FC(C,q):new FormData(C);T0(v,{pending:!0,data:be,method:C.method,action:U},null,be)}}else typeof U=="function"&&(ae.preventDefault(),be=q?FC(C,q):new FormData(C),T0(v,{pending:!0,data:be,method:C.method,action:U},U,be))},currentTarget:C}]})}}for(var LE=0;LE<Rh.length;LE++){var NE=Rh[LE],RI=NE.toLowerCase(),OI=NE[0].toUpperCase()+NE.slice(1);Cr(RI,"on"+OI)}Cr(ls,"onAnimationEnd"),Cr(Kg,"onAnimationIteration"),Cr(ws,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(i1,"onTransitionRun"),Cr(gl,"onTransitionStart"),Cr(Ju,"onTransitionCancel"),Cr(vl,"onTransitionEnd"),me("onMouseEnter",["mouseout","mouseover"]),me("onMouseLeave",["mouseout","mouseover"]),me("onPointerEnter",["pointerout","pointerover"]),me("onPointerLeave",["pointerout","pointerover"]),Z("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Z("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Z("onBeforeInput",["compositionend","keypress","textInput","paste"]),Z("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Z("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Z("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var L0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(L0));function HC(l,f){f=(f&4)!==0;for(var v=0;v<l.length;v++){var _=l[v],C=_.event;_=_.listeners;e:{var U=void 0;if(f)for(var q=_.length-1;0<=q;q--){var ae=_[q],be=ae.instance,Ve=ae.currentTarget;if(ae=ae.listener,be!==U&&C.isPropagationStopped())break e;U=ae,C.currentTarget=Ve;try{U(C)}catch(mt){ru(mt)}C.currentTarget=null,U=be}else for(q=0;q<_.length;q++){if(ae=_[q],be=ae.instance,Ve=ae.currentTarget,ae=ae.listener,be!==U&&C.isPropagationStopped())break e;U=ae,C.currentTarget=Ve;try{U(C)}catch(mt){ru(mt)}C.currentTarget=null,U=be}}}}function Wn(l,f){var v=f[hi];v===void 0&&(v=f[hi]=new Set);var _=l+"__bubble";v.has(_)||(kC(f,l,2,!1),v.add(_))}function PE(l,f,v){var _=0;f&&(_|=4),kC(v,l,_,f)}var Z1="_reactListening"+Math.random().toString(36).slice(2);function IE(l){if(!l[Z1]){l[Z1]=!0,rt.forEach(function(v){v!=="selectionchange"&&(DI.has(v)||PE(v,!1,l),PE(v,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[Z1]||(f[Z1]=!0,PE("selectionchange",!1,f))}}function kC(l,f,v,_){switch(f3(f)){case 2:var C=r8;break;case 8:C=s8;break;default:C=KE}v=C.bind(null,f,v,l),C=void 0,!al||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(C=!0),_?C!==void 0?l.addEventListener(f,v,{capture:!0,passive:C}):l.addEventListener(f,v,!0):C!==void 0?l.addEventListener(f,v,{passive:C}):l.addEventListener(f,v,!1)}function BE(l,f,v,_,C){var U=_;if((f&1)===0&&(f&2)===0&&_!==null)e:for(;;){if(_===null)return;var q=_.tag;if(q===3||q===4){var ae=_.stateNode.containerInfo;if(ae===C)break;if(q===4)for(q=_.return;q!==null;){var be=q.tag;if((be===3||be===4)&&q.stateNode.containerInfo===C)return;q=q.return}for(;ae!==null;){if(q=K(ae),q===null)return;if(be=q.tag,be===5||be===6||be===26||be===27){_=U=q;continue e}ae=ae.parentNode}}_=_.return}Yc(function(){var Ve=U,mt=qa(v),_t=[];e:{var Ze=gp.get(l);if(Ze!==void 0){var $e=os,pn=l;switch(l){case"keypress":if(_a(v)===0)break e;case"keydown":case"keyup":$e=zg;break;case"focusin":pn="focus",$e=fl;break;case"focusout":pn="blur",$e=fl;break;case"beforeblur":case"afterblur":$e=fl;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=$c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=Ig;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=Hg;break;case ls:case Kg:case ws:$e=op;break;case vl:$e=hl;break;case"scroll":case"scrollend":$e=Zu;break;case"wheel":$e=xE;break;case"copy":case"cut":case"paste":$e=Es;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=lp;break;case"toggle":case"beforetoggle":$e=ec}var sn=(f&4)!==0,Ri=!sn&&(l==="scroll"||l==="scrollend"),Ue=sn?Ze!==null?Ze+"Capture":null:Ze;sn=[];for(var Ce=Ve,Ie;Ce!==null;){var vt=Ce;if(Ie=vt.stateNode,vt=vt.tag,vt!==5&&vt!==26&&vt!==27||Ie===null||Ue===null||(vt=sl(Ce,Ue),vt!=null&&sn.push(N0(Ce,vt,Ie))),Ri)break;Ce=Ce.return}0<sn.length&&(Ze=new $e(Ze,pn,null,v,mt),_t.push({event:Ze,listeners:sn}))}}if((f&7)===0){e:{if(Ze=l==="mouseover"||l==="pointerover",$e=l==="mouseout"||l==="pointerout",Ze&&v!==Xa&&(pn=v.relatedTarget||v.fromElement)&&(K(pn)||pn[bn]))break e;if(($e||Ze)&&(Ze=mt.window===mt?mt:(Ze=mt.ownerDocument)?Ze.defaultView||Ze.parentWindow:window,$e?(pn=v.relatedTarget||v.toElement,$e=Ve,pn=pn?K(pn):null,pn!==null&&(Ri=s(pn),sn=pn.tag,pn!==Ri||sn!==5&&sn!==27&&sn!==6)&&(pn=null)):($e=null,pn=Ve),$e!==pn)){if(sn=$c,vt="onMouseLeave",Ue="onMouseEnter",Ce="mouse",(l==="pointerout"||l==="pointerover")&&(sn=lp,vt="onPointerLeave",Ue="onPointerEnter",Ce="pointer"),Ri=$e==null?Ze:Ae($e),Ie=pn==null?Ze:Ae(pn),Ze=new sn(vt,Ce+"leave",$e,v,mt),Ze.target=Ri,Ze.relatedTarget=Ie,vt=null,K(mt)===Ve&&(sn=new sn(Ue,Ce+"enter",pn,v,mt),sn.target=Ie,sn.relatedTarget=Ri,vt=sn),Ri=vt,$e&&pn)t:{for(sn=$e,Ue=pn,Ce=0,Ie=sn;Ie;Ie=Jp(Ie))Ce++;for(Ie=0,vt=Ue;vt;vt=Jp(vt))Ie++;for(;0<Ce-Ie;)sn=Jp(sn),Ce--;for(;0<Ie-Ce;)Ue=Jp(Ue),Ie--;for(;Ce--;){if(sn===Ue||Ue!==null&&sn===Ue.alternate)break t;sn=Jp(sn),Ue=Jp(Ue)}sn=null}else sn=null;$e!==null&&GC(_t,Ze,$e,sn,!1),pn!==null&&Ri!==null&&GC(_t,Ri,pn,sn,!0)}}e:{if(Ze=Ve?Ae(Ve):window,$e=Ze.nodeName&&Ze.nodeName.toLowerCase(),$e==="select"||$e==="input"&&Ze.type==="file")var Wt=up;else if(jg(Ze))if(fp)Wt=ic;else{Wt=e1;var kn=bE}else $e=Ze.nodeName,!$e||$e.toLowerCase()!=="input"||Ze.type!=="checkbox"&&Ze.type!=="radio"?Ve&&Ql(Ve.elementType)&&(Wt=up):Wt=Ah;if(Wt&&(Wt=Wt(l,Ve))){Ms(_t,Wt,v,mt);break e}kn&&kn(l,Ze,Ve),l==="focusout"&&Ve&&Ze.type==="number"&&Ve.memoizedProps.value!=null&&si(Ze,"number",Ze.value)}switch(kn=Ve?Ae(Ve):window,l){case"focusin":(jg(kn)||kn.contentEditable==="true")&&(pl=kn,dp=Ve,Ch=null);break;case"focusout":Ch=dp=pl=null;break;case"mousedown":pp=!0;break;case"contextmenu":case"mouseup":case"dragend":pp=!1,Zg(_t,v,mt);break;case"selectionchange":if(Yg)break;case"keydown":case"keyup":Zg(_t,v,mt)}var Kt;if(xh)e:{switch(l){case"compositionstart":var cn="onCompositionStart";break e;case"compositionend":cn="onCompositionEnd";break e;case"compositionupdate":cn="onCompositionUpdate";break e}cn=void 0}else nc?Eh(l,v)&&(cn="onCompositionEnd"):l==="keydown"&&v.keyCode===229&&(cn="onCompositionStart");cn&&(Sh&&v.locale!=="ko"&&(nc||cn!=="onCompositionStart"?cn==="onCompositionEnd"&&nc&&(Kt=Yu()):(Zi=mt,Zc="value"in Zi?Zi.value:Zi.textContent,nc=!0)),kn=K1(Ve,cn),0<kn.length&&(cn=new Ws(cn,l,null,v,mt),_t.push({event:cn,listeners:kn}),Kt?cn.data=Kt:(Kt=Gg(v),Kt!==null&&(cn.data=Kt)))),(Kt=bh?Mh(l,v):Vg(l,v))&&(cn=K1(Ve,"onBeforeInput"),0<cn.length&&(kn=new Ws("onBeforeInput","beforeinput",null,v,mt),_t.push({event:kn,listeners:cn}),kn.data=Kt)),CI(_t,l,Ve,v,mt)}HC(_t,f)})}function N0(l,f,v){return{instance:l,listener:f,currentTarget:v}}function K1(l,f){for(var v=f+"Capture",_=[];l!==null;){var C=l,U=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||U===null||(C=sl(l,v),C!=null&&_.unshift(N0(l,C,U)),C=sl(l,f),C!=null&&_.push(N0(l,C,U))),l.tag===3)return _;l=l.return}return[]}function Jp(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function GC(l,f,v,_,C){for(var U=f._reactName,q=[];v!==null&&v!==_;){var ae=v,be=ae.alternate,Ve=ae.stateNode;if(ae=ae.tag,be!==null&&be===_)break;ae!==5&&ae!==26&&ae!==27||Ve===null||(be=Ve,C?(Ve=sl(v,U),Ve!=null&&q.unshift(N0(v,Ve,be))):C||(Ve=sl(v,U),Ve!=null&&q.push(N0(v,Ve,be)))),v=v.return}q.length!==0&&l.push({event:f,listeners:q})}var UI=/\r\n?/g,LI=/\u0000|\uFFFD/g;function VC(l){return(typeof l=="string"?l:""+l).replace(UI,`
`).replace(LI,"")}function jC(l,f){return f=VC(f),VC(l)===f}function $1(){}function Ci(l,f,v,_,C,U){switch(v){case"children":typeof _=="string"?f==="body"||f==="textarea"&&_===""||Ni(l,_):(typeof _=="number"||typeof _=="bigint")&&f!=="body"&&Ni(l,""+_);break;case"className":ot(l,"class",_);break;case"tabIndex":ot(l,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":ot(l,v,_);break;case"style":$l(l,_,U);break;case"data":if(f!=="object"){ot(l,"data",_);break}case"src":case"href":if(_===""&&(f!=="a"||v!=="href")){l.removeAttribute(v);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){l.removeAttribute(v);break}_=mo(""+_),l.setAttribute(v,_);break;case"action":case"formAction":if(typeof _=="function"){l.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(v==="formAction"?(f!=="input"&&Ci(l,f,"name",C.name,C,null),Ci(l,f,"formEncType",C.formEncType,C,null),Ci(l,f,"formMethod",C.formMethod,C,null),Ci(l,f,"formTarget",C.formTarget,C,null)):(Ci(l,f,"encType",C.encType,C,null),Ci(l,f,"method",C.method,C,null),Ci(l,f,"target",C.target,C,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){l.removeAttribute(v);break}_=mo(""+_),l.setAttribute(v,_);break;case"onClick":_!=null&&(l.onclick=$1);break;case"onScroll":_!=null&&Wn("scroll",l);break;case"onScrollEnd":_!=null&&Wn("scrollend",l);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(i(61));if(v=_.__html,v!=null){if(C.children!=null)throw Error(i(60));l.innerHTML=v}}break;case"multiple":l.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":l.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){l.removeAttribute("xlink:href");break}v=mo(""+_),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?l.setAttribute(v,""+_):l.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?l.setAttribute(v,""):l.removeAttribute(v);break;case"capture":case"download":_===!0?l.setAttribute(v,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?l.setAttribute(v,_):l.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?l.setAttribute(v,_):l.removeAttribute(v);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?l.removeAttribute(v):l.setAttribute(v,_);break;case"popover":Wn("beforetoggle",l),Wn("toggle",l),it(l,"popover",_);break;case"xlinkActuate":dt(l,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":dt(l,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":dt(l,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":dt(l,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":dt(l,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":dt(l,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":dt(l,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":dt(l,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":dt(l,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":it(l,"is",_);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=nl.get(v)||v,it(l,v,_))}}function zE(l,f,v,_,C,U){switch(v){case"style":$l(l,_,U);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(i(61));if(v=_.__html,v!=null){if(C.children!=null)throw Error(i(60));l.innerHTML=v}}break;case"children":typeof _=="string"?Ni(l,_):(typeof _=="number"||typeof _=="bigint")&&Ni(l,""+_);break;case"onScroll":_!=null&&Wn("scroll",l);break;case"onScrollEnd":_!=null&&Wn("scrollend",l);break;case"onClick":_!=null&&(l.onclick=$1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bt.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(C=v.endsWith("Capture"),f=v.slice(2,C?v.length-7:void 0),U=l[mn]||null,U=U!=null?U[v]:null,typeof U=="function"&&l.removeEventListener(f,U,C),typeof _=="function")){typeof U!="function"&&U!==null&&(v in l?l[v]=null:l.hasAttribute(v)&&l.removeAttribute(v)),l.addEventListener(f,_,C);break e}v in l?l[v]=_:_===!0?l.setAttribute(v,""):it(l,v,_)}}}function ms(l,f,v){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Wn("error",l),Wn("load",l);var _=!1,C=!1,U;for(U in v)if(v.hasOwnProperty(U)){var q=v[U];if(q!=null)switch(U){case"src":_=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:Ci(l,f,U,q,v,null)}}C&&Ci(l,f,"srcSet",v.srcSet,v,null),_&&Ci(l,f,"src",v.src,v,null);return;case"input":Wn("invalid",l);var ae=U=q=C=null,be=null,Ve=null;for(_ in v)if(v.hasOwnProperty(_)){var mt=v[_];if(mt!=null)switch(_){case"name":C=mt;break;case"type":q=mt;break;case"checked":be=mt;break;case"defaultChecked":Ve=mt;break;case"value":U=mt;break;case"defaultValue":ae=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(i(137,f));break;default:Ci(l,f,_,mt,v,null)}}ii(l,U,ae,be,Ve,q,C,!1),dn(l);return;case"select":Wn("invalid",l),_=q=U=null;for(C in v)if(v.hasOwnProperty(C)&&(ae=v[C],ae!=null))switch(C){case"value":U=ae;break;case"defaultValue":q=ae;break;case"multiple":_=ae;default:Ci(l,f,C,ae,v,null)}f=U,v=q,l.multiple=!!_,f!=null?yn(l,!!_,f,!1):v!=null&&yn(l,!!_,v,!0);return;case"textarea":Wn("invalid",l),U=C=_=null;for(q in v)if(v.hasOwnProperty(q)&&(ae=v[q],ae!=null))switch(q){case"value":_=ae;break;case"defaultValue":C=ae;break;case"children":U=ae;break;case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(91));break;default:Ci(l,f,q,ae,v,null)}ya(l,_,C,U),dn(l);return;case"option":for(be in v)if(v.hasOwnProperty(be)&&(_=v[be],_!=null))switch(be){case"selected":l.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Ci(l,f,be,_,v,null)}return;case"dialog":Wn("beforetoggle",l),Wn("toggle",l),Wn("cancel",l),Wn("close",l);break;case"iframe":case"object":Wn("load",l);break;case"video":case"audio":for(_=0;_<L0.length;_++)Wn(L0[_],l);break;case"image":Wn("error",l),Wn("load",l);break;case"details":Wn("toggle",l);break;case"embed":case"source":case"link":Wn("error",l),Wn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ve in v)if(v.hasOwnProperty(Ve)&&(_=v[Ve],_!=null))switch(Ve){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:Ci(l,f,Ve,_,v,null)}return;default:if(Ql(f)){for(mt in v)v.hasOwnProperty(mt)&&(_=v[mt],_!==void 0&&zE(l,f,mt,_,v,void 0));return}}for(ae in v)v.hasOwnProperty(ae)&&(_=v[ae],_!=null&&Ci(l,f,ae,_,v,null))}function NI(l,f,v,_){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,U=null,q=null,ae=null,be=null,Ve=null,mt=null;for($e in v){var _t=v[$e];if(v.hasOwnProperty($e)&&_t!=null)switch($e){case"checked":break;case"value":break;case"defaultValue":be=_t;default:_.hasOwnProperty($e)||Ci(l,f,$e,null,_,_t)}}for(var Ze in _){var $e=_[Ze];if(_t=v[Ze],_.hasOwnProperty(Ze)&&($e!=null||_t!=null))switch(Ze){case"type":U=$e;break;case"name":C=$e;break;case"checked":Ve=$e;break;case"defaultChecked":mt=$e;break;case"value":q=$e;break;case"defaultValue":ae=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(i(137,f));break;default:$e!==_t&&Ci(l,f,Ze,$e,_,_t)}}kt(l,q,ae,be,Ve,mt,U,C);return;case"select":$e=q=ae=Ze=null;for(U in v)if(be=v[U],v.hasOwnProperty(U)&&be!=null)switch(U){case"value":break;case"multiple":$e=be;default:_.hasOwnProperty(U)||Ci(l,f,U,null,_,be)}for(C in _)if(U=_[C],be=v[C],_.hasOwnProperty(C)&&(U!=null||be!=null))switch(C){case"value":Ze=U;break;case"defaultValue":ae=U;break;case"multiple":q=U;default:U!==be&&Ci(l,f,C,U,_,be)}f=ae,v=q,_=$e,Ze!=null?yn(l,!!v,Ze,!1):!!_!=!!v&&(f!=null?yn(l,!!v,f,!0):yn(l,!!v,v?[]:"",!1));return;case"textarea":$e=Ze=null;for(ae in v)if(C=v[ae],v.hasOwnProperty(ae)&&C!=null&&!_.hasOwnProperty(ae))switch(ae){case"value":break;case"children":break;default:Ci(l,f,ae,null,_,C)}for(q in _)if(C=_[q],U=v[q],_.hasOwnProperty(q)&&(C!=null||U!=null))switch(q){case"value":Ze=C;break;case"defaultValue":$e=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:C!==U&&Ci(l,f,q,C,_,U)}di(l,Ze,$e);return;case"option":for(var pn in v)if(Ze=v[pn],v.hasOwnProperty(pn)&&Ze!=null&&!_.hasOwnProperty(pn))switch(pn){case"selected":l.selected=!1;break;default:Ci(l,f,pn,null,_,Ze)}for(be in _)if(Ze=_[be],$e=v[be],_.hasOwnProperty(be)&&Ze!==$e&&(Ze!=null||$e!=null))switch(be){case"selected":l.selected=Ze&&typeof Ze!="function"&&typeof Ze!="symbol";break;default:Ci(l,f,be,Ze,_,$e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var sn in v)Ze=v[sn],v.hasOwnProperty(sn)&&Ze!=null&&!_.hasOwnProperty(sn)&&Ci(l,f,sn,null,_,Ze);for(Ve in _)if(Ze=_[Ve],$e=v[Ve],_.hasOwnProperty(Ve)&&Ze!==$e&&(Ze!=null||$e!=null))switch(Ve){case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(i(137,f));break;default:Ci(l,f,Ve,Ze,_,$e)}return;default:if(Ql(f)){for(var Ri in v)Ze=v[Ri],v.hasOwnProperty(Ri)&&Ze!==void 0&&!_.hasOwnProperty(Ri)&&zE(l,f,Ri,void 0,_,Ze);for(mt in _)Ze=_[mt],$e=v[mt],!_.hasOwnProperty(mt)||Ze===$e||Ze===void 0&&$e===void 0||zE(l,f,mt,Ze,_,$e);return}}for(var Ue in v)Ze=v[Ue],v.hasOwnProperty(Ue)&&Ze!=null&&!_.hasOwnProperty(Ue)&&Ci(l,f,Ue,null,_,Ze);for(_t in _)Ze=_[_t],$e=v[_t],!_.hasOwnProperty(_t)||Ze===$e||Ze==null&&$e==null||Ci(l,f,_t,Ze,_,$e)}var FE=null,HE=null;function Q1(l){return l.nodeType===9?l:l.ownerDocument}function WC(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function XC(l,f){if(l===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&f==="foreignObject"?0:l}function kE(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var GE=null;function PI(){var l=window.event;return l&&l.type==="popstate"?l===GE?!1:(GE=l,!0):(GE=null,!1)}var qC=typeof setTimeout=="function"?setTimeout:void 0,II=typeof clearTimeout=="function"?clearTimeout:void 0,YC=typeof Promise=="function"?Promise:void 0,BI=typeof queueMicrotask=="function"?queueMicrotask:typeof YC<"u"?function(l){return YC.resolve(null).then(l).catch(zI)}:qC;function zI(l){setTimeout(function(){throw l})}function Cf(l){return l==="head"}function ZC(l,f){var v=f,_=0,C=0;do{var U=v.nextSibling;if(l.removeChild(v),U&&U.nodeType===8)if(v=U.data,v==="/$"){if(0<_&&8>_){v=_;var q=l.ownerDocument;if(v&1&&P0(q.documentElement),v&2&&P0(q.body),v&4)for(v=q.head,P0(v),q=v.firstChild;q;){var ae=q.nextSibling,be=q.nodeName;q[ri]||be==="SCRIPT"||be==="STYLE"||be==="LINK"&&q.rel.toLowerCase()==="stylesheet"||v.removeChild(q),q=ae}}if(C===0){l.removeChild(U),V0(f);return}C--}else v==="$"||v==="$?"||v==="$!"?C++:_=v.charCodeAt(0)-48;else _=0;v=U}while(v);V0(f)}function VE(l){var f=l.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var v=f;switch(f=f.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":VE(v),In(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}l.removeChild(v)}}function FI(l,f,v,_){for(;l.nodeType===1;){var C=v;if(l.nodeName.toLowerCase()!==f.toLowerCase()){if(!_&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(_){if(!l[ri])switch(f){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(U=l.getAttribute("rel"),U==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(U!==C.rel||l.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||l.getAttribute("title")!==(C.title==null?null:C.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(U=l.getAttribute("src"),(U!==(C.src==null?null:C.src)||l.getAttribute("type")!==(C.type==null?null:C.type)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&U&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(f==="input"&&l.type==="hidden"){var U=C.name==null?null:""+C.name;if(C.type==="hidden"&&l.getAttribute("name")===U)return l}else return l;if(l=Ll(l.nextSibling),l===null)break}return null}function HI(l,f,v){if(f==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!v||(l=Ll(l.nextSibling),l===null))return null;return l}function jE(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function kI(l,f){var v=l.ownerDocument;if(l.data!=="$?"||v.readyState==="complete")f();else{var _=function(){f(),v.removeEventListener("DOMContentLoaded",_)};v.addEventListener("DOMContentLoaded",_),l._reactRetry=_}}function Ll(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return l}var WE=null;function KC(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var v=l.data;if(v==="$"||v==="$!"||v==="$?"){if(f===0)return l;f--}else v==="/$"&&f++}l=l.previousSibling}return null}function $C(l,f,v){switch(f=Q1(v),l){case"html":if(l=f.documentElement,!l)throw Error(i(452));return l;case"head":if(l=f.head,!l)throw Error(i(453));return l;case"body":if(l=f.body,!l)throw Error(i(454));return l;default:throw Error(i(451))}}function P0(l){for(var f=l.attributes;f.length;)l.removeAttributeNode(f[0]);In(l)}var Lo=new Map,QC=new Set;function J1(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var _u=Q.d;Q.d={f:GI,r:VI,D:jI,C:WI,L:XI,m:qI,X:ZI,S:YI,M:KI};function GI(){var l=_u.f(),f=Do();return l||f}function VI(l){var f=le(l);f!==null&&f.tag===5&&f.type==="form"?U1(f):_u.r(l)}var em=typeof document>"u"?null:document;function JC(l,f,v){var _=em;if(_&&typeof f=="string"&&f){var C=ln(f);C='link[rel="'+l+'"][href="'+C+'"]',typeof v=="string"&&(C+='[crossorigin="'+v+'"]'),QC.has(C)||(QC.add(C),l={rel:l,crossOrigin:v,href:f},_.querySelector(C)===null&&(f=_.createElement("link"),ms(f,"link",l),We(f),_.head.appendChild(f)))}}function jI(l){_u.D(l),JC("dns-prefetch",l,null)}function WI(l,f){_u.C(l,f),JC("preconnect",l,f)}function XI(l,f,v){_u.L(l,f,v);var _=em;if(_&&l&&f){var C='link[rel="preload"][as="'+ln(f)+'"]';f==="image"&&v&&v.imageSrcSet?(C+='[imagesrcset="'+ln(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(C+='[imagesizes="'+ln(v.imageSizes)+'"]')):C+='[href="'+ln(l)+'"]';var U=C;switch(f){case"style":U=tm(l);break;case"script":U=nm(l)}Lo.has(U)||(l=h({rel:"preload",href:f==="image"&&v&&v.imageSrcSet?void 0:l,as:f},v),Lo.set(U,l),_.querySelector(C)!==null||f==="style"&&_.querySelector(I0(U))||f==="script"&&_.querySelector(B0(U))||(f=_.createElement("link"),ms(f,"link",l),We(f),_.head.appendChild(f)))}}function qI(l,f){_u.m(l,f);var v=em;if(v&&l){var _=f&&typeof f.as=="string"?f.as:"script",C='link[rel="modulepreload"][as="'+ln(_)+'"][href="'+ln(l)+'"]',U=C;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=nm(l)}if(!Lo.has(U)&&(l=h({rel:"modulepreload",href:l},f),Lo.set(U,l),v.querySelector(C)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(B0(U)))return}_=v.createElement("link"),ms(_,"link",l),We(_),v.head.appendChild(_)}}}function YI(l,f,v){_u.S(l,f,v);var _=em;if(_&&l){var C=Ge(_).hoistableStyles,U=tm(l);f=f||"default";var q=C.get(U);if(!q){var ae={loading:0,preload:null};if(q=_.querySelector(I0(U)))ae.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":f},v),(v=Lo.get(U))&&XE(l,v);var be=q=_.createElement("link");We(be),ms(be,"link",l),be._p=new Promise(function(Ve,mt){be.onload=Ve,be.onerror=mt}),be.addEventListener("load",function(){ae.loading|=1}),be.addEventListener("error",function(){ae.loading|=2}),ae.loading|=4,e_(q,f,_)}q={type:"stylesheet",instance:q,count:1,state:ae},C.set(U,q)}}}function ZI(l,f){_u.X(l,f);var v=em;if(v&&l){var _=Ge(v).hoistableScripts,C=nm(l),U=_.get(C);U||(U=v.querySelector(B0(C)),U||(l=h({src:l,async:!0},f),(f=Lo.get(C))&&qE(l,f),U=v.createElement("script"),We(U),ms(U,"link",l),v.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},_.set(C,U))}}function KI(l,f){_u.M(l,f);var v=em;if(v&&l){var _=Ge(v).hoistableScripts,C=nm(l),U=_.get(C);U||(U=v.querySelector(B0(C)),U||(l=h({src:l,async:!0,type:"module"},f),(f=Lo.get(C))&&qE(l,f),U=v.createElement("script"),We(U),ms(U,"link",l),v.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},_.set(C,U))}}function e3(l,f,v,_){var C=(C=pe.current)?J1(C):null;if(!C)throw Error(i(446));switch(l){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(f=tm(v.href),v=Ge(C).hoistableStyles,_=v.get(f),_||(_={type:"style",instance:null,count:0,state:null},v.set(f,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){l=tm(v.href);var U=Ge(C).hoistableStyles,q=U.get(l);if(q||(C=C.ownerDocument||C,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(l,q),(U=C.querySelector(I0(l)))&&!U._p&&(q.instance=U,q.state.loading=5),Lo.has(l)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},Lo.set(l,v),U||$I(C,l,v,q.state))),f&&_===null)throw Error(i(528,""));return q}if(f&&_!==null)throw Error(i(529,""));return null;case"script":return f=v.async,v=v.src,typeof v=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=nm(v),v=Ge(C).hoistableScripts,_=v.get(f),_||(_={type:"script",instance:null,count:0,state:null},v.set(f,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,l))}}function tm(l){return'href="'+ln(l)+'"'}function I0(l){return'link[rel="stylesheet"]['+l+"]"}function t3(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function $I(l,f,v,_){l.querySelector('link[rel="preload"][as="style"]['+f+"]")?_.loading=1:(f=l.createElement("link"),_.preload=f,f.addEventListener("load",function(){return _.loading|=1}),f.addEventListener("error",function(){return _.loading|=2}),ms(f,"link",v),We(f),l.head.appendChild(f))}function nm(l){return'[src="'+ln(l)+'"]'}function B0(l){return"script[async]"+l}function n3(l,f,v){if(f.count++,f.instance===null)switch(f.type){case"style":var _=l.querySelector('style[data-href~="'+ln(v.href)+'"]');if(_)return f.instance=_,We(_),_;var C=h({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return _=(l.ownerDocument||l).createElement("style"),We(_),ms(_,"style",C),e_(_,v.precedence,l),f.instance=_;case"stylesheet":C=tm(v.href);var U=l.querySelector(I0(C));if(U)return f.state.loading|=4,f.instance=U,We(U),U;_=t3(v),(C=Lo.get(C))&&XE(_,C),U=(l.ownerDocument||l).createElement("link"),We(U);var q=U;return q._p=new Promise(function(ae,be){q.onload=ae,q.onerror=be}),ms(U,"link",_),f.state.loading|=4,e_(U,v.precedence,l),f.instance=U;case"script":return U=nm(v.src),(C=l.querySelector(B0(U)))?(f.instance=C,We(C),C):(_=v,(C=Lo.get(U))&&(_=h({},v),qE(_,C)),l=l.ownerDocument||l,C=l.createElement("script"),We(C),ms(C,"link",_),l.head.appendChild(C),f.instance=C);case"void":return null;default:throw Error(i(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(_=f.instance,f.state.loading|=4,e_(_,v.precedence,l));return f.instance}function e_(l,f,v){for(var _=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=_.length?_[_.length-1]:null,U=C,q=0;q<_.length;q++){var ae=_[q];if(ae.dataset.precedence===f)U=ae;else if(U!==C)break}U?U.parentNode.insertBefore(l,U.nextSibling):(f=v.nodeType===9?v.head:v,f.insertBefore(l,f.firstChild))}function XE(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.title==null&&(l.title=f.title)}function qE(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.integrity==null&&(l.integrity=f.integrity)}var t_=null;function i3(l,f,v){if(t_===null){var _=new Map,C=t_=new Map;C.set(v,_)}else C=t_,_=C.get(v),_||(_=new Map,C.set(v,_));if(_.has(l))return _;for(_.set(l,null),v=v.getElementsByTagName(l),C=0;C<v.length;C++){var U=v[C];if(!(U[ri]||U[un]||l==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var q=U.getAttribute(f)||"";q=l+q;var ae=_.get(q);ae?ae.push(U):_.set(q,[U])}}return _}function r3(l,f,v){l=l.ownerDocument||l,l.head.insertBefore(v,f==="title"?l.querySelector("head > title"):null)}function QI(l,f,v){if(v===1||f.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return l=f.disabled,typeof f.precedence=="string"&&l==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function s3(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var z0=null;function JI(){}function e8(l,f,v){if(z0===null)throw Error(i(475));var _=z0;if(f.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var C=tm(v.href),U=l.querySelector(I0(C));if(U){l=U._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(_.count++,_=n_.bind(_),l.then(_,_)),f.state.loading|=4,f.instance=U,We(U);return}U=l.ownerDocument||l,v=t3(v),(C=Lo.get(C))&&XE(v,C),U=U.createElement("link"),We(U);var q=U;q._p=new Promise(function(ae,be){q.onload=ae,q.onerror=be}),ms(U,"link",v),f.instance=U}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(_.count++,f=n_.bind(_),l.addEventListener("load",f),l.addEventListener("error",f))}}function t8(){if(z0===null)throw Error(i(475));var l=z0;return l.stylesheets&&l.count===0&&YE(l,l.stylesheets),0<l.count?function(f){var v=setTimeout(function(){if(l.stylesheets&&YE(l,l.stylesheets),l.unsuspend){var _=l.unsuspend;l.unsuspend=null,_()}},6e4);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(v)}}:null}function n_(){if(this.count--,this.count===0){if(this.stylesheets)YE(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var i_=null;function YE(l,f){l.stylesheets=null,l.unsuspend!==null&&(l.count++,i_=new Map,f.forEach(n8,l),i_=null,n_.call(l))}function n8(l,f){if(!(f.state.loading&4)){var v=i_.get(l);if(v)var _=v.get(null);else{v=new Map,i_.set(l,v);for(var C=l.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<C.length;U++){var q=C[U];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(v.set(q.dataset.precedence,q),_=q)}_&&v.set(null,_)}C=f.instance,q=C.getAttribute("data-precedence"),U=v.get(q)||_,U===_&&v.set(null,C),v.set(q,C),this.count++,_=n_.bind(this),C.addEventListener("load",_),C.addEventListener("error",_),U?U.parentNode.insertBefore(C,U.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(C,l.firstChild)),f.state.loading|=4}}var F0={$$typeof:A,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function i8(l,f,v,_,C,U,q,ae){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=_,this.onUncaughtError=C,this.onCaughtError=U,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ae,this.incompleteTransitions=new Map}function a3(l,f,v,_,C,U,q,ae,be,Ve,mt,_t){return l=new i8(l,f,v,q,ae,be,Ve,_t),f=1,U===!0&&(f|=24),U=Cs(3,null,null,f),l.current=U,U.stateNode=l,f=Ep(),f.refCount++,l.pooledCache=f,f.refCount++,U.memoizedState={element:_,isDehydrated:v,cache:f},c0(U),l}function o3(l){return l?(l=ac,l):ac}function l3(l,f,v,_,C,U){C=o3(C),_.context===null?_.context=C:_.pendingContext=C,_=xo(f),_.payload={element:v},U=U===void 0?null:U,U!==null&&(_.callback=U),v=El(l,_,f),v!==null&&(ps(v,l,f),tu(v,l,f))}function c3(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<f?v:f}}function ZE(l,f){c3(l,f),(l=l.alternate)&&c3(l,f)}function u3(l){if(l.tag===13){var f=yl(l,67108864);f!==null&&ps(f,l,67108864),ZE(l,67108864)}}var r_=!0;function r8(l,f,v,_){var C=H.T;H.T=null;var U=Q.p;try{Q.p=2,KE(l,f,v,_)}finally{Q.p=U,H.T=C}}function s8(l,f,v,_){var C=H.T;H.T=null;var U=Q.p;try{Q.p=8,KE(l,f,v,_)}finally{Q.p=U,H.T=C}}function KE(l,f,v,_){if(r_){var C=$E(_);if(C===null)BE(l,f,_,s_,v),h3(l,_);else if(o8(C,l,f,v,_))_.stopPropagation();else if(h3(l,_),f&4&&-1<a8.indexOf(l)){for(;C!==null;){var U=le(C);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var q=nt(U.pendingLanes);if(q!==0){var ae=U;for(ae.pendingLanes|=2,ae.entangledLanes|=2;q;){var be=1<<31-tt(q);ae.entanglements[1]|=be,q&=~be}Oc(U),(oi&6)===0&&(ts=Qe()+500,U0(0))}}break;case 13:ae=yl(U,2),ae!==null&&ps(ae,U,2),Do(),ZE(U,2)}if(U=$E(_),U===null&&BE(l,f,_,s_,v),U===C)break;C=U}C!==null&&_.stopPropagation()}else BE(l,f,_,null,v)}}function $E(l){return l=qa(l),QE(l)}var s_=null;function QE(l){if(s_=null,l=K(l),l!==null){var f=s(l);if(f===null)l=null;else{var v=f.tag;if(v===13){if(l=a(f),l!==null)return l;l=null}else if(v===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null)}}return s_=l,null}function f3(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(De()){case st:return 2;case ke:return 8;case $:case Y:return 32;case fe:return 268435456;default:return 32}default:return 32}}var JE=!1,Rf=null,Of=null,Df=null,H0=new Map,k0=new Map,Uf=[],a8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function h3(l,f){switch(l){case"focusin":case"focusout":Rf=null;break;case"dragenter":case"dragleave":Of=null;break;case"mouseover":case"mouseout":Df=null;break;case"pointerover":case"pointerout":H0.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":k0.delete(f.pointerId)}}function G0(l,f,v,_,C,U){return l===null||l.nativeEvent!==U?(l={blockedOn:f,domEventName:v,eventSystemFlags:_,nativeEvent:U,targetContainers:[C]},f!==null&&(f=le(f),f!==null&&u3(f)),l):(l.eventSystemFlags|=_,f=l.targetContainers,C!==null&&f.indexOf(C)===-1&&f.push(C),l)}function o8(l,f,v,_,C){switch(f){case"focusin":return Rf=G0(Rf,l,f,v,_,C),!0;case"dragenter":return Of=G0(Of,l,f,v,_,C),!0;case"mouseover":return Df=G0(Df,l,f,v,_,C),!0;case"pointerover":var U=C.pointerId;return H0.set(U,G0(H0.get(U)||null,l,f,v,_,C)),!0;case"gotpointercapture":return U=C.pointerId,k0.set(U,G0(k0.get(U)||null,l,f,v,_,C)),!0}return!1}function d3(l){var f=K(l.target);if(f!==null){var v=s(f);if(v!==null){if(f=v.tag,f===13){if(f=a(v),f!==null){l.blockedOn=f,tn(l.priority,function(){if(v.tag===13){var _=Xi();_=zt(_);var C=yl(v,_);C!==null&&ps(C,v,_),ZE(v,_)}});return}}else if(f===3&&v.stateNode.current.memoizedState.isDehydrated){l.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}l.blockedOn=null}function a_(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var v=$E(l.nativeEvent);if(v===null){v=l.nativeEvent;var _=new v.constructor(v.type,v);Xa=_,v.target.dispatchEvent(_),Xa=null}else return f=le(v),f!==null&&u3(f),l.blockedOn=v,!1;f.shift()}return!0}function p3(l,f,v){a_(l)&&v.delete(f)}function l8(){JE=!1,Rf!==null&&a_(Rf)&&(Rf=null),Of!==null&&a_(Of)&&(Of=null),Df!==null&&a_(Df)&&(Df=null),H0.forEach(p3),k0.forEach(p3)}function o_(l,f){l.blockedOn===f&&(l.blockedOn=null,JE||(JE=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,l8)))}var l_=null;function m3(l){l_!==l&&(l_=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){l_===l&&(l_=null);for(var f=0;f<l.length;f+=3){var v=l[f],_=l[f+1],C=l[f+2];if(typeof _!="function"){if(QE(_||v)===null)continue;break}var U=le(v);U!==null&&(l.splice(f,3),f-=3,T0(U,{pending:!0,data:C,method:v.method,action:_},_,C))}}))}function V0(l){function f(be){return o_(be,l)}Rf!==null&&o_(Rf,l),Of!==null&&o_(Of,l),Df!==null&&o_(Df,l),H0.forEach(f),k0.forEach(f);for(var v=0;v<Uf.length;v++){var _=Uf[v];_.blockedOn===l&&(_.blockedOn=null)}for(;0<Uf.length&&(v=Uf[0],v.blockedOn===null);)d3(v),v.blockedOn===null&&Uf.shift();if(v=(l.ownerDocument||l).$$reactFormReplay,v!=null)for(_=0;_<v.length;_+=3){var C=v[_],U=v[_+1],q=C[mn]||null;if(typeof U=="function")q||m3(v);else if(q){var ae=null;if(U&&U.hasAttribute("formAction")){if(C=U,q=U[mn]||null)ae=q.formAction;else if(QE(C)!==null)continue}else ae=q.action;typeof ae=="function"?v[_+1]=ae:(v.splice(_,3),_-=3),m3(v)}}}function e2(l){this._internalRoot=l}c_.prototype.render=e2.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(i(409));var v=f.current,_=Xi();l3(v,_,l,f,null,null)},c_.prototype.unmount=e2.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;l3(l.current,2,null,l,null,null),Do(),f[bn]=null}};function c_(l){this._internalRoot=l}c_.prototype.unstable_scheduleHydration=function(l){if(l){var f=Gt();l={blockedOn:null,target:l,priority:f};for(var v=0;v<Uf.length&&f!==0&&f<Uf[v].priority;v++);Uf.splice(v,0,l),v===0&&d3(l)}};var g3=e.version;if(g3!=="19.1.1")throw Error(i(527,g3,"19.1.1"));Q.findDOMNode=function(l){var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=c(f),l=l!==null?u(l):null,l=l===null?null:l.stateNode,l};var c8={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var u_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!u_.isDisabled&&u_.supportsFiber)try{Le=u_.inject(c8),Fe=u_}catch{}}return W0.createRoot=function(l,f){if(!r(l))throw Error(i(299));var v=!1,_="",C=Zh,U=Hp,q=j1,ae=null;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(U=f.onCaughtError),f.onRecoverableError!==void 0&&(q=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(ae=f.unstable_transitionCallbacks)),f=a3(l,1,!1,null,null,v,_,C,U,q,ae,null),l[bn]=f.current,IE(l),new e2(f)},W0.hydrateRoot=function(l,f,v){if(!r(l))throw Error(i(299));var _=!1,C="",U=Zh,q=Hp,ae=j1,be=null,Ve=null;return v!=null&&(v.unstable_strictMode===!0&&(_=!0),v.identifierPrefix!==void 0&&(C=v.identifierPrefix),v.onUncaughtError!==void 0&&(U=v.onUncaughtError),v.onCaughtError!==void 0&&(q=v.onCaughtError),v.onRecoverableError!==void 0&&(ae=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(be=v.unstable_transitionCallbacks),v.formState!==void 0&&(Ve=v.formState)),f=a3(l,1,!0,f,v??null,_,C,U,q,ae,be,Ve),f.context=o3(null),v=f.current,_=Xi(),_=zt(_),C=xo(_),C.callback=null,El(v,C,_),v=_,f.current.lanes=v,ct(f,v),Oc(f),l[bn]=f.current,IE(l),new c_(f)},W0.version="19.1.1",W0}var A3;function x8(){if(A3)return i2.exports;A3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),i2.exports=_8(),i2.exports}var mS=x8(),o2={exports:{}},xu={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w3;function b8(){return w3||(w3=1,xu.ConcurrentRoot=1,xu.ContinuousEventPriority=8,xu.DefaultEventPriority=32,xu.DiscreteEventPriority=2,xu.IdleEventPriority=268435456,xu.LegacyRoot=0,xu.NoEventPriority=0),xu}var C3;function S8(){return C3||(C3=1,o2.exports=b8()),o2.exports}var jx=S8();/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const xg="171",E8={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},M8={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Z5=0,wT=1,K5=2,T8=3,$5=0,gS=1,Lv=2,Hl=3,$o=0,Fs=1,mr=2,Hc=0,Iu=1,CT=2,RT=3,OT=4,Q5=5,Yf=100,J5=101,eU=102,tU=103,nU=104,iU=200,rU=201,sU=202,aU=203,Jx=204,eb=205,oU=206,lU=207,cU=208,uU=209,fU=210,hU=211,dU=212,pU=213,mU=214,tb=0,nb=1,ib=2,Vd=3,rb=4,sb=5,ab=6,ob=7,_y=0,gU=1,vU=2,kc=0,yU=1,_U=2,xU=3,JA=4,bU=5,SU=6,EU=7,DT="attached",MU="detached",nh=300,Vc=301,ih=302,rg=303,Qv=304,bg=306,rh=1e3,Mr=1001,sg=1002,qr=1003,vS=1004,A8=1004,wd=1005,w8=1005,Zn=1006,Jm=1007,C8=1007,Go=1008,UT=1008,ja=1009,yS=1010,_S=1011,ag=1012,xy=1013,jc=1014,Yi=1015,Xr=1016,xS=1017,bS=1018,jd=1020,ew=35902,tw=1021,nw=1022,Tr=1023,iw=1024,rw=1025,Id=1026,Wd=1027,by=1028,Sy=1029,sw=1030,SS=1031,R8=1032,ES=1033,Nv=33776,Pv=33777,Iv=33778,Bv=33779,lb=35840,cb=35841,ub=35842,fb=35843,hb=36196,db=37492,pb=37496,mb=37808,gb=37809,vb=37810,yb=37811,_b=37812,xb=37813,bb=37814,Sb=37815,Eb=37816,Mb=37817,Tb=37818,Ab=37819,wb=37820,Cb=37821,zv=36492,Rb=36494,Ob=36495,aw=36283,Db=36284,Ub=36285,Lb=36286,TU=2200,AU=2201,wU=2202,og=2300,lg=2301,Wx=2302,Cd=2400,Rd=2401,Jv=2402,MS=2500,ow=2501,CU=0,lw=1,Nb=2,RU=3200,cw=3201,O8=3202,D8=3203,hh=0,OU=1,Du="",pr="srgb",Ir="srgb-linear",ey="linear",Ei="srgb",U8=0,Ed=7680,L8=7681,N8=7682,P8=7683,I8=34055,B8=34056,z8=5386,F8=512,H8=513,k8=514,G8=515,V8=516,j8=517,W8=518,LT=519,DU=512,UU=513,LU=514,uw=515,NU=516,PU=517,IU=518,BU=519,ty=35044,Xx=35048,X8=35040,q8=35045,Y8=35049,Z8=35041,K8=35046,$8=35050,Q8=35042,J8="100",NT="300 es",Fc=2e3,ny=2001;let qc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}};const Ls=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let R3=1234567;const Bd=Math.PI/180,cg=180/Math.PI;function ho(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ls[n&255]+Ls[n>>8&255]+Ls[n>>16&255]+Ls[n>>24&255]+"-"+Ls[e&255]+Ls[e>>8&255]+"-"+Ls[e>>16&15|64]+Ls[e>>24&255]+"-"+Ls[t&63|128]+Ls[t>>8&255]+"-"+Ls[t>>16&255]+Ls[t>>24&255]+Ls[i&255]+Ls[i>>8&255]+Ls[i>>16&255]+Ls[i>>24&255]).toLowerCase()}function Tn(n,e,t){return Math.max(e,Math.min(t,n))}function fw(n,e){return(n%e+e)%e}function e9(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function t9(n,e,t){return n!==e?(t-n)/(e-n):0}function Fv(n,e,t){return(1-t)*n+t*e}function n9(n,e,t,i){return Fv(n,e,1-Math.exp(-t*i))}function i9(n,e=1){return e-Math.abs(fw(n,e*2)-e)}function r9(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function s9(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function a9(n,e){return n+Math.floor(Math.random()*(e-n+1))}function o9(n,e){return n+Math.random()*(e-n)}function l9(n){return n*(.5-Math.random())}function c9(n){n!==void 0&&(R3=n);let e=R3+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function u9(n){return n*Bd}function f9(n){return n*cg}function h9(n){return(n&n-1)===0&&n!==0}function d9(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function p9(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function m9(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),c=a(t/2),u=s((e+i)/2),h=a((e+i)/2),p=s((e-i)/2),g=a((e-i)/2),y=s((i-e)/2),x=a((i-e)/2);switch(r){case"XYX":n.set(o*h,c*p,c*g,o*u);break;case"YZY":n.set(c*g,o*h,c*p,o*u);break;case"ZXZ":n.set(c*p,c*g,o*h,o*u);break;case"XZX":n.set(o*h,c*x,c*y,o*u);break;case"YXY":n.set(c*y,o*h,c*x,o*u);break;case"ZYZ":n.set(c*x,c*y,o*h,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function da(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Un(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const np={DEG2RAD:Bd,RAD2DEG:cg,generateUUID:ho,clamp:Tn,euclideanModulo:fw,mapLinear:e9,inverseLerp:t9,lerp:Fv,damp:n9,pingpong:i9,smoothstep:r9,smootherstep:s9,randInt:a9,randFloat:o9,randFloatSpread:l9,seededRandom:c9,degToRad:u9,radToDeg:f9,isPowerOfTwo:h9,ceilPowerOfTwo:d9,floorPowerOfTwo:p9,setQuaternionFromProperEuler:m9,normalize:Un,denormalize:da};class ft{constructor(e=0,t=0){ft.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Tn(this.x,e.x,t.x),this.y=Tn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Tn(this.x,e,t),this.y=Tn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Tn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Tn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Mn{constructor(e,t,i,r,s,a,o,c,u){Mn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,c,u)}set(e,t,i,r,s,a,o,c,u){const h=this.elements;return h[0]=e,h[1]=r,h[2]=o,h[3]=t,h[4]=s,h[5]=c,h[6]=i,h[7]=a,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],c=i[6],u=i[1],h=i[4],p=i[7],g=i[2],y=i[5],x=i[8],M=r[0],b=r[3],S=r[6],T=r[1],A=r[4],w=r[7],D=r[2],O=r[5],P=r[8];return s[0]=a*M+o*T+c*D,s[3]=a*b+o*A+c*O,s[6]=a*S+o*w+c*P,s[1]=u*M+h*T+p*D,s[4]=u*b+h*A+p*O,s[7]=u*S+h*w+p*P,s[2]=g*M+y*T+x*D,s[5]=g*b+y*A+x*O,s[8]=g*S+y*w+x*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],c=e[6],u=e[7],h=e[8];return t*a*h-t*o*u-i*s*h+i*o*c+r*s*u-r*a*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],c=e[6],u=e[7],h=e[8],p=h*a-o*u,g=o*c-h*s,y=u*s-a*c,x=t*p+i*g+r*y;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/x;return e[0]=p*M,e[1]=(r*u-h*i)*M,e[2]=(o*i-r*a)*M,e[3]=g*M,e[4]=(h*t-r*c)*M,e[5]=(r*s-o*t)*M,e[6]=y*M,e[7]=(i*c-u*t)*M,e[8]=(a*t-i*s)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const c=Math.cos(s),u=Math.sin(s);return this.set(i*c,i*u,-i*(c*a+u*o)+a+e,-r*u,r*c,-r*(-u*a+c*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(l2.makeScale(e,t)),this}rotate(e){return this.premultiply(l2.makeRotation(-e)),this}translate(e,t){return this.premultiply(l2.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const l2=new Mn;function zU(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const g9={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function qm(n,e){return new g9[n](e)}function iy(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function FU(){const n=iy("canvas");return n.style.display="block",n}const O3={};function Xm(n){n in O3||(O3[n]=!0,console.warn(n))}function v9(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function y9(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function _9(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const D3=new Mn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),U3=new Mn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function x9(){const n={enabled:!0,workingColorSpace:Ir,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Ei&&(r.r=Bu(r.r),r.g=Bu(r.g),r.b=Bu(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Ei&&(r.r=eg(r.r),r.g=eg(r.g),r.b=eg(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Du?ey:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Ir]:{primaries:e,whitePoint:i,transfer:ey,toXYZ:D3,fromXYZ:U3,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:pr},outputColorSpaceConfig:{drawingBufferColorSpace:pr}},[pr]:{primaries:e,whitePoint:i,transfer:Ei,toXYZ:D3,fromXYZ:U3,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:pr}}}),n}const Xn=x9();function Bu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function eg(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let im;class HU{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{im===void 0&&(im=iy("canvas")),im.width=e.width,im.height=e.height;const i=im.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=im}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=iy("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Bu(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Bu(t[i]/255)*255):t[i]=Bu(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let b9=0;class Od{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:b9++}),this.uuid=ho(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(c2(r[a].image)):s.push(c2(r[a]))}else s=c2(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function c2(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?HU.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let S9=0;class mi extends qc{constructor(e=mi.DEFAULT_IMAGE,t=mi.DEFAULT_MAPPING,i=Mr,r=Mr,s=Zn,a=Go,o=Tr,c=ja,u=mi.DEFAULT_ANISOTROPY,h=Du){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:S9++}),this.uuid=ho(),this.name="",this.source=new Od(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=c,this.offset=new ft(0,0),this.repeat=new ft(1,1),this.center=new ft(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Mn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==nh)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rh:e.x=e.x-Math.floor(e.x);break;case Mr:e.x=e.x<0?0:1;break;case sg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rh:e.y=e.y-Math.floor(e.y);break;case Mr:e.y=e.y<0?0:1;break;case sg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}mi.DEFAULT_IMAGE=null;mi.DEFAULT_MAPPING=nh;mi.DEFAULT_ANISOTROPY=1;class Ln{constructor(e=0,t=0,i=0,r=1){Ln.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,u=c[0],h=c[4],p=c[8],g=c[1],y=c[5],x=c[9],M=c[2],b=c[6],S=c[10];if(Math.abs(h-g)<.01&&Math.abs(p-M)<.01&&Math.abs(x-b)<.01){if(Math.abs(h+g)<.1&&Math.abs(p+M)<.1&&Math.abs(x+b)<.1&&Math.abs(u+y+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(u+1)/2,w=(y+1)/2,D=(S+1)/2,O=(h+g)/4,P=(p+M)/4,B=(x+b)/4;return A>w&&A>D?A<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(A),r=O/i,s=P/i):w>D?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=O/r,s=B/r):D<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(D),i=P/s,r=B/s),this.set(i,r,s,t),this}let T=Math.sqrt((b-x)*(b-x)+(p-M)*(p-M)+(g-h)*(g-h));return Math.abs(T)<.001&&(T=1),this.x=(b-x)/T,this.y=(p-M)/T,this.z=(g-h)/T,this.w=Math.acos((u+y+S-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Tn(this.x,e.x,t.x),this.y=Tn(this.y,e.y,t.y),this.z=Tn(this.z,e.z,t.z),this.w=Tn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Tn(this.x,e,t),this.y=Tn(this.y,e,t),this.z=Tn(this.z,e,t),this.w=Tn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Tn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class kU extends qc{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ln(0,0,e,t),this.scissorTest=!1,this.viewport=new Ln(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Zn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new mi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Od(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Wa extends kU{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class TS extends mi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=qr,this.minFilter=qr,this.wrapR=Mr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class E9 extends Wa{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new TS(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class hw extends mi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=qr,this.minFilter=qr,this.wrapR=Mr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class M9 extends Wa{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new hw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Ar{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let c=i[r+0],u=i[r+1],h=i[r+2],p=i[r+3];const g=s[a+0],y=s[a+1],x=s[a+2],M=s[a+3];if(o===0){e[t+0]=c,e[t+1]=u,e[t+2]=h,e[t+3]=p;return}if(o===1){e[t+0]=g,e[t+1]=y,e[t+2]=x,e[t+3]=M;return}if(p!==M||c!==g||u!==y||h!==x){let b=1-o;const S=c*g+u*y+h*x+p*M,T=S>=0?1:-1,A=1-S*S;if(A>Number.EPSILON){const D=Math.sqrt(A),O=Math.atan2(D,S*T);b=Math.sin(b*O)/D,o=Math.sin(o*O)/D}const w=o*T;if(c=c*b+g*w,u=u*b+y*w,h=h*b+x*w,p=p*b+M*w,b===1-o){const D=1/Math.sqrt(c*c+u*u+h*h+p*p);c*=D,u*=D,h*=D,p*=D}}e[t]=c,e[t+1]=u,e[t+2]=h,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],c=i[r+1],u=i[r+2],h=i[r+3],p=s[a],g=s[a+1],y=s[a+2],x=s[a+3];return e[t]=o*x+h*p+c*y-u*g,e[t+1]=c*x+h*g+u*p-o*y,e[t+2]=u*x+h*y+o*g-c*p,e[t+3]=h*x-o*p-c*g-u*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,c=Math.sin,u=o(i/2),h=o(r/2),p=o(s/2),g=c(i/2),y=c(r/2),x=c(s/2);switch(a){case"XYZ":this._x=g*h*p+u*y*x,this._y=u*y*p-g*h*x,this._z=u*h*x+g*y*p,this._w=u*h*p-g*y*x;break;case"YXZ":this._x=g*h*p+u*y*x,this._y=u*y*p-g*h*x,this._z=u*h*x-g*y*p,this._w=u*h*p+g*y*x;break;case"ZXY":this._x=g*h*p-u*y*x,this._y=u*y*p+g*h*x,this._z=u*h*x+g*y*p,this._w=u*h*p-g*y*x;break;case"ZYX":this._x=g*h*p-u*y*x,this._y=u*y*p+g*h*x,this._z=u*h*x-g*y*p,this._w=u*h*p+g*y*x;break;case"YZX":this._x=g*h*p+u*y*x,this._y=u*y*p+g*h*x,this._z=u*h*x-g*y*p,this._w=u*h*p-g*y*x;break;case"XZY":this._x=g*h*p-u*y*x,this._y=u*y*p-g*h*x,this._z=u*h*x+g*y*p,this._w=u*h*p+g*y*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],c=t[9],u=t[2],h=t[6],p=t[10],g=i+o+p;if(g>0){const y=.5/Math.sqrt(g+1);this._w=.25/y,this._x=(h-c)*y,this._y=(s-u)*y,this._z=(a-r)*y}else if(i>o&&i>p){const y=2*Math.sqrt(1+i-o-p);this._w=(h-c)/y,this._x=.25*y,this._y=(r+a)/y,this._z=(s+u)/y}else if(o>p){const y=2*Math.sqrt(1+o-i-p);this._w=(s-u)/y,this._x=(r+a)/y,this._y=.25*y,this._z=(c+h)/y}else{const y=2*Math.sqrt(1+p-i-o);this._w=(a-r)/y,this._x=(s+u)/y,this._y=(c+h)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Tn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,c=t._y,u=t._z,h=t._w;return this._x=i*h+a*o+r*u-s*c,this._y=r*h+a*c+s*o-i*u,this._z=s*h+a*u+i*c-r*o,this._w=a*h-i*o-r*c-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const c=1-o*o;if(c<=Number.EPSILON){const y=1-t;return this._w=y*a+t*this._w,this._x=y*i+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this}const u=Math.sqrt(c),h=Math.atan2(u,o),p=Math.sin((1-t)*h)/u,g=Math.sin(t*h)/u;return this._w=a*p+this._w*g,this._x=i*p+this._x*g,this._y=r*p+this._y*g,this._z=s*p+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class J{constructor(e=0,t=0,i=0){J.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(L3.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(L3.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,c=e.w,u=2*(a*r-o*i),h=2*(o*t-s*r),p=2*(s*i-a*t);return this.x=t+c*u+a*p-o*h,this.y=i+c*h+o*u-s*p,this.z=r+c*p+s*h-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Tn(this.x,e.x,t.x),this.y=Tn(this.y,e.y,t.y),this.z=Tn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Tn(this.x,e,t),this.y=Tn(this.y,e,t),this.z=Tn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Tn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,c=t.z;return this.x=r*c-s*o,this.y=s*a-i*c,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return u2.copy(this).projectOnVector(e),this.sub(u2)}reflect(e){return this.sub(u2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Tn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const u2=new J,L3=new Ar;class Kn{constructor(e=new J(1/0,1/0,1/0),t=new J(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Nl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Nl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Nl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Nl):Nl.fromBufferAttribute(s,a),Nl.applyMatrix4(e.matrixWorld),this.expandByPoint(Nl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),f_.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),f_.copy(i.boundingBox)),f_.applyMatrix4(e.matrixWorld),this.union(f_)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Nl),Nl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(X0),h_.subVectors(this.max,X0),rm.subVectors(e.a,X0),sm.subVectors(e.b,X0),am.subVectors(e.c,X0),Nf.subVectors(sm,rm),Pf.subVectors(am,sm),id.subVectors(rm,am);let t=[0,-Nf.z,Nf.y,0,-Pf.z,Pf.y,0,-id.z,id.y,Nf.z,0,-Nf.x,Pf.z,0,-Pf.x,id.z,0,-id.x,-Nf.y,Nf.x,0,-Pf.y,Pf.x,0,-id.y,id.x,0];return!f2(t,rm,sm,am,h_)||(t=[1,0,0,0,1,0,0,0,1],!f2(t,rm,sm,am,h_))?!1:(d_.crossVectors(Nf,Pf),t=[d_.x,d_.y,d_.z],f2(t,rm,sm,am,h_))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Nl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Nl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(bu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),bu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),bu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),bu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),bu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),bu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),bu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),bu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(bu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const bu=[new J,new J,new J,new J,new J,new J,new J,new J],Nl=new J,f_=new Kn,rm=new J,sm=new J,am=new J,Nf=new J,Pf=new J,id=new J,X0=new J,h_=new J,d_=new J,rd=new J;function f2(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){rd.fromArray(n,s);const o=r.x*Math.abs(rd.x)+r.y*Math.abs(rd.y)+r.z*Math.abs(rd.z),c=e.dot(rd),u=t.dot(rd),h=i.dot(rd);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>o)return!1}return!0}const T9=new Kn,q0=new J,h2=new J;class gr{constructor(e=new J,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):T9.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;q0.subVectors(e,this.center);const t=q0.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(q0,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(h2.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(q0.copy(e.center).add(h2)),this.expandByPoint(q0.copy(e.center).sub(h2))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Su=new J,d2=new J,p_=new J,If=new J,p2=new J,m_=new J,m2=new J;class dh{constructor(e=new J,t=new J(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Su)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Su.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Su.copy(this.origin).addScaledVector(this.direction,t),Su.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){d2.copy(e).add(t).multiplyScalar(.5),p_.copy(t).sub(e).normalize(),If.copy(this.origin).sub(d2);const s=e.distanceTo(t)*.5,a=-this.direction.dot(p_),o=If.dot(this.direction),c=-If.dot(p_),u=If.lengthSq(),h=Math.abs(1-a*a);let p,g,y,x;if(h>0)if(p=a*c-o,g=a*o-c,x=s*h,p>=0)if(g>=-x)if(g<=x){const M=1/h;p*=M,g*=M,y=p*(p+a*g+2*o)+g*(a*p+g+2*c)+u}else g=s,p=Math.max(0,-(a*g+o)),y=-p*p+g*(g+2*c)+u;else g=-s,p=Math.max(0,-(a*g+o)),y=-p*p+g*(g+2*c)+u;else g<=-x?(p=Math.max(0,-(-a*s+o)),g=p>0?-s:Math.min(Math.max(-s,-c),s),y=-p*p+g*(g+2*c)+u):g<=x?(p=0,g=Math.min(Math.max(-s,-c),s),y=g*(g+2*c)+u):(p=Math.max(0,-(a*s+o)),g=p>0?s:Math.min(Math.max(-s,-c),s),y=-p*p+g*(g+2*c)+u);else g=a>0?-s:s,p=Math.max(0,-(a*g+o)),y=-p*p+g*(g+2*c)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(d2).addScaledVector(p_,g),y}intersectSphere(e,t){Su.subVectors(e.center,this.origin);const i=Su.dot(this.direction),r=Su.dot(Su)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,c=i+a;return c<0?null:o<0?this.at(c,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,c;const u=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,g=this.origin;return u>=0?(i=(e.min.x-g.x)*u,r=(e.max.x-g.x)*u):(i=(e.max.x-g.x)*u,r=(e.min.x-g.x)*u),h>=0?(s=(e.min.y-g.y)*h,a=(e.max.y-g.y)*h):(s=(e.max.y-g.y)*h,a=(e.min.y-g.y)*h),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),p>=0?(o=(e.min.z-g.z)*p,c=(e.max.z-g.z)*p):(o=(e.max.z-g.z)*p,c=(e.min.z-g.z)*p),i>c||o>r)||((o>i||i!==i)&&(i=o),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Su)!==null}intersectTriangle(e,t,i,r,s){p2.subVectors(t,e),m_.subVectors(i,e),m2.crossVectors(p2,m_);let a=this.direction.dot(m2),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;If.subVectors(this.origin,e);const c=o*this.direction.dot(m_.crossVectors(If,m_));if(c<0)return null;const u=o*this.direction.dot(p2.cross(If));if(u<0||c+u>a)return null;const h=-o*If.dot(m2);return h<0?null:this.at(h/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ut{constructor(e,t,i,r,s,a,o,c,u,h,p,g,y,x,M,b){Ut.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,c,u,h,p,g,y,x,M,b)}set(e,t,i,r,s,a,o,c,u,h,p,g,y,x,M,b){const S=this.elements;return S[0]=e,S[4]=t,S[8]=i,S[12]=r,S[1]=s,S[5]=a,S[9]=o,S[13]=c,S[2]=u,S[6]=h,S[10]=p,S[14]=g,S[3]=y,S[7]=x,S[11]=M,S[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ut().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/om.setFromMatrixColumn(e,0).length(),s=1/om.setFromMatrixColumn(e,1).length(),a=1/om.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),c=Math.cos(r),u=Math.sin(r),h=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const g=a*h,y=a*p,x=o*h,M=o*p;t[0]=c*h,t[4]=-c*p,t[8]=u,t[1]=y+x*u,t[5]=g-M*u,t[9]=-o*c,t[2]=M-g*u,t[6]=x+y*u,t[10]=a*c}else if(e.order==="YXZ"){const g=c*h,y=c*p,x=u*h,M=u*p;t[0]=g+M*o,t[4]=x*o-y,t[8]=a*u,t[1]=a*p,t[5]=a*h,t[9]=-o,t[2]=y*o-x,t[6]=M+g*o,t[10]=a*c}else if(e.order==="ZXY"){const g=c*h,y=c*p,x=u*h,M=u*p;t[0]=g-M*o,t[4]=-a*p,t[8]=x+y*o,t[1]=y+x*o,t[5]=a*h,t[9]=M-g*o,t[2]=-a*u,t[6]=o,t[10]=a*c}else if(e.order==="ZYX"){const g=a*h,y=a*p,x=o*h,M=o*p;t[0]=c*h,t[4]=x*u-y,t[8]=g*u+M,t[1]=c*p,t[5]=M*u+g,t[9]=y*u-x,t[2]=-u,t[6]=o*c,t[10]=a*c}else if(e.order==="YZX"){const g=a*c,y=a*u,x=o*c,M=o*u;t[0]=c*h,t[4]=M-g*p,t[8]=x*p+y,t[1]=p,t[5]=a*h,t[9]=-o*h,t[2]=-u*h,t[6]=y*p+x,t[10]=g-M*p}else if(e.order==="XZY"){const g=a*c,y=a*u,x=o*c,M=o*u;t[0]=c*h,t[4]=-p,t[8]=u*h,t[1]=g*p+M,t[5]=a*h,t[9]=y*p-x,t[2]=x*p-y,t[6]=o*h,t[10]=M*p+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(A9,e,w9)}lookAt(e,t,i){const r=this.elements;return ao.subVectors(e,t),ao.lengthSq()===0&&(ao.z=1),ao.normalize(),Bf.crossVectors(i,ao),Bf.lengthSq()===0&&(Math.abs(i.z)===1?ao.x+=1e-4:ao.z+=1e-4,ao.normalize(),Bf.crossVectors(i,ao)),Bf.normalize(),g_.crossVectors(ao,Bf),r[0]=Bf.x,r[4]=g_.x,r[8]=ao.x,r[1]=Bf.y,r[5]=g_.y,r[9]=ao.y,r[2]=Bf.z,r[6]=g_.z,r[10]=ao.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],c=i[8],u=i[12],h=i[1],p=i[5],g=i[9],y=i[13],x=i[2],M=i[6],b=i[10],S=i[14],T=i[3],A=i[7],w=i[11],D=i[15],O=r[0],P=r[4],B=r[8],I=r[12],z=r[1],k=r[5],V=r[9],j=r[13],W=r[2],te=r[6],H=r[10],Q=r[14],ne=r[3],re=r[7],G=r[11],X=r[15];return s[0]=a*O+o*z+c*W+u*ne,s[4]=a*P+o*k+c*te+u*re,s[8]=a*B+o*V+c*H+u*G,s[12]=a*I+o*j+c*Q+u*X,s[1]=h*O+p*z+g*W+y*ne,s[5]=h*P+p*k+g*te+y*re,s[9]=h*B+p*V+g*H+y*G,s[13]=h*I+p*j+g*Q+y*X,s[2]=x*O+M*z+b*W+S*ne,s[6]=x*P+M*k+b*te+S*re,s[10]=x*B+M*V+b*H+S*G,s[14]=x*I+M*j+b*Q+S*X,s[3]=T*O+A*z+w*W+D*ne,s[7]=T*P+A*k+w*te+D*re,s[11]=T*B+A*V+w*H+D*G,s[15]=T*I+A*j+w*Q+D*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],c=e[9],u=e[13],h=e[2],p=e[6],g=e[10],y=e[14],x=e[3],M=e[7],b=e[11],S=e[15];return x*(+s*c*p-r*u*p-s*o*g+i*u*g+r*o*y-i*c*y)+M*(+t*c*y-t*u*g+s*a*g-r*a*y+r*u*h-s*c*h)+b*(+t*u*p-t*o*y-s*a*p+i*a*y+s*o*h-i*u*h)+S*(-r*o*h-t*c*p+t*o*g+r*a*p-i*a*g+i*c*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],c=e[6],u=e[7],h=e[8],p=e[9],g=e[10],y=e[11],x=e[12],M=e[13],b=e[14],S=e[15],T=p*b*u-M*g*u+M*c*y-o*b*y-p*c*S+o*g*S,A=x*g*u-h*b*u-x*c*y+a*b*y+h*c*S-a*g*S,w=h*M*u-x*p*u+x*o*y-a*M*y-h*o*S+a*p*S,D=x*p*c-h*M*c-x*o*g+a*M*g+h*o*b-a*p*b,O=t*T+i*A+r*w+s*D;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/O;return e[0]=T*P,e[1]=(M*g*s-p*b*s-M*r*y+i*b*y+p*r*S-i*g*S)*P,e[2]=(o*b*s-M*c*s+M*r*u-i*b*u-o*r*S+i*c*S)*P,e[3]=(p*c*s-o*g*s-p*r*u+i*g*u+o*r*y-i*c*y)*P,e[4]=A*P,e[5]=(h*b*s-x*g*s+x*r*y-t*b*y-h*r*S+t*g*S)*P,e[6]=(x*c*s-a*b*s-x*r*u+t*b*u+a*r*S-t*c*S)*P,e[7]=(a*g*s-h*c*s+h*r*u-t*g*u-a*r*y+t*c*y)*P,e[8]=w*P,e[9]=(x*p*s-h*M*s-x*i*y+t*M*y+h*i*S-t*p*S)*P,e[10]=(a*M*s-x*o*s+x*i*u-t*M*u-a*i*S+t*o*S)*P,e[11]=(h*o*s-a*p*s-h*i*u+t*p*u+a*i*y-t*o*y)*P,e[12]=D*P,e[13]=(h*M*r-x*p*r+x*i*g-t*M*g-h*i*b+t*p*b)*P,e[14]=(x*o*r-a*M*r-x*i*c+t*M*c+a*i*b-t*o*b)*P,e[15]=(a*p*r-h*o*r+h*i*c-t*p*c-a*i*g+t*o*g)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,c=e.z,u=s*a,h=s*o;return this.set(u*a+i,u*o-r*c,u*c+r*o,0,u*o+r*c,h*o+i,h*c-r*a,0,u*c-r*o,h*c+r*a,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,c=t._w,u=s+s,h=a+a,p=o+o,g=s*u,y=s*h,x=s*p,M=a*h,b=a*p,S=o*p,T=c*u,A=c*h,w=c*p,D=i.x,O=i.y,P=i.z;return r[0]=(1-(M+S))*D,r[1]=(y+w)*D,r[2]=(x-A)*D,r[3]=0,r[4]=(y-w)*O,r[5]=(1-(g+S))*O,r[6]=(b+T)*O,r[7]=0,r[8]=(x+A)*P,r[9]=(b-T)*P,r[10]=(1-(g+M))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=om.set(r[0],r[1],r[2]).length();const a=om.set(r[4],r[5],r[6]).length(),o=om.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Pl.copy(this);const u=1/s,h=1/a,p=1/o;return Pl.elements[0]*=u,Pl.elements[1]*=u,Pl.elements[2]*=u,Pl.elements[4]*=h,Pl.elements[5]*=h,Pl.elements[6]*=h,Pl.elements[8]*=p,Pl.elements[9]*=p,Pl.elements[10]*=p,t.setFromRotationMatrix(Pl),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a,o=Fc){const c=this.elements,u=2*s/(t-e),h=2*s/(i-r),p=(t+e)/(t-e),g=(i+r)/(i-r);let y,x;if(o===Fc)y=-(a+s)/(a-s),x=-2*a*s/(a-s);else if(o===ny)y=-a/(a-s),x=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return c[0]=u,c[4]=0,c[8]=p,c[12]=0,c[1]=0,c[5]=h,c[9]=g,c[13]=0,c[2]=0,c[6]=0,c[10]=y,c[14]=x,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,a,o=Fc){const c=this.elements,u=1/(t-e),h=1/(i-r),p=1/(a-s),g=(t+e)*u,y=(i+r)*h;let x,M;if(o===Fc)x=(a+s)*p,M=-2*p;else if(o===ny)x=s*p,M=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-g,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-y,c[2]=0,c[6]=0,c[10]=M,c[14]=-x,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const om=new J,Pl=new Ut,A9=new J(0,0,0),w9=new J(1,1,1),Bf=new J,g_=new J,ao=new J,N3=new Ut,P3=new Ar;class po{constructor(e=0,t=0,i=0,r=po.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],c=r[1],u=r[5],h=r[9],p=r[2],g=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(Tn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,y),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(g,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Tn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,y),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(Tn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,y),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Tn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,y),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Tn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(o,y));break;case"XZY":this._z=Math.asin(-Tn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-h,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return N3.makeRotationFromQuaternion(e),this.setFromRotationMatrix(N3,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return P3.setFromEuler(this),this.setFromQuaternion(P3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}po.DEFAULT_ORDER="XYZ";class ug{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let C9=0;const I3=new J,lm=new Ar,Eu=new Ut,v_=new J,Y0=new J,R9=new J,O9=new Ar,B3=new J(1,0,0),z3=new J(0,1,0),F3=new J(0,0,1),H3={type:"added"},D9={type:"removed"},cm={type:"childadded",child:null},g2={type:"childremoved",child:null};class Cn extends qc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:C9++}),this.uuid=ho(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Cn.DEFAULT_UP.clone();const e=new J,t=new po,i=new Ar,r=new J(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ut},normalMatrix:{value:new Mn}}),this.matrix=new Ut,this.matrixWorld=new Ut,this.matrixAutoUpdate=Cn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Cn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ug,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return lm.setFromAxisAngle(e,t),this.quaternion.multiply(lm),this}rotateOnWorldAxis(e,t){return lm.setFromAxisAngle(e,t),this.quaternion.premultiply(lm),this}rotateX(e){return this.rotateOnAxis(B3,e)}rotateY(e){return this.rotateOnAxis(z3,e)}rotateZ(e){return this.rotateOnAxis(F3,e)}translateOnAxis(e,t){return I3.copy(e).applyQuaternion(this.quaternion),this.position.add(I3.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(B3,e)}translateY(e){return this.translateOnAxis(z3,e)}translateZ(e){return this.translateOnAxis(F3,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Eu.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?v_.copy(e):v_.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Y0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Eu.lookAt(Y0,v_,this.up):Eu.lookAt(v_,Y0,this.up),this.quaternion.setFromRotationMatrix(Eu),r&&(Eu.extractRotation(r.matrixWorld),lm.setFromRotationMatrix(Eu),this.quaternion.premultiply(lm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(H3),cm.child=e,this.dispatchEvent(cm),cm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(D9),g2.child=e,this.dispatchEvent(g2),g2.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Eu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Eu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Eu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(H3),cm.child=e,this.dispatchEvent(cm),cm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Y0,e,R9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Y0,O9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++){const p=c[u];s(e.shapes,p)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,u=this.material.length;c<u;c++)o.push(s(e.materials,this.material[c]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];r.animations.push(s(e.animations,c))}}if(t){const o=a(e.geometries),c=a(e.materials),u=a(e.textures),h=a(e.images),p=a(e.shapes),g=a(e.skeletons),y=a(e.animations),x=a(e.nodes);o.length>0&&(i.geometries=o),c.length>0&&(i.materials=c),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),p.length>0&&(i.shapes=p),g.length>0&&(i.skeletons=g),y.length>0&&(i.animations=y),x.length>0&&(i.nodes=x)}return i.object=r,i;function a(o){const c=[];for(const u in o){const h=o[u];delete h.metadata,c.push(h)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Cn.DEFAULT_UP=new J(0,1,0);Cn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Cn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Il=new J,Mu=new J,v2=new J,Tu=new J,um=new J,fm=new J,k3=new J,y2=new J,_2=new J,x2=new J,b2=new Ln,S2=new Ln,E2=new Ln;class Nr{constructor(e=new J,t=new J,i=new J){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Il.subVectors(e,t),r.cross(Il);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Il.subVectors(r,t),Mu.subVectors(i,t),v2.subVectors(e,t);const a=Il.dot(Il),o=Il.dot(Mu),c=Il.dot(v2),u=Mu.dot(Mu),h=Mu.dot(v2),p=a*u-o*o;if(p===0)return s.set(0,0,0),null;const g=1/p,y=(u*c-o*h)*g,x=(a*h-o*c)*g;return s.set(1-y-x,x,y)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Tu)===null?!1:Tu.x>=0&&Tu.y>=0&&Tu.x+Tu.y<=1}static getInterpolation(e,t,i,r,s,a,o,c){return this.getBarycoord(e,t,i,r,Tu)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Tu.x),c.addScaledVector(a,Tu.y),c.addScaledVector(o,Tu.z),c)}static getInterpolatedAttribute(e,t,i,r,s,a){return b2.setScalar(0),S2.setScalar(0),E2.setScalar(0),b2.fromBufferAttribute(e,t),S2.fromBufferAttribute(e,i),E2.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(b2,s.x),a.addScaledVector(S2,s.y),a.addScaledVector(E2,s.z),a}static isFrontFacing(e,t,i,r){return Il.subVectors(i,t),Mu.subVectors(e,t),Il.cross(Mu).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Il.subVectors(this.c,this.b),Mu.subVectors(this.a,this.b),Il.cross(Mu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Nr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Nr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Nr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Nr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Nr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;um.subVectors(r,i),fm.subVectors(s,i),y2.subVectors(e,i);const c=um.dot(y2),u=fm.dot(y2);if(c<=0&&u<=0)return t.copy(i);_2.subVectors(e,r);const h=um.dot(_2),p=fm.dot(_2);if(h>=0&&p<=h)return t.copy(r);const g=c*p-h*u;if(g<=0&&c>=0&&h<=0)return a=c/(c-h),t.copy(i).addScaledVector(um,a);x2.subVectors(e,s);const y=um.dot(x2),x=fm.dot(x2);if(x>=0&&y<=x)return t.copy(s);const M=y*u-c*x;if(M<=0&&u>=0&&x<=0)return o=u/(u-x),t.copy(i).addScaledVector(fm,o);const b=h*x-y*p;if(b<=0&&p-h>=0&&y-x>=0)return k3.subVectors(s,r),o=(p-h)/(p-h+(y-x)),t.copy(r).addScaledVector(k3,o);const S=1/(b+M+g);return a=M*S,o=g*S,t.copy(i).addScaledVector(um,a).addScaledVector(fm,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const GU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zf={h:0,s:0,l:0},y_={h:0,s:0,l:0};function M2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Rt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=pr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Xn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Xn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Xn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Xn.workingColorSpace){if(e=fw(e,1),t=Tn(t,0,1),i=Tn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=M2(a,s,e+1/3),this.g=M2(a,s,e),this.b=M2(a,s,e-1/3)}return Xn.toWorkingColorSpace(this,r),this}setStyle(e,t=pr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=pr){const i=GU[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Bu(e.r),this.g=Bu(e.g),this.b=Bu(e.b),this}copyLinearToSRGB(e){return this.r=eg(e.r),this.g=eg(e.g),this.b=eg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=pr){return Xn.fromWorkingColorSpace(Ns.copy(this),e),Math.round(Tn(Ns.r*255,0,255))*65536+Math.round(Tn(Ns.g*255,0,255))*256+Math.round(Tn(Ns.b*255,0,255))}getHexString(e=pr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Xn.workingColorSpace){Xn.fromWorkingColorSpace(Ns.copy(this),t);const i=Ns.r,r=Ns.g,s=Ns.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let c,u;const h=(o+a)/2;if(o===a)c=0,u=0;else{const p=a-o;switch(u=h<=.5?p/(a+o):p/(2-a-o),a){case i:c=(r-s)/p+(r<s?6:0);break;case r:c=(s-i)/p+2;break;case s:c=(i-r)/p+4;break}c/=6}return e.h=c,e.s=u,e.l=h,e}getRGB(e,t=Xn.workingColorSpace){return Xn.fromWorkingColorSpace(Ns.copy(this),t),e.r=Ns.r,e.g=Ns.g,e.b=Ns.b,e}getStyle(e=pr){Xn.fromWorkingColorSpace(Ns.copy(this),e);const t=Ns.r,i=Ns.g,r=Ns.b;return e!==pr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(zf),this.setHSL(zf.h+e,zf.s+t,zf.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(zf),e.getHSL(y_);const i=Fv(zf.h,y_.h,t),r=Fv(zf.s,y_.s,t),s=Fv(zf.l,y_.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Ns=new Rt;Rt.NAMES=GU;let U9=0;class Yr extends qc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:U9++}),this.uuid=ho(),this.name="",this.type="Material",this.blending=Iu,this.side=$o,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Jx,this.blendDst=eb,this.blendEquation=Yf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Rt(0,0,0),this.blendAlpha=0,this.depthFunc=Vd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=LT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ed,this.stencilZFail=Ed,this.stencilZPass=Ed,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Iu&&(i.blending=this.blending),this.side!==$o&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Jx&&(i.blendSrc=this.blendSrc),this.blendDst!==eb&&(i.blendDst=this.blendDst),this.blendEquation!==Yf&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Vd&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==LT&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ed&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ed&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ed&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const c=s[o];delete c.metadata,a.push(c)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class pa extends Yr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new po,this.combine=_y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Uu=L9();function L9(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):u<-14?(i[c]=1024>>-u-14,i[c|256]=1024>>-u-14|32768,r[c]=-u-1,r[c|256]=-u-1):u<=15?(i[c]=u+15<<10,i[c|256]=u+15<<10|32768,r[c]=13,r[c|256]=13):u<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,h=0;for(;(u&8388608)===0;)u<<=1,h-=8388608;u&=-8388609,h+=947912704,s[c]=u|h}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(o[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function Ba(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Tn(n,-65504,65504),Uu.floatView[0]=n;const e=Uu.uint32View[0],t=e>>23&511;return Uu.baseTable[t]+((e&8388607)>>Uu.shiftTable[t])}function Av(n){const e=n>>10;return Uu.uint32View[0]=Uu.mantissaTable[Uu.offsetTable[e]+(n&1023)]+Uu.exponentTable[e],Uu.floatView[0]}const Dd={toHalfFloat:Ba,fromHalfFloat:Av},Lr=new J,__=new ft;class Jn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=ty,this.updateRanges=[],this.gpuType=Yi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)__.fromBufferAttribute(this,t),__.applyMatrix3(e),this.setXY(t,__.x,__.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Lr.fromBufferAttribute(this,t),Lr.applyMatrix3(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Lr.fromBufferAttribute(this,t),Lr.applyMatrix4(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Lr.fromBufferAttribute(this,t),Lr.applyNormalMatrix(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Lr.fromBufferAttribute(this,t),Lr.transformDirection(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=da(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Un(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=da(t,this.array)),t}setX(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=da(t,this.array)),t}setY(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=da(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=da(t,this.array)),t}setW(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array),s=Un(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ty&&(e.usage=this.usage),e}}class N9 extends Jn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class P9 extends Jn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class I9 extends Jn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class B9 extends Jn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class dw extends Jn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class z9 extends Jn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class pw extends Jn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class F9 extends Jn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Av(this.array[e*this.itemSize]);return this.normalized&&(t=da(t,this.array)),t}setX(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize]=Ba(t),this}getY(e){let t=Av(this.array[e*this.itemSize+1]);return this.normalized&&(t=da(t,this.array)),t}setY(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+1]=Ba(t),this}getZ(e){let t=Av(this.array[e*this.itemSize+2]);return this.normalized&&(t=da(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+2]=Ba(t),this}getW(e){let t=Av(this.array[e*this.itemSize+3]);return this.normalized&&(t=da(t,this.array)),t}setW(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+3]=Ba(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array)),this.array[e+0]=Ba(t),this.array[e+1]=Ba(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array)),this.array[e+0]=Ba(t),this.array[e+1]=Ba(i),this.array[e+2]=Ba(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array),s=Un(s,this.array)),this.array[e+0]=Ba(t),this.array[e+1]=Ba(i),this.array[e+2]=Ba(r),this.array[e+3]=Ba(s),this}}class qt extends Jn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let H9=0;const No=new Ut,T2=new Cn,hm=new J,oo=new Kn,Z0=new Kn,rs=new J;class An extends qc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:H9++}),this.uuid=ho(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(zU(e)?pw:dw)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Mn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return No.makeRotationFromQuaternion(e),this.applyMatrix4(No),this}rotateX(e){return No.makeRotationX(e),this.applyMatrix4(No),this}rotateY(e){return No.makeRotationY(e),this.applyMatrix4(No),this}rotateZ(e){return No.makeRotationZ(e),this.applyMatrix4(No),this}translate(e,t,i){return No.makeTranslation(e,t,i),this.applyMatrix4(No),this}scale(e,t,i){return No.makeScale(e,t,i),this.applyMatrix4(No),this}lookAt(e){return T2.lookAt(e),T2.updateMatrix(),this.applyMatrix4(T2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(hm).negate(),this.translate(hm.x,hm.y,hm.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new qt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Kn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];oo.setFromBufferAttribute(s),this.morphTargetsRelative?(rs.addVectors(this.boundingBox.min,oo.min),this.boundingBox.expandByPoint(rs),rs.addVectors(this.boundingBox.max,oo.max),this.boundingBox.expandByPoint(rs)):(this.boundingBox.expandByPoint(oo.min),this.boundingBox.expandByPoint(oo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new J,1/0);return}if(e){const i=this.boundingSphere.center;if(oo.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];Z0.setFromBufferAttribute(o),this.morphTargetsRelative?(rs.addVectors(oo.min,Z0.min),oo.expandByPoint(rs),rs.addVectors(oo.max,Z0.max),oo.expandByPoint(rs)):(oo.expandByPoint(Z0.min),oo.expandByPoint(Z0.max))}oo.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)rs.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(rs));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],c=this.morphTargetsRelative;for(let u=0,h=o.count;u<h;u++)rs.fromBufferAttribute(o,u),c&&(hm.fromBufferAttribute(e,u),rs.add(hm)),r=Math.max(r,i.distanceToSquared(rs))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Jn(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],c=[];for(let B=0;B<i.count;B++)o[B]=new J,c[B]=new J;const u=new J,h=new J,p=new J,g=new ft,y=new ft,x=new ft,M=new J,b=new J;function S(B,I,z){u.fromBufferAttribute(i,B),h.fromBufferAttribute(i,I),p.fromBufferAttribute(i,z),g.fromBufferAttribute(s,B),y.fromBufferAttribute(s,I),x.fromBufferAttribute(s,z),h.sub(u),p.sub(u),y.sub(g),x.sub(g);const k=1/(y.x*x.y-x.x*y.y);isFinite(k)&&(M.copy(h).multiplyScalar(x.y).addScaledVector(p,-y.y).multiplyScalar(k),b.copy(p).multiplyScalar(y.x).addScaledVector(h,-x.x).multiplyScalar(k),o[B].add(M),o[I].add(M),o[z].add(M),c[B].add(b),c[I].add(b),c[z].add(b))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let B=0,I=T.length;B<I;++B){const z=T[B],k=z.start,V=z.count;for(let j=k,W=k+V;j<W;j+=3)S(e.getX(j+0),e.getX(j+1),e.getX(j+2))}const A=new J,w=new J,D=new J,O=new J;function P(B){D.fromBufferAttribute(r,B),O.copy(D);const I=o[B];A.copy(I),A.sub(D.multiplyScalar(D.dot(I))).normalize(),w.crossVectors(O,I);const k=w.dot(c[B])<0?-1:1;a.setXYZW(B,A.x,A.y,A.z,k)}for(let B=0,I=T.length;B<I;++B){const z=T[B],k=z.start,V=z.count;for(let j=k,W=k+V;j<W;j+=3)P(e.getX(j+0)),P(e.getX(j+1)),P(e.getX(j+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Jn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let g=0,y=i.count;g<y;g++)i.setXYZ(g,0,0,0);const r=new J,s=new J,a=new J,o=new J,c=new J,u=new J,h=new J,p=new J;if(e)for(let g=0,y=e.count;g<y;g+=3){const x=e.getX(g+0),M=e.getX(g+1),b=e.getX(g+2);r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,M),a.fromBufferAttribute(t,b),h.subVectors(a,s),p.subVectors(r,s),h.cross(p),o.fromBufferAttribute(i,x),c.fromBufferAttribute(i,M),u.fromBufferAttribute(i,b),o.add(h),c.add(h),u.add(h),i.setXYZ(x,o.x,o.y,o.z),i.setXYZ(M,c.x,c.y,c.z),i.setXYZ(b,u.x,u.y,u.z)}else for(let g=0,y=t.count;g<y;g+=3)r.fromBufferAttribute(t,g+0),s.fromBufferAttribute(t,g+1),a.fromBufferAttribute(t,g+2),h.subVectors(a,s),p.subVectors(r,s),h.cross(p),i.setXYZ(g+0,h.x,h.y,h.z),i.setXYZ(g+1,h.x,h.y,h.z),i.setXYZ(g+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)rs.fromBufferAttribute(e,t),rs.normalize(),e.setXYZ(t,rs.x,rs.y,rs.z)}toNonIndexed(){function e(o,c){const u=o.array,h=o.itemSize,p=o.normalized,g=new u.constructor(c.length*h);let y=0,x=0;for(let M=0,b=c.length;M<b;M++){o.isInterleavedBufferAttribute?y=c[M]*o.data.stride+o.offset:y=c[M]*h;for(let S=0;S<h;S++)g[x++]=u[y++]}return new Jn(g,h,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new An,i=this.index.array,r=this.attributes;for(const o in r){const c=r[o],u=e(c,i);t.setAttribute(o,u)}const s=this.morphAttributes;for(const o in s){const c=[],u=s[o];for(let h=0,p=u.length;h<p;h++){const g=u[h],y=e(g,i);c.push(y)}t.morphAttributes[o]=c}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,c=a.length;o<c;o++){const u=a[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const u=i[c];e.data.attributes[c]=u.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],h=[];for(let p=0,g=u.length;p<g;p++){const y=u[p];h.push(y.toJSON(e.data))}h.length>0&&(r[c]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const h=r[u];this.setAttribute(u,h.clone(t))}const s=e.morphAttributes;for(const u in s){const h=[],p=s[u];for(let g=0,y=p.length;g<y;g++)h.push(p[g].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,h=a.length;u<h;u++){const p=a[u];this.addGroup(p.start,p.count,p.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const G3=new Ut,sd=new dh,x_=new gr,V3=new J,b_=new J,S_=new J,E_=new J,A2=new J,M_=new J,j3=new J,T_=new J;class fi extends Cn{constructor(e=new An,t=new pa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){M_.set(0,0,0);for(let c=0,u=s.length;c<u;c++){const h=o[c],p=s[c];h!==0&&(A2.fromBufferAttribute(p,e),a?M_.addScaledVector(A2,h):M_.addScaledVector(A2.sub(t),h))}t.add(M_)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),x_.copy(i.boundingSphere),x_.applyMatrix4(s),sd.copy(e.ray).recast(e.near),!(x_.containsPoint(sd.origin)===!1&&(sd.intersectSphere(x_,V3)===null||sd.origin.distanceToSquared(V3)>(e.far-e.near)**2))&&(G3.copy(s).invert(),sd.copy(e.ray).applyMatrix4(G3),!(i.boundingBox!==null&&sd.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,sd)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,o=s.index,c=s.attributes.position,u=s.attributes.uv,h=s.attributes.uv1,p=s.attributes.normal,g=s.groups,y=s.drawRange;if(o!==null)if(Array.isArray(a))for(let x=0,M=g.length;x<M;x++){const b=g[x],S=a[b.materialIndex],T=Math.max(b.start,y.start),A=Math.min(o.count,Math.min(b.start+b.count,y.start+y.count));for(let w=T,D=A;w<D;w+=3){const O=o.getX(w),P=o.getX(w+1),B=o.getX(w+2);r=A_(this,S,e,i,u,h,p,O,P,B),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const x=Math.max(0,y.start),M=Math.min(o.count,y.start+y.count);for(let b=x,S=M;b<S;b+=3){const T=o.getX(b),A=o.getX(b+1),w=o.getX(b+2);r=A_(this,a,e,i,u,h,p,T,A,w),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(a))for(let x=0,M=g.length;x<M;x++){const b=g[x],S=a[b.materialIndex],T=Math.max(b.start,y.start),A=Math.min(c.count,Math.min(b.start+b.count,y.start+y.count));for(let w=T,D=A;w<D;w+=3){const O=w,P=w+1,B=w+2;r=A_(this,S,e,i,u,h,p,O,P,B),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const x=Math.max(0,y.start),M=Math.min(c.count,y.start+y.count);for(let b=x,S=M;b<S;b+=3){const T=b,A=b+1,w=b+2;r=A_(this,a,e,i,u,h,p,T,A,w),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}}}function k9(n,e,t,i,r,s,a,o){let c;if(e.side===Fs?c=i.intersectTriangle(a,s,r,!0,o):c=i.intersectTriangle(r,s,a,e.side===$o,o),c===null)return null;T_.copy(o),T_.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(T_);return u<t.near||u>t.far?null:{distance:u,point:T_.clone(),object:n}}function A_(n,e,t,i,r,s,a,o,c,u){n.getVertexPosition(o,b_),n.getVertexPosition(c,S_),n.getVertexPosition(u,E_);const h=k9(n,e,t,i,b_,S_,E_,j3);if(h){const p=new J;Nr.getBarycoord(j3,b_,S_,E_,p),r&&(h.uv=Nr.getInterpolatedAttribute(r,o,c,u,p,new ft)),s&&(h.uv1=Nr.getInterpolatedAttribute(s,o,c,u,p,new ft)),a&&(h.normal=Nr.getInterpolatedAttribute(a,o,c,u,p,new J),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const g={a:o,b:c,c:u,normal:new J,materialIndex:0};Nr.getNormal(b_,S_,E_,g.normal),h.face=g,h.barycoord=p}return h}class ip extends An{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const c=[],u=[],h=[],p=[];let g=0,y=0;x("z","y","x",-1,-1,i,t,e,a,s,0),x("z","y","x",1,-1,i,t,-e,a,s,1),x("x","z","y",1,1,e,i,t,r,a,2),x("x","z","y",1,-1,e,i,-t,r,a,3),x("x","y","z",1,-1,e,t,i,r,s,4),x("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new qt(u,3)),this.setAttribute("normal",new qt(h,3)),this.setAttribute("uv",new qt(p,2));function x(M,b,S,T,A,w,D,O,P,B,I){const z=w/P,k=D/B,V=w/2,j=D/2,W=O/2,te=P+1,H=B+1;let Q=0,ne=0;const re=new J;for(let G=0;G<H;G++){const X=G*k-j;for(let ie=0;ie<te;ie++){const se=ie*z-V;re[M]=se*T,re[b]=X*A,re[S]=W,u.push(re.x,re.y,re.z),re[M]=0,re[b]=0,re[S]=O>0?1:-1,h.push(re.x,re.y,re.z),p.push(ie/P),p.push(1-G/B),Q+=1}}for(let G=0;G<B;G++)for(let X=0;X<P;X++){const ie=g+X+te*G,se=g+X+te*(G+1),ee=g+(X+1)+te*(G+1),ue=g+(X+1)+te*G;c.push(ie,se,ue),c.push(se,ee,ue),ne+=6}o.addGroup(y,ne,I),y+=ne,g+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ip(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function fg(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function ca(n){const e={};for(let t=0;t<n.length;t++){const i=fg(n[t]);for(const r in i)e[r]=i[r]}return e}function G9(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function VU(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Xn.workingColorSpace}const hg={clone:fg,merge:ca};var V9=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,j9=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ks extends Yr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=V9,this.fragmentShader=j9,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fg(e.uniforms),this.uniformsGroups=G9(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class AS extends Cn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ut,this.projectionMatrix=new Ut,this.projectionMatrixInverse=new Ut,this.coordinateSystem=Fc}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ff=new J,W3=new ft,X3=new ft;let Er=class extends AS{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=cg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Bd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return cg*2*Math.atan(Math.tan(Bd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ff.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ff.x,Ff.y).multiplyScalar(-e/Ff.z),Ff.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ff.x,Ff.y).multiplyScalar(-e/Ff.z)}getViewSize(e,t){return this.getViewBounds(e,W3,X3),t.subVectors(X3,W3)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Bd*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,u=a.fullHeight;s+=a.offsetX*r/c,t-=a.offsetY*i/u,r*=a.width/c,i*=a.height/u}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const dm=-90,pm=1;class jU extends Cn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Er(dm,pm,e,t);r.layers=this.layers,this.add(r);const s=new Er(dm,pm,e,t);s.layers=this.layers,this.add(s);const a=new Er(dm,pm,e,t);a.layers=this.layers,this.add(a);const o=new Er(dm,pm,e,t);o.layers=this.layers,this.add(o);const c=new Er(dm,pm,e,t);c.layers=this.layers,this.add(c);const u=new Er(dm,pm,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,o,c]=t;for(const u of t)this.remove(u);if(e===Fc)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===ny)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,c,u,h]=this.children,p=e.getRenderTarget(),g=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const M=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=M,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(p,g,y),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class Ey extends mi{constructor(e,t,i,r,s,a,o,c,u,h){e=e!==void 0?e:[],t=t!==void 0?t:Vc,super(e,t,i,r,s,a,o,c,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class mw extends Wa{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Ey(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Zn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ip(5,5,5),s=new ks({name:"CubemapFromEquirect",uniforms:fg(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Fs,blending:Hc});s.uniforms.tEquirect.value=t;const a=new fi(r,s),o=t.minFilter;return t.minFilter===Go&&(t.minFilter=Zn),new jU(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}class wS{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Rt(e),this.density=t}clone(){return new wS(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class CS{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Rt(e),this.near=t,this.far=i}clone(){return new CS(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let sh=class extends Cn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new po,this.environmentIntensity=1,this.environmentRotation=new po,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class My{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ty,this.updateRanges=[],this.version=0,this.uuid=ho()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ho()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ho()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const oa=new J;class Ga{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)oa.fromBufferAttribute(this,t),oa.applyMatrix4(e),this.setXYZ(t,oa.x,oa.y,oa.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)oa.fromBufferAttribute(this,t),oa.applyNormalMatrix(e),this.setXYZ(t,oa.x,oa.y,oa.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)oa.fromBufferAttribute(this,t),oa.transformDirection(e),this.setXYZ(t,oa.x,oa.y,oa.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=da(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Un(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=da(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=da(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=da(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=da(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array),s=Un(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Jn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ga(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class gw extends Yr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Rt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let mm;const K0=new J,gm=new J,vm=new J,ym=new ft,$0=new ft,WU=new Ut,w_=new J,Q0=new J,C_=new J,q3=new ft,w2=new ft,Y3=new ft;class XU extends Cn{constructor(e=new gw){if(super(),this.isSprite=!0,this.type="Sprite",mm===void 0){mm=new An;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new My(t,5);mm.setIndex([0,1,2,0,2,3]),mm.setAttribute("position",new Ga(i,3,0,!1)),mm.setAttribute("uv",new Ga(i,2,3,!1))}this.geometry=mm,this.material=e,this.center=new ft(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),gm.setFromMatrixScale(this.matrixWorld),WU.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),vm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&gm.multiplyScalar(-vm.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;R_(w_.set(-.5,-.5,0),vm,a,gm,r,s),R_(Q0.set(.5,-.5,0),vm,a,gm,r,s),R_(C_.set(.5,.5,0),vm,a,gm,r,s),q3.set(0,0),w2.set(1,0),Y3.set(1,1);let o=e.ray.intersectTriangle(w_,Q0,C_,!1,K0);if(o===null&&(R_(Q0.set(-.5,.5,0),vm,a,gm,r,s),w2.set(0,1),o=e.ray.intersectTriangle(w_,C_,Q0,!1,K0),o===null))return;const c=e.ray.origin.distanceTo(K0);c<e.near||c>e.far||t.push({distance:c,point:K0.clone(),uv:Nr.getInterpolation(K0,w_,Q0,C_,q3,w2,Y3,new ft),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function R_(n,e,t,i,r,s){ym.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?($0.x=s*ym.x-r*ym.y,$0.y=r*ym.x+s*ym.y):$0.copy(ym),n.copy(e),n.x+=$0.x,n.y+=$0.y,n.applyMatrix4(WU)}const O_=new J,Z3=new J;class qU extends Cn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){O_.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(O_);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){O_.setFromMatrixPosition(e.matrixWorld),Z3.setFromMatrixPosition(this.matrixWorld);const i=O_.distanceTo(Z3)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),i>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const K3=new J,$3=new Ln,Q3=new Ln,W9=new J,J3=new Ut,D_=new J,C2=new gr,eR=new Ut,R2=new dh;class vw extends fi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=DT,this.bindMatrix=new Ut,this.bindMatrixInverse=new Ut,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Kn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,D_),this.boundingBox.expandByPoint(D_)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new gr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,D_),this.boundingSphere.expandByPoint(D_)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),C2.copy(this.boundingSphere),C2.applyMatrix4(r),e.ray.intersectsSphere(C2)!==!1&&(eR.copy(r).invert(),R2.copy(e.ray).applyMatrix4(eR),!(this.boundingBox!==null&&R2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,R2)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ln,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===DT?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===MU?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;$3.fromBufferAttribute(r.attributes.skinIndex,e),Q3.fromBufferAttribute(r.attributes.skinWeight,e),K3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=Q3.getComponent(s);if(a!==0){const o=$3.getComponent(s);J3.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(W9.copy(K3).applyMatrix4(J3),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class RS extends Cn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Gl extends mi{constructor(e=null,t=1,i=1,r,s,a,o,c,u=qr,h=qr,p,g){super(null,a,o,c,u,h,r,s,p,g),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const tR=new Ut,X9=new Ut;class Ty{constructor(e=[],t=[]){this.uuid=ho(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ut)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ut;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:X9;tR.multiplyMatrices(o,t[s]),tR.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Ty(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Gl(t,e,e,Tr,Yi);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new RS),this.bones.push(a),this.boneInverses.push(new Ut().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class ah extends Jn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const _m=new Ut,nR=new Ut,U_=[],iR=new Kn,q9=new Ut,J0=new fi,ev=new gr;class yw extends fi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ah(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,q9)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Kn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,_m),iR.copy(e.boundingBox).applyMatrix4(_m),this.boundingBox.union(iR)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new gr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,_m),ev.copy(e.boundingSphere).applyMatrix4(_m),this.boundingSphere.union(ev)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,a=e*s+1;for(let o=0;o<i.length;o++)i[o]=r[a+o]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(J0.geometry=this.geometry,J0.material=this.material,J0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ev.copy(this.boundingSphere),ev.applyMatrix4(i),e.ray.intersectsSphere(ev)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,_m),nR.multiplyMatrices(i,_m),J0.matrixWorld=nR,J0.raycast(e,U_);for(let a=0,o=U_.length;a<o;a++){const c=U_[a];c.instanceId=s,c.object=this,t.push(c)}U_.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ah(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Gl(new Float32Array(r*this.count),r,this.count,by,Yi));const s=this.morphTexture.source.data.data;let a=0;for(let u=0;u<i.length;u++)a+=i[u];const o=this.geometry.morphTargetsRelative?1:1-a,c=r*e;s[c]=o,s.set(i,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const O2=new J,Y9=new J,Z9=new Mn;class Fo{constructor(e=new J(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=O2.subVectors(i,t).cross(Y9.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(O2),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Z9.getNormalMatrix(e),r=this.coplanarPoint(O2).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ad=new gr,L_=new J;class Ay{constructor(e=new Fo,t=new Fo,i=new Fo,r=new Fo,s=new Fo,a=new Fo){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Fc){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],c=r[3],u=r[4],h=r[5],p=r[6],g=r[7],y=r[8],x=r[9],M=r[10],b=r[11],S=r[12],T=r[13],A=r[14],w=r[15];if(i[0].setComponents(c-s,g-u,b-y,w-S).normalize(),i[1].setComponents(c+s,g+u,b+y,w+S).normalize(),i[2].setComponents(c+a,g+h,b+x,w+T).normalize(),i[3].setComponents(c-a,g-h,b-x,w-T).normalize(),i[4].setComponents(c-o,g-p,b-M,w-A).normalize(),t===Fc)i[5].setComponents(c+o,g+p,b+M,w+A).normalize();else if(t===ny)i[5].setComponents(o,p,M,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ad.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ad.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ad)}intersectsSprite(e){return ad.center.set(0,0,0),ad.radius=.7071067811865476,ad.applyMatrix4(e.matrixWorld),this.intersectsSphere(ad)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(L_.x=r.normal.x>0?e.max.x:e.min.x,L_.y=r.normal.y>0?e.max.y:e.min.y,L_.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(L_)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function D2(n,e){return n-e}function K9(n,e){return n.z-e.z}function $9(n,e){return e.z-n.z}class Q9{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const o=s[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=i,o.index=r}reset(){this.list.length=0,this.index=0}}const Pa=new Ut,J9=new Rt(1,1,1),U2=new Ay,N_=new Kn,od=new gr,tv=new J,rR=new J,eB=new J,L2=new Q9,Ps=new fi,P_=[];function tB(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let a=0;a<i;a++)e.setComponent(s+t,a,n.getComponent(s,a))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function ld(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class YU extends fi{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,i=t*2,r){super(new An,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Gl(t,e,e,Tr,Yi);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Gl(t,e,e,Sy,jc);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Gl(t,e,e,Tr,Yi);i.colorSpace=Xn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:o,itemSize:c,normalized:u}=a,h=new o.constructor(i*c),p=new Jn(h,c,u);t.setAttribute(s,p)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Jn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Kn);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Pa),this.getBoundingBoxAt(s,N_).applyMatrix4(Pa),e.union(N_)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Pa),this.getBoundingSphereAt(s,od).applyMatrix4(Pa),e.union(od)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(D2),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Pa.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(J9.toArray(a.image.data,r*4),a.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?a.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(D2),c=this._availableGeometryIds.shift(),s[c]=r):(c=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(c,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(r&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=o.vertexStart,u=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const h in i.attributes){const p=t.getAttribute(h),g=i.getAttribute(h);tB(p,g,c);const y=p.itemSize;for(let x=p.count,M=u;x<M;x++){const b=c+x;for(let S=0;S<y;S++)g.setComponent(b,S,0)}g.needsUpdate=!0,g.addUpdateRange(c*y,u*y)}if(r){const h=o.indexStart,p=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let g=0;g<a.count;g++)s.setX(h+g,c+a.getX(g));for(let g=a.count,y=p;g<y;g++)s.setX(h+g,c);s.needsUpdate=!0,s.addUpdateRange(h,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((a,o)=>o).sort((a,o)=>i[a].vertexStart-i[o].vertexStart),s=this.geometry;for(let a=0,o=i.length;a<o;a++){const c=r[a],u=i[c];if(u.active!==!1){if(s.index!==null){if(u.indexStart!==t){const{indexStart:h,vertexStart:p,reservedIndexCount:g}=u,y=s.index,x=y.array,M=e-p;for(let b=h;b<h+g;b++)x[b]=x[b]+M;y.array.copyWithin(t,h,h+g),y.addUpdateRange(t,g),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:h,reservedVertexCount:p}=u,g=s.attributes;for(const y in g){const x=g[y],{array:M,itemSize:b}=x;M.copyWithin(e*b,h*b,(h+p)*b),x.addUpdateRange(e*b,p*b)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=s.index?u.indexStart:u.vertexStart,this._nextIndexStart=s.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Kn,a=i.index,o=i.attributes.position;for(let c=r.start,u=r.start+r.count;c<u;c++){let h=c;a&&(h=a.getX(h)),s.expandByPoint(tv.fromBufferAttribute(o,h))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new gr;this.getBoundingBoxAt(e,N_),N_.getCenter(s.center);const a=i.index,o=i.attributes.position;let c=0;for(let u=r.start,h=r.start+r.count;u<h;u++){let p=u;a&&(p=a.getX(p)),tv.fromBufferAttribute(o,p),c=Math.max(c,s.center.distanceToSquared(tv))}s.radius=Math.sqrt(c),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(D2);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);ld(this._multiDrawCounts,r),ld(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,c=this._colorsTexture;a.dispose(),this._initIndirectTexture(),ld(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),ld(o.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),ld(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...i.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new An,this._initializeGeometry(s));const a=this.geometry;s.index&&ld(s.index.array,a.index.array);for(const o in s.attributes)ld(s.attributes[o].array,a.attributes[o].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,a=this.geometry;Ps.material=this.material,Ps.geometry.index=a.index,Ps.geometry.attributes=a.attributes,Ps.geometry.boundingBox===null&&(Ps.geometry.boundingBox=new Kn),Ps.geometry.boundingSphere===null&&(Ps.geometry.boundingSphere=new gr);for(let o=0,c=i.length;o<c;o++){if(!i[o].visible||!i[o].active)continue;const u=i[o].geometryIndex,h=r[u];Ps.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(o,Ps.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Ps.geometry.boundingBox),this.getBoundingSphereAt(u,Ps.geometry.boundingSphere),Ps.raycast(e,P_);for(let p=0,g=P_.length;p<g;p++){const y=P_[p];y.object=this,y.batchId=o,t.push(y)}P_.length=0}Ps.material=null,Ps.geometry.index=null,Ps.geometry.attributes={},Ps.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,c=this._instanceInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,p=this._geometryInfo,g=this.perObjectFrustumCulled,y=this._indirectTexture,x=y.image.data;g&&(Pa.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),U2.setFromProjectionMatrix(Pa,e.coordinateSystem));let M=0;if(this.sortObjects){Pa.copy(this.matrixWorld).invert(),tv.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Pa),rR.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Pa);for(let T=0,A=c.length;T<A;T++)if(c[T].visible&&c[T].active){const w=c[T].geometryIndex;this.getMatrixAt(T,Pa),this.getBoundingSphereAt(w,od).applyMatrix4(Pa);let D=!1;if(g&&(D=!U2.intersectsSphere(od)),!D){const O=p[w],P=eB.subVectors(od.center,tv).dot(rR);L2.push(O.start,O.count,P,T)}}const b=L2.list,S=this.customSort;S===null?b.sort(s.transparent?$9:K9):S.call(this,b,i);for(let T=0,A=b.length;T<A;T++){const w=b[T];u[M]=w.start*o,h[M]=w.count,x[M]=w.index,M++}L2.reset()}else for(let b=0,S=c.length;b<S;b++)if(c[b].visible&&c[b].active){const T=c[b].geometryIndex;let A=!1;if(g&&(this.getMatrixAt(b,Pa),this.getBoundingSphereAt(T,od).applyMatrix4(Pa),A=!U2.intersectsSphere(od)),!A){const w=p[T];u[M]=w.start*o,h[M]=w.count,x[M]=b,M++}}y.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,a){this.onBeforeRender(e,null,r,s,a)}}class xs extends Yr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Rt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Pb=new J,Ib=new J,sR=new Ut,nv=new dh,I_=new gr,N2=new J,aR=new J;let ku=class extends Cn{constructor(e=new An,t=new xs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Pb.fromBufferAttribute(t,r-1),Ib.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Pb.distanceTo(Ib);e.setAttribute("lineDistance",new qt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),I_.copy(i.boundingSphere),I_.applyMatrix4(r),I_.radius+=s,e.ray.intersectsSphere(I_)===!1)return;sR.copy(r).invert(),nv.copy(e.ray).applyMatrix4(sR);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,u=this.isLineSegments?2:1,h=i.index,g=i.attributes.position;if(h!==null){const y=Math.max(0,a.start),x=Math.min(h.count,a.start+a.count);for(let M=y,b=x-1;M<b;M+=u){const S=h.getX(M),T=h.getX(M+1),A=B_(this,e,nv,c,S,T);A&&t.push(A)}if(this.isLineLoop){const M=h.getX(x-1),b=h.getX(y),S=B_(this,e,nv,c,M,b);S&&t.push(S)}}else{const y=Math.max(0,a.start),x=Math.min(g.count,a.start+a.count);for(let M=y,b=x-1;M<b;M+=u){const S=B_(this,e,nv,c,M,M+1);S&&t.push(S)}if(this.isLineLoop){const M=B_(this,e,nv,c,x-1,y);M&&t.push(M)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}};function B_(n,e,t,i,r,s){const a=n.geometry.attributes.position;if(Pb.fromBufferAttribute(a,r),Ib.fromBufferAttribute(a,s),t.distanceSqToSegment(Pb,Ib,N2,aR)>i)return;N2.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(N2);if(!(c<e.near||c>e.far))return{distance:c,point:aR.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}const oR=new J,lR=new J;class Jo extends ku{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)oR.fromBufferAttribute(t,r),lR.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+oR.distanceTo(lR);e.setAttribute("lineDistance",new qt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class _w extends ku{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class OS extends Yr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const cR=new Ut,PT=new dh,z_=new gr,F_=new J;class DS extends Cn{constructor(e=new An,t=new OS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),z_.copy(i.boundingSphere),z_.applyMatrix4(r),z_.radius+=s,e.ray.intersectsSphere(z_)===!1)return;cR.copy(r).invert(),PT.copy(e.ray).applyMatrix4(cR);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,u=i.index,p=i.attributes.position;if(u!==null){const g=Math.max(0,a.start),y=Math.min(u.count,a.start+a.count);for(let x=g,M=y;x<M;x++){const b=u.getX(x);F_.fromBufferAttribute(p,b),uR(F_,b,c,r,e,t,this)}}else{const g=Math.max(0,a.start),y=Math.min(p.count,a.start+a.count);for(let x=g,M=y;x<M;x++)F_.fromBufferAttribute(p,x),uR(F_,x,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function uR(n,e,t,i,r,s,a){const o=PT.distanceSqToPoint(n);if(o<t){const c=new J;PT.closestPointToPoint(n,c),c.applyMatrix4(i);const u=r.ray.origin.distanceTo(c);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class Nu extends Cn{constructor(){super(),this.isGroup=!0,this.type="Group"}}class nB extends mi{constructor(e,t,i,r,s,a,o,c,u){super(e,t,i,r,s,a,o,c,u),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Zn,this.magFilter=s!==void 0?s:Zn,this.generateMipmaps=!1;const h=this;function p(){h.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class iB extends mi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=qr,this.minFilter=qr,this.generateMipmaps=!1,this.needsUpdate=!0}}class US extends mi{constructor(e,t,i,r,s,a,o,c,u,h,p,g){super(null,a,o,c,u,h,r,s,p,g),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class rB extends US{constructor(e,t,i,r,s,a){super(e,t,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Mr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class sB extends US{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Vc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class ZU extends mi{constructor(e,t,i,r,s,a,o,c,u){super(e,t,i,r,s,a,o,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class LS extends mi{constructor(e,t,i,r,s,a,o,c,u,h=Id){if(h!==Id&&h!==Wd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===Id&&(i=jc),i===void 0&&h===Wd&&(i=jd),super(null,r,s,a,o,c,h,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:qr,this.minFilter=c!==void 0?c:qr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Wl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let o=0,c=s-1,u;for(;o<=c;)if(r=Math.floor(o+(c-o)/2),u=i[r]-a,u<0)o=r+1;else if(u>0)c=r-1;else{c=r;break}if(r=c,i[r]===a)return r/(s-1);const h=i[r],g=i[r+1]-h,y=(a-h)/g;return(r+y)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),c=t||(a.isVector2?new ft:new J);return c.copy(o).sub(a).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new J,r=[],s=[],a=[],o=new J,c=new Ut;for(let y=0;y<=e;y++){const x=y/e;r[y]=this.getTangentAt(x,new J)}s[0]=new J,a[0]=new J;let u=Number.MAX_VALUE;const h=Math.abs(r[0].x),p=Math.abs(r[0].y),g=Math.abs(r[0].z);h<=u&&(u=h,i.set(1,0,0)),p<=u&&(u=p,i.set(0,1,0)),g<=u&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),a[y]=a[y-1].clone(),o.crossVectors(r[y-1],r[y]),o.length()>Number.EPSILON){o.normalize();const x=Math.acos(Tn(r[y-1].dot(r[y]),-1,1));s[y].applyMatrix4(c.makeRotationAxis(o,x))}a[y].crossVectors(r[y],s[y])}if(t===!0){let y=Math.acos(Tn(s[0].dot(s[e]),-1,1));y/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(y=-y);for(let x=1;x<=e;x++)s[x].applyMatrix4(c.makeRotationAxis(r[x],y*x)),a[x].crossVectors(r[x],s[x])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class NS extends Wl{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=c}getPoint(e,t=new ft){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),g=c-this.aX,y=u-this.aY;c=g*h-y*p+this.aX,u=g*p+y*h+this.aY}return i.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class KU extends NS{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function xw(){let n=0,e=0,t=0,i=0;function r(s,a,o,c){n=s,e=o,t=-3*s+3*a-2*o-c,i=2*s-2*a+o+c}return{initCatmullRom:function(s,a,o,c,u){r(a,o,u*(o-s),u*(c-a))},initNonuniformCatmullRom:function(s,a,o,c,u,h,p){let g=(a-s)/u-(o-s)/(u+h)+(o-a)/h,y=(o-a)/h-(c-a)/(h+p)+(c-o)/p;g*=h,y*=h,r(a,o,g,y)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+i*o}}}const H_=new J,P2=new xw,I2=new xw,B2=new xw;class $U extends Wl{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new J){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),c=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:c===0&&o===s-1&&(o=s-2,c=1);let u,h;this.closed||o>0?u=r[(o-1)%s]:(H_.subVectors(r[0],r[1]).add(r[0]),u=H_);const p=r[o%s],g=r[(o+1)%s];if(this.closed||o+2<s?h=r[(o+2)%s]:(H_.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=H_),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let x=Math.pow(u.distanceToSquared(p),y),M=Math.pow(p.distanceToSquared(g),y),b=Math.pow(g.distanceToSquared(h),y);M<1e-4&&(M=1),x<1e-4&&(x=M),b<1e-4&&(b=M),P2.initNonuniformCatmullRom(u.x,p.x,g.x,h.x,x,M,b),I2.initNonuniformCatmullRom(u.y,p.y,g.y,h.y,x,M,b),B2.initNonuniformCatmullRom(u.z,p.z,g.z,h.z,x,M,b)}else this.curveType==="catmullrom"&&(P2.initCatmullRom(u.x,p.x,g.x,h.x,this.tension),I2.initCatmullRom(u.y,p.y,g.y,h.y,this.tension),B2.initCatmullRom(u.z,p.z,g.z,h.z,this.tension));return i.set(P2.calc(c),I2.calc(c),B2.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new J().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function fR(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,o=n*n,c=n*o;return(2*t-2*i+s+a)*c+(-3*t+3*i-2*s-a)*o+s*n+t}function aB(n,e){const t=1-n;return t*t*e}function oB(n,e){return 2*(1-n)*n*e}function lB(n,e){return n*n*e}function Hv(n,e,t,i){return aB(n,e)+oB(n,t)+lB(n,i)}function cB(n,e){const t=1-n;return t*t*t*e}function uB(n,e){const t=1-n;return 3*t*t*n*e}function fB(n,e){return 3*(1-n)*n*n*e}function hB(n,e){return n*n*n*e}function kv(n,e,t,i,r){return cB(n,e)+uB(n,t)+fB(n,i)+hB(n,r)}class bw extends Wl{constructor(e=new ft,t=new ft,i=new ft,r=new ft){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ft){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(kv(e,r.x,s.x,a.x,o.x),kv(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class QU extends Wl{constructor(e=new J,t=new J,i=new J,r=new J){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new J){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(kv(e,r.x,s.x,a.x,o.x),kv(e,r.y,s.y,a.y,o.y),kv(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Sw extends Wl{constructor(e=new ft,t=new ft){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ft){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ft){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class JU extends Wl{constructor(e=new J,t=new J){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new J){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new J){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ew extends Wl{constructor(e=new ft,t=new ft,i=new ft){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ft){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(Hv(e,r.x,s.x,a.x),Hv(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Mw extends Wl{constructor(e=new J,t=new J,i=new J){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new J){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(Hv(e,r.x,s.x,a.x),Hv(e,r.y,s.y,a.y),Hv(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Tw extends Wl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ft){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,c=r[a===0?a:a-1],u=r[a],h=r[a>r.length-2?r.length-1:a+1],p=r[a>r.length-3?r.length-1:a+2];return i.set(fR(o,c.x,u.x,h.x,p.x),fR(o,c.y,u.y,h.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ft().fromArray(r))}return this}}var Bb=Object.freeze({__proto__:null,ArcCurve:KU,CatmullRomCurve3:$U,CubicBezierCurve:bw,CubicBezierCurve3:QU,EllipseCurve:NS,LineCurve:Sw,LineCurve3:JU,QuadraticBezierCurve:Ew,QuadraticBezierCurve3:Mw,SplineCurve:Tw});class eL extends Wl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Bb[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],c=o.getLength(),u=c===0?0:1-a/c;return o.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,c=a.getPoints(o);for(let u=0;u<c.length;u++){const h=c[u];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Bb[r.type]().fromJSON(r))}return this}}class ry extends eL{constructor(e){super(),this.type="Path",this.currentPoint=new ft,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Sw(this.currentPoint.clone(),new ft(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Ew(this.currentPoint.clone(),new ft(e,t),new ft(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const o=new bw(this.currentPoint.clone(),new ft(e,t),new ft(i,r),new ft(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Tw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const o=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+o,t+c,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,o,c){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,i,r,s,a,o,c),this}absellipse(e,t,i,r,s,a,o,c){const u=new NS(e,t,i,r,s,a,o,c);if(this.curves.length>0){const p=u.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class wy extends An{constructor(e=[new ft(0,-.5),new ft(.5,0),new ft(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Tn(r,0,Math.PI*2);const s=[],a=[],o=[],c=[],u=[],h=1/t,p=new J,g=new ft,y=new J,x=new J,M=new J;let b=0,S=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:b=e[T+1].x-e[T].x,S=e[T+1].y-e[T].y,y.x=S*1,y.y=-b,y.z=S*0,M.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(M.x,M.y,M.z);break;default:b=e[T+1].x-e[T].x,S=e[T+1].y-e[T].y,y.x=S*1,y.y=-b,y.z=S*0,x.copy(y),y.x+=M.x,y.y+=M.y,y.z+=M.z,y.normalize(),c.push(y.x,y.y,y.z),M.copy(x)}for(let T=0;T<=t;T++){const A=i+T*h*r,w=Math.sin(A),D=Math.cos(A);for(let O=0;O<=e.length-1;O++){p.x=e[O].x*w,p.y=e[O].y,p.z=e[O].x*D,a.push(p.x,p.y,p.z),g.x=T/t,g.y=O/(e.length-1),o.push(g.x,g.y);const P=c[3*O+0]*w,B=c[3*O+1],I=c[3*O+0]*D;u.push(P,B,I)}}for(let T=0;T<t;T++)for(let A=0;A<e.length-1;A++){const w=A+T*e.length,D=w,O=w+e.length,P=w+e.length+1,B=w+1;s.push(D,O,B),s.push(P,B,O)}this.setIndex(s),this.setAttribute("position",new qt(a,3)),this.setAttribute("uv",new qt(o,2)),this.setAttribute("normal",new qt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wy(e.points,e.segments,e.phiStart,e.phiLength)}}class PS extends wy{constructor(e=1,t=1,i=4,r=8){const s=new ry;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new PS(e.radius,e.length,e.capSegments,e.radialSegments)}}class IS extends An{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],c=[],u=new J,h=new ft;a.push(0,0,0),o.push(0,0,1),c.push(.5,.5);for(let p=0,g=3;p<=t;p++,g+=3){const y=i+p/t*r;u.x=e*Math.cos(y),u.y=e*Math.sin(y),a.push(u.x,u.y,u.z),o.push(0,0,1),h.x=(a[g]/e+1)/2,h.y=(a[g+1]/e+1)/2,c.push(h.x,h.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new qt(a,3)),this.setAttribute("normal",new qt(o,3)),this.setAttribute("uv",new qt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new IS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Sg extends An{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,o=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:c};const u=this;r=Math.floor(r),s=Math.floor(s);const h=[],p=[],g=[],y=[];let x=0;const M=[],b=i/2;let S=0;T(),a===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(h),this.setAttribute("position",new qt(p,3)),this.setAttribute("normal",new qt(g,3)),this.setAttribute("uv",new qt(y,2));function T(){const w=new J,D=new J;let O=0;const P=(t-e)/i;for(let B=0;B<=s;B++){const I=[],z=B/s,k=z*(t-e)+e;for(let V=0;V<=r;V++){const j=V/r,W=j*c+o,te=Math.sin(W),H=Math.cos(W);D.x=k*te,D.y=-z*i+b,D.z=k*H,p.push(D.x,D.y,D.z),w.set(te,P,H).normalize(),g.push(w.x,w.y,w.z),y.push(j,1-z),I.push(x++)}M.push(I)}for(let B=0;B<r;B++)for(let I=0;I<s;I++){const z=M[I][B],k=M[I+1][B],V=M[I+1][B+1],j=M[I][B+1];(e>0||I!==0)&&(h.push(z,k,j),O+=3),(t>0||I!==s-1)&&(h.push(k,V,j),O+=3)}u.addGroup(S,O,0),S+=O}function A(w){const D=x,O=new ft,P=new J;let B=0;const I=w===!0?e:t,z=w===!0?1:-1;for(let V=1;V<=r;V++)p.push(0,b*z,0),g.push(0,z,0),y.push(.5,.5),x++;const k=x;for(let V=0;V<=r;V++){const W=V/r*c+o,te=Math.cos(W),H=Math.sin(W);P.x=I*H,P.y=b*z,P.z=I*te,p.push(P.x,P.y,P.z),g.push(0,z,0),O.x=te*.5+.5,O.y=H*.5*z+.5,y.push(O.x,O.y),x++}for(let V=0;V<r;V++){const j=D+V,W=k+V;w===!0?h.push(W,W+1,j):h.push(W+1,W,j),B+=3}u.addGroup(S,B,w===!0?1:2),S+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class BS extends Sg{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new BS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ph extends An{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];o(r),u(i),h(),this.setAttribute("position",new qt(s,3)),this.setAttribute("normal",new qt(s.slice(),3)),this.setAttribute("uv",new qt(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(T){const A=new J,w=new J,D=new J;for(let O=0;O<t.length;O+=3)y(t[O+0],A),y(t[O+1],w),y(t[O+2],D),c(A,w,D,T)}function c(T,A,w,D){const O=D+1,P=[];for(let B=0;B<=O;B++){P[B]=[];const I=T.clone().lerp(w,B/O),z=A.clone().lerp(w,B/O),k=O-B;for(let V=0;V<=k;V++)V===0&&B===O?P[B][V]=I:P[B][V]=I.clone().lerp(z,V/k)}for(let B=0;B<O;B++)for(let I=0;I<2*(O-B)-1;I++){const z=Math.floor(I/2);I%2===0?(g(P[B][z+1]),g(P[B+1][z]),g(P[B][z])):(g(P[B][z+1]),g(P[B+1][z+1]),g(P[B+1][z]))}}function u(T){const A=new J;for(let w=0;w<s.length;w+=3)A.x=s[w+0],A.y=s[w+1],A.z=s[w+2],A.normalize().multiplyScalar(T),s[w+0]=A.x,s[w+1]=A.y,s[w+2]=A.z}function h(){const T=new J;for(let A=0;A<s.length;A+=3){T.x=s[A+0],T.y=s[A+1],T.z=s[A+2];const w=b(T)/2/Math.PI+.5,D=S(T)/Math.PI+.5;a.push(w,1-D)}x(),p()}function p(){for(let T=0;T<a.length;T+=6){const A=a[T+0],w=a[T+2],D=a[T+4],O=Math.max(A,w,D),P=Math.min(A,w,D);O>.9&&P<.1&&(A<.2&&(a[T+0]+=1),w<.2&&(a[T+2]+=1),D<.2&&(a[T+4]+=1))}}function g(T){s.push(T.x,T.y,T.z)}function y(T,A){const w=T*3;A.x=e[w+0],A.y=e[w+1],A.z=e[w+2]}function x(){const T=new J,A=new J,w=new J,D=new J,O=new ft,P=new ft,B=new ft;for(let I=0,z=0;I<s.length;I+=9,z+=6){T.set(s[I+0],s[I+1],s[I+2]),A.set(s[I+3],s[I+4],s[I+5]),w.set(s[I+6],s[I+7],s[I+8]),O.set(a[z+0],a[z+1]),P.set(a[z+2],a[z+3]),B.set(a[z+4],a[z+5]),D.copy(T).add(A).add(w).divideScalar(3);const k=b(D);M(O,z+0,T,k),M(P,z+2,A,k),M(B,z+4,w,k)}}function M(T,A,w,D){D<0&&T.x===1&&(a[A]=T.x-1),w.x===0&&w.z===0&&(a[A]=D/2/Math.PI+.5)}function b(T){return Math.atan2(T.z,-T.x)}function S(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ph(e.vertices,e.indices,e.radius,e.details)}}class zS extends ph{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zS(e.radius,e.detail)}}const k_=new J,G_=new J,z2=new J,V_=new Nr;class tL extends An{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Bd*t),a=e.getIndex(),o=e.getAttribute("position"),c=a?a.count:o.count,u=[0,0,0],h=["a","b","c"],p=new Array(3),g={},y=[];for(let x=0;x<c;x+=3){a?(u[0]=a.getX(x),u[1]=a.getX(x+1),u[2]=a.getX(x+2)):(u[0]=x,u[1]=x+1,u[2]=x+2);const{a:M,b,c:S}=V_;if(M.fromBufferAttribute(o,u[0]),b.fromBufferAttribute(o,u[1]),S.fromBufferAttribute(o,u[2]),V_.getNormal(z2),p[0]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,p[1]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,p[2]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let T=0;T<3;T++){const A=(T+1)%3,w=p[T],D=p[A],O=V_[h[T]],P=V_[h[A]],B=`${w}_${D}`,I=`${D}_${w}`;I in g&&g[I]?(z2.dot(g[I].normal)<=s&&(y.push(O.x,O.y,O.z),y.push(P.x,P.y,P.z)),g[I]=null):B in g||(g[B]={index0:u[T],index1:u[A],normal:z2.clone()})}}for(const x in g)if(g[x]){const{index0:M,index1:b}=g[x];k_.fromBufferAttribute(o,M),G_.fromBufferAttribute(o,b),y.push(k_.x,k_.y,k_.z),y.push(G_.x,G_.y,G_.z)}this.setAttribute("position",new qt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class zd extends ry{constructor(e){super(e),this.uuid=ho(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new ry().fromJSON(r))}return this}}const dB={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=nL(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,c,u,h,p,g,y;if(i&&(s=yB(n,e,s,t)),n.length>80*t){o=u=n[0],c=h=n[1];for(let x=t;x<r;x+=t)p=n[x],g=n[x+1],p<o&&(o=p),g<c&&(c=g),p>u&&(u=p),g>h&&(h=g);y=Math.max(u-o,h-c),y=y!==0?32767/y:0}return sy(s,a,t,o,c,y,0),a}};function nL(n,e,t,i,r){let s,a;if(r===RB(n,e,t,i)>0)for(s=e;s<t;s+=i)a=hR(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=hR(s,n[s],n[s+1],a);return a&&FS(a,a.next)&&(oy(a),a=a.next),a}function Xd(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(FS(t,t.next)||sr(t.prev,t,t.next)===0)){if(oy(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function sy(n,e,t,i,r,s,a){if(!n)return;!a&&s&&EB(n,i,r,s);let o=n,c,u;for(;n.prev!==n.next;){if(c=n.prev,u=n.next,s?mB(n,i,r,s):pB(n)){e.push(c.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),oy(n),n=u.next,o=u.next;continue}if(n=u,n===o){a?a===1?(n=gB(Xd(n),e,t),sy(n,e,t,i,r,s,2)):a===2&&vB(n,e,t,i,r,s):sy(Xd(n),e,t,i,r,s,1);break}}}function pB(n){const e=n.prev,t=n,i=n.next;if(sr(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,o=e.y,c=t.y,u=i.y,h=r<s?r<a?r:a:s<a?s:a,p=o<c?o<u?o:u:c<u?c:u,g=r>s?r>a?r:a:s>a?s:a,y=o>c?o>u?o:u:c>u?c:u;let x=i.next;for(;x!==e;){if(x.x>=h&&x.x<=g&&x.y>=p&&x.y<=y&&Ym(r,o,s,c,a,u,x.x,x.y)&&sr(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function mB(n,e,t,i){const r=n.prev,s=n,a=n.next;if(sr(r,s,a)>=0)return!1;const o=r.x,c=s.x,u=a.x,h=r.y,p=s.y,g=a.y,y=o<c?o<u?o:u:c<u?c:u,x=h<p?h<g?h:g:p<g?p:g,M=o>c?o>u?o:u:c>u?c:u,b=h>p?h>g?h:g:p>g?p:g,S=IT(y,x,e,t,i),T=IT(M,b,e,t,i);let A=n.prevZ,w=n.nextZ;for(;A&&A.z>=S&&w&&w.z<=T;){if(A.x>=y&&A.x<=M&&A.y>=x&&A.y<=b&&A!==r&&A!==a&&Ym(o,h,c,p,u,g,A.x,A.y)&&sr(A.prev,A,A.next)>=0||(A=A.prevZ,w.x>=y&&w.x<=M&&w.y>=x&&w.y<=b&&w!==r&&w!==a&&Ym(o,h,c,p,u,g,w.x,w.y)&&sr(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;A&&A.z>=S;){if(A.x>=y&&A.x<=M&&A.y>=x&&A.y<=b&&A!==r&&A!==a&&Ym(o,h,c,p,u,g,A.x,A.y)&&sr(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;w&&w.z<=T;){if(w.x>=y&&w.x<=M&&w.y>=x&&w.y<=b&&w!==r&&w!==a&&Ym(o,h,c,p,u,g,w.x,w.y)&&sr(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function gB(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!FS(r,s)&&iL(r,i,i.next,s)&&ay(r,s)&&ay(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),oy(i),oy(i.next),i=n=s),i=i.next}while(i!==n);return Xd(i)}function vB(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&AB(a,o)){let c=rL(a,o);a=Xd(a,a.next),c=Xd(c,c.next),sy(a,e,t,i,r,s,0),sy(c,e,t,i,r,s,0);return}o=o.next}a=a.next}while(a!==n)}function yB(n,e,t,i){const r=[];let s,a,o,c,u;for(s=0,a=e.length;s<a;s++)o=e[s]*i,c=s<a-1?e[s+1]*i:n.length,u=nL(n,o,c,i,!1),u===u.next&&(u.steiner=!0),r.push(TB(u));for(r.sort(_B),s=0;s<r.length;s++)t=xB(r[s],t);return t}function _B(n,e){return n.x-e.x}function xB(n,e){const t=bB(n,e);if(!t)return e;const i=rL(t,n);return Xd(i,i.next),Xd(t,t.next)}function bB(n,e){let t=e,i=-1/0,r;const s=n.x,a=n.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const g=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=s&&g>i&&(i=g,r=t.x<t.next.x?t:t.next,g===s))return r}t=t.next}while(t!==e);if(!r)return null;const o=r,c=r.x,u=r.y;let h=1/0,p;t=r;do s>=t.x&&t.x>=c&&s!==t.x&&Ym(a<u?s:i,a,c,u,a<u?i:s,a,t.x,t.y)&&(p=Math.abs(a-t.y)/(s-t.x),ay(t,n)&&(p<h||p===h&&(t.x>r.x||t.x===r.x&&SB(r,t)))&&(r=t,h=p)),t=t.next;while(t!==o);return r}function SB(n,e){return sr(n.prev,n,e.prev)<0&&sr(e.next,n,n.next)<0}function EB(n,e,t,i){let r=n;do r.z===0&&(r.z=IT(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,MB(r)}function MB(n){let e,t,i,r,s,a,o,c,u=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,o=0,e=0;e<u&&(o++,i=i.nextZ,!!i);e++);for(c=u;o>0||c>0&&i;)o!==0&&(c===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,o--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(a>1);return n}function IT(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function TB(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Ym(n,e,t,i,r,s,a,o){return(r-a)*(e-o)>=(n-a)*(s-o)&&(n-a)*(i-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(i-o)}function AB(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!wB(n,e)&&(ay(n,e)&&ay(e,n)&&CB(n,e)&&(sr(n.prev,n,e.prev)||sr(n,e.prev,e))||FS(n,e)&&sr(n.prev,n,n.next)>0&&sr(e.prev,e,e.next)>0)}function sr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function FS(n,e){return n.x===e.x&&n.y===e.y}function iL(n,e,t,i){const r=W_(sr(n,e,t)),s=W_(sr(n,e,i)),a=W_(sr(t,i,n)),o=W_(sr(t,i,e));return!!(r!==s&&a!==o||r===0&&j_(n,t,e)||s===0&&j_(n,i,e)||a===0&&j_(t,n,i)||o===0&&j_(t,e,i))}function j_(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function W_(n){return n>0?1:n<0?-1:0}function wB(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&iL(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ay(n,e){return sr(n.prev,n,n.next)<0?sr(n,e,n.next)>=0&&sr(n,n.prev,e)>=0:sr(n,e,n.prev)<0||sr(n,n.next,e)<0}function CB(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function rL(n,e){const t=new BT(n.i,n.x,n.y),i=new BT(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function hR(n,e,t,i){const r=new BT(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function oy(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function BT(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function RB(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class Gc{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Gc.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];dR(e),pR(i,e);let a=e.length;t.forEach(dR);for(let c=0;c<t.length;c++)r.push(a),a+=t[c].length,pR(i,t[c]);const o=dB.triangulate(i,r);for(let c=0;c<o.length;c+=3)s.push(o.slice(c,c+3));return s}}function dR(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function pR(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class HS extends An{constructor(e=new zd([new ft(.5,.5),new ft(-.5,.5),new ft(-.5,-.5),new ft(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,c=e.length;o<c;o++){const u=e[o];a(u)}this.setAttribute("position",new qt(r,3)),this.setAttribute("uv",new qt(s,2)),this.computeVertexNormals();function a(o){const c=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let g=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:y-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:OB;let A,w=!1,D,O,P,B;S&&(A=S.getSpacedPoints(h),w=!0,g=!1,D=S.computeFrenetFrames(h,!1),O=new J,P=new J,B=new J),g||(b=0,y=0,x=0,M=0);const I=o.extractPoints(u);let z=I.shape;const k=I.holes;if(!Gc.isClockWise(z)){z=z.reverse();for(let Se=0,He=k.length;Se<He;Se++){const oe=k[Se];Gc.isClockWise(oe)&&(k[Se]=oe.reverse())}}const j=Gc.triangulateShape(z,k),W=z;for(let Se=0,He=k.length;Se<He;Se++){const oe=k[Se];z=z.concat(oe)}function te(Se,He,oe){return He||console.error("THREE.ExtrudeGeometry: vec does not exist"),Se.clone().addScaledVector(He,oe)}const H=z.length,Q=j.length;function ne(Se,He,oe){let lt,ze,Qe;const De=Se.x-He.x,st=Se.y-He.y,ke=oe.x-Se.x,$=oe.y-Se.y,Y=De*De+st*st,fe=De*$-st*ke;if(Math.abs(fe)>Number.EPSILON){const Ee=Math.sqrt(Y),Re=Math.sqrt(ke*ke+$*$),Le=He.x-st/Ee,Fe=He.y+De/Ee,et=oe.x-$/Re,tt=oe.y+ke/Re,Ot=((et-Le)*$-(tt-Fe)*ke)/(De*$-st*ke);lt=Le+De*Ot-Se.x,ze=Fe+st*Ot-Se.y;const at=lt*lt+ze*ze;if(at<=2)return new ft(lt,ze);Qe=Math.sqrt(at/2)}else{let Ee=!1;De>Number.EPSILON?ke>Number.EPSILON&&(Ee=!0):De<-Number.EPSILON?ke<-Number.EPSILON&&(Ee=!0):Math.sign(st)===Math.sign($)&&(Ee=!0),Ee?(lt=-st,ze=De,Qe=Math.sqrt(Y)):(lt=De,ze=st,Qe=Math.sqrt(Y/2))}return new ft(lt/Qe,ze/Qe)}const re=[];for(let Se=0,He=W.length,oe=He-1,lt=Se+1;Se<He;Se++,oe++,lt++)oe===He&&(oe=0),lt===He&&(lt=0),re[Se]=ne(W[Se],W[oe],W[lt]);const G=[];let X,ie=re.concat();for(let Se=0,He=k.length;Se<He;Se++){const oe=k[Se];X=[];for(let lt=0,ze=oe.length,Qe=ze-1,De=lt+1;lt<ze;lt++,Qe++,De++)Qe===ze&&(Qe=0),De===ze&&(De=0),X[lt]=ne(oe[lt],oe[Qe],oe[De]);G.push(X),ie=ie.concat(X)}for(let Se=0;Se<b;Se++){const He=Se/b,oe=y*Math.cos(He*Math.PI/2),lt=x*Math.sin(He*Math.PI/2)+M;for(let ze=0,Qe=W.length;ze<Qe;ze++){const De=te(W[ze],re[ze],lt);ve(De.x,De.y,-oe)}for(let ze=0,Qe=k.length;ze<Qe;ze++){const De=k[ze];X=G[ze];for(let st=0,ke=De.length;st<ke;st++){const $=te(De[st],X[st],lt);ve($.x,$.y,-oe)}}}const se=x+M;for(let Se=0;Se<H;Se++){const He=g?te(z[Se],ie[Se],se):z[Se];w?(P.copy(D.normals[0]).multiplyScalar(He.x),O.copy(D.binormals[0]).multiplyScalar(He.y),B.copy(A[0]).add(P).add(O),ve(B.x,B.y,B.z)):ve(He.x,He.y,0)}for(let Se=1;Se<=h;Se++)for(let He=0;He<H;He++){const oe=g?te(z[He],ie[He],se):z[He];w?(P.copy(D.normals[Se]).multiplyScalar(oe.x),O.copy(D.binormals[Se]).multiplyScalar(oe.y),B.copy(A[Se]).add(P).add(O),ve(B.x,B.y,B.z)):ve(oe.x,oe.y,p/h*Se)}for(let Se=b-1;Se>=0;Se--){const He=Se/b,oe=y*Math.cos(He*Math.PI/2),lt=x*Math.sin(He*Math.PI/2)+M;for(let ze=0,Qe=W.length;ze<Qe;ze++){const De=te(W[ze],re[ze],lt);ve(De.x,De.y,p+oe)}for(let ze=0,Qe=k.length;ze<Qe;ze++){const De=k[ze];X=G[ze];for(let st=0,ke=De.length;st<ke;st++){const $=te(De[st],X[st],lt);w?ve($.x,$.y+A[h-1].y,A[h-1].x+oe):ve($.x,$.y,p+oe)}}}ee(),ue();function ee(){const Se=r.length/3;if(g){let He=0,oe=H*He;for(let lt=0;lt<Q;lt++){const ze=j[lt];_e(ze[2]+oe,ze[1]+oe,ze[0]+oe)}He=h+b*2,oe=H*He;for(let lt=0;lt<Q;lt++){const ze=j[lt];_e(ze[0]+oe,ze[1]+oe,ze[2]+oe)}}else{for(let He=0;He<Q;He++){const oe=j[He];_e(oe[2],oe[1],oe[0])}for(let He=0;He<Q;He++){const oe=j[He];_e(oe[0]+H*h,oe[1]+H*h,oe[2]+H*h)}}i.addGroup(Se,r.length/3-Se,0)}function ue(){const Se=r.length/3;let He=0;pe(W,He),He+=W.length;for(let oe=0,lt=k.length;oe<lt;oe++){const ze=k[oe];pe(ze,He),He+=ze.length}i.addGroup(Se,r.length/3-Se,1)}function pe(Se,He){let oe=Se.length;for(;--oe>=0;){const lt=oe;let ze=oe-1;ze<0&&(ze=Se.length-1);for(let Qe=0,De=h+b*2;Qe<De;Qe++){const st=H*Qe,ke=H*(Qe+1),$=He+lt+st,Y=He+ze+st,fe=He+ze+ke,Ee=He+lt+ke;Xe($,Y,fe,Ee)}}}function ve(Se,He,oe){c.push(Se),c.push(He),c.push(oe)}function _e(Se,He,oe){qe(Se),qe(He),qe(oe);const lt=r.length/3,ze=T.generateTopUV(i,r,lt-3,lt-2,lt-1);Be(ze[0]),Be(ze[1]),Be(ze[2])}function Xe(Se,He,oe,lt){qe(Se),qe(He),qe(lt),qe(He),qe(oe),qe(lt);const ze=r.length/3,Qe=T.generateSideWallUV(i,r,ze-6,ze-3,ze-2,ze-1);Be(Qe[0]),Be(Qe[1]),Be(Qe[3]),Be(Qe[1]),Be(Qe[2]),Be(Qe[3])}function qe(Se){r.push(c[Se*3+0]),r.push(c[Se*3+1]),r.push(c[Se*3+2])}function Be(Se){s.push(Se.x),s.push(Se.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return DB(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Bb[r.type]().fromJSON(r)),new HS(i,e.options)}}const OB={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],o=e[i*3],c=e[i*3+1],u=e[r*3],h=e[r*3+1];return[new ft(s,a),new ft(o,c),new ft(u,h)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],o=e[t*3+1],c=e[t*3+2],u=e[i*3],h=e[i*3+1],p=e[i*3+2],g=e[r*3],y=e[r*3+1],x=e[r*3+2],M=e[s*3],b=e[s*3+1],S=e[s*3+2];return Math.abs(o-h)<Math.abs(a-u)?[new ft(a,1-c),new ft(u,1-p),new ft(g,1-x),new ft(M,1-S)]:[new ft(o,1-c),new ft(h,1-p),new ft(y,1-x),new ft(b,1-S)]}};function DB(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Cy extends ph{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Cy(e.radius,e.detail)}}class Ry extends ph{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ry(e.radius,e.detail)}}class Xl extends An{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),c=Math.floor(r),u=o+1,h=c+1,p=e/o,g=t/c,y=[],x=[],M=[],b=[];for(let S=0;S<h;S++){const T=S*g-a;for(let A=0;A<u;A++){const w=A*p-s;x.push(w,-T,0),M.push(0,0,1),b.push(A/o),b.push(1-S/c)}}for(let S=0;S<c;S++)for(let T=0;T<o;T++){const A=T+u*S,w=T+u*(S+1),D=T+1+u*(S+1),O=T+1+u*S;y.push(A,w,O),y.push(w,D,O)}this.setIndex(y),this.setAttribute("position",new qt(x,3)),this.setAttribute("normal",new qt(M,3)),this.setAttribute("uv",new qt(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xl(e.width,e.height,e.widthSegments,e.heightSegments)}}class kS extends An{constructor(e=.5,t=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const o=[],c=[],u=[],h=[];let p=e;const g=(t-e)/r,y=new J,x=new ft;for(let M=0;M<=r;M++){for(let b=0;b<=i;b++){const S=s+b/i*a;y.x=p*Math.cos(S),y.y=p*Math.sin(S),c.push(y.x,y.y,y.z),u.push(0,0,1),x.x=(y.x/t+1)/2,x.y=(y.y/t+1)/2,h.push(x.x,x.y)}p+=g}for(let M=0;M<r;M++){const b=M*(i+1);for(let S=0;S<i;S++){const T=S+b,A=T,w=T+i+1,D=T+i+2,O=T+1;o.push(A,w,O),o.push(w,D,O)}}this.setIndex(o),this.setAttribute("position",new qt(c,3)),this.setAttribute("normal",new qt(u,3)),this.setAttribute("uv",new qt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class GS extends An{constructor(e=new zd([new ft(0,.5),new ft(-.5,-.5),new ft(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let o=0,c=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(o,c,h),o+=c,c=0;this.setIndex(i),this.setAttribute("position",new qt(r,3)),this.setAttribute("normal",new qt(s,3)),this.setAttribute("uv",new qt(a,2));function u(h){const p=r.length/3,g=h.extractPoints(t);let y=g.shape;const x=g.holes;Gc.isClockWise(y)===!1&&(y=y.reverse());for(let b=0,S=x.length;b<S;b++){const T=x[b];Gc.isClockWise(T)===!0&&(x[b]=T.reverse())}const M=Gc.triangulateShape(y,x);for(let b=0,S=x.length;b<S;b++){const T=x[b];y=y.concat(T)}for(let b=0,S=y.length;b<S;b++){const T=y[b];r.push(T.x,T.y,0),s.push(0,0,1),a.push(T.x,T.y)}for(let b=0,S=M.length;b<S;b++){const T=M[b],A=T[0]+p,w=T[1]+p,D=T[2]+p;i.push(A,w,D),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return UB(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new GS(i,e.curveSegments)}}function UB(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Oy extends An{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(a+o,Math.PI);let u=0;const h=[],p=new J,g=new J,y=[],x=[],M=[],b=[];for(let S=0;S<=i;S++){const T=[],A=S/i;let w=0;S===0&&a===0?w=.5/t:S===i&&c===Math.PI&&(w=-.5/t);for(let D=0;D<=t;D++){const O=D/t;p.x=-e*Math.cos(r+O*s)*Math.sin(a+A*o),p.y=e*Math.cos(a+A*o),p.z=e*Math.sin(r+O*s)*Math.sin(a+A*o),x.push(p.x,p.y,p.z),g.copy(p).normalize(),M.push(g.x,g.y,g.z),b.push(O+w,1-A),T.push(u++)}h.push(T)}for(let S=0;S<i;S++)for(let T=0;T<t;T++){const A=h[S][T+1],w=h[S][T],D=h[S+1][T],O=h[S+1][T+1];(S!==0||a>0)&&y.push(A,w,O),(S!==i-1||c<Math.PI)&&y.push(w,D,O)}this.setIndex(y),this.setAttribute("position",new qt(x,3)),this.setAttribute("normal",new qt(M,3)),this.setAttribute("uv",new qt(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class VS extends ph{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new VS(e.radius,e.detail)}}class jS extends An{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],o=[],c=[],u=[],h=new J,p=new J,g=new J;for(let y=0;y<=i;y++)for(let x=0;x<=r;x++){const M=x/r*s,b=y/i*Math.PI*2;p.x=(e+t*Math.cos(b))*Math.cos(M),p.y=(e+t*Math.cos(b))*Math.sin(M),p.z=t*Math.sin(b),o.push(p.x,p.y,p.z),h.x=e*Math.cos(M),h.y=e*Math.sin(M),g.subVectors(p,h).normalize(),c.push(g.x,g.y,g.z),u.push(x/r),u.push(y/i)}for(let y=1;y<=i;y++)for(let x=1;x<=r;x++){const M=(r+1)*y+x-1,b=(r+1)*(y-1)+x-1,S=(r+1)*(y-1)+x,T=(r+1)*y+x;a.push(M,b,T),a.push(b,S,T)}this.setIndex(a),this.setAttribute("position",new qt(o,3)),this.setAttribute("normal",new qt(c,3)),this.setAttribute("uv",new qt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class WS extends An{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const o=[],c=[],u=[],h=[],p=new J,g=new J,y=new J,x=new J,M=new J,b=new J,S=new J;for(let A=0;A<=i;++A){const w=A/i*s*Math.PI*2;T(w,s,a,e,y),T(w+.01,s,a,e,x),b.subVectors(x,y),S.addVectors(x,y),M.crossVectors(b,S),S.crossVectors(M,b),M.normalize(),S.normalize();for(let D=0;D<=r;++D){const O=D/r*Math.PI*2,P=-t*Math.cos(O),B=t*Math.sin(O);p.x=y.x+(P*S.x+B*M.x),p.y=y.y+(P*S.y+B*M.y),p.z=y.z+(P*S.z+B*M.z),c.push(p.x,p.y,p.z),g.subVectors(p,y).normalize(),u.push(g.x,g.y,g.z),h.push(A/i),h.push(D/r)}}for(let A=1;A<=i;A++)for(let w=1;w<=r;w++){const D=(r+1)*(A-1)+(w-1),O=(r+1)*A+(w-1),P=(r+1)*A+w,B=(r+1)*(A-1)+w;o.push(D,O,B),o.push(O,P,B)}this.setIndex(o),this.setAttribute("position",new qt(c,3)),this.setAttribute("normal",new qt(u,3)),this.setAttribute("uv",new qt(h,2));function T(A,w,D,O,P){const B=Math.cos(A),I=Math.sin(A),z=D/w*A,k=Math.cos(z);P.x=O*(2+k)*.5*B,P.y=O*(2+k)*I*.5,P.z=O*Math.sin(z)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new WS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class XS extends An{constructor(e=new Mw(new J(-1,-1,0),new J(-1,1,0),new J(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new J,c=new J,u=new ft;let h=new J;const p=[],g=[],y=[],x=[];M(),this.setIndex(x),this.setAttribute("position",new qt(p,3)),this.setAttribute("normal",new qt(g,3)),this.setAttribute("uv",new qt(y,2));function M(){for(let A=0;A<t;A++)b(A);b(s===!1?t:0),T(),S()}function b(A){h=e.getPointAt(A/t,h);const w=a.normals[A],D=a.binormals[A];for(let O=0;O<=r;O++){const P=O/r*Math.PI*2,B=Math.sin(P),I=-Math.cos(P);c.x=I*w.x+B*D.x,c.y=I*w.y+B*D.y,c.z=I*w.z+B*D.z,c.normalize(),g.push(c.x,c.y,c.z),o.x=h.x+i*c.x,o.y=h.y+i*c.y,o.z=h.z+i*c.z,p.push(o.x,o.y,o.z)}}function S(){for(let A=1;A<=t;A++)for(let w=1;w<=r;w++){const D=(r+1)*(A-1)+(w-1),O=(r+1)*A+(w-1),P=(r+1)*A+w,B=(r+1)*(A-1)+w;x.push(D,O,B),x.push(O,P,B)}}function T(){for(let A=0;A<=t;A++)for(let w=0;w<=r;w++)u.x=A/t,u.y=w/r,y.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new XS(new Bb[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Aw extends An{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new J,s=new J;if(e.index!==null){const a=e.attributes.position,o=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,h=c.length;u<h;++u){const p=c[u],g=p.start,y=p.count;for(let x=g,M=g+y;x<M;x+=3)for(let b=0;b<3;b++){const S=o.getX(x+b),T=o.getX(x+(b+1)%3);r.fromBufferAttribute(a,S),s.fromBufferAttribute(a,T),mR(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,c=a.count/3;o<c;o++)for(let u=0;u<3;u++){const h=3*o+u,p=3*o+(u+1)%3;r.fromBufferAttribute(a,h),s.fromBufferAttribute(a,p),mR(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new qt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function mR(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var gR=Object.freeze({__proto__:null,BoxGeometry:ip,CapsuleGeometry:PS,CircleGeometry:IS,ConeGeometry:BS,CylinderGeometry:Sg,DodecahedronGeometry:zS,EdgesGeometry:tL,ExtrudeGeometry:HS,IcosahedronGeometry:Cy,LatheGeometry:wy,OctahedronGeometry:Ry,PlaneGeometry:Xl,PolyhedronGeometry:ph,RingGeometry:kS,ShapeGeometry:GS,SphereGeometry:Oy,TetrahedronGeometry:VS,TorusGeometry:jS,TorusKnotGeometry:WS,TubeGeometry:XS,WireframeGeometry:Aw});class sL extends Yr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Rt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class aL extends ks{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Dy extends Yr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Rt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hh,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new po,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class el extends Dy{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ft(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Tn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Rt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Rt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Rt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class oL extends Yr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Rt(16777215),this.specular=new Rt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hh,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new po,this.combine=_y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lL extends Yr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Rt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hh,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class cL extends Yr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hh,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class uL extends Yr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hh,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new po,this.combine=_y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qS extends Yr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=RU,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class YS extends Yr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class fL extends Yr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Rt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hh,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hL extends xs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ud(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function dL(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function pL(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function zT(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let c=0;c!==e;++c)r[a++]=n[o+c]}return r}function ww(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}function LB(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let c=0;c<s.tracks.length;++c){const u=s.tracks[c],h=u.getValueSize(),p=[],g=[];for(let y=0;y<u.times.length;++y){const x=u.times[y]*r;if(!(x<t||x>=i)){p.push(u.times[y]);for(let M=0;M<h;++M)g.push(u.values[y*h+M])}}p.length!==0&&(u.times=Ud(p,u.times.constructor),u.values=Ud(g,u.values.constructor),a.push(u))}s.tracks=a;let o=1/0;for(let c=0;c<s.tracks.length;++c)o>s.tracks[c].times[0]&&(o=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*o);return s.resetDuration(),s}function NB(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const o=t.tracks[a],c=o.ValueTypeName;if(c==="bool"||c==="string")continue;const u=n.tracks.find(function(S){return S.name===o.name&&S.ValueTypeName===c});if(u===void 0)continue;let h=0;const p=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);let g=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);const x=o.times.length-1;let M;if(s<=o.times[0]){const S=h,T=p-h;M=o.values.slice(S,T)}else if(s>=o.times[x]){const S=x*p+h,T=S+p-h;M=o.values.slice(S,T)}else{const S=o.createInterpolant(),T=h,A=p-h;S.evaluate(s),M=S.resultBuffer.slice(T,A)}c==="quaternion"&&new Ar().fromArray(M).normalize().conjugate().toArray(M);const b=u.times.length;for(let S=0;S<b;++S){const T=S*y+g;if(c==="quaternion")Ar.multiplyQuaternionsFlat(u.values,T,M,0,u.values,T);else{const A=y-g*2;for(let w=0;w<A;++w)u.values[T+w]-=M[w]}}}return n.blendMode=ow,n}const PB={convertArray:Ud,isTypedArray:dL,getKeyframeOrder:pL,sortedArray:zT,flattenJSON:ww,subclip:LB,makeClipAdditive:NB};class Eg{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(i=2,s=o);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class mL extends Eg{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Cd,endingEnd:Cd}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],c=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case Rd:s=e,o=2*t-i;break;case Jv:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(c===void 0)switch(this.getSettings_().endingEnd){case Rd:a=e,c=2*i-t;break;case Jv:a=1,c=i+r[1]-r[0];break;default:a=e-1,c=t}const u=(i-t)*.5,h=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(c-i),this._offsetPrev=s*h,this._offsetNext=a*h}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=e*o,u=c-o,h=this._offsetPrev,p=this._offsetNext,g=this._weightPrev,y=this._weightNext,x=(i-t)/(r-t),M=x*x,b=M*x,S=-g*b+2*g*M-g*x,T=(1+g)*b+(-1.5-2*g)*M+(-.5+g)*x+1,A=(-1-y)*b+(1.5+y)*M+.5*x,w=y*b-y*M;for(let D=0;D!==o;++D)s[D]=S*a[h+D]+T*a[u+D]+A*a[c+D]+w*a[p+D];return s}}class Cw extends Eg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=e*o,u=c-o,h=(i-t)/(r-t),p=1-h;for(let g=0;g!==o;++g)s[g]=a[u+g]*p+a[c+g]*h;return s}}class gL extends Eg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ql{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ud(t,this.TimeBufferType),this.values=Ud(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ud(e.times,Array),values:Ud(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new gL(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Cw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new mL(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case og:t=this.InterpolantFactoryMethodDiscrete;break;case lg:t=this.InterpolantFactoryMethodLinear;break;case Wx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return og;case this.InterpolantFactoryMethodLinear:return lg;case this.InterpolantFactoryMethodSmooth:return Wx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=i.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const c=i[o];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,c),e=!1;break}if(a!==null&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,c,a),e=!1;break}a=c}if(r!==void 0&&dL(r))for(let o=0,c=r.length;o!==c;++o){const u=r[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Wx,s=e.length-1;let a=1;for(let o=1;o<s;++o){let c=!1;const u=e[o],h=e[o+1];if(u!==h&&(o!==1||u!==e[0]))if(r)c=!0;else{const p=o*i,g=p-i,y=p+i;for(let x=0;x!==i;++x){const M=t[p+x];if(M!==t[g+x]||M!==t[y+x]){c=!0;break}}}if(c){if(o!==a){e[a]=e[o];const p=o*i,g=a*i;for(let y=0;y!==i;++y)t[g+y]=t[p+y]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,c=a*i,u=0;u!==i;++u)t[c+u]=t[o+u];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}ql.prototype.TimeBufferType=Float32Array;ql.prototype.ValueBufferType=Float32Array;ql.prototype.DefaultInterpolation=lg;class rp extends ql{constructor(e,t,i){super(e,t,i)}}rp.prototype.ValueTypeName="bool";rp.prototype.ValueBufferType=Array;rp.prototype.DefaultInterpolation=og;rp.prototype.InterpolantFactoryMethodLinear=void 0;rp.prototype.InterpolantFactoryMethodSmooth=void 0;class Rw extends ql{}Rw.prototype.ValueTypeName="color";class qd extends ql{}qd.prototype.ValueTypeName="number";class vL extends Eg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=(i-t)/(r-t);let u=e*o;for(let h=u+o;u!==h;u+=4)Ar.slerpFlat(s,0,a,u-o,a,u,c);return s}}class Yd extends ql{InterpolantFactoryMethodLinear(e){return new vL(this.times,this.values,this.getValueSize(),e)}}Yd.prototype.ValueTypeName="quaternion";Yd.prototype.InterpolantFactoryMethodSmooth=void 0;class sp extends ql{constructor(e,t,i){super(e,t,i)}}sp.prototype.ValueTypeName="string";sp.prototype.ValueBufferType=Array;sp.prototype.DefaultInterpolation=og;sp.prototype.InterpolantFactoryMethodLinear=void 0;sp.prototype.InterpolantFactoryMethodSmooth=void 0;class Zd extends ql{}Zd.prototype.ValueTypeName="vector";class dg{constructor(e="",t=-1,i=[],r=MS){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ho(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(BB(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(ql.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let o=0;o<s;o++){let c=[],u=[];c.push((o+s-1)%s,o,(o+1)%s),u.push(0,1,0);const h=pL(c);c=zT(c,1,h),u=zT(u,1,h),!r&&c[0]===0&&(c.push(s),u.push(u[0])),a.push(new qd(".morphTargetInfluences["+t[o].name+"]",c,u).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,c=e.length;o<c;o++){const u=e[o],h=u.name.match(s);if(h&&h.length>1){const p=h[1];let g=r[p];g||(r[p]=g=[]),g.push(u)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,g,y,x,M){if(y.length!==0){const b=[],S=[];ww(y,b,S,x),b.length!==0&&M.push(new p(g,b,S))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let c=e.length||-1;const u=e.hierarchy||[];for(let p=0;p<u.length;p++){const g=u[p].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const y={};let x;for(x=0;x<g.length;x++)if(g[x].morphTargets)for(let M=0;M<g[x].morphTargets.length;M++)y[g[x].morphTargets[M]]=-1;for(const M in y){const b=[],S=[];for(let T=0;T!==g[x].morphTargets.length;++T){const A=g[x];b.push(A.time),S.push(A.morphTarget===M?1:0)}r.push(new qd(".morphTargetInfluence["+M+"]",b,S))}c=y.length*a}else{const y=".bones["+t[p].name+"]";i(Zd,y+".position",g,"pos",r),i(Yd,y+".quaternion",g,"rot",r),i(Zd,y+".scale",g,"scl",r)}}return r.length===0?null:new this(s,c,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function IB(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qd;case"vector":case"vector2":case"vector3":case"vector4":return Zd;case"color":return Rw;case"quaternion":return Yd;case"bool":case"boolean":return rp;case"string":return sp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function BB(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=IB(n.type);if(n.times===void 0){const t=[],i=[];ww(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Pu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class ZS{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){o++,s===!1&&r.onStart!==void 0&&r.onStart(h,a,o),s=!0},this.itemEnd=function(h){a++,r.onProgress!==void 0&&r.onProgress(h,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,p){return u.push(h,p),this},this.removeHandler=function(h){const p=u.indexOf(h);return p!==-1&&u.splice(p,2),this},this.getHandler=function(h){for(let p=0,g=u.length;p<g;p+=2){const y=u[p],x=u[p+1];if(y.global&&(y.lastIndex=0),y.test(h))return x}return null}}}const yL=new ZS;let Gs=class{constructor(e){this.manager=e!==void 0?e:yL,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Gs.DEFAULT_MATERIAL_NAME="__DEFAULT";const Au={};class zB extends Error{constructor(e,t){super(e),this.response=t}}class ga extends Gs{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Pu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Au[e]!==void 0){Au[e].push({onLoad:t,onProgress:i,onError:r});return}Au[e]=[],Au[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,c=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=Au[e],p=u.body.getReader(),g=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),y=g?parseInt(g):0,x=y!==0;let M=0;const b=new ReadableStream({start(S){T();function T(){p.read().then(({done:A,value:w})=>{if(A)S.close();else{M+=w.byteLength;const D=new ProgressEvent("progress",{lengthComputable:x,loaded:M,total:y});for(let O=0,P=h.length;O<P;O++){const B=h[O];B.onProgress&&B.onProgress(D)}S.enqueue(w),T()}},A=>{S.error(A)})}}});return new Response(b)}else throw new zB(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,o));case"json":return u.json();default:if(o===void 0)return u.text();{const p=/charset="?([^;"\s]*)"?/i.exec(o),g=p&&p[1]?p[1].toLowerCase():void 0,y=new TextDecoder(g);return u.arrayBuffer().then(x=>y.decode(x))}}}).then(u=>{Pu.add(e,u);const h=Au[e];delete Au[e];for(let p=0,g=h.length;p<g;p++){const y=h[p];y.onLoad&&y.onLoad(u)}}).catch(u=>{const h=Au[e];if(h===void 0)throw this.manager.itemError(e),u;delete Au[e];for(let p=0,g=h.length;p<g;p++){const y=h[p];y.onError&&y.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class FB extends Gs{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new ga(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=dg.parse(e[i]);t.push(r)}return t}}class HB extends Gs{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],o=new US,c=new ga(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let u=0;function h(p){c.load(e[p],function(g){const y=s.parse(g,!0);a[p]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},u+=1,u===6&&(y.mipmapCount===1&&(o.minFilter=Zn),o.image=a,o.format=y.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let p=0,g=e.length;p<g;++p)h(p);else c.load(e,function(p){const g=s.parse(p,!0);if(g.isCubemap){const y=g.mipmaps.length/g.mipmapCount;for(let x=0;x<y;x++){a[x]={mipmaps:[]};for(let M=0;M<g.mipmapCount;M++)a[x].mipmaps.push(g.mipmaps[x*g.mipmapCount+M]),a[x].format=g.format,a[x].width=g.width,a[x].height=g.height}o.image=a}else o.image.width=g.width,o.image.height=g.height,o.mipmaps=g.mipmaps;g.mipmapCount===1&&(o.minFilter=Zn),o.format=g.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}class ly extends Gs{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Pu.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=iy("img");function c(){h(),Pu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(p){h(),r&&r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){o.removeEventListener("load",c,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class _L extends Gs{constructor(e){super(e)}load(e,t,i,r){const s=new Ey;s.colorSpace=pr;const a=new ly(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function c(u){a.load(e[u],function(h){s.images[u]=h,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)c(u);return s}}class Ow extends Gs{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Gl,o=new ga(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(c){let u;try{u=s.parse(c)}catch(h){if(r!==void 0)r(h);else{console.error(h);return}}u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:Mr,a.wrapT=u.wrapT!==void 0?u.wrapT:Mr,a.magFilter=u.magFilter!==void 0?u.magFilter:Zn,a.minFilter=u.minFilter!==void 0?u.minFilter:Zn,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(a.colorSpace=u.colorSpace),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=Go),u.mipmapCount===1&&(a.minFilter=Zn),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,t&&t(a,u)},i,r),a}}class xL extends Gs{constructor(e){super(e)}load(e,t,i,r){const s=new mi,a=new ly(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class mh extends Cn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Rt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class bL extends mh{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Cn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Rt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const F2=new Ut,vR=new J,yR=new J;class Dw{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ft(512,512),this.map=null,this.mapPass=null,this.matrix=new Ut,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ay,this._frameExtents=new ft(1,1),this._viewportCount=1,this._viewports=[new Ln(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;vR.setFromMatrixPosition(e.matrixWorld),t.position.copy(vR),yR.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(yR),t.updateMatrixWorld(),F2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(F2),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(F2)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class kB extends Dw{constructor(){super(new Er(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=cg*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Uw extends mh{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Cn.DEFAULT_UP),this.updateMatrix(),this.target=new Cn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new kB}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _R=new Ut,iv=new J,H2=new J;class GB extends Dw{constructor(){super(new Er(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ft(4,2),this._viewportCount=6,this._viewports=[new Ln(2,1,1,1),new Ln(0,1,1,1),new Ln(3,1,1,1),new Ln(1,1,1,1),new Ln(3,0,1,1),new Ln(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),iv.setFromMatrixPosition(e.matrixWorld),i.position.copy(iv),H2.copy(i.position),H2.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(H2),i.updateMatrixWorld(),r.makeTranslation(-iv.x,-iv.y,-iv.z),_R.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_R)}}class Lw extends mh{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new GB}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}let ju=class extends AS{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=h*this.view.offsetY,c=o-h*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};class VB extends Dw{constructor(){super(new ju(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Nw extends mh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Cn.DEFAULT_UP),this.updateMatrix(),this.target=new Cn,this.shadow=new VB}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class SL extends mh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class EL extends mh{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class ML{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class TL extends mh{constructor(e=new ML,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class KS extends Gs{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new ga(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Rt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new Rt().setHex(a.value);break;case"v2":r.uniforms[s].value=new ft().fromArray(a.value);break;case"v3":r.uniforms[s].value=new J().fromArray(a.value);break;case"v4":r.uniforms[s].value=new Ln().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Mn().fromArray(a.value);break;case"m4":r.uniforms[s].value=new Ut().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ft().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ft().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return KS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:sL,SpriteMaterial:gw,RawShaderMaterial:aL,ShaderMaterial:ks,PointsMaterial:OS,MeshPhysicalMaterial:el,MeshStandardMaterial:Dy,MeshPhongMaterial:oL,MeshToonMaterial:lL,MeshNormalMaterial:cL,MeshLambertMaterial:uL,MeshDepthMaterial:qS,MeshDistanceMaterial:YS,MeshBasicMaterial:pa,MeshMatcapMaterial:fL,LineDashedMaterial:hL,LineBasicMaterial:xs,Material:Yr};return new t[e]}}class Qf{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class $S extends An{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class AL extends Gs{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new ga(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(y,x){if(t[x]!==void 0)return t[x];const b=y.interleavedBuffers[x],S=s(y,b.buffer),T=qm(b.type,S),A=new My(T,b.stride);return A.uuid=b.uuid,t[x]=A,A}function s(y,x){if(i[x]!==void 0)return i[x];const b=y.arrayBuffers[x],S=new Uint32Array(b).buffer;return i[x]=S,S}const a=e.isInstancedBufferGeometry?new $S:new An,o=e.data.index;if(o!==void 0){const y=qm(o.type,o.array);a.setIndex(new Jn(y,1))}const c=e.data.attributes;for(const y in c){const x=c[y];let M;if(x.isInterleavedBufferAttribute){const b=r(e.data,x.data);M=new Ga(b,x.itemSize,x.offset,x.normalized)}else{const b=qm(x.type,x.array),S=x.isInstancedBufferAttribute?ah:Jn;M=new S(b,x.itemSize,x.normalized)}x.name!==void 0&&(M.name=x.name),x.usage!==void 0&&M.setUsage(x.usage),a.setAttribute(y,M)}const u=e.data.morphAttributes;if(u)for(const y in u){const x=u[y],M=[];for(let b=0,S=x.length;b<S;b++){const T=x[b];let A;if(T.isInterleavedBufferAttribute){const w=r(e.data,T.data);A=new Ga(w,T.itemSize,T.offset,T.normalized)}else{const w=qm(T.type,T.array);A=new Jn(w,T.itemSize,T.normalized)}T.name!==void 0&&(A.name=T.name),M.push(A)}a.morphAttributes[y]=M}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let y=0,x=p.length;y!==x;++y){const M=p[y];a.addGroup(M.start,M.count,M.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const y=new J;g.center!==void 0&&y.fromArray(g.center),a.boundingSphere=new gr(y,g.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class jB extends Gs{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?Qf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new ga(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){let u=null;try{u=JSON.parse(c)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Qf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ga(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),c=o.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(u)}),o=this.parseTextures(e.textures,a),c=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,s,c,o,i),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),t!==void 0){let p=!1;for(const g in a)if(a[g].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,r,o,a,t),u=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,u),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new zd().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new Ty().fromJSON(e[s],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new AL;for(let s=0,a=e.length;s<a;s++){let o;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(c);break;default:c.type in gR?o=gR[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}o.uuid=c.uuid,c.name!==void 0&&(o.name=c.name),c.userData!==void 0&&(o.userData=c.userData),i[c.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new KS;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const c=e[a];i[c.uuid]===void 0&&(i[c.uuid]=s.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=dg.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(c){return i.manager.itemStart(c),s.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function o(c){if(typeof c=="string"){const u=c,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return a(h)}else return c.data?{data:qm(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new ZS(t);s=new ly(c),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const p=e[u],g=p.url;if(Array.isArray(g)){const y=[];for(let x=0,M=g.length;x<M;x++){const b=g[x],S=o(b);S!==null&&(S instanceof HTMLImageElement?y.push(S):y.push(new Gl(S.data,S.width,S.height)))}r[p.uuid]=new Od(y)}else{const y=o(p.url);r[p.uuid]=new Od(y)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const o=a,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(c)}else return a.data?{data:qm(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new ly(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const c=e[a],u=c.url;if(Array.isArray(u)){const h=[];for(let p=0,g=u.length;p<g;p++){const y=u[p],x=await s(y);x!==null&&(x instanceof HTMLImageElement?h.push(x):h.push(new Gl(x.data,x.width,x.height)))}i[c.uuid]=new Od(h)}else{const h=await s(c.url);i[c.uuid]=new Od(h)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const c=t[o.image],u=c.data;let h;Array.isArray(u)?(h=new Ey,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new Gl:h=new mi,u&&(h.needsUpdate=!0)),h.source=c,h.uuid=o.uuid,o.name!==void 0&&(h.name=o.name),o.mapping!==void 0&&(h.mapping=i(o.mapping,WB)),o.channel!==void 0&&(h.channel=o.channel),o.offset!==void 0&&h.offset.fromArray(o.offset),o.repeat!==void 0&&h.repeat.fromArray(o.repeat),o.center!==void 0&&h.center.fromArray(o.center),o.rotation!==void 0&&(h.rotation=o.rotation),o.wrap!==void 0&&(h.wrapS=i(o.wrap[0],xR),h.wrapT=i(o.wrap[1],xR)),o.format!==void 0&&(h.format=o.format),o.internalFormat!==void 0&&(h.internalFormat=o.internalFormat),o.type!==void 0&&(h.type=o.type),o.colorSpace!==void 0&&(h.colorSpace=o.colorSpace),o.minFilter!==void 0&&(h.minFilter=i(o.minFilter,bR)),o.magFilter!==void 0&&(h.magFilter=i(o.magFilter,bR)),o.anisotropy!==void 0&&(h.anisotropy=o.anisotropy),o.flipY!==void 0&&(h.flipY=o.flipY),o.generateMipmaps!==void 0&&(h.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(h.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(h.compareFunction=o.compareFunction),o.userData!==void 0&&(h.userData=o.userData),r[o.uuid]=h}return r}parseObject(e,t,i,r,s){let a;function o(g){return t[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),t[g]}function c(g){if(g!==void 0){if(Array.isArray(g)){const y=[];for(let x=0,M=g.length;x<M;x++){const b=g[x];i[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),y.push(i[b])}return y}return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),i[g]}}function u(g){return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),r[g]}let h,p;switch(e.type){case"Scene":a=new sh,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Rt(e.background):a.background=u(e.background)),e.environment!==void 0&&(a.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new CS(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new wS(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Er(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ju(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new SL(e.color,e.intensity);break;case"DirectionalLight":a=new Nw(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new Lw(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new EL(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Uw(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new bL(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new TL().fromJSON(e);break;case"SkinnedMesh":h=o(e.geometry),p=c(e.material),a=new vw(h,p),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":h=o(e.geometry),p=c(e.material),a=new fi(h,p);break;case"InstancedMesh":h=o(e.geometry),p=c(e.material);const g=e.count,y=e.instanceMatrix,x=e.instanceColor;a=new yw(h,p,g),a.instanceMatrix=new ah(new Float32Array(y.array),16),x!==void 0&&(a.instanceColor=new ah(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":h=o(e.geometry),p=c(e.material),a=new YU(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),a.geometry=h,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(M=>{const b=new Kn;b.min.fromArray(M.boxMin),b.max.fromArray(M.boxMax);const S=new gr;return S.radius=M.sphereRadius,S.center.fromArray(M.sphereCenter),{boxInitialized:M.boxInitialized,box:b,sphereInitialized:M.sphereInitialized,sphere:S}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":a=new qU;break;case"Line":a=new ku(o(e.geometry),c(e.material));break;case"LineLoop":a=new _w(o(e.geometry),c(e.material));break;case"LineSegments":a=new Jo(o(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new DS(o(e.geometry),c(e.material));break;case"Sprite":a=new XU(c(e.material));break;case"Group":a=new Nu;break;case"Bone":a=new RS;break;default:a=new Cn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let y=0;y<g.length;y++)a.add(this.parseObject(g[y],t,i,r,s))}if(e.animations!==void 0){const g=e.animations;for(let y=0;y<g.length;y++){const x=g[y];a.animations.push(s[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const g=e.levels;for(let y=0;y<g.length;y++){const x=g[y],M=a.getObjectByProperty("uuid",x.object);M!==void 0&&a.addLevel(M,x.distance,x.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Cn}})}}const WB={UVMapping:nh,CubeReflectionMapping:Vc,CubeRefractionMapping:ih,EquirectangularReflectionMapping:rg,EquirectangularRefractionMapping:Qv,CubeUVReflectionMapping:bg},xR={RepeatWrapping:rh,ClampToEdgeWrapping:Mr,MirroredRepeatWrapping:sg},bR={NearestFilter:qr,NearestMipmapNearestFilter:vS,NearestMipmapLinearFilter:wd,LinearFilter:Zn,LinearMipmapNearestFilter:Jm,LinearMipmapLinearFilter:Go};class wL extends Gs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Pu.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const c=fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return Pu.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Pu.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Pu.add(e,c),s.manager.itemStart(e)}}let X_;class Pw{static getContext(){return X_===void 0&&(X_=new(window.AudioContext||window.webkitAudioContext)),X_}static setContext(e){X_=e}}class XB extends Gs{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new ga(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{const u=c.slice(0);Pw.getContext().decodeAudioData(u,function(p){t(p)}).catch(o)}catch(u){o(u)}},i,r);function o(c){r?r(c):console.error(c),s.manager.itemError(e)}}}const SR=new Ut,ER=new Ut,cd=new Ut;class qB{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Er,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Er,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,cd.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(Bd*t.fov*.5)/t.zoom;let o,c;ER.elements[12]=-r,SR.elements[12]=r,o=-a*t.aspect+s,c=a*t.aspect+s,cd.elements[0]=2*t.near/(c-o),cd.elements[8]=(c+o)/(c-o),this.cameraL.projectionMatrix.copy(cd),o=-a*t.aspect-s,c=a*t.aspect-s,cd.elements[0]=2*t.near/(c-o),cd.elements[8]=(c+o)/(c-o),this.cameraR.projectionMatrix.copy(cd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ER),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(SR)}}class CL extends Er{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Iw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=MR(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=MR();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function MR(){return performance.now()}const ud=new J,TR=new Ar,YB=new J,fd=new J;class ZB extends Cn{constructor(){super(),this.type="AudioListener",this.context=Pw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Iw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ud,TR,YB),fd.set(0,0,-1).applyQuaternion(TR),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ud.x,r),t.positionY.linearRampToValueAtTime(ud.y,r),t.positionZ.linearRampToValueAtTime(ud.z,r),t.forwardX.linearRampToValueAtTime(fd.x,r),t.forwardY.linearRampToValueAtTime(fd.y,r),t.forwardZ.linearRampToValueAtTime(fd.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(ud.x,ud.y,ud.z),t.setOrientation(fd.x,fd.y,fd.z,i.x,i.y,i.z)}}class RL extends Cn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const hd=new J,AR=new Ar,KB=new J,dd=new J;class $B extends RL{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(hd,AR,KB),dd.set(0,0,1).applyQuaternion(AR);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(hd.x,i),t.positionY.linearRampToValueAtTime(hd.y,i),t.positionZ.linearRampToValueAtTime(hd.z,i),t.orientationX.linearRampToValueAtTime(dd.x,i),t.orientationY.linearRampToValueAtTime(dd.y,i),t.orientationZ.linearRampToValueAtTime(dd.z,i)}else t.setPosition(hd.x,hd.y,hd.z),t.setOrientation(dd.x,dd.y,dd.z)}}class QB{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class OL{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,u=t+t;c!==u;++c)if(i[c]!==i[c+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){Ar.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;Ar.multiplyQuaternionsFlat(e,a,e,t,e,i),Ar.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const c=t+o;e[c]=e[c]*a+e[i+o]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[i+a]*r}}}const Bw="\\[\\]\\.:\\/",JB=new RegExp("["+Bw+"]","g"),zw="[^"+Bw+"]",ez="[^"+Bw.replace("\\.","")+"]",tz=/((?:WC+[\/:])*)/.source.replace("WC",zw),nz=/(WCOD+)?/.source.replace("WCOD",ez),iz=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",zw),rz=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",zw),sz=new RegExp("^"+tz+nz+iz+rz+"$"),az=["material","materials","bones","map"];class oz{constructor(e,t,i){const r=i||ni.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class ni{constructor(e,t,i){this.path=t,this.parsedPath=i||ni.parseTrackName(t),this.node=ni.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new ni.Composite(e,t,i):new ni(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(JB,"")}static parseTrackName(e){const t=sz.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);az.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const c=i(o.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=ni.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const a=e[r];if(a===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ni.Composite=oz;ni.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ni.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ni.prototype.GetterByBindingType=[ni.prototype._getValue_direct,ni.prototype._getValue_array,ni.prototype._getValue_arrayElement,ni.prototype._getValue_toArray];ni.prototype.SetterByBindingTypeAndVersioning=[[ni.prototype._setValue_direct,ni.prototype._setValue_direct_setNeedsUpdate,ni.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_array,ni.prototype._setValue_array_setNeedsUpdate,ni.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_arrayElement,ni.prototype._setValue_arrayElement_setNeedsUpdate,ni.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_fromArray,ni.prototype._setValue_fromArray_setNeedsUpdate,ni.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class lz{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ho(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let o,c=e.length,u=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){const g=arguments[h],y=g.uuid;let x=t[y];if(x===void 0){x=c++,t[y]=x,e.push(g);for(let M=0,b=a;M!==b;++M)s[M].push(new ni(g,i[M],r[M]))}else if(x<u){o=e[x];const M=--u,b=e[M];t[b.uuid]=x,e[x]=b,t[y]=M,e[M]=g;for(let S=0,T=a;S!==T;++S){const A=s[S],w=A[M];let D=A[x];A[x]=w,D===void 0&&(D=new ni(g,i[S],r[S])),A[M]=D}}else e[x]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const c=arguments[a],u=c.uuid,h=t[u];if(h!==void 0&&h>=s){const p=s++,g=e[p];t[g.uuid]=h,e[h]=g,t[u]=p,e[p]=c;for(let y=0,x=r;y!==x;++y){const M=i[y],b=M[p],S=M[h];M[h]=b,M[p]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,c=arguments.length;o!==c;++o){const u=arguments[o],h=u.uuid,p=t[h];if(p!==void 0)if(delete t[h],p<s){const g=--s,y=e[g],x=--a,M=e[x];t[y.uuid]=p,e[p]=y,t[M.uuid]=g,e[g]=M,e.pop();for(let b=0,S=r;b!==S;++b){const T=i[b],A=T[g],w=T[x];T[p]=A,T[g]=w,T.pop()}}else{const g=--a,y=e[g];g>0&&(t[y.uuid]=p),e[p]=y,e.pop();for(let x=0,M=r;x!==M;++x){const b=i[x];b[p]=b[g],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,o=this._parsedPaths,c=this._objects,u=c.length,h=this.nCachedObjects_,p=new Array(u);r=s.length,i[e]=r,a.push(e),o.push(t),s.push(p);for(let g=h,y=c.length;g!==y;++g){const x=c[g];p[g]=new ni(x,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,c=a[o],u=e[o];t[u]=i,a[i]=c,a.pop(),s[i]=s[o],s.pop(),r[i]=r[o],r.pop()}}}class DL{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),c={endingStart:Cd,endingEnd:Cd};for(let u=0;u!==a;++u){const h=s[u].createInterpolant(null);o[u]=h,h.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=AU,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,u=o.sampleValues;return c[0]=s,c[1]=s+i,u[0]=e/a,u[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const c=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case ow:for(let h=0,p=c.length;h!==p;++h)c[h].evaluate(a),u[h].accumulateAdditive(o);break;case MS:default:for(let h=0,p=c.length;h!==p;++h)c[h].evaluate(a),u[h].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===wU;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===TU){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Rd,r.endingEnd=Rd):(e?r.endingStart=this.zeroSlopeAtStart?Rd:Cd:r.endingStart=Jv,t?r.endingEnd=this.zeroSlopeAtEnd?Rd:Cd:r.endingEnd=Jv)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,c=a.sampleValues;return o[0]=s,c[0]=t,o[1]=s+e,c[1]=i,this}}const cz=new Float32Array(1);class uz extends qc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,c=i.uuid,u=this._bindingsByRootAndName;let h=u[c];h===void 0&&(h={},u[c]=h);for(let p=0;p!==s;++p){const g=r[p],y=g.name;let x=h[y];if(x!==void 0)++x.referenceCount,a[p]=x;else{if(x=a[p],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,c,y));continue}const M=t&&t._propertyBindings[p].binding.parsedPath;x=new OL(ni.create(i,y,M),g.ValueTypeName,g.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,c,y),a[p]=x}o[p].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],c=o.knownActions,u=c[c.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,c[h]=u,c.pop(),e._byClipCacheIndex=null;const p=o.actionByRoot,g=(e._localRoot||this._root).uuid;delete p[g],c.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],c=t[t.length-1],u=e._cacheIndex;c._cacheIndex=u,t[u]=c,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Cw(new Float32Array(2),new Float32Array(2),1,cz),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?dg.findByName(r,e):e;const o=a!==null?a.uuid:e,c=this._actionsByClip[o];let u=null;if(i===void 0&&(a!==null?i=a.blendMode:i=MS),c!==void 0){const p=c.actionByRoot[s];if(p!==void 0&&p.blendMode===i)return p;u=c.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const h=new DL(this,a,t,i);return this._bindAction(h,u),this._addInactiveAction(h,o,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?dg.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,a);const o=this._bindings,c=this._nActiveBindings;for(let u=0;u!==c;++u)o[u].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,c=a.length;o!==c;++o){const u=a[o];this._deactivateAction(u);const h=u._cacheIndex,p=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,p._cacheIndex=h,t[h]=p,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,c=o[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class QS{constructor(e){this.value=e}clone(){return new QS(this.value.clone===void 0?this.value:this.value.clone())}}let fz=0;class hz extends qc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:fz++}),this.name="",this.usage=ty,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class zb extends My{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class dz{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const wR=new Ut;class JS{constructor(e,t,i=0,r=1/0){this.ray=new dh(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new ug,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return wR.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(wR),this}intersectObject(e,t=!0,i=[]){return FT(e,this,i,t),i.sort(CR),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)FT(e[r],this,i,t);return i.sort(CR),i}}function CR(n,e){return n.distance-e.distance}function FT(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let a=0,o=s.length;a<o;a++)FT(s[a],e,t,!0)}}class UL{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Tn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Tn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class pz{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Fw{constructor(e,t,i,r){Fw.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const RR=new ft;class mz{constructor(e=new ft(1/0,1/0),t=new ft(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=RR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,RR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const OR=new J,q_=new J;class Zo{constructor(e=new J,t=new J){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){OR.subVectors(e,this.start),q_.subVectors(this.end,this.start);const i=q_.dot(q_);let s=q_.dot(OR)/i;return t&&(s=Tn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const DR=new J;class gz extends Cn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new An,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,c=32;a<c;a++,o++){const u=a/c*Math.PI*2,h=o/c*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new qt(r,3));const s=new xs({fog:!1,toneMapped:!1});this.cone=new Jo(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),DR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(DR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Hf=new J,Y_=new Ut,k2=new Ut;class vz extends Jo{constructor(e){const t=LL(e),i=new An,r=[],s=[],a=new Rt(0,0,1),o=new Rt(0,1,0);for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}i.setAttribute("position",new qt(r,3)),i.setAttribute("color",new qt(s,3));const c=new xs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");k2.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(Y_.multiplyMatrices(k2,o.matrixWorld),Hf.setFromMatrixPosition(Y_),r.setXYZ(a,Hf.x,Hf.y,Hf.z),Y_.multiplyMatrices(k2,o.parent.matrixWorld),Hf.setFromMatrixPosition(Y_),r.setXYZ(a+1,Hf.x,Hf.y,Hf.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function LL(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,LL(n.children[t]));return e}class yz extends fi{constructor(e,t,i){const r=new Oy(t,4,2),s=new pa({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _z=new J,UR=new Rt,LR=new Rt;class xz extends Cn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Ry(t);r.rotateY(Math.PI*.5),this.material=new pa({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new Jn(a,3)),this.add(new fi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");UR.copy(this.light.color),LR.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?UR:LR;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(_z.setFromMatrixPosition(this.light.matrixWorld).negate())}}class bz extends Jo{constructor(e=10,t=10,i=4473924,r=8947848){i=new Rt(i),r=new Rt(r);const s=t/2,a=e/t,o=e/2,c=[],u=[];for(let g=0,y=0,x=-o;g<=t;g++,x+=a){c.push(-o,0,x,o,0,x),c.push(x,0,-o,x,0,o);const M=g===s?i:r;M.toArray(u,y),y+=3,M.toArray(u,y),y+=3,M.toArray(u,y),y+=3,M.toArray(u,y),y+=3}const h=new An;h.setAttribute("position",new qt(c,3)),h.setAttribute("color",new qt(u,3));const p=new xs({vertexColors:!0,toneMapped:!1});super(h,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Sz extends Jo{constructor(e=10,t=16,i=8,r=64,s=4473924,a=8947848){s=new Rt(s),a=new Rt(a);const o=[],c=[];if(t>1)for(let p=0;p<t;p++){const g=p/t*(Math.PI*2),y=Math.sin(g)*e,x=Math.cos(g)*e;o.push(0,0,0),o.push(y,0,x);const M=p&1?s:a;c.push(M.r,M.g,M.b),c.push(M.r,M.g,M.b)}for(let p=0;p<i;p++){const g=p&1?s:a,y=e-e/i*p;for(let x=0;x<r;x++){let M=x/r*(Math.PI*2),b=Math.sin(M)*y,S=Math.cos(M)*y;o.push(b,0,S),c.push(g.r,g.g,g.b),M=(x+1)/r*(Math.PI*2),b=Math.sin(M)*y,S=Math.cos(M)*y,o.push(b,0,S),c.push(g.r,g.g,g.b)}}const u=new An;u.setAttribute("position",new qt(o,3)),u.setAttribute("color",new qt(c,3));const h=new xs({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const NR=new J,Z_=new J,PR=new J;class Ez extends Cn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new An;r.setAttribute("position",new qt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new xs({fog:!1,toneMapped:!1});this.lightPlane=new ku(r,s),this.add(this.lightPlane),r=new An,r.setAttribute("position",new qt([0,0,0,0,0,1],3)),this.targetLine=new ku(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),NR.setFromMatrixPosition(this.light.matrixWorld),Z_.setFromMatrixPosition(this.light.target.matrixWorld),PR.subVectors(Z_,NR),this.lightPlane.lookAt(Z_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Z_),this.targetLine.scale.z=PR.length()}}const K_=new J,hr=new AS;class Mz extends Jo{constructor(e){const t=new An,i=new xs({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(x,M){c(x),c(M)}function c(x){r.push(0,0,0),s.push(0,0,0),a[x]===void 0&&(a[x]=[]),a[x].push(r.length/3-1)}t.setAttribute("position",new qt(r,3)),t.setAttribute("color",new qt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new Rt(16755200),h=new Rt(16711680),p=new Rt(43775),g=new Rt(16777215),y=new Rt(3355443);this.setColors(u,h,p,g,y)}setColors(e,t,i,r,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;hr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Sr("c",t,e,hr,0,0,-1),Sr("t",t,e,hr,0,0,1),Sr("n1",t,e,hr,-i,-r,-1),Sr("n2",t,e,hr,i,-r,-1),Sr("n3",t,e,hr,-i,r,-1),Sr("n4",t,e,hr,i,r,-1),Sr("f1",t,e,hr,-i,-r,1),Sr("f2",t,e,hr,i,-r,1),Sr("f3",t,e,hr,-i,r,1),Sr("f4",t,e,hr,i,r,1),Sr("u1",t,e,hr,i*.7,r*1.1,-1),Sr("u2",t,e,hr,-i*.7,r*1.1,-1),Sr("u3",t,e,hr,0,r*2,-1),Sr("cf1",t,e,hr,-i,0,1),Sr("cf2",t,e,hr,i,0,1),Sr("cf3",t,e,hr,0,-r,1),Sr("cf4",t,e,hr,0,r,1),Sr("cn1",t,e,hr,-i,0,-1),Sr("cn2",t,e,hr,i,0,-1),Sr("cn3",t,e,hr,0,-r,-1),Sr("cn4",t,e,hr,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Sr(n,e,t,i,r,s,a){K_.set(r,s,a).unproject(i);const o=e[n];if(o!==void 0){const c=t.getAttribute("position");for(let u=0,h=o.length;u<h;u++)c.setXYZ(o[u],K_.x,K_.y,K_.z)}}const $_=new Kn;class Tz extends Jo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new An;s.setIndex(new Jn(i,1)),s.setAttribute("position",new Jn(r,3)),super(s,new xs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&$_.setFromObject(this.object),$_.isEmpty())return;const t=$_.min,i=$_.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Az extends Jo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new An;s.setIndex(new Jn(i,1)),s.setAttribute("position",new qt(r,3)),super(s,new xs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class wz extends ku{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new An;a.setAttribute("position",new qt(s,3)),a.computeBoundingSphere(),super(a,new xs({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new An;c.setAttribute("position",new qt(o,3)),c.computeBoundingSphere(),this.add(new fi(c,new pa({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const IR=new J;let Q_,G2;class Cz extends Cn{constructor(e=new J(0,0,1),t=new J(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",Q_===void 0&&(Q_=new An,Q_.setAttribute("position",new qt([0,0,0,0,1,0],3)),G2=new Sg(0,.5,1,5,1),G2.translate(0,-.5,0)),this.position.copy(t),this.line=new ku(Q_,new xs({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new fi(G2,new pa({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{IR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(IR,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Rz extends Jo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new An;r.setAttribute("position",new qt(t,3)),r.setAttribute("color",new qt(i,3));const s=new xs({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Rt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Oz{constructor(){this.type="ShapePath",this.color=new Rt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ry,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,a){return this.currentPath.bezierCurveTo(e,t,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const T=[];for(let A=0,w=S.length;A<w;A++){const D=S[A],O=new zd;O.curves=D.curves,T.push(O)}return T}function i(S,T){const A=T.length;let w=!1;for(let D=A-1,O=0;O<A;D=O++){let P=T[D],B=T[O],I=B.x-P.x,z=B.y-P.y;if(Math.abs(z)>Number.EPSILON){if(z<0&&(P=T[O],I=-I,B=T[D],z=-z),S.y<P.y||S.y>B.y)continue;if(S.y===P.y){if(S.x===P.x)return!0}else{const k=z*(S.x-P.x)-I*(S.y-P.y);if(k===0)return!0;if(k<0)continue;w=!w}}else{if(S.y!==P.y)continue;if(B.x<=S.x&&S.x<=P.x||P.x<=S.x&&S.x<=B.x)return!0}}return w}const r=Gc.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,c;const u=[];if(s.length===1)return o=s[0],c=new zd,c.curves=o.curves,u.push(c),u;let h=!r(s[0].getPoints());h=e?!h:h;const p=[],g=[];let y=[],x=0,M;g[x]=void 0,y[x]=[];for(let S=0,T=s.length;S<T;S++)o=s[S],M=o.getPoints(),a=r(M),a=e?!a:a,a?(!h&&g[x]&&x++,g[x]={s:new zd,p:M},g[x].s.curves=o.curves,h&&x++,y[x]=[]):y[x].push({h:o,p:M[0]});if(!g[0])return t(s);if(g.length>1){let S=!1,T=0;for(let A=0,w=g.length;A<w;A++)p[A]=[];for(let A=0,w=g.length;A<w;A++){const D=y[A];for(let O=0;O<D.length;O++){const P=D[O];let B=!0;for(let I=0;I<g.length;I++)i(P.p,g[I].p)&&(A!==I&&T++,B?(B=!1,p[I].push(P)):S=!0);B&&p[A].push(P)}}T>0&&S===!1&&(y=p)}let b;for(let S=0,T=g.length;S<T;S++){c=g[S].s,u.push(c),b=y[S];for(let A=0,w=b.length;A<w;A++)c.holes.push(b[A].h)}return u}}class Dz extends qc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function Uz(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function Lz(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Nz(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function HT(n,e,t,i){const r=Pz(i);switch(t){case tw:return n*e;case iw:return n*e;case rw:return n*e*2;case by:return n*e/r.components*r.byteLength;case Sy:return n*e/r.components*r.byteLength;case sw:return n*e*2/r.components*r.byteLength;case SS:return n*e*2/r.components*r.byteLength;case nw:return n*e*3/r.components*r.byteLength;case Tr:return n*e*4/r.components*r.byteLength;case ES:return n*e*4/r.components*r.byteLength;case Nv:case Pv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Iv:case Bv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case cb:case fb:return Math.max(n,16)*Math.max(e,8)/4;case lb:case ub:return Math.max(n,8)*Math.max(e,8)/2;case hb:case db:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case pb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case mb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case gb:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case vb:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case yb:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case _b:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case xb:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case bb:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Sb:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Eb:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Mb:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Tb:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Ab:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case wb:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Cb:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case zv:case Rb:case Ob:return Math.ceil(n/4)*Math.ceil(e/4)*16;case aw:case Db:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Ub:case Lb:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Pz(n){switch(n){case ja:case yS:return{byteLength:1,components:1};case ag:case _S:case Xr:return{byteLength:2,components:1};case xS:case bS:return{byteLength:2,components:4};case jc:case xy:case Yi:return{byteLength:4,components:1};case ew:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const Iz={contain:Uz,cover:Lz,fill:Nz,getByteLength:HT};class Bz extends Wa{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:xg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=xg);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function NL(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function zz(n){const e=new WeakMap;function t(o,c){const u=o.array,h=o.usage,p=u.byteLength,g=n.createBuffer();n.bindBuffer(c,g),n.bufferData(c,u,h),o.onUploadCallback();let y;if(u instanceof Float32Array)y=n.FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?y=n.HALF_FLOAT:y=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)y=n.SHORT;else if(u instanceof Uint32Array)y=n.UNSIGNED_INT;else if(u instanceof Int32Array)y=n.INT;else if(u instanceof Int8Array)y=n.BYTE;else if(u instanceof Uint8Array)y=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)y=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:g,type:y,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:p}}function i(o,c,u){const h=c.array,p=c.updateRanges;if(n.bindBuffer(u,o),p.length===0)n.bufferSubData(u,0,h);else{p.sort((y,x)=>y.start-x.start);let g=0;for(let y=1;y<p.length;y++){const x=p[g],M=p[y];M.start<=x.start+x.count+1?x.count=Math.max(x.count,M.start+M.count-x.start):(++g,p[g]=M)}p.length=g+1;for(let y=0,x=p.length;y<x;y++){const M=p[y];n.bufferSubData(u,M.start*h.BYTES_PER_ELEMENT,h,M.start,M.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);c&&(n.deleteBuffer(c.buffer),e.delete(o))}function a(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const h=e.get(o);(!h||h.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,t(o,c));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,o,c),u.version=o.version}}return{get:r,remove:s,update:a}}var Fz=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Hz=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,kz=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Gz=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Vz=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,jz=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Wz=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Xz=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,qz=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Yz=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Zz=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Kz=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,$z=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Qz=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Jz=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,e7=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,t7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,n7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,i7=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,r7=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,s7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,a7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,o7=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,l7=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,c7=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,u7=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,f7=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,h7=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,d7=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,p7=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,m7="gl_FragColor = linearToOutputTexel( gl_FragColor );",g7=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,v7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,y7=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,_7=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,x7=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,b7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,S7=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,E7=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,M7=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,T7=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,A7=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,w7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,C7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,R7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,O7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,D7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,U7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,L7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,N7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,P7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,I7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,B7=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,z7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,F7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,H7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,k7=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,G7=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,V7=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,j7=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,W7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,X7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,q7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Y7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Z7=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,K7=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,$7=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Q7=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,J7=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,eF=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,tF=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,nF=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,iF=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,rF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,aF=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,oF=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,lF=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,cF=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,uF=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,fF=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,hF=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,dF=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,pF=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,mF=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,gF=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,vF=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,yF=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,_F=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,xF=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,bF=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,SF=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,EF=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,MF=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,TF=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,AF=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,wF=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,CF=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,RF=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,OF=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,DF=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,UF=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,LF=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,NF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,PF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,IF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,BF=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const zF=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,FF=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,HF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kF=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,GF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,VF=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,WF=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,XF=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,qF=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,YF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ZF=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KF=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$F=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,QF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,JF=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,iH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,sH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,aH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,cH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,dH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,pH=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,gH=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Dn={alphahash_fragment:Fz,alphahash_pars_fragment:Hz,alphamap_fragment:kz,alphamap_pars_fragment:Gz,alphatest_fragment:Vz,alphatest_pars_fragment:jz,aomap_fragment:Wz,aomap_pars_fragment:Xz,batching_pars_vertex:qz,batching_vertex:Yz,begin_vertex:Zz,beginnormal_vertex:Kz,bsdfs:$z,iridescence_fragment:Qz,bumpmap_pars_fragment:Jz,clipping_planes_fragment:e7,clipping_planes_pars_fragment:t7,clipping_planes_pars_vertex:n7,clipping_planes_vertex:i7,color_fragment:r7,color_pars_fragment:s7,color_pars_vertex:a7,color_vertex:o7,common:l7,cube_uv_reflection_fragment:c7,defaultnormal_vertex:u7,displacementmap_pars_vertex:f7,displacementmap_vertex:h7,emissivemap_fragment:d7,emissivemap_pars_fragment:p7,colorspace_fragment:m7,colorspace_pars_fragment:g7,envmap_fragment:v7,envmap_common_pars_fragment:y7,envmap_pars_fragment:_7,envmap_pars_vertex:x7,envmap_physical_pars_fragment:D7,envmap_vertex:b7,fog_vertex:S7,fog_pars_vertex:E7,fog_fragment:M7,fog_pars_fragment:T7,gradientmap_pars_fragment:A7,lightmap_pars_fragment:w7,lights_lambert_fragment:C7,lights_lambert_pars_fragment:R7,lights_pars_begin:O7,lights_toon_fragment:U7,lights_toon_pars_fragment:L7,lights_phong_fragment:N7,lights_phong_pars_fragment:P7,lights_physical_fragment:I7,lights_physical_pars_fragment:B7,lights_fragment_begin:z7,lights_fragment_maps:F7,lights_fragment_end:H7,logdepthbuf_fragment:k7,logdepthbuf_pars_fragment:G7,logdepthbuf_pars_vertex:V7,logdepthbuf_vertex:j7,map_fragment:W7,map_pars_fragment:X7,map_particle_fragment:q7,map_particle_pars_fragment:Y7,metalnessmap_fragment:Z7,metalnessmap_pars_fragment:K7,morphinstance_vertex:$7,morphcolor_vertex:Q7,morphnormal_vertex:J7,morphtarget_pars_vertex:eF,morphtarget_vertex:tF,normal_fragment_begin:nF,normal_fragment_maps:iF,normal_pars_fragment:rF,normal_pars_vertex:sF,normal_vertex:aF,normalmap_pars_fragment:oF,clearcoat_normal_fragment_begin:lF,clearcoat_normal_fragment_maps:cF,clearcoat_pars_fragment:uF,iridescence_pars_fragment:fF,opaque_fragment:hF,packing:dF,premultiplied_alpha_fragment:pF,project_vertex:mF,dithering_fragment:gF,dithering_pars_fragment:vF,roughnessmap_fragment:yF,roughnessmap_pars_fragment:_F,shadowmap_pars_fragment:xF,shadowmap_pars_vertex:bF,shadowmap_vertex:SF,shadowmask_pars_fragment:EF,skinbase_vertex:MF,skinning_pars_vertex:TF,skinning_vertex:AF,skinnormal_vertex:wF,specularmap_fragment:CF,specularmap_pars_fragment:RF,tonemapping_fragment:OF,tonemapping_pars_fragment:DF,transmission_fragment:UF,transmission_pars_fragment:LF,uv_pars_fragment:NF,uv_pars_vertex:PF,uv_vertex:IF,worldpos_vertex:BF,background_vert:zF,background_frag:FF,backgroundCube_vert:HF,backgroundCube_frag:kF,cube_vert:GF,cube_frag:VF,depth_vert:jF,depth_frag:WF,distanceRGBA_vert:XF,distanceRGBA_frag:qF,equirect_vert:YF,equirect_frag:ZF,linedashed_vert:KF,linedashed_frag:$F,meshbasic_vert:QF,meshbasic_frag:JF,meshlambert_vert:eH,meshlambert_frag:tH,meshmatcap_vert:nH,meshmatcap_frag:iH,meshnormal_vert:rH,meshnormal_frag:sH,meshphong_vert:aH,meshphong_frag:oH,meshphysical_vert:lH,meshphysical_frag:cH,meshtoon_vert:uH,meshtoon_frag:fH,points_vert:hH,points_frag:dH,shadow_vert:pH,shadow_frag:mH,sprite_vert:gH,sprite_frag:vH},It={common:{diffuse:{value:new Rt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Mn},alphaMap:{value:null},alphaMapTransform:{value:new Mn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Mn}},envmap:{envMap:{value:null},envMapRotation:{value:new Mn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Mn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Mn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Mn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Mn},normalScale:{value:new ft(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Mn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Mn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Mn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Mn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Mn},alphaTest:{value:0},uvTransform:{value:new Mn}},sprite:{diffuse:{value:new Rt(16777215)},opacity:{value:1},center:{value:new ft(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Mn},alphaMap:{value:null},alphaMapTransform:{value:new Mn},alphaTest:{value:0}}},kl={basic:{uniforms:ca([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.fog]),vertexShader:Dn.meshbasic_vert,fragmentShader:Dn.meshbasic_frag},lambert:{uniforms:ca([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.fog,It.lights,{emissive:{value:new Rt(0)}}]),vertexShader:Dn.meshlambert_vert,fragmentShader:Dn.meshlambert_frag},phong:{uniforms:ca([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.fog,It.lights,{emissive:{value:new Rt(0)},specular:{value:new Rt(1118481)},shininess:{value:30}}]),vertexShader:Dn.meshphong_vert,fragmentShader:Dn.meshphong_frag},standard:{uniforms:ca([It.common,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.roughnessmap,It.metalnessmap,It.fog,It.lights,{emissive:{value:new Rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Dn.meshphysical_vert,fragmentShader:Dn.meshphysical_frag},toon:{uniforms:ca([It.common,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.gradientmap,It.fog,It.lights,{emissive:{value:new Rt(0)}}]),vertexShader:Dn.meshtoon_vert,fragmentShader:Dn.meshtoon_frag},matcap:{uniforms:ca([It.common,It.bumpmap,It.normalmap,It.displacementmap,It.fog,{matcap:{value:null}}]),vertexShader:Dn.meshmatcap_vert,fragmentShader:Dn.meshmatcap_frag},points:{uniforms:ca([It.points,It.fog]),vertexShader:Dn.points_vert,fragmentShader:Dn.points_frag},dashed:{uniforms:ca([It.common,It.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Dn.linedashed_vert,fragmentShader:Dn.linedashed_frag},depth:{uniforms:ca([It.common,It.displacementmap]),vertexShader:Dn.depth_vert,fragmentShader:Dn.depth_frag},normal:{uniforms:ca([It.common,It.bumpmap,It.normalmap,It.displacementmap,{opacity:{value:1}}]),vertexShader:Dn.meshnormal_vert,fragmentShader:Dn.meshnormal_frag},sprite:{uniforms:ca([It.sprite,It.fog]),vertexShader:Dn.sprite_vert,fragmentShader:Dn.sprite_frag},background:{uniforms:{uvTransform:{value:new Mn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Dn.background_vert,fragmentShader:Dn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Mn}},vertexShader:Dn.backgroundCube_vert,fragmentShader:Dn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Dn.cube_vert,fragmentShader:Dn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Dn.equirect_vert,fragmentShader:Dn.equirect_frag},distanceRGBA:{uniforms:ca([It.common,It.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Dn.distanceRGBA_vert,fragmentShader:Dn.distanceRGBA_frag},shadow:{uniforms:ca([It.lights,It.fog,{color:{value:new Rt(0)},opacity:{value:1}}]),vertexShader:Dn.shadow_vert,fragmentShader:Dn.shadow_frag}};kl.physical={uniforms:ca([kl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Mn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Mn},clearcoatNormalScale:{value:new ft(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Mn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Mn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Mn},sheen:{value:0},sheenColor:{value:new Rt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Mn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Mn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Mn},transmissionSamplerSize:{value:new ft},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Mn},attenuationDistance:{value:0},attenuationColor:{value:new Rt(0)},specularColor:{value:new Rt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Mn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Mn},anisotropyVector:{value:new ft},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Mn}}]),vertexShader:Dn.meshphysical_vert,fragmentShader:Dn.meshphysical_frag};const J_={r:0,b:0,g:0},pd=new po,yH=new Ut;function _H(n,e,t,i,r,s,a){const o=new Rt(0);let c=s===!0?0:1,u,h,p=null,g=0,y=null;function x(A){let w=A.isScene===!0?A.background:null;return w&&w.isTexture&&(w=(A.backgroundBlurriness>0?t:e).get(w)),w}function M(A){let w=!1;const D=x(A);D===null?S(o,c):D&&D.isColor&&(S(D,1),w=!0);const O=n.xr.getEnvironmentBlendMode();O==="additive"?i.buffers.color.setClear(0,0,0,1,a):O==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||w)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function b(A,w){const D=x(w);D&&(D.isCubeTexture||D.mapping===bg)?(h===void 0&&(h=new fi(new ip(1,1,1),new ks({name:"BackgroundCubeMaterial",uniforms:fg(kl.backgroundCube.uniforms),vertexShader:kl.backgroundCube.vertexShader,fragmentShader:kl.backgroundCube.fragmentShader,side:Fs,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(O,P,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),pd.copy(w.backgroundRotation),pd.x*=-1,pd.y*=-1,pd.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(pd.y*=-1,pd.z*=-1),h.material.uniforms.envMap.value=D,h.material.uniforms.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(yH.makeRotationFromEuler(pd)),h.material.toneMapped=Xn.getTransfer(D.colorSpace)!==Ei,(p!==D||g!==D.version||y!==n.toneMapping)&&(h.material.needsUpdate=!0,p=D,g=D.version,y=n.toneMapping),h.layers.enableAll(),A.unshift(h,h.geometry,h.material,0,0,null)):D&&D.isTexture&&(u===void 0&&(u=new fi(new Xl(2,2),new ks({name:"BackgroundMaterial",uniforms:fg(kl.background.uniforms),vertexShader:kl.background.vertexShader,fragmentShader:kl.background.fragmentShader,side:$o,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=D,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.toneMapped=Xn.getTransfer(D.colorSpace)!==Ei,D.matrixAutoUpdate===!0&&D.updateMatrix(),u.material.uniforms.uvTransform.value.copy(D.matrix),(p!==D||g!==D.version||y!==n.toneMapping)&&(u.material.needsUpdate=!0,p=D,g=D.version,y=n.toneMapping),u.layers.enableAll(),A.unshift(u,u.geometry,u.material,0,0,null))}function S(A,w){A.getRGB(J_,VU(n)),i.buffers.color.setClear(J_.r,J_.g,J_.b,w,a)}function T(){h!==void 0&&(h.geometry.dispose(),h.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return o},setClearColor:function(A,w=1){o.set(A),c=w,S(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(A){c=A,S(o,c)},render:M,addToRenderList:b,dispose:T}}function xH(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=g(null);let s=r,a=!1;function o(z,k,V,j,W){let te=!1;const H=p(j,V,k);s!==H&&(s=H,u(s.object)),te=y(z,j,V,W),te&&x(z,j,V,W),W!==null&&e.update(W,n.ELEMENT_ARRAY_BUFFER),(te||a)&&(a=!1,w(z,k,V,j),W!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(W).buffer))}function c(){return n.createVertexArray()}function u(z){return n.bindVertexArray(z)}function h(z){return n.deleteVertexArray(z)}function p(z,k,V){const j=V.wireframe===!0;let W=i[z.id];W===void 0&&(W={},i[z.id]=W);let te=W[k.id];te===void 0&&(te={},W[k.id]=te);let H=te[j];return H===void 0&&(H=g(c()),te[j]=H),H}function g(z){const k=[],V=[],j=[];for(let W=0;W<t;W++)k[W]=0,V[W]=0,j[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:V,attributeDivisors:j,object:z,attributes:{},index:null}}function y(z,k,V,j){const W=s.attributes,te=k.attributes;let H=0;const Q=V.getAttributes();for(const ne in Q)if(Q[ne].location>=0){const G=W[ne];let X=te[ne];if(X===void 0&&(ne==="instanceMatrix"&&z.instanceMatrix&&(X=z.instanceMatrix),ne==="instanceColor"&&z.instanceColor&&(X=z.instanceColor)),G===void 0||G.attribute!==X||X&&G.data!==X.data)return!0;H++}return s.attributesNum!==H||s.index!==j}function x(z,k,V,j){const W={},te=k.attributes;let H=0;const Q=V.getAttributes();for(const ne in Q)if(Q[ne].location>=0){let G=te[ne];G===void 0&&(ne==="instanceMatrix"&&z.instanceMatrix&&(G=z.instanceMatrix),ne==="instanceColor"&&z.instanceColor&&(G=z.instanceColor));const X={};X.attribute=G,G&&G.data&&(X.data=G.data),W[ne]=X,H++}s.attributes=W,s.attributesNum=H,s.index=j}function M(){const z=s.newAttributes;for(let k=0,V=z.length;k<V;k++)z[k]=0}function b(z){S(z,0)}function S(z,k){const V=s.newAttributes,j=s.enabledAttributes,W=s.attributeDivisors;V[z]=1,j[z]===0&&(n.enableVertexAttribArray(z),j[z]=1),W[z]!==k&&(n.vertexAttribDivisor(z,k),W[z]=k)}function T(){const z=s.newAttributes,k=s.enabledAttributes;for(let V=0,j=k.length;V<j;V++)k[V]!==z[V]&&(n.disableVertexAttribArray(V),k[V]=0)}function A(z,k,V,j,W,te,H){H===!0?n.vertexAttribIPointer(z,k,V,W,te):n.vertexAttribPointer(z,k,V,j,W,te)}function w(z,k,V,j){M();const W=j.attributes,te=V.getAttributes(),H=k.defaultAttributeValues;for(const Q in te){const ne=te[Q];if(ne.location>=0){let re=W[Q];if(re===void 0&&(Q==="instanceMatrix"&&z.instanceMatrix&&(re=z.instanceMatrix),Q==="instanceColor"&&z.instanceColor&&(re=z.instanceColor)),re!==void 0){const G=re.normalized,X=re.itemSize,ie=e.get(re);if(ie===void 0)continue;const se=ie.buffer,ee=ie.type,ue=ie.bytesPerElement,pe=ee===n.INT||ee===n.UNSIGNED_INT||re.gpuType===xy;if(re.isInterleavedBufferAttribute){const ve=re.data,_e=ve.stride,Xe=re.offset;if(ve.isInstancedInterleavedBuffer){for(let qe=0;qe<ne.locationSize;qe++)S(ne.location+qe,ve.meshPerAttribute);z.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let qe=0;qe<ne.locationSize;qe++)b(ne.location+qe);n.bindBuffer(n.ARRAY_BUFFER,se);for(let qe=0;qe<ne.locationSize;qe++)A(ne.location+qe,X/ne.locationSize,ee,G,_e*ue,(Xe+X/ne.locationSize*qe)*ue,pe)}else{if(re.isInstancedBufferAttribute){for(let ve=0;ve<ne.locationSize;ve++)S(ne.location+ve,re.meshPerAttribute);z.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let ve=0;ve<ne.locationSize;ve++)b(ne.location+ve);n.bindBuffer(n.ARRAY_BUFFER,se);for(let ve=0;ve<ne.locationSize;ve++)A(ne.location+ve,X/ne.locationSize,ee,G,X*ue,X/ne.locationSize*ve*ue,pe)}}else if(H!==void 0){const G=H[Q];if(G!==void 0)switch(G.length){case 2:n.vertexAttrib2fv(ne.location,G);break;case 3:n.vertexAttrib3fv(ne.location,G);break;case 4:n.vertexAttrib4fv(ne.location,G);break;default:n.vertexAttrib1fv(ne.location,G)}}}}T()}function D(){B();for(const z in i){const k=i[z];for(const V in k){const j=k[V];for(const W in j)h(j[W].object),delete j[W];delete k[V]}delete i[z]}}function O(z){if(i[z.id]===void 0)return;const k=i[z.id];for(const V in k){const j=k[V];for(const W in j)h(j[W].object),delete j[W];delete k[V]}delete i[z.id]}function P(z){for(const k in i){const V=i[k];if(V[z.id]===void 0)continue;const j=V[z.id];for(const W in j)h(j[W].object),delete j[W];delete V[z.id]}}function B(){I(),a=!0,s!==r&&(s=r,u(s.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:B,resetDefaultState:I,dispose:D,releaseStatesOfGeometry:O,releaseStatesOfProgram:P,initAttributes:M,enableAttribute:b,disableUnusedAttributes:T}}function bH(n,e,t){let i;function r(u){i=u}function s(u,h){n.drawArrays(i,u,h),t.update(h,i,1)}function a(u,h,p){p!==0&&(n.drawArraysInstanced(i,u,h,p),t.update(h,i,p))}function o(u,h,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,h,0,p);let y=0;for(let x=0;x<p;x++)y+=h[x];t.update(y,i,1)}function c(u,h,p,g){if(p===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let x=0;x<u.length;x++)a(u[x],h[x],g[x]);else{y.multiDrawArraysInstancedWEBGL(i,u,0,h,0,g,0,p);let x=0;for(let M=0;M<p;M++)x+=h[M]*g[M];t.update(x,i,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function SH(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(P){return!(P!==Tr&&i.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(P){const B=P===Xr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==ja&&i.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Yi&&!B)}function c(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const h=c(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const p=t.logarithmicDepthBuffer===!0,g=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),y=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),S=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),A=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),D=x>0,O=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:a,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:p,reverseDepthBuffer:g,maxTextures:y,maxVertexTextures:x,maxTextureSize:M,maxCubemapSize:b,maxAttributes:S,maxVertexUniforms:T,maxVaryings:A,maxFragmentUniforms:w,vertexTextures:D,maxSamples:O}}function EH(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new Fo,o=new Mn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(p,g){const y=p.length!==0||g||i!==0||r;return r=g,i=p.length,y},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,g){t=h(p,g,0)},this.setState=function(p,g,y){const x=p.clippingPlanes,M=p.clipIntersection,b=p.clipShadows,S=n.get(p);if(!r||x===null||x.length===0||s&&!b)s?h(null):u();else{const T=s?0:i,A=T*4;let w=S.clippingState||null;c.value=w,w=h(x,g,A,y);for(let D=0;D!==A;++D)w[D]=t[D];S.clippingState=w,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=T}};function u(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(p,g,y,x){const M=p!==null?p.length:0;let b=null;if(M!==0){if(b=c.value,x!==!0||b===null){const S=y+M*4,T=g.matrixWorldInverse;o.getNormalMatrix(T),(b===null||b.length<S)&&(b=new Float32Array(S));for(let A=0,w=y;A!==M;++A,w+=4)a.copy(p[A]).applyMatrix4(T,o),a.normal.toArray(b,w),b[w+3]=a.constant}c.value=b,c.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,b}}function MH(n){let e=new WeakMap;function t(a,o){return o===rg?a.mapping=Vc:o===Qv&&(a.mapping=ih),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===rg||o===Qv)if(e.has(a)){const c=e.get(a).texture;return t(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const u=new mw(c.height);return u.fromEquirectangularTexture(n,a),e.set(a,u),a.addEventListener("dispose",r),t(u.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Zm=4,BR=[.125,.215,.35,.446,.526,.582],Ad=20,V2=new ju,zR=new Rt;let j2=null,W2=0,X2=0,q2=!1;const Md=(1+Math.sqrt(5))/2,xm=1/Md,FR=[new J(-Md,xm,0),new J(Md,xm,0),new J(-xm,0,Md),new J(xm,0,Md),new J(0,Md,-xm),new J(0,Md,xm),new J(-1,1,-1),new J(1,1,-1),new J(-1,1,1),new J(1,1,1)];class kT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){j2=this._renderer.getRenderTarget(),W2=this._renderer.getActiveCubeFace(),X2=this._renderer.getActiveMipmapLevel(),q2=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=GR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=kR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(j2,W2,X2),this._renderer.xr.enabled=q2,e.scissorTest=!1,ex(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Vc||e.mapping===ih?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),j2=this._renderer.getRenderTarget(),W2=this._renderer.getActiveCubeFace(),X2=this._renderer.getActiveMipmapLevel(),q2=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Zn,minFilter:Zn,generateMipmaps:!1,type:Xr,format:Tr,colorSpace:Ir,depthBuffer:!1},r=HR(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=HR(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=TH(s)),this._blurMaterial=AH(s,e,t)}return r}_compileMaterial(e){const t=new fi(this._lodPlanes[0],e);this._renderer.compile(t,V2)}_sceneToCubeUV(e,t,i,r){const o=new Er(90,1,t,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,g=h.toneMapping;h.getClearColor(zR),h.toneMapping=kc,h.autoClear=!1;const y=new pa({name:"PMREM.Background",side:Fs,depthWrite:!1,depthTest:!1}),x=new fi(new ip,y);let M=!1;const b=e.background;b?b.isColor&&(y.color.copy(b),e.background=null,M=!0):(y.color.copy(zR),M=!0);for(let S=0;S<6;S++){const T=S%3;T===0?(o.up.set(0,c[S],0),o.lookAt(u[S],0,0)):T===1?(o.up.set(0,0,c[S]),o.lookAt(0,u[S],0)):(o.up.set(0,c[S],0),o.lookAt(0,0,u[S]));const A=this._cubeSize;ex(r,T*A,S>2?A:0,A,A),h.setRenderTarget(r),M&&h.render(x,o),h.render(e,o)}x.geometry.dispose(),x.material.dispose(),h.toneMapping=g,h.autoClear=p,e.background=b}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Vc||e.mapping===ih;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=GR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=kR());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new fi(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const c=this._cubeSize;ex(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(a,V2)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=FR[(r-s-1)%FR.length];this._blur(e,s-1,s,a,o)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const c=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,p=new fi(this._lodPlanes[r],u),g=u.uniforms,y=this._sizeLods[i]-1,x=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*Ad-1),M=s/x,b=isFinite(s)?1+Math.floor(h*M):Ad;b>Ad&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Ad}`);const S=[];let T=0;for(let P=0;P<Ad;++P){const B=P/M,I=Math.exp(-B*B/2);S.push(I),P===0?T+=I:P<b&&(T+=2*I)}for(let P=0;P<S.length;P++)S[P]=S[P]/T;g.envMap.value=e.texture,g.samples.value=b,g.weights.value=S,g.latitudinal.value=a==="latitudinal",o&&(g.poleAxis.value=o);const{_lodMax:A}=this;g.dTheta.value=x,g.mipInt.value=A-i;const w=this._sizeLods[r],D=3*w*(r>A-Zm?r-A+Zm:0),O=4*(this._cubeSize-w);ex(t,D,O,3*w,2*w),c.setRenderTarget(t),c.render(p,V2)}}function TH(n){const e=[],t=[],i=[];let r=n;const s=n-Zm+1+BR.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let c=1/o;a>n-Zm?c=BR[a-n+Zm-1]:a===0&&(c=0),i.push(c);const u=1/(o-2),h=-u,p=1+u,g=[h,h,p,h,p,p,h,h,p,p,h,p],y=6,x=6,M=3,b=2,S=1,T=new Float32Array(M*x*y),A=new Float32Array(b*x*y),w=new Float32Array(S*x*y);for(let O=0;O<y;O++){const P=O%3*2/3-1,B=O>2?0:-1,I=[P,B,0,P+2/3,B,0,P+2/3,B+1,0,P,B,0,P+2/3,B+1,0,P,B+1,0];T.set(I,M*x*O),A.set(g,b*x*O);const z=[O,O,O,O,O,O];w.set(z,S*x*O)}const D=new An;D.setAttribute("position",new Jn(T,M)),D.setAttribute("uv",new Jn(A,b)),D.setAttribute("faceIndex",new Jn(w,S)),e.push(D),r>Zm&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function HR(n,e,t){const i=new Wa(n,e,t);return i.texture.mapping=bg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function ex(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function AH(n,e,t){const i=new Float32Array(Ad),r=new J(0,1,0);return new ks({name:"SphericalGaussianBlur",defines:{n:Ad,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Hw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Hc,depthTest:!1,depthWrite:!1})}function kR(){return new ks({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Hw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Hc,depthTest:!1,depthWrite:!1})}function GR(){return new ks({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Hw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Hc,depthTest:!1,depthWrite:!1})}function Hw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function wH(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const c=o.mapping,u=c===rg||c===Qv,h=c===Vc||c===ih;if(u||h){let p=e.get(o);const g=p!==void 0?p.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==g)return t===null&&(t=new kT(n)),p=u?t.fromEquirectangular(o,p):t.fromCubemap(o,p),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),p.texture;if(p!==void 0)return p.texture;{const y=o.image;return u&&y&&y.height>0||h&&y&&r(y)?(t===null&&(t=new kT(n)),p=u?t.fromEquirectangular(o):t.fromCubemap(o),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),o.addEventListener("dispose",s),p.texture):null}}}return o}function r(o){let c=0;const u=6;for(let h=0;h<u;h++)o[h]!==void 0&&c++;return c===u}function s(o){const c=o.target;c.removeEventListener("dispose",s);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function CH(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Xm("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function RH(n,e,t,i){const r={},s=new WeakMap;function a(p){const g=p.target;g.index!==null&&e.remove(g.index);for(const x in g.attributes)e.remove(g.attributes[x]);g.removeEventListener("dispose",a),delete r[g.id];const y=s.get(g);y&&(e.remove(y),s.delete(g)),i.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function o(p,g){return r[g.id]===!0||(g.addEventListener("dispose",a),r[g.id]=!0,t.memory.geometries++),g}function c(p){const g=p.attributes;for(const y in g)e.update(g[y],n.ARRAY_BUFFER)}function u(p){const g=[],y=p.index,x=p.attributes.position;let M=0;if(y!==null){const T=y.array;M=y.version;for(let A=0,w=T.length;A<w;A+=3){const D=T[A+0],O=T[A+1],P=T[A+2];g.push(D,O,O,P,P,D)}}else if(x!==void 0){const T=x.array;M=x.version;for(let A=0,w=T.length/3-1;A<w;A+=3){const D=A+0,O=A+1,P=A+2;g.push(D,O,O,P,P,D)}}else return;const b=new(zU(g)?pw:dw)(g,1);b.version=M;const S=s.get(p);S&&e.remove(S),s.set(p,b)}function h(p){const g=s.get(p);if(g){const y=p.index;y!==null&&g.version<y.version&&u(p)}else u(p);return s.get(p)}return{get:o,update:c,getWireframeAttribute:h}}function OH(n,e,t){let i;function r(g){i=g}let s,a;function o(g){s=g.type,a=g.bytesPerElement}function c(g,y){n.drawElements(i,y,s,g*a),t.update(y,i,1)}function u(g,y,x){x!==0&&(n.drawElementsInstanced(i,y,s,g*a,x),t.update(y,i,x))}function h(g,y,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,y,0,s,g,0,x);let b=0;for(let S=0;S<x;S++)b+=y[S];t.update(b,i,1)}function p(g,y,x,M){if(x===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let S=0;S<g.length;S++)u(g[S]/a,y[S],M[S]);else{b.multiDrawElementsInstancedWEBGL(i,y,0,s,g,0,M,0,x);let S=0;for(let T=0;T<x;T++)S+=y[T]*M[T];t.update(S,i,1)}}this.setMode=r,this.setIndex=o,this.render=c,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=p}function DH(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function UH(n,e,t){const i=new WeakMap,r=new Ln;function s(a,o,c){const u=a.morphTargetInfluences,h=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,p=h!==void 0?h.length:0;let g=i.get(o);if(g===void 0||g.count!==p){let z=function(){B.dispose(),i.delete(o),o.removeEventListener("dispose",z)};var y=z;g!==void 0&&g.texture.dispose();const x=o.morphAttributes.position!==void 0,M=o.morphAttributes.normal!==void 0,b=o.morphAttributes.color!==void 0,S=o.morphAttributes.position||[],T=o.morphAttributes.normal||[],A=o.morphAttributes.color||[];let w=0;x===!0&&(w=1),M===!0&&(w=2),b===!0&&(w=3);let D=o.attributes.position.count*w,O=1;D>e.maxTextureSize&&(O=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const P=new Float32Array(D*O*4*p),B=new TS(P,D,O,p);B.type=Yi,B.needsUpdate=!0;const I=w*4;for(let k=0;k<p;k++){const V=S[k],j=T[k],W=A[k],te=D*O*4*k;for(let H=0;H<V.count;H++){const Q=H*I;x===!0&&(r.fromBufferAttribute(V,H),P[te+Q+0]=r.x,P[te+Q+1]=r.y,P[te+Q+2]=r.z,P[te+Q+3]=0),M===!0&&(r.fromBufferAttribute(j,H),P[te+Q+4]=r.x,P[te+Q+5]=r.y,P[te+Q+6]=r.z,P[te+Q+7]=0),b===!0&&(r.fromBufferAttribute(W,H),P[te+Q+8]=r.x,P[te+Q+9]=r.y,P[te+Q+10]=r.z,P[te+Q+11]=W.itemSize===4?r.w:1)}}g={count:p,texture:B,size:new ft(D,O)},i.set(o,g),o.addEventListener("dispose",z)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let x=0;for(let b=0;b<u.length;b++)x+=u[b];const M=o.morphTargetsRelative?1:1-x;c.getUniforms().setValue(n,"morphTargetBaseInfluence",M),c.getUniforms().setValue(n,"morphTargetInfluences",u)}c.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}return{update:s}}function LH(n,e,t,i){let r=new WeakMap;function s(c){const u=i.render.frame,h=c.geometry,p=e.get(c,h);if(r.get(p)!==u&&(e.update(p),r.set(p,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),r.get(c)!==u&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,u))),c.isSkinnedMesh){const g=c.skeleton;r.get(g)!==u&&(g.update(),r.set(g,u))}return p}function a(){r=new WeakMap}function o(c){const u=c.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:a}}const PL=new mi,VR=new LS(1,1),IL=new TS,BL=new hw,zL=new Ey,jR=[],WR=[],XR=new Float32Array(16),qR=new Float32Array(9),YR=new Float32Array(4);function Mg(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=jR[r];if(s===void 0&&(s=new Float32Array(r),jR[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function Zr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Kr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function eE(n,e){let t=WR[e];t===void 0&&(t=new Int32Array(e),WR[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function NH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function PH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zr(t,e))return;n.uniform2fv(this.addr,e),Kr(t,e)}}function IH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Zr(t,e))return;n.uniform3fv(this.addr,e),Kr(t,e)}}function BH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zr(t,e))return;n.uniform4fv(this.addr,e),Kr(t,e)}}function zH(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Kr(t,e)}else{if(Zr(t,i))return;YR.set(i),n.uniformMatrix2fv(this.addr,!1,YR),Kr(t,i)}}function FH(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Kr(t,e)}else{if(Zr(t,i))return;qR.set(i),n.uniformMatrix3fv(this.addr,!1,qR),Kr(t,i)}}function HH(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Kr(t,e)}else{if(Zr(t,i))return;XR.set(i),n.uniformMatrix4fv(this.addr,!1,XR),Kr(t,i)}}function kH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function GH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zr(t,e))return;n.uniform2iv(this.addr,e),Kr(t,e)}}function VH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zr(t,e))return;n.uniform3iv(this.addr,e),Kr(t,e)}}function jH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zr(t,e))return;n.uniform4iv(this.addr,e),Kr(t,e)}}function WH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function XH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zr(t,e))return;n.uniform2uiv(this.addr,e),Kr(t,e)}}function qH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zr(t,e))return;n.uniform3uiv(this.addr,e),Kr(t,e)}}function YH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zr(t,e))return;n.uniform4uiv(this.addr,e),Kr(t,e)}}function ZH(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(VR.compareFunction=uw,s=VR):s=PL,t.setTexture2D(e||s,r)}function KH(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||BL,r)}function $H(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||zL,r)}function QH(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||IL,r)}function JH(n){switch(n){case 5126:return NH;case 35664:return PH;case 35665:return IH;case 35666:return BH;case 35674:return zH;case 35675:return FH;case 35676:return HH;case 5124:case 35670:return kH;case 35667:case 35671:return GH;case 35668:case 35672:return VH;case 35669:case 35673:return jH;case 5125:return WH;case 36294:return XH;case 36295:return qH;case 36296:return YH;case 35678:case 36198:case 36298:case 36306:case 35682:return ZH;case 35679:case 36299:case 36307:return KH;case 35680:case 36300:case 36308:case 36293:return $H;case 36289:case 36303:case 36311:case 36292:return QH}}function ek(n,e){n.uniform1fv(this.addr,e)}function tk(n,e){const t=Mg(e,this.size,2);n.uniform2fv(this.addr,t)}function nk(n,e){const t=Mg(e,this.size,3);n.uniform3fv(this.addr,t)}function ik(n,e){const t=Mg(e,this.size,4);n.uniform4fv(this.addr,t)}function rk(n,e){const t=Mg(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function sk(n,e){const t=Mg(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function ak(n,e){const t=Mg(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function ok(n,e){n.uniform1iv(this.addr,e)}function lk(n,e){n.uniform2iv(this.addr,e)}function ck(n,e){n.uniform3iv(this.addr,e)}function uk(n,e){n.uniform4iv(this.addr,e)}function fk(n,e){n.uniform1uiv(this.addr,e)}function hk(n,e){n.uniform2uiv(this.addr,e)}function dk(n,e){n.uniform3uiv(this.addr,e)}function pk(n,e){n.uniform4uiv(this.addr,e)}function mk(n,e,t){const i=this.cache,r=e.length,s=eE(t,r);Zr(i,s)||(n.uniform1iv(this.addr,s),Kr(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||PL,s[a])}function gk(n,e,t){const i=this.cache,r=e.length,s=eE(t,r);Zr(i,s)||(n.uniform1iv(this.addr,s),Kr(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||BL,s[a])}function vk(n,e,t){const i=this.cache,r=e.length,s=eE(t,r);Zr(i,s)||(n.uniform1iv(this.addr,s),Kr(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||zL,s[a])}function yk(n,e,t){const i=this.cache,r=e.length,s=eE(t,r);Zr(i,s)||(n.uniform1iv(this.addr,s),Kr(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||IL,s[a])}function _k(n){switch(n){case 5126:return ek;case 35664:return tk;case 35665:return nk;case 35666:return ik;case 35674:return rk;case 35675:return sk;case 35676:return ak;case 5124:case 35670:return ok;case 35667:case 35671:return lk;case 35668:case 35672:return ck;case 35669:case 35673:return uk;case 5125:return fk;case 36294:return hk;case 36295:return dk;case 36296:return pk;case 35678:case 36198:case 36298:case 36306:case 35682:return mk;case 35679:case 36299:case 36307:return gk;case 35680:case 36300:case 36308:case 36293:return vk;case 36289:case 36303:case 36311:case 36292:return yk}}class xk{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=JH(t.type)}}class bk{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=_k(t.type)}}class Sk{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const Y2=/(\w+)(\])?(\[|\.)?/g;function ZR(n,e){n.seq.push(e),n.map[e.id]=e}function Ek(n,e,t){const i=n.name,r=i.length;for(Y2.lastIndex=0;;){const s=Y2.exec(i),a=Y2.lastIndex;let o=s[1];const c=s[2]==="]",u=s[3];if(c&&(o=o|0),u===void 0||u==="["&&a+2===r){ZR(t,u===void 0?new xk(o,n,e):new bk(o,n,e));break}else{let p=t.map[o];p===void 0&&(p=new Sk(o),ZR(t,p)),t=p}}}class qx{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);Ek(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],c=i[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function KR(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Mk=37297;let Tk=0;function Ak(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}const $R=new Mn;function wk(n){Xn._getMatrix($R,Xn.workingColorSpace,n);const e=`mat3( ${$R.elements.map(t=>t.toFixed(4))} )`;switch(Xn.getTransfer(n)){case ey:return[e,"LinearTransferOETF"];case Ei:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function QR(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Ak(n.getShaderSource(e),a)}else return r}function Ck(n,e){const t=wk(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Rk(n,e){let t;switch(e){case yU:t="Linear";break;case _U:t="Reinhard";break;case xU:t="Cineon";break;case JA:t="ACESFilmic";break;case SU:t="AgX";break;case EU:t="Neutral";break;case bU:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const tx=new J;function Ok(){Xn.getLuminanceCoefficients(tx);const n=tx.x.toFixed(4),e=tx.y.toFixed(4),t=tx.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Dk(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(wv).join(`
`)}function Uk(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Lk(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function wv(n){return n!==""}function JR(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function e4(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Nk=/^[ \t]*#include +<([\w\d./]+)>/gm;function GT(n){return n.replace(Nk,Ik)}const Pk=new Map;function Ik(n,e){let t=Dn[e];if(t===void 0){const i=Pk.get(e);if(i!==void 0)t=Dn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return GT(t)}const Bk=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function t4(n){return n.replace(Bk,zk)}function zk(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function n4(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Fk(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===gS?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Lv?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Hl&&(e="SHADOWMAP_TYPE_VSM"),e}function Hk(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Vc:case ih:e="ENVMAP_TYPE_CUBE";break;case bg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function kk(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ih:e="ENVMAP_MODE_REFRACTION";break}return e}function Gk(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case _y:e="ENVMAP_BLENDING_MULTIPLY";break;case gU:e="ENVMAP_BLENDING_MIX";break;case vU:e="ENVMAP_BLENDING_ADD";break}return e}function Vk(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function jk(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const c=Fk(t),u=Hk(t),h=kk(t),p=Gk(t),g=Vk(t),y=Dk(t),x=Uk(s),M=r.createProgram();let b,S,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(wv).join(`
`),b.length>0&&(b+=`
`),S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(wv).join(`
`),S.length>0&&(S+=`
`)):(b=[n4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(wv).join(`
`),S=[n4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==kc?"#define TONE_MAPPING":"",t.toneMapping!==kc?Dn.tonemapping_pars_fragment:"",t.toneMapping!==kc?Rk("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Dn.colorspace_pars_fragment,Ck("linearToOutputTexel",t.outputColorSpace),Ok(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(wv).join(`
`)),a=GT(a),a=JR(a,t),a=e4(a,t),o=GT(o),o=JR(o,t),o=e4(o,t),a=t4(a),o=t4(o),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,b=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,S=["#define varying in",t.glslVersion===NT?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===NT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const A=T+b+a,w=T+S+o,D=KR(r,r.VERTEX_SHADER,A),O=KR(r,r.FRAGMENT_SHADER,w);r.attachShader(M,D),r.attachShader(M,O),t.index0AttributeName!==void 0?r.bindAttribLocation(M,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(M,0,"position"),r.linkProgram(M);function P(k){if(n.debug.checkShaderErrors){const V=r.getProgramInfoLog(M).trim(),j=r.getShaderInfoLog(D).trim(),W=r.getShaderInfoLog(O).trim();let te=!0,H=!0;if(r.getProgramParameter(M,r.LINK_STATUS)===!1)if(te=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,M,D,O);else{const Q=QR(r,D,"vertex"),ne=QR(r,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(M,r.VALIDATE_STATUS)+`

Material Name: `+k.name+`
Material Type: `+k.type+`

Program Info Log: `+V+`
`+Q+`
`+ne)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):(j===""||W==="")&&(H=!1);H&&(k.diagnostics={runnable:te,programLog:V,vertexShader:{log:j,prefix:b},fragmentShader:{log:W,prefix:S}})}r.deleteShader(D),r.deleteShader(O),B=new qx(r,M),I=Lk(r,M)}let B;this.getUniforms=function(){return B===void 0&&P(this),B};let I;this.getAttributes=function(){return I===void 0&&P(this),I};let z=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return z===!1&&(z=r.getProgramParameter(M,Mk)),z},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(M),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Tk++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=D,this.fragmentShader=O,this}let Wk=0;class Xk{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new qk(e),t.set(e,i)),i}}class qk{constructor(e){this.id=Wk++,this.code=e,this.usedTimes=0}}function Yk(n,e,t,i,r,s,a){const o=new ug,c=new Xk,u=new Set,h=[],p=r.logarithmicDepthBuffer,g=r.vertexTextures;let y=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(I){return u.add(I),I===0?"uv":`uv${I}`}function b(I,z,k,V,j){const W=V.fog,te=j.geometry,H=I.isMeshStandardMaterial?V.environment:null,Q=(I.isMeshStandardMaterial?t:e).get(I.envMap||H),ne=Q&&Q.mapping===bg?Q.image.height:null,re=x[I.type];I.precision!==null&&(y=r.getMaxPrecision(I.precision),y!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",y,"instead."));const G=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,X=G!==void 0?G.length:0;let ie=0;te.morphAttributes.position!==void 0&&(ie=1),te.morphAttributes.normal!==void 0&&(ie=2),te.morphAttributes.color!==void 0&&(ie=3);let se,ee,ue,pe;if(re){const Gt=kl[re];se=Gt.vertexShader,ee=Gt.fragmentShader}else se=I.vertexShader,ee=I.fragmentShader,c.update(I),ue=c.getVertexShaderID(I),pe=c.getFragmentShaderID(I);const ve=n.getRenderTarget(),_e=n.state.buffers.depth.getReversed(),Xe=j.isInstancedMesh===!0,qe=j.isBatchedMesh===!0,Be=!!I.map,Se=!!I.matcap,He=!!Q,oe=!!I.aoMap,lt=!!I.lightMap,ze=!!I.bumpMap,Qe=!!I.normalMap,De=!!I.displacementMap,st=!!I.emissiveMap,ke=!!I.metalnessMap,$=!!I.roughnessMap,Y=I.anisotropy>0,fe=I.clearcoat>0,Ee=I.dispersion>0,Re=I.iridescence>0,Le=I.sheen>0,Fe=I.transmission>0,et=Y&&!!I.anisotropyMap,tt=fe&&!!I.clearcoatMap,Ot=fe&&!!I.clearcoatNormalMap,at=fe&&!!I.clearcoatRoughnessMap,yt=Re&&!!I.iridescenceMap,gt=Re&&!!I.iridescenceThicknessMap,ht=Le&&!!I.sheenColorMap,nt=Le&&!!I.sheenRoughnessMap,wt=!!I.specularMap,St=!!I.specularColorMap,Ht=!!I.specularIntensityMap,Te=Fe&&!!I.transmissionMap,Oe=Fe&&!!I.thicknessMap,Pe=!!I.gradientMap,ct=!!I.alphaMap,xt=I.alphaTest>0,je=!!I.alphaHash,Ct=!!I.extensions;let zt=kc;I.toneMapped&&(ve===null||ve.isXRRenderTarget===!0)&&(zt=n.toneMapping);const Dt={shaderID:re,shaderType:I.type,shaderName:I.name,vertexShader:se,fragmentShader:ee,defines:I.defines,customVertexShaderID:ue,customFragmentShaderID:pe,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:y,batching:qe,batchingColor:qe&&j._colorsTexture!==null,instancing:Xe,instancingColor:Xe&&j.instanceColor!==null,instancingMorph:Xe&&j.morphTexture!==null,supportsVertexTextures:g,outputColorSpace:ve===null?n.outputColorSpace:ve.isXRRenderTarget===!0?ve.texture.colorSpace:Ir,alphaToCoverage:!!I.alphaToCoverage,map:Be,matcap:Se,envMap:He,envMapMode:He&&Q.mapping,envMapCubeUVHeight:ne,aoMap:oe,lightMap:lt,bumpMap:ze,normalMap:Qe,displacementMap:g&&De,emissiveMap:st,normalMapObjectSpace:Qe&&I.normalMapType===OU,normalMapTangentSpace:Qe&&I.normalMapType===hh,metalnessMap:ke,roughnessMap:$,anisotropy:Y,anisotropyMap:et,clearcoat:fe,clearcoatMap:tt,clearcoatNormalMap:Ot,clearcoatRoughnessMap:at,dispersion:Ee,iridescence:Re,iridescenceMap:yt,iridescenceThicknessMap:gt,sheen:Le,sheenColorMap:ht,sheenRoughnessMap:nt,specularMap:wt,specularColorMap:St,specularIntensityMap:Ht,transmission:Fe,transmissionMap:Te,thicknessMap:Oe,gradientMap:Pe,opaque:I.transparent===!1&&I.blending===Iu&&I.alphaToCoverage===!1,alphaMap:ct,alphaTest:xt,alphaHash:je,combine:I.combine,mapUv:Be&&M(I.map.channel),aoMapUv:oe&&M(I.aoMap.channel),lightMapUv:lt&&M(I.lightMap.channel),bumpMapUv:ze&&M(I.bumpMap.channel),normalMapUv:Qe&&M(I.normalMap.channel),displacementMapUv:De&&M(I.displacementMap.channel),emissiveMapUv:st&&M(I.emissiveMap.channel),metalnessMapUv:ke&&M(I.metalnessMap.channel),roughnessMapUv:$&&M(I.roughnessMap.channel),anisotropyMapUv:et&&M(I.anisotropyMap.channel),clearcoatMapUv:tt&&M(I.clearcoatMap.channel),clearcoatNormalMapUv:Ot&&M(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:at&&M(I.clearcoatRoughnessMap.channel),iridescenceMapUv:yt&&M(I.iridescenceMap.channel),iridescenceThicknessMapUv:gt&&M(I.iridescenceThicknessMap.channel),sheenColorMapUv:ht&&M(I.sheenColorMap.channel),sheenRoughnessMapUv:nt&&M(I.sheenRoughnessMap.channel),specularMapUv:wt&&M(I.specularMap.channel),specularColorMapUv:St&&M(I.specularColorMap.channel),specularIntensityMapUv:Ht&&M(I.specularIntensityMap.channel),transmissionMapUv:Te&&M(I.transmissionMap.channel),thicknessMapUv:Oe&&M(I.thicknessMap.channel),alphaMapUv:ct&&M(I.alphaMap.channel),vertexTangents:!!te.attributes.tangent&&(Qe||Y),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,pointsUvs:j.isPoints===!0&&!!te.attributes.uv&&(Be||ct),fog:!!W,useFog:I.fog===!0,fogExp2:!!W&&W.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:p,reverseDepthBuffer:_e,skinning:j.isSkinnedMesh===!0,morphTargets:te.morphAttributes.position!==void 0,morphNormals:te.morphAttributes.normal!==void 0,morphColors:te.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:ie,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numSpotLightMaps:z.spotLightMap.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numSpotLightShadowsWithMaps:z.numSpotLightShadowsWithMaps,numLightProbes:z.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&k.length>0,shadowMapType:n.shadowMap.type,toneMapping:zt,decodeVideoTexture:Be&&I.map.isVideoTexture===!0&&Xn.getTransfer(I.map.colorSpace)===Ei,decodeVideoTextureEmissive:st&&I.emissiveMap.isVideoTexture===!0&&Xn.getTransfer(I.emissiveMap.colorSpace)===Ei,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===mr,flipSided:I.side===Fs,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Ct&&I.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ct&&I.extensions.multiDraw===!0||qe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return Dt.vertexUv1s=u.has(1),Dt.vertexUv2s=u.has(2),Dt.vertexUv3s=u.has(3),u.clear(),Dt}function S(I){const z=[];if(I.shaderID?z.push(I.shaderID):(z.push(I.customVertexShaderID),z.push(I.customFragmentShaderID)),I.defines!==void 0)for(const k in I.defines)z.push(k),z.push(I.defines[k]);return I.isRawShaderMaterial===!1&&(T(z,I),A(z,I),z.push(n.outputColorSpace)),z.push(I.customProgramCacheKey),z.join()}function T(I,z){I.push(z.precision),I.push(z.outputColorSpace),I.push(z.envMapMode),I.push(z.envMapCubeUVHeight),I.push(z.mapUv),I.push(z.alphaMapUv),I.push(z.lightMapUv),I.push(z.aoMapUv),I.push(z.bumpMapUv),I.push(z.normalMapUv),I.push(z.displacementMapUv),I.push(z.emissiveMapUv),I.push(z.metalnessMapUv),I.push(z.roughnessMapUv),I.push(z.anisotropyMapUv),I.push(z.clearcoatMapUv),I.push(z.clearcoatNormalMapUv),I.push(z.clearcoatRoughnessMapUv),I.push(z.iridescenceMapUv),I.push(z.iridescenceThicknessMapUv),I.push(z.sheenColorMapUv),I.push(z.sheenRoughnessMapUv),I.push(z.specularMapUv),I.push(z.specularColorMapUv),I.push(z.specularIntensityMapUv),I.push(z.transmissionMapUv),I.push(z.thicknessMapUv),I.push(z.combine),I.push(z.fogExp2),I.push(z.sizeAttenuation),I.push(z.morphTargetsCount),I.push(z.morphAttributeCount),I.push(z.numDirLights),I.push(z.numPointLights),I.push(z.numSpotLights),I.push(z.numSpotLightMaps),I.push(z.numHemiLights),I.push(z.numRectAreaLights),I.push(z.numDirLightShadows),I.push(z.numPointLightShadows),I.push(z.numSpotLightShadows),I.push(z.numSpotLightShadowsWithMaps),I.push(z.numLightProbes),I.push(z.shadowMapType),I.push(z.toneMapping),I.push(z.numClippingPlanes),I.push(z.numClipIntersection),I.push(z.depthPacking)}function A(I,z){o.disableAll(),z.supportsVertexTextures&&o.enable(0),z.instancing&&o.enable(1),z.instancingColor&&o.enable(2),z.instancingMorph&&o.enable(3),z.matcap&&o.enable(4),z.envMap&&o.enable(5),z.normalMapObjectSpace&&o.enable(6),z.normalMapTangentSpace&&o.enable(7),z.clearcoat&&o.enable(8),z.iridescence&&o.enable(9),z.alphaTest&&o.enable(10),z.vertexColors&&o.enable(11),z.vertexAlphas&&o.enable(12),z.vertexUv1s&&o.enable(13),z.vertexUv2s&&o.enable(14),z.vertexUv3s&&o.enable(15),z.vertexTangents&&o.enable(16),z.anisotropy&&o.enable(17),z.alphaHash&&o.enable(18),z.batching&&o.enable(19),z.dispersion&&o.enable(20),z.batchingColor&&o.enable(21),I.push(o.mask),o.disableAll(),z.fog&&o.enable(0),z.useFog&&o.enable(1),z.flatShading&&o.enable(2),z.logarithmicDepthBuffer&&o.enable(3),z.reverseDepthBuffer&&o.enable(4),z.skinning&&o.enable(5),z.morphTargets&&o.enable(6),z.morphNormals&&o.enable(7),z.morphColors&&o.enable(8),z.premultipliedAlpha&&o.enable(9),z.shadowMapEnabled&&o.enable(10),z.doubleSided&&o.enable(11),z.flipSided&&o.enable(12),z.useDepthPacking&&o.enable(13),z.dithering&&o.enable(14),z.transmission&&o.enable(15),z.sheen&&o.enable(16),z.opaque&&o.enable(17),z.pointsUvs&&o.enable(18),z.decodeVideoTexture&&o.enable(19),z.decodeVideoTextureEmissive&&o.enable(20),z.alphaToCoverage&&o.enable(21),I.push(o.mask)}function w(I){const z=x[I.type];let k;if(z){const V=kl[z];k=hg.clone(V.uniforms)}else k=I.uniforms;return k}function D(I,z){let k;for(let V=0,j=h.length;V<j;V++){const W=h[V];if(W.cacheKey===z){k=W,++k.usedTimes;break}}return k===void 0&&(k=new jk(n,z,I,s),h.push(k)),k}function O(I){if(--I.usedTimes===0){const z=h.indexOf(I);h[z]=h[h.length-1],h.pop(),I.destroy()}}function P(I){c.remove(I)}function B(){c.dispose()}return{getParameters:b,getProgramCacheKey:S,getUniforms:w,acquireProgram:D,releaseProgram:O,releaseShaderCache:P,programs:h,dispose:B}}function Zk(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function i(a){n.delete(a)}function r(a,o,c){n.get(a)[o]=c}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function Kk(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function i4(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function r4(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(p,g,y,x,M,b){let S=n[e];return S===void 0?(S={id:p.id,object:p,geometry:g,material:y,groupOrder:x,renderOrder:p.renderOrder,z:M,group:b},n[e]=S):(S.id=p.id,S.object=p,S.geometry=g,S.material=y,S.groupOrder=x,S.renderOrder=p.renderOrder,S.z=M,S.group=b),e++,S}function o(p,g,y,x,M,b){const S=a(p,g,y,x,M,b);y.transmission>0?i.push(S):y.transparent===!0?r.push(S):t.push(S)}function c(p,g,y,x,M,b){const S=a(p,g,y,x,M,b);y.transmission>0?i.unshift(S):y.transparent===!0?r.unshift(S):t.unshift(S)}function u(p,g){t.length>1&&t.sort(p||Kk),i.length>1&&i.sort(g||i4),r.length>1&&r.sort(g||i4)}function h(){for(let p=e,g=n.length;p<g;p++){const y=n[p];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:c,finish:h,sort:u}}function $k(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new r4,n.set(i,[a])):r>=s.length?(a=new r4,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function Qk(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new J,color:new Rt};break;case"SpotLight":t={position:new J,direction:new J,color:new Rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new J,color:new Rt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new J,skyColor:new Rt,groundColor:new Rt};break;case"RectAreaLight":t={color:new Rt,position:new J,halfWidth:new J,halfHeight:new J};break}return n[e.id]=t,t}}}function Jk(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let eG=0;function tG(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function nG(n){const e=new Qk,t=Jk(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new J);const r=new J,s=new Ut,a=new Ut;function o(u){let h=0,p=0,g=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let y=0,x=0,M=0,b=0,S=0,T=0,A=0,w=0,D=0,O=0,P=0;u.sort(tG);for(let I=0,z=u.length;I<z;I++){const k=u[I],V=k.color,j=k.intensity,W=k.distance,te=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)h+=V.r*j,p+=V.g*j,g+=V.b*j;else if(k.isLightProbe){for(let H=0;H<9;H++)i.probe[H].addScaledVector(k.sh.coefficients[H],j);P++}else if(k.isDirectionalLight){const H=e.get(k);if(H.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const Q=k.shadow,ne=t.get(k);ne.shadowIntensity=Q.intensity,ne.shadowBias=Q.bias,ne.shadowNormalBias=Q.normalBias,ne.shadowRadius=Q.radius,ne.shadowMapSize=Q.mapSize,i.directionalShadow[y]=ne,i.directionalShadowMap[y]=te,i.directionalShadowMatrix[y]=k.shadow.matrix,T++}i.directional[y]=H,y++}else if(k.isSpotLight){const H=e.get(k);H.position.setFromMatrixPosition(k.matrixWorld),H.color.copy(V).multiplyScalar(j),H.distance=W,H.coneCos=Math.cos(k.angle),H.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),H.decay=k.decay,i.spot[M]=H;const Q=k.shadow;if(k.map&&(i.spotLightMap[D]=k.map,D++,Q.updateMatrices(k),k.castShadow&&O++),i.spotLightMatrix[M]=Q.matrix,k.castShadow){const ne=t.get(k);ne.shadowIntensity=Q.intensity,ne.shadowBias=Q.bias,ne.shadowNormalBias=Q.normalBias,ne.shadowRadius=Q.radius,ne.shadowMapSize=Q.mapSize,i.spotShadow[M]=ne,i.spotShadowMap[M]=te,w++}M++}else if(k.isRectAreaLight){const H=e.get(k);H.color.copy(V).multiplyScalar(j),H.halfWidth.set(k.width*.5,0,0),H.halfHeight.set(0,k.height*.5,0),i.rectArea[b]=H,b++}else if(k.isPointLight){const H=e.get(k);if(H.color.copy(k.color).multiplyScalar(k.intensity),H.distance=k.distance,H.decay=k.decay,k.castShadow){const Q=k.shadow,ne=t.get(k);ne.shadowIntensity=Q.intensity,ne.shadowBias=Q.bias,ne.shadowNormalBias=Q.normalBias,ne.shadowRadius=Q.radius,ne.shadowMapSize=Q.mapSize,ne.shadowCameraNear=Q.camera.near,ne.shadowCameraFar=Q.camera.far,i.pointShadow[x]=ne,i.pointShadowMap[x]=te,i.pointShadowMatrix[x]=k.shadow.matrix,A++}i.point[x]=H,x++}else if(k.isHemisphereLight){const H=e.get(k);H.skyColor.copy(k.color).multiplyScalar(j),H.groundColor.copy(k.groundColor).multiplyScalar(j),i.hemi[S]=H,S++}}b>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=It.LTC_FLOAT_1,i.rectAreaLTC2=It.LTC_FLOAT_2):(i.rectAreaLTC1=It.LTC_HALF_1,i.rectAreaLTC2=It.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=p,i.ambient[2]=g;const B=i.hash;(B.directionalLength!==y||B.pointLength!==x||B.spotLength!==M||B.rectAreaLength!==b||B.hemiLength!==S||B.numDirectionalShadows!==T||B.numPointShadows!==A||B.numSpotShadows!==w||B.numSpotMaps!==D||B.numLightProbes!==P)&&(i.directional.length=y,i.spot.length=M,i.rectArea.length=b,i.point.length=x,i.hemi.length=S,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=A,i.pointShadowMap.length=A,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=A,i.spotLightMatrix.length=w+D-O,i.spotLightMap.length=D,i.numSpotLightShadowsWithMaps=O,i.numLightProbes=P,B.directionalLength=y,B.pointLength=x,B.spotLength=M,B.rectAreaLength=b,B.hemiLength=S,B.numDirectionalShadows=T,B.numPointShadows=A,B.numSpotShadows=w,B.numSpotMaps=D,B.numLightProbes=P,i.version=eG++)}function c(u,h){let p=0,g=0,y=0,x=0,M=0;const b=h.matrixWorldInverse;for(let S=0,T=u.length;S<T;S++){const A=u[S];if(A.isDirectionalLight){const w=i.directional[p];w.direction.setFromMatrixPosition(A.matrixWorld),r.setFromMatrixPosition(A.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(b),p++}else if(A.isSpotLight){const w=i.spot[y];w.position.setFromMatrixPosition(A.matrixWorld),w.position.applyMatrix4(b),w.direction.setFromMatrixPosition(A.matrixWorld),r.setFromMatrixPosition(A.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(b),y++}else if(A.isRectAreaLight){const w=i.rectArea[x];w.position.setFromMatrixPosition(A.matrixWorld),w.position.applyMatrix4(b),a.identity(),s.copy(A.matrixWorld),s.premultiply(b),a.extractRotation(s),w.halfWidth.set(A.width*.5,0,0),w.halfHeight.set(0,A.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),x++}else if(A.isPointLight){const w=i.point[g];w.position.setFromMatrixPosition(A.matrixWorld),w.position.applyMatrix4(b),g++}else if(A.isHemisphereLight){const w=i.hemi[M];w.direction.setFromMatrixPosition(A.matrixWorld),w.direction.transformDirection(b),M++}}}return{setup:o,setupView:c,state:i}}function s4(n){const e=new nG(n),t=[],i=[];function r(h){u.camera=h,t.length=0,i.length=0}function s(h){t.push(h)}function a(h){i.push(h)}function o(){e.setup(t)}function c(h){e.setupView(t,h)}const u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:o,setupLightsView:c,pushLight:s,pushShadow:a}}function iG(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new s4(n),e.set(r,[o])):s>=a.length?(o=new s4(n),a.push(o)):o=a[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const rG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,sG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function aG(n,e,t){let i=new Ay;const r=new ft,s=new ft,a=new Ln,o=new qS({depthPacking:cw}),c=new YS,u={},h=t.maxTextureSize,p={[$o]:Fs,[Fs]:$o,[mr]:mr},g=new ks({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ft},radius:{value:4}},vertexShader:rG,fragmentShader:sG}),y=g.clone();y.defines.HORIZONTAL_PASS=1;const x=new An;x.setAttribute("position",new Jn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new fi(x,g),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=gS;let S=this.type;this.render=function(O,P,B){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||O.length===0)return;const I=n.getRenderTarget(),z=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),V=n.state;V.setBlending(Hc),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const j=S!==Hl&&this.type===Hl,W=S===Hl&&this.type!==Hl;for(let te=0,H=O.length;te<H;te++){const Q=O[te],ne=Q.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;r.copy(ne.mapSize);const re=ne.getFrameExtents();if(r.multiply(re),s.copy(ne.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/re.x),r.x=s.x*re.x,ne.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/re.y),r.y=s.y*re.y,ne.mapSize.y=s.y)),ne.map===null||j===!0||W===!0){const X=this.type!==Hl?{minFilter:qr,magFilter:qr}:{};ne.map!==null&&ne.map.dispose(),ne.map=new Wa(r.x,r.y,X),ne.map.texture.name=Q.name+".shadowMap",ne.camera.updateProjectionMatrix()}n.setRenderTarget(ne.map),n.clear();const G=ne.getViewportCount();for(let X=0;X<G;X++){const ie=ne.getViewport(X);a.set(s.x*ie.x,s.y*ie.y,s.x*ie.z,s.y*ie.w),V.viewport(a),ne.updateMatrices(Q,X),i=ne.getFrustum(),w(P,B,ne.camera,Q,this.type)}ne.isPointLightShadow!==!0&&this.type===Hl&&T(ne,B),ne.needsUpdate=!1}S=this.type,b.needsUpdate=!1,n.setRenderTarget(I,z,k)};function T(O,P){const B=e.update(M);g.defines.VSM_SAMPLES!==O.blurSamples&&(g.defines.VSM_SAMPLES=O.blurSamples,y.defines.VSM_SAMPLES=O.blurSamples,g.needsUpdate=!0,y.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new Wa(r.x,r.y)),g.uniforms.shadow_pass.value=O.map.texture,g.uniforms.resolution.value=O.mapSize,g.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(P,null,B,g,M,null),y.uniforms.shadow_pass.value=O.mapPass.texture,y.uniforms.resolution.value=O.mapSize,y.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(P,null,B,y,M,null)}function A(O,P,B,I){let z=null;const k=B.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(k!==void 0)z=k;else if(z=B.isPointLight===!0?c:o,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const V=z.uuid,j=P.uuid;let W=u[V];W===void 0&&(W={},u[V]=W);let te=W[j];te===void 0&&(te=z.clone(),W[j]=te,P.addEventListener("dispose",D)),z=te}if(z.visible=P.visible,z.wireframe=P.wireframe,I===Hl?z.side=P.shadowSide!==null?P.shadowSide:P.side:z.side=P.shadowSide!==null?P.shadowSide:p[P.side],z.alphaMap=P.alphaMap,z.alphaTest=P.alphaTest,z.map=P.map,z.clipShadows=P.clipShadows,z.clippingPlanes=P.clippingPlanes,z.clipIntersection=P.clipIntersection,z.displacementMap=P.displacementMap,z.displacementScale=P.displacementScale,z.displacementBias=P.displacementBias,z.wireframeLinewidth=P.wireframeLinewidth,z.linewidth=P.linewidth,B.isPointLight===!0&&z.isMeshDistanceMaterial===!0){const V=n.properties.get(z);V.light=B}return z}function w(O,P,B,I,z){if(O.visible===!1)return;if(O.layers.test(P.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&z===Hl)&&(!O.frustumCulled||i.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,O.matrixWorld);const j=e.update(O),W=O.material;if(Array.isArray(W)){const te=j.groups;for(let H=0,Q=te.length;H<Q;H++){const ne=te[H],re=W[ne.materialIndex];if(re&&re.visible){const G=A(O,re,I,z);O.onBeforeShadow(n,O,P,B,j,G,ne),n.renderBufferDirect(B,null,j,G,O,ne),O.onAfterShadow(n,O,P,B,j,G,ne)}}}else if(W.visible){const te=A(O,W,I,z);O.onBeforeShadow(n,O,P,B,j,te,null),n.renderBufferDirect(B,null,j,te,O,null),O.onAfterShadow(n,O,P,B,j,te,null)}}const V=O.children;for(let j=0,W=V.length;j<W;j++)w(V[j],P,B,I,z)}function D(O){O.target.removeEventListener("dispose",D);for(const B in u){const I=u[B],z=O.target.uuid;z in I&&(I[z].dispose(),delete I[z])}}}const oG={[tb]:nb,[ib]:ab,[rb]:ob,[Vd]:sb,[nb]:tb,[ab]:ib,[ob]:rb,[sb]:Vd};function lG(n,e){function t(){let Te=!1;const Oe=new Ln;let Pe=null;const ct=new Ln(0,0,0,0);return{setMask:function(xt){Pe!==xt&&!Te&&(n.colorMask(xt,xt,xt,xt),Pe=xt)},setLocked:function(xt){Te=xt},setClear:function(xt,je,Ct,zt,Dt){Dt===!0&&(xt*=zt,je*=zt,Ct*=zt),Oe.set(xt,je,Ct,zt),ct.equals(Oe)===!1&&(n.clearColor(xt,je,Ct,zt),ct.copy(Oe))},reset:function(){Te=!1,Pe=null,ct.set(-1,0,0,0)}}}function i(){let Te=!1,Oe=!1,Pe=null,ct=null,xt=null;return{setReversed:function(je){if(Oe!==je){const Ct=e.get("EXT_clip_control");Oe?Ct.clipControlEXT(Ct.LOWER_LEFT_EXT,Ct.ZERO_TO_ONE_EXT):Ct.clipControlEXT(Ct.LOWER_LEFT_EXT,Ct.NEGATIVE_ONE_TO_ONE_EXT);const zt=xt;xt=null,this.setClear(zt)}Oe=je},getReversed:function(){return Oe},setTest:function(je){je?ve(n.DEPTH_TEST):_e(n.DEPTH_TEST)},setMask:function(je){Pe!==je&&!Te&&(n.depthMask(je),Pe=je)},setFunc:function(je){if(Oe&&(je=oG[je]),ct!==je){switch(je){case tb:n.depthFunc(n.NEVER);break;case nb:n.depthFunc(n.ALWAYS);break;case ib:n.depthFunc(n.LESS);break;case Vd:n.depthFunc(n.LEQUAL);break;case rb:n.depthFunc(n.EQUAL);break;case sb:n.depthFunc(n.GEQUAL);break;case ab:n.depthFunc(n.GREATER);break;case ob:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ct=je}},setLocked:function(je){Te=je},setClear:function(je){xt!==je&&(Oe&&(je=1-je),n.clearDepth(je),xt=je)},reset:function(){Te=!1,Pe=null,ct=null,xt=null,Oe=!1}}}function r(){let Te=!1,Oe=null,Pe=null,ct=null,xt=null,je=null,Ct=null,zt=null,Dt=null;return{setTest:function(Gt){Te||(Gt?ve(n.STENCIL_TEST):_e(n.STENCIL_TEST))},setMask:function(Gt){Oe!==Gt&&!Te&&(n.stencilMask(Gt),Oe=Gt)},setFunc:function(Gt,tn,Jt){(Pe!==Gt||ct!==tn||xt!==Jt)&&(n.stencilFunc(Gt,tn,Jt),Pe=Gt,ct=tn,xt=Jt)},setOp:function(Gt,tn,Jt){(je!==Gt||Ct!==tn||zt!==Jt)&&(n.stencilOp(Gt,tn,Jt),je=Gt,Ct=tn,zt=Jt)},setLocked:function(Gt){Te=Gt},setClear:function(Gt){Dt!==Gt&&(n.clearStencil(Gt),Dt=Gt)},reset:function(){Te=!1,Oe=null,Pe=null,ct=null,xt=null,je=null,Ct=null,zt=null,Dt=null}}}const s=new t,a=new i,o=new r,c=new WeakMap,u=new WeakMap;let h={},p={},g=new WeakMap,y=[],x=null,M=!1,b=null,S=null,T=null,A=null,w=null,D=null,O=null,P=new Rt(0,0,0),B=0,I=!1,z=null,k=null,V=null,j=null,W=null;const te=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let H=!1,Q=0;const ne=n.getParameter(n.VERSION);ne.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(ne)[1]),H=Q>=1):ne.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),H=Q>=2);let re=null,G={};const X=n.getParameter(n.SCISSOR_BOX),ie=n.getParameter(n.VIEWPORT),se=new Ln().fromArray(X),ee=new Ln().fromArray(ie);function ue(Te,Oe,Pe,ct){const xt=new Uint8Array(4),je=n.createTexture();n.bindTexture(Te,je),n.texParameteri(Te,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Te,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ct=0;Ct<Pe;Ct++)Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY?n.texImage3D(Oe,0,n.RGBA,1,1,ct,0,n.RGBA,n.UNSIGNED_BYTE,xt):n.texImage2D(Oe+Ct,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,xt);return je}const pe={};pe[n.TEXTURE_2D]=ue(n.TEXTURE_2D,n.TEXTURE_2D,1),pe[n.TEXTURE_CUBE_MAP]=ue(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),pe[n.TEXTURE_2D_ARRAY]=ue(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),pe[n.TEXTURE_3D]=ue(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ve(n.DEPTH_TEST),a.setFunc(Vd),ze(!1),Qe(wT),ve(n.CULL_FACE),oe(Hc);function ve(Te){h[Te]!==!0&&(n.enable(Te),h[Te]=!0)}function _e(Te){h[Te]!==!1&&(n.disable(Te),h[Te]=!1)}function Xe(Te,Oe){return p[Te]!==Oe?(n.bindFramebuffer(Te,Oe),p[Te]=Oe,Te===n.DRAW_FRAMEBUFFER&&(p[n.FRAMEBUFFER]=Oe),Te===n.FRAMEBUFFER&&(p[n.DRAW_FRAMEBUFFER]=Oe),!0):!1}function qe(Te,Oe){let Pe=y,ct=!1;if(Te){Pe=g.get(Oe),Pe===void 0&&(Pe=[],g.set(Oe,Pe));const xt=Te.textures;if(Pe.length!==xt.length||Pe[0]!==n.COLOR_ATTACHMENT0){for(let je=0,Ct=xt.length;je<Ct;je++)Pe[je]=n.COLOR_ATTACHMENT0+je;Pe.length=xt.length,ct=!0}}else Pe[0]!==n.BACK&&(Pe[0]=n.BACK,ct=!0);ct&&n.drawBuffers(Pe)}function Be(Te){return x!==Te?(n.useProgram(Te),x=Te,!0):!1}const Se={[Yf]:n.FUNC_ADD,[J5]:n.FUNC_SUBTRACT,[eU]:n.FUNC_REVERSE_SUBTRACT};Se[tU]=n.MIN,Se[nU]=n.MAX;const He={[iU]:n.ZERO,[rU]:n.ONE,[sU]:n.SRC_COLOR,[Jx]:n.SRC_ALPHA,[fU]:n.SRC_ALPHA_SATURATE,[cU]:n.DST_COLOR,[oU]:n.DST_ALPHA,[aU]:n.ONE_MINUS_SRC_COLOR,[eb]:n.ONE_MINUS_SRC_ALPHA,[uU]:n.ONE_MINUS_DST_COLOR,[lU]:n.ONE_MINUS_DST_ALPHA,[hU]:n.CONSTANT_COLOR,[dU]:n.ONE_MINUS_CONSTANT_COLOR,[pU]:n.CONSTANT_ALPHA,[mU]:n.ONE_MINUS_CONSTANT_ALPHA};function oe(Te,Oe,Pe,ct,xt,je,Ct,zt,Dt,Gt){if(Te===Hc){M===!0&&(_e(n.BLEND),M=!1);return}if(M===!1&&(ve(n.BLEND),M=!0),Te!==Q5){if(Te!==b||Gt!==I){if((S!==Yf||w!==Yf)&&(n.blendEquation(n.FUNC_ADD),S=Yf,w=Yf),Gt)switch(Te){case Iu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case CT:n.blendFunc(n.ONE,n.ONE);break;case RT:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case OT:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}else switch(Te){case Iu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case CT:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case RT:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case OT:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}T=null,A=null,D=null,O=null,P.set(0,0,0),B=0,b=Te,I=Gt}return}xt=xt||Oe,je=je||Pe,Ct=Ct||ct,(Oe!==S||xt!==w)&&(n.blendEquationSeparate(Se[Oe],Se[xt]),S=Oe,w=xt),(Pe!==T||ct!==A||je!==D||Ct!==O)&&(n.blendFuncSeparate(He[Pe],He[ct],He[je],He[Ct]),T=Pe,A=ct,D=je,O=Ct),(zt.equals(P)===!1||Dt!==B)&&(n.blendColor(zt.r,zt.g,zt.b,Dt),P.copy(zt),B=Dt),b=Te,I=!1}function lt(Te,Oe){Te.side===mr?_e(n.CULL_FACE):ve(n.CULL_FACE);let Pe=Te.side===Fs;Oe&&(Pe=!Pe),ze(Pe),Te.blending===Iu&&Te.transparent===!1?oe(Hc):oe(Te.blending,Te.blendEquation,Te.blendSrc,Te.blendDst,Te.blendEquationAlpha,Te.blendSrcAlpha,Te.blendDstAlpha,Te.blendColor,Te.blendAlpha,Te.premultipliedAlpha),a.setFunc(Te.depthFunc),a.setTest(Te.depthTest),a.setMask(Te.depthWrite),s.setMask(Te.colorWrite);const ct=Te.stencilWrite;o.setTest(ct),ct&&(o.setMask(Te.stencilWriteMask),o.setFunc(Te.stencilFunc,Te.stencilRef,Te.stencilFuncMask),o.setOp(Te.stencilFail,Te.stencilZFail,Te.stencilZPass)),st(Te.polygonOffset,Te.polygonOffsetFactor,Te.polygonOffsetUnits),Te.alphaToCoverage===!0?ve(n.SAMPLE_ALPHA_TO_COVERAGE):_e(n.SAMPLE_ALPHA_TO_COVERAGE)}function ze(Te){z!==Te&&(Te?n.frontFace(n.CW):n.frontFace(n.CCW),z=Te)}function Qe(Te){Te!==Z5?(ve(n.CULL_FACE),Te!==k&&(Te===wT?n.cullFace(n.BACK):Te===K5?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):_e(n.CULL_FACE),k=Te}function De(Te){Te!==V&&(H&&n.lineWidth(Te),V=Te)}function st(Te,Oe,Pe){Te?(ve(n.POLYGON_OFFSET_FILL),(j!==Oe||W!==Pe)&&(n.polygonOffset(Oe,Pe),j=Oe,W=Pe)):_e(n.POLYGON_OFFSET_FILL)}function ke(Te){Te?ve(n.SCISSOR_TEST):_e(n.SCISSOR_TEST)}function $(Te){Te===void 0&&(Te=n.TEXTURE0+te-1),re!==Te&&(n.activeTexture(Te),re=Te)}function Y(Te,Oe,Pe){Pe===void 0&&(re===null?Pe=n.TEXTURE0+te-1:Pe=re);let ct=G[Pe];ct===void 0&&(ct={type:void 0,texture:void 0},G[Pe]=ct),(ct.type!==Te||ct.texture!==Oe)&&(re!==Pe&&(n.activeTexture(Pe),re=Pe),n.bindTexture(Te,Oe||pe[Te]),ct.type=Te,ct.texture=Oe)}function fe(){const Te=G[re];Te!==void 0&&Te.type!==void 0&&(n.bindTexture(Te.type,null),Te.type=void 0,Te.texture=void 0)}function Ee(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Re(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Le(){try{n.texSubImage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Fe(){try{n.texSubImage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function et(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function tt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Ot(){try{n.texStorage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function at(){try{n.texStorage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function yt(){try{n.texImage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function gt(){try{n.texImage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function ht(Te){se.equals(Te)===!1&&(n.scissor(Te.x,Te.y,Te.z,Te.w),se.copy(Te))}function nt(Te){ee.equals(Te)===!1&&(n.viewport(Te.x,Te.y,Te.z,Te.w),ee.copy(Te))}function wt(Te,Oe){let Pe=u.get(Oe);Pe===void 0&&(Pe=new WeakMap,u.set(Oe,Pe));let ct=Pe.get(Te);ct===void 0&&(ct=n.getUniformBlockIndex(Oe,Te.name),Pe.set(Te,ct))}function St(Te,Oe){const ct=u.get(Oe).get(Te);c.get(Oe)!==ct&&(n.uniformBlockBinding(Oe,ct,Te.__bindingPointIndex),c.set(Oe,ct))}function Ht(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},re=null,G={},p={},g=new WeakMap,y=[],x=null,M=!1,b=null,S=null,T=null,A=null,w=null,D=null,O=null,P=new Rt(0,0,0),B=0,I=!1,z=null,k=null,V=null,j=null,W=null,se.set(0,0,n.canvas.width,n.canvas.height),ee.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:ve,disable:_e,bindFramebuffer:Xe,drawBuffers:qe,useProgram:Be,setBlending:oe,setMaterial:lt,setFlipSided:ze,setCullFace:Qe,setLineWidth:De,setPolygonOffset:st,setScissorTest:ke,activeTexture:$,bindTexture:Y,unbindTexture:fe,compressedTexImage2D:Ee,compressedTexImage3D:Re,texImage2D:yt,texImage3D:gt,updateUBOMapping:wt,uniformBlockBinding:St,texStorage2D:Ot,texStorage3D:at,texSubImage2D:Le,texSubImage3D:Fe,compressedTexSubImage2D:et,compressedTexSubImage3D:tt,scissor:ht,viewport:nt,reset:Ht}}function cG(n,e,t,i,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new ft,h=new WeakMap;let p;const g=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x($,Y){return y?new OffscreenCanvas($,Y):iy("canvas")}function M($,Y,fe){let Ee=1;const Re=ke($);if((Re.width>fe||Re.height>fe)&&(Ee=fe/Math.max(Re.width,Re.height)),Ee<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const Le=Math.floor(Ee*Re.width),Fe=Math.floor(Ee*Re.height);p===void 0&&(p=x(Le,Fe));const et=Y?x(Le,Fe):p;return et.width=Le,et.height=Fe,et.getContext("2d").drawImage($,0,0,Le,Fe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Re.width+"x"+Re.height+") to ("+Le+"x"+Fe+")."),et}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Re.width+"x"+Re.height+")."),$;return $}function b($){return $.generateMipmaps}function S($){n.generateMipmap($)}function T($){return $.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?n.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function A($,Y,fe,Ee,Re=!1){if($!==null){if(n[$]!==void 0)return n[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Le=Y;if(Y===n.RED&&(fe===n.FLOAT&&(Le=n.R32F),fe===n.HALF_FLOAT&&(Le=n.R16F),fe===n.UNSIGNED_BYTE&&(Le=n.R8)),Y===n.RED_INTEGER&&(fe===n.UNSIGNED_BYTE&&(Le=n.R8UI),fe===n.UNSIGNED_SHORT&&(Le=n.R16UI),fe===n.UNSIGNED_INT&&(Le=n.R32UI),fe===n.BYTE&&(Le=n.R8I),fe===n.SHORT&&(Le=n.R16I),fe===n.INT&&(Le=n.R32I)),Y===n.RG&&(fe===n.FLOAT&&(Le=n.RG32F),fe===n.HALF_FLOAT&&(Le=n.RG16F),fe===n.UNSIGNED_BYTE&&(Le=n.RG8)),Y===n.RG_INTEGER&&(fe===n.UNSIGNED_BYTE&&(Le=n.RG8UI),fe===n.UNSIGNED_SHORT&&(Le=n.RG16UI),fe===n.UNSIGNED_INT&&(Le=n.RG32UI),fe===n.BYTE&&(Le=n.RG8I),fe===n.SHORT&&(Le=n.RG16I),fe===n.INT&&(Le=n.RG32I)),Y===n.RGB_INTEGER&&(fe===n.UNSIGNED_BYTE&&(Le=n.RGB8UI),fe===n.UNSIGNED_SHORT&&(Le=n.RGB16UI),fe===n.UNSIGNED_INT&&(Le=n.RGB32UI),fe===n.BYTE&&(Le=n.RGB8I),fe===n.SHORT&&(Le=n.RGB16I),fe===n.INT&&(Le=n.RGB32I)),Y===n.RGBA_INTEGER&&(fe===n.UNSIGNED_BYTE&&(Le=n.RGBA8UI),fe===n.UNSIGNED_SHORT&&(Le=n.RGBA16UI),fe===n.UNSIGNED_INT&&(Le=n.RGBA32UI),fe===n.BYTE&&(Le=n.RGBA8I),fe===n.SHORT&&(Le=n.RGBA16I),fe===n.INT&&(Le=n.RGBA32I)),Y===n.RGB&&fe===n.UNSIGNED_INT_5_9_9_9_REV&&(Le=n.RGB9_E5),Y===n.RGBA){const Fe=Re?ey:Xn.getTransfer(Ee);fe===n.FLOAT&&(Le=n.RGBA32F),fe===n.HALF_FLOAT&&(Le=n.RGBA16F),fe===n.UNSIGNED_BYTE&&(Le=Fe===Ei?n.SRGB8_ALPHA8:n.RGBA8),fe===n.UNSIGNED_SHORT_4_4_4_4&&(Le=n.RGBA4),fe===n.UNSIGNED_SHORT_5_5_5_1&&(Le=n.RGB5_A1)}return(Le===n.R16F||Le===n.R32F||Le===n.RG16F||Le===n.RG32F||Le===n.RGBA16F||Le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Le}function w($,Y){let fe;return $?Y===null||Y===jc||Y===jd?fe=n.DEPTH24_STENCIL8:Y===Yi?fe=n.DEPTH32F_STENCIL8:Y===ag&&(fe=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Y===null||Y===jc||Y===jd?fe=n.DEPTH_COMPONENT24:Y===Yi?fe=n.DEPTH_COMPONENT32F:Y===ag&&(fe=n.DEPTH_COMPONENT16),fe}function D($,Y){return b($)===!0||$.isFramebufferTexture&&$.minFilter!==qr&&$.minFilter!==Zn?Math.log2(Math.max(Y.width,Y.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?Y.mipmaps.length:1}function O($){const Y=$.target;Y.removeEventListener("dispose",O),B(Y),Y.isVideoTexture&&h.delete(Y)}function P($){const Y=$.target;Y.removeEventListener("dispose",P),z(Y)}function B($){const Y=i.get($);if(Y.__webglInit===void 0)return;const fe=$.source,Ee=g.get(fe);if(Ee){const Re=Ee[Y.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&I($),Object.keys(Ee).length===0&&g.delete(fe)}i.remove($)}function I($){const Y=i.get($);n.deleteTexture(Y.__webglTexture);const fe=$.source,Ee=g.get(fe);delete Ee[Y.__cacheKey],a.memory.textures--}function z($){const Y=i.get($);if($.depthTexture&&($.depthTexture.dispose(),i.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++){if(Array.isArray(Y.__webglFramebuffer[Ee]))for(let Re=0;Re<Y.__webglFramebuffer[Ee].length;Re++)n.deleteFramebuffer(Y.__webglFramebuffer[Ee][Re]);else n.deleteFramebuffer(Y.__webglFramebuffer[Ee]);Y.__webglDepthbuffer&&n.deleteRenderbuffer(Y.__webglDepthbuffer[Ee])}else{if(Array.isArray(Y.__webglFramebuffer))for(let Ee=0;Ee<Y.__webglFramebuffer.length;Ee++)n.deleteFramebuffer(Y.__webglFramebuffer[Ee]);else n.deleteFramebuffer(Y.__webglFramebuffer);if(Y.__webglDepthbuffer&&n.deleteRenderbuffer(Y.__webglDepthbuffer),Y.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Y.__webglMultisampledFramebuffer),Y.__webglColorRenderbuffer)for(let Ee=0;Ee<Y.__webglColorRenderbuffer.length;Ee++)Y.__webglColorRenderbuffer[Ee]&&n.deleteRenderbuffer(Y.__webglColorRenderbuffer[Ee]);Y.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Y.__webglDepthRenderbuffer)}const fe=$.textures;for(let Ee=0,Re=fe.length;Ee<Re;Ee++){const Le=i.get(fe[Ee]);Le.__webglTexture&&(n.deleteTexture(Le.__webglTexture),a.memory.textures--),i.remove(fe[Ee])}i.remove($)}let k=0;function V(){k=0}function j(){const $=k;return $>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+r.maxTextures),k+=1,$}function W($){const Y=[];return Y.push($.wrapS),Y.push($.wrapT),Y.push($.wrapR||0),Y.push($.magFilter),Y.push($.minFilter),Y.push($.anisotropy),Y.push($.internalFormat),Y.push($.format),Y.push($.type),Y.push($.generateMipmaps),Y.push($.premultiplyAlpha),Y.push($.flipY),Y.push($.unpackAlignment),Y.push($.colorSpace),Y.join()}function te($,Y){const fe=i.get($);if($.isVideoTexture&&De($),$.isRenderTargetTexture===!1&&$.version>0&&fe.__version!==$.version){const Ee=$.image;if(Ee===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ee.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ee(fe,$,Y);return}}t.bindTexture(n.TEXTURE_2D,fe.__webglTexture,n.TEXTURE0+Y)}function H($,Y){const fe=i.get($);if($.version>0&&fe.__version!==$.version){ee(fe,$,Y);return}t.bindTexture(n.TEXTURE_2D_ARRAY,fe.__webglTexture,n.TEXTURE0+Y)}function Q($,Y){const fe=i.get($);if($.version>0&&fe.__version!==$.version){ee(fe,$,Y);return}t.bindTexture(n.TEXTURE_3D,fe.__webglTexture,n.TEXTURE0+Y)}function ne($,Y){const fe=i.get($);if($.version>0&&fe.__version!==$.version){ue(fe,$,Y);return}t.bindTexture(n.TEXTURE_CUBE_MAP,fe.__webglTexture,n.TEXTURE0+Y)}const re={[rh]:n.REPEAT,[Mr]:n.CLAMP_TO_EDGE,[sg]:n.MIRRORED_REPEAT},G={[qr]:n.NEAREST,[vS]:n.NEAREST_MIPMAP_NEAREST,[wd]:n.NEAREST_MIPMAP_LINEAR,[Zn]:n.LINEAR,[Jm]:n.LINEAR_MIPMAP_NEAREST,[Go]:n.LINEAR_MIPMAP_LINEAR},X={[DU]:n.NEVER,[BU]:n.ALWAYS,[UU]:n.LESS,[uw]:n.LEQUAL,[LU]:n.EQUAL,[IU]:n.GEQUAL,[NU]:n.GREATER,[PU]:n.NOTEQUAL};function ie($,Y){if(Y.type===Yi&&e.has("OES_texture_float_linear")===!1&&(Y.magFilter===Zn||Y.magFilter===Jm||Y.magFilter===wd||Y.magFilter===Go||Y.minFilter===Zn||Y.minFilter===Jm||Y.minFilter===wd||Y.minFilter===Go)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri($,n.TEXTURE_WRAP_S,re[Y.wrapS]),n.texParameteri($,n.TEXTURE_WRAP_T,re[Y.wrapT]),($===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY)&&n.texParameteri($,n.TEXTURE_WRAP_R,re[Y.wrapR]),n.texParameteri($,n.TEXTURE_MAG_FILTER,G[Y.magFilter]),n.texParameteri($,n.TEXTURE_MIN_FILTER,G[Y.minFilter]),Y.compareFunction&&(n.texParameteri($,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri($,n.TEXTURE_COMPARE_FUNC,X[Y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Y.magFilter===qr||Y.minFilter!==wd&&Y.minFilter!==Go||Y.type===Yi&&e.has("OES_texture_float_linear")===!1)return;if(Y.anisotropy>1||i.get(Y).__currentAnisotropy){const fe=e.get("EXT_texture_filter_anisotropic");n.texParameterf($,fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,r.getMaxAnisotropy())),i.get(Y).__currentAnisotropy=Y.anisotropy}}}function se($,Y){let fe=!1;$.__webglInit===void 0&&($.__webglInit=!0,Y.addEventListener("dispose",O));const Ee=Y.source;let Re=g.get(Ee);Re===void 0&&(Re={},g.set(Ee,Re));const Le=W(Y);if(Le!==$.__cacheKey){Re[Le]===void 0&&(Re[Le]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,fe=!0),Re[Le].usedTimes++;const Fe=Re[$.__cacheKey];Fe!==void 0&&(Re[$.__cacheKey].usedTimes--,Fe.usedTimes===0&&I(Y)),$.__cacheKey=Le,$.__webglTexture=Re[Le].texture}return fe}function ee($,Y,fe){let Ee=n.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(Ee=n.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(Ee=n.TEXTURE_3D);const Re=se($,Y),Le=Y.source;t.bindTexture(Ee,$.__webglTexture,n.TEXTURE0+fe);const Fe=i.get(Le);if(Le.version!==Fe.__version||Re===!0){t.activeTexture(n.TEXTURE0+fe);const et=Xn.getPrimaries(Xn.workingColorSpace),tt=Y.colorSpace===Du?null:Xn.getPrimaries(Y.colorSpace),Ot=Y.colorSpace===Du||et===tt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ot);let at=M(Y.image,!1,r.maxTextureSize);at=st(Y,at);const yt=s.convert(Y.format,Y.colorSpace),gt=s.convert(Y.type);let ht=A(Y.internalFormat,yt,gt,Y.colorSpace,Y.isVideoTexture);ie(Ee,Y);let nt;const wt=Y.mipmaps,St=Y.isVideoTexture!==!0,Ht=Fe.__version===void 0||Re===!0,Te=Le.dataReady,Oe=D(Y,at);if(Y.isDepthTexture)ht=w(Y.format===Wd,Y.type),Ht&&(St?t.texStorage2D(n.TEXTURE_2D,1,ht,at.width,at.height):t.texImage2D(n.TEXTURE_2D,0,ht,at.width,at.height,0,yt,gt,null));else if(Y.isDataTexture)if(wt.length>0){St&&Ht&&t.texStorage2D(n.TEXTURE_2D,Oe,ht,wt[0].width,wt[0].height);for(let Pe=0,ct=wt.length;Pe<ct;Pe++)nt=wt[Pe],St?Te&&t.texSubImage2D(n.TEXTURE_2D,Pe,0,0,nt.width,nt.height,yt,gt,nt.data):t.texImage2D(n.TEXTURE_2D,Pe,ht,nt.width,nt.height,0,yt,gt,nt.data);Y.generateMipmaps=!1}else St?(Ht&&t.texStorage2D(n.TEXTURE_2D,Oe,ht,at.width,at.height),Te&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,at.width,at.height,yt,gt,at.data)):t.texImage2D(n.TEXTURE_2D,0,ht,at.width,at.height,0,yt,gt,at.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){St&&Ht&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Oe,ht,wt[0].width,wt[0].height,at.depth);for(let Pe=0,ct=wt.length;Pe<ct;Pe++)if(nt=wt[Pe],Y.format!==Tr)if(yt!==null)if(St){if(Te)if(Y.layerUpdates.size>0){const xt=HT(nt.width,nt.height,Y.format,Y.type);for(const je of Y.layerUpdates){const Ct=nt.data.subarray(je*xt/nt.data.BYTES_PER_ELEMENT,(je+1)*xt/nt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Pe,0,0,je,nt.width,nt.height,1,yt,Ct)}Y.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Pe,0,0,0,nt.width,nt.height,at.depth,yt,nt.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Pe,ht,nt.width,nt.height,at.depth,0,nt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else St?Te&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Pe,0,0,0,nt.width,nt.height,at.depth,yt,gt,nt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Pe,ht,nt.width,nt.height,at.depth,0,yt,gt,nt.data)}else{St&&Ht&&t.texStorage2D(n.TEXTURE_2D,Oe,ht,wt[0].width,wt[0].height);for(let Pe=0,ct=wt.length;Pe<ct;Pe++)nt=wt[Pe],Y.format!==Tr?yt!==null?St?Te&&t.compressedTexSubImage2D(n.TEXTURE_2D,Pe,0,0,nt.width,nt.height,yt,nt.data):t.compressedTexImage2D(n.TEXTURE_2D,Pe,ht,nt.width,nt.height,0,nt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):St?Te&&t.texSubImage2D(n.TEXTURE_2D,Pe,0,0,nt.width,nt.height,yt,gt,nt.data):t.texImage2D(n.TEXTURE_2D,Pe,ht,nt.width,nt.height,0,yt,gt,nt.data)}else if(Y.isDataArrayTexture)if(St){if(Ht&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Oe,ht,at.width,at.height,at.depth),Te)if(Y.layerUpdates.size>0){const Pe=HT(at.width,at.height,Y.format,Y.type);for(const ct of Y.layerUpdates){const xt=at.data.subarray(ct*Pe/at.data.BYTES_PER_ELEMENT,(ct+1)*Pe/at.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ct,at.width,at.height,1,yt,gt,xt)}Y.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,at.width,at.height,at.depth,yt,gt,at.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ht,at.width,at.height,at.depth,0,yt,gt,at.data);else if(Y.isData3DTexture)St?(Ht&&t.texStorage3D(n.TEXTURE_3D,Oe,ht,at.width,at.height,at.depth),Te&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,at.width,at.height,at.depth,yt,gt,at.data)):t.texImage3D(n.TEXTURE_3D,0,ht,at.width,at.height,at.depth,0,yt,gt,at.data);else if(Y.isFramebufferTexture){if(Ht)if(St)t.texStorage2D(n.TEXTURE_2D,Oe,ht,at.width,at.height);else{let Pe=at.width,ct=at.height;for(let xt=0;xt<Oe;xt++)t.texImage2D(n.TEXTURE_2D,xt,ht,Pe,ct,0,yt,gt,null),Pe>>=1,ct>>=1}}else if(wt.length>0){if(St&&Ht){const Pe=ke(wt[0]);t.texStorage2D(n.TEXTURE_2D,Oe,ht,Pe.width,Pe.height)}for(let Pe=0,ct=wt.length;Pe<ct;Pe++)nt=wt[Pe],St?Te&&t.texSubImage2D(n.TEXTURE_2D,Pe,0,0,yt,gt,nt):t.texImage2D(n.TEXTURE_2D,Pe,ht,yt,gt,nt);Y.generateMipmaps=!1}else if(St){if(Ht){const Pe=ke(at);t.texStorage2D(n.TEXTURE_2D,Oe,ht,Pe.width,Pe.height)}Te&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,yt,gt,at)}else t.texImage2D(n.TEXTURE_2D,0,ht,yt,gt,at);b(Y)&&S(Ee),Fe.__version=Le.version,Y.onUpdate&&Y.onUpdate(Y)}$.__version=Y.version}function ue($,Y,fe){if(Y.image.length!==6)return;const Ee=se($,Y),Re=Y.source;t.bindTexture(n.TEXTURE_CUBE_MAP,$.__webglTexture,n.TEXTURE0+fe);const Le=i.get(Re);if(Re.version!==Le.__version||Ee===!0){t.activeTexture(n.TEXTURE0+fe);const Fe=Xn.getPrimaries(Xn.workingColorSpace),et=Y.colorSpace===Du?null:Xn.getPrimaries(Y.colorSpace),tt=Y.colorSpace===Du||Fe===et?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,tt);const Ot=Y.isCompressedTexture||Y.image[0].isCompressedTexture,at=Y.image[0]&&Y.image[0].isDataTexture,yt=[];for(let ct=0;ct<6;ct++)!Ot&&!at?yt[ct]=M(Y.image[ct],!0,r.maxCubemapSize):yt[ct]=at?Y.image[ct].image:Y.image[ct],yt[ct]=st(Y,yt[ct]);const gt=yt[0],ht=s.convert(Y.format,Y.colorSpace),nt=s.convert(Y.type),wt=A(Y.internalFormat,ht,nt,Y.colorSpace),St=Y.isVideoTexture!==!0,Ht=Le.__version===void 0||Ee===!0,Te=Re.dataReady;let Oe=D(Y,gt);ie(n.TEXTURE_CUBE_MAP,Y);let Pe;if(Ot){St&&Ht&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Oe,wt,gt.width,gt.height);for(let ct=0;ct<6;ct++){Pe=yt[ct].mipmaps;for(let xt=0;xt<Pe.length;xt++){const je=Pe[xt];Y.format!==Tr?ht!==null?St?Te&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,xt,0,0,je.width,je.height,ht,je.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,xt,wt,je.width,je.height,0,je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):St?Te&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,xt,0,0,je.width,je.height,ht,nt,je.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,xt,wt,je.width,je.height,0,ht,nt,je.data)}}}else{if(Pe=Y.mipmaps,St&&Ht){Pe.length>0&&Oe++;const ct=ke(yt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Oe,wt,ct.width,ct.height)}for(let ct=0;ct<6;ct++)if(at){St?Te&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,0,0,yt[ct].width,yt[ct].height,ht,nt,yt[ct].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,wt,yt[ct].width,yt[ct].height,0,ht,nt,yt[ct].data);for(let xt=0;xt<Pe.length;xt++){const Ct=Pe[xt].image[ct].image;St?Te&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,xt+1,0,0,Ct.width,Ct.height,ht,nt,Ct.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,xt+1,wt,Ct.width,Ct.height,0,ht,nt,Ct.data)}}else{St?Te&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,0,0,ht,nt,yt[ct]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,wt,ht,nt,yt[ct]);for(let xt=0;xt<Pe.length;xt++){const je=Pe[xt];St?Te&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,xt+1,0,0,ht,nt,je.image[ct]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,xt+1,wt,ht,nt,je.image[ct])}}}b(Y)&&S(n.TEXTURE_CUBE_MAP),Le.__version=Re.version,Y.onUpdate&&Y.onUpdate(Y)}$.__version=Y.version}function pe($,Y,fe,Ee,Re,Le){const Fe=s.convert(fe.format,fe.colorSpace),et=s.convert(fe.type),tt=A(fe.internalFormat,Fe,et,fe.colorSpace),Ot=i.get(Y),at=i.get(fe);if(at.__renderTarget=Y,!Ot.__hasExternalTextures){const yt=Math.max(1,Y.width>>Le),gt=Math.max(1,Y.height>>Le);Re===n.TEXTURE_3D||Re===n.TEXTURE_2D_ARRAY?t.texImage3D(Re,Le,tt,yt,gt,Y.depth,0,Fe,et,null):t.texImage2D(Re,Le,tt,yt,gt,0,Fe,et,null)}t.bindFramebuffer(n.FRAMEBUFFER,$),Qe(Y)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ee,Re,at.__webglTexture,0,ze(Y)):(Re===n.TEXTURE_2D||Re>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Re<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ee,Re,at.__webglTexture,Le),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ve($,Y,fe){if(n.bindRenderbuffer(n.RENDERBUFFER,$),Y.depthBuffer){const Ee=Y.depthTexture,Re=Ee&&Ee.isDepthTexture?Ee.type:null,Le=w(Y.stencilBuffer,Re),Fe=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=ze(Y);Qe(Y)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,et,Le,Y.width,Y.height):fe?n.renderbufferStorageMultisample(n.RENDERBUFFER,et,Le,Y.width,Y.height):n.renderbufferStorage(n.RENDERBUFFER,Le,Y.width,Y.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Fe,n.RENDERBUFFER,$)}else{const Ee=Y.textures;for(let Re=0;Re<Ee.length;Re++){const Le=Ee[Re],Fe=s.convert(Le.format,Le.colorSpace),et=s.convert(Le.type),tt=A(Le.internalFormat,Fe,et,Le.colorSpace),Ot=ze(Y);fe&&Qe(Y)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ot,tt,Y.width,Y.height):Qe(Y)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ot,tt,Y.width,Y.height):n.renderbufferStorage(n.RENDERBUFFER,tt,Y.width,Y.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function _e($,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,$),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ee=i.get(Y.depthTexture);Ee.__renderTarget=Y,(!Ee.__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),te(Y.depthTexture,0);const Re=Ee.__webglTexture,Le=ze(Y);if(Y.depthTexture.format===Id)Qe(Y)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0,Le):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0);else if(Y.depthTexture.format===Wd)Qe(Y)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0,Le):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0);else throw new Error("Unknown depthTexture format")}function Xe($){const Y=i.get($),fe=$.isWebGLCubeRenderTarget===!0;if(Y.__boundDepthTexture!==$.depthTexture){const Ee=$.depthTexture;if(Y.__depthDisposeCallback&&Y.__depthDisposeCallback(),Ee){const Re=()=>{delete Y.__boundDepthTexture,delete Y.__depthDisposeCallback,Ee.removeEventListener("dispose",Re)};Ee.addEventListener("dispose",Re),Y.__depthDisposeCallback=Re}Y.__boundDepthTexture=Ee}if($.depthTexture&&!Y.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");_e(Y.__webglFramebuffer,$)}else if(fe){Y.__webglDepthbuffer=[];for(let Ee=0;Ee<6;Ee++)if(t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer[Ee]),Y.__webglDepthbuffer[Ee]===void 0)Y.__webglDepthbuffer[Ee]=n.createRenderbuffer(),ve(Y.__webglDepthbuffer[Ee],$,!1);else{const Re=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=Y.__webglDepthbuffer[Ee];n.bindRenderbuffer(n.RENDERBUFFER,Le),n.framebufferRenderbuffer(n.FRAMEBUFFER,Re,n.RENDERBUFFER,Le)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer===void 0)Y.__webglDepthbuffer=n.createRenderbuffer(),ve(Y.__webglDepthbuffer,$,!1);else{const Ee=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=Y.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Re),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ee,n.RENDERBUFFER,Re)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function qe($,Y,fe){const Ee=i.get($);Y!==void 0&&pe(Ee.__webglFramebuffer,$,$.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),fe!==void 0&&Xe($)}function Be($){const Y=$.texture,fe=i.get($),Ee=i.get(Y);$.addEventListener("dispose",P);const Re=$.textures,Le=$.isWebGLCubeRenderTarget===!0,Fe=Re.length>1;if(Fe||(Ee.__webglTexture===void 0&&(Ee.__webglTexture=n.createTexture()),Ee.__version=Y.version,a.memory.textures++),Le){fe.__webglFramebuffer=[];for(let et=0;et<6;et++)if(Y.mipmaps&&Y.mipmaps.length>0){fe.__webglFramebuffer[et]=[];for(let tt=0;tt<Y.mipmaps.length;tt++)fe.__webglFramebuffer[et][tt]=n.createFramebuffer()}else fe.__webglFramebuffer[et]=n.createFramebuffer()}else{if(Y.mipmaps&&Y.mipmaps.length>0){fe.__webglFramebuffer=[];for(let et=0;et<Y.mipmaps.length;et++)fe.__webglFramebuffer[et]=n.createFramebuffer()}else fe.__webglFramebuffer=n.createFramebuffer();if(Fe)for(let et=0,tt=Re.length;et<tt;et++){const Ot=i.get(Re[et]);Ot.__webglTexture===void 0&&(Ot.__webglTexture=n.createTexture(),a.memory.textures++)}if($.samples>0&&Qe($)===!1){fe.__webglMultisampledFramebuffer=n.createFramebuffer(),fe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,fe.__webglMultisampledFramebuffer);for(let et=0;et<Re.length;et++){const tt=Re[et];fe.__webglColorRenderbuffer[et]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,fe.__webglColorRenderbuffer[et]);const Ot=s.convert(tt.format,tt.colorSpace),at=s.convert(tt.type),yt=A(tt.internalFormat,Ot,at,tt.colorSpace,$.isXRRenderTarget===!0),gt=ze($);n.renderbufferStorageMultisample(n.RENDERBUFFER,gt,yt,$.width,$.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.RENDERBUFFER,fe.__webglColorRenderbuffer[et])}n.bindRenderbuffer(n.RENDERBUFFER,null),$.depthBuffer&&(fe.__webglDepthRenderbuffer=n.createRenderbuffer(),ve(fe.__webglDepthRenderbuffer,$,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Le){t.bindTexture(n.TEXTURE_CUBE_MAP,Ee.__webglTexture),ie(n.TEXTURE_CUBE_MAP,Y);for(let et=0;et<6;et++)if(Y.mipmaps&&Y.mipmaps.length>0)for(let tt=0;tt<Y.mipmaps.length;tt++)pe(fe.__webglFramebuffer[et][tt],$,Y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+et,tt);else pe(fe.__webglFramebuffer[et],$,Y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0);b(Y)&&S(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Fe){for(let et=0,tt=Re.length;et<tt;et++){const Ot=Re[et],at=i.get(Ot);t.bindTexture(n.TEXTURE_2D,at.__webglTexture),ie(n.TEXTURE_2D,Ot),pe(fe.__webglFramebuffer,$,Ot,n.COLOR_ATTACHMENT0+et,n.TEXTURE_2D,0),b(Ot)&&S(n.TEXTURE_2D)}t.unbindTexture()}else{let et=n.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(et=$.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(et,Ee.__webglTexture),ie(et,Y),Y.mipmaps&&Y.mipmaps.length>0)for(let tt=0;tt<Y.mipmaps.length;tt++)pe(fe.__webglFramebuffer[tt],$,Y,n.COLOR_ATTACHMENT0,et,tt);else pe(fe.__webglFramebuffer,$,Y,n.COLOR_ATTACHMENT0,et,0);b(Y)&&S(et),t.unbindTexture()}$.depthBuffer&&Xe($)}function Se($){const Y=$.textures;for(let fe=0,Ee=Y.length;fe<Ee;fe++){const Re=Y[fe];if(b(Re)){const Le=T($),Fe=i.get(Re).__webglTexture;t.bindTexture(Le,Fe),S(Le),t.unbindTexture()}}}const He=[],oe=[];function lt($){if($.samples>0){if(Qe($)===!1){const Y=$.textures,fe=$.width,Ee=$.height;let Re=n.COLOR_BUFFER_BIT;const Le=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Fe=i.get($),et=Y.length>1;if(et)for(let tt=0;tt<Y.length;tt++)t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+tt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+tt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Fe.__webglFramebuffer);for(let tt=0;tt<Y.length;tt++){if($.resolveDepthBuffer&&($.depthBuffer&&(Re|=n.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(Re|=n.STENCIL_BUFFER_BIT)),et){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[tt]);const Ot=i.get(Y[tt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ot,0)}n.blitFramebuffer(0,0,fe,Ee,0,0,fe,Ee,Re,n.NEAREST),c===!0&&(He.length=0,oe.length=0,He.push(n.COLOR_ATTACHMENT0+tt),$.depthBuffer&&$.resolveDepthBuffer===!1&&(He.push(Le),oe.push(Le),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,oe)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,He))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),et)for(let tt=0;tt<Y.length;tt++){t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+tt,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[tt]);const Ot=i.get(Y[tt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+tt,n.TEXTURE_2D,Ot,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&c){const Y=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Y])}}}function ze($){return Math.min(r.maxSamples,$.samples)}function Qe($){const Y=i.get($);return $.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function De($){const Y=a.render.frame;h.get($)!==Y&&(h.set($,Y),$.update())}function st($,Y){const fe=$.colorSpace,Ee=$.format,Re=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||fe!==Ir&&fe!==Du&&(Xn.getTransfer(fe)===Ei?(Ee!==Tr||Re!==ja)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",fe)),Y}function ke($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(u.width=$.naturalWidth||$.width,u.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(u.width=$.displayWidth,u.height=$.displayHeight):(u.width=$.width,u.height=$.height),u}this.allocateTextureUnit=j,this.resetTextureUnits=V,this.setTexture2D=te,this.setTexture2DArray=H,this.setTexture3D=Q,this.setTextureCube=ne,this.rebindTextures=qe,this.setupRenderTarget=Be,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=lt,this.setupDepthRenderbuffer=Xe,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=Qe}function FL(n,e){function t(i,r=Du){let s;const a=Xn.getTransfer(r);if(i===ja)return n.UNSIGNED_BYTE;if(i===xS)return n.UNSIGNED_SHORT_4_4_4_4;if(i===bS)return n.UNSIGNED_SHORT_5_5_5_1;if(i===ew)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===yS)return n.BYTE;if(i===_S)return n.SHORT;if(i===ag)return n.UNSIGNED_SHORT;if(i===xy)return n.INT;if(i===jc)return n.UNSIGNED_INT;if(i===Yi)return n.FLOAT;if(i===Xr)return n.HALF_FLOAT;if(i===tw)return n.ALPHA;if(i===nw)return n.RGB;if(i===Tr)return n.RGBA;if(i===iw)return n.LUMINANCE;if(i===rw)return n.LUMINANCE_ALPHA;if(i===Id)return n.DEPTH_COMPONENT;if(i===Wd)return n.DEPTH_STENCIL;if(i===by)return n.RED;if(i===Sy)return n.RED_INTEGER;if(i===sw)return n.RG;if(i===SS)return n.RG_INTEGER;if(i===ES)return n.RGBA_INTEGER;if(i===Nv||i===Pv||i===Iv||i===Bv)if(a===Ei)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Nv)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Pv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Iv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Bv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Nv)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Pv)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Iv)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Bv)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===lb||i===cb||i===ub||i===fb)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===lb)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===cb)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===ub)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===fb)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===hb||i===db||i===pb)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===hb||i===db)return a===Ei?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===pb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===mb||i===gb||i===vb||i===yb||i===_b||i===xb||i===bb||i===Sb||i===Eb||i===Mb||i===Tb||i===Ab||i===wb||i===Cb)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===mb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===gb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===vb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===yb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===_b)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===xb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===bb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Sb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Eb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Mb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Tb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Ab)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===wb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Cb)return a===Ei?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===zv||i===Rb||i===Ob)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===zv)return a===Ei?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Rb)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Ob)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===aw||i===Db||i===Ub||i===Lb)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===zv)return s.COMPRESSED_RED_RGTC1_EXT;if(i===Db)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Ub)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Lb)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===jd?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const uG={type:"move"};class Z2{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Nu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Nu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Nu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,c=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const M of e.hand.values()){const b=t.getJointPose(M,i),S=this._getHandJoint(u,M);b!==null&&(S.matrix.fromArray(b.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=b.radius),S.visible=b!==null}const h=u.joints["index-finger-tip"],p=u.joints["thumb-tip"],g=h.position.distanceTo(p.position),y=.02,x=.005;u.inputState.pinching&&g>y+x?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=y-x&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(uG)))}return o!==null&&(o.visible=r!==null),c!==null&&(c.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Nu;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const fG=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,hG=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class dG{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new mi,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new ks({vertexShader:fG,fragmentShader:hG,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new fi(new Xl(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class pG extends qc{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",c=1,u=null,h=null,p=null,g=null,y=null,x=null;const M=new dG,b=t.getContextAttributes();let S=null,T=null;const A=[],w=[],D=new ft;let O=null;const P=new Er;P.viewport=new Ln;const B=new Er;B.viewport=new Ln;const I=[P,B],z=new CL;let k=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let ue=A[ee];return ue===void 0&&(ue=new Z2,A[ee]=ue),ue.getTargetRaySpace()},this.getControllerGrip=function(ee){let ue=A[ee];return ue===void 0&&(ue=new Z2,A[ee]=ue),ue.getGripSpace()},this.getHand=function(ee){let ue=A[ee];return ue===void 0&&(ue=new Z2,A[ee]=ue),ue.getHandSpace()};function j(ee){const ue=w.indexOf(ee.inputSource);if(ue===-1)return;const pe=A[ue];pe!==void 0&&(pe.update(ee.inputSource,ee.frame,u||a),pe.dispatchEvent({type:ee.type,data:ee.inputSource}))}function W(){r.removeEventListener("select",j),r.removeEventListener("selectstart",j),r.removeEventListener("selectend",j),r.removeEventListener("squeeze",j),r.removeEventListener("squeezestart",j),r.removeEventListener("squeezeend",j),r.removeEventListener("end",W),r.removeEventListener("inputsourceschange",te);for(let ee=0;ee<A.length;ee++){const ue=w[ee];ue!==null&&(w[ee]=null,A[ee].disconnect(ue))}k=null,V=null,M.reset(),e.setRenderTarget(S),y=null,g=null,p=null,r=null,T=null,se.stop(),i.isPresenting=!1,e.setPixelRatio(O),e.setSize(D.width,D.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){s=ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){o=ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(ee){u=ee},this.getBaseLayer=function(){return g!==null?g:y},this.getBinding=function(){return p},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=async function(ee){if(r=ee,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",j),r.addEventListener("selectstart",j),r.addEventListener("selectend",j),r.addEventListener("squeeze",j),r.addEventListener("squeezestart",j),r.addEventListener("squeezeend",j),r.addEventListener("end",W),r.addEventListener("inputsourceschange",te),b.xrCompatible!==!0&&await t.makeXRCompatible(),O=e.getPixelRatio(),e.getSize(D),r.renderState.layers===void 0){const ue={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(r,t,ue),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),T=new Wa(y.framebufferWidth,y.framebufferHeight,{format:Tr,type:ja,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil})}else{let ue=null,pe=null,ve=null;b.depth&&(ve=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ue=b.stencil?Wd:Id,pe=b.stencil?jd:jc);const _e={colorFormat:t.RGBA8,depthFormat:ve,scaleFactor:s};p=new XRWebGLBinding(r,t),g=p.createProjectionLayer(_e),r.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),T=new Wa(g.textureWidth,g.textureHeight,{format:Tr,type:ja,depthTexture:new LS(g.textureWidth,g.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,ue),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(c),u=null,a=await r.requestReferenceSpace(o),se.setContext(r),se.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};function te(ee){for(let ue=0;ue<ee.removed.length;ue++){const pe=ee.removed[ue],ve=w.indexOf(pe);ve>=0&&(w[ve]=null,A[ve].disconnect(pe))}for(let ue=0;ue<ee.added.length;ue++){const pe=ee.added[ue];let ve=w.indexOf(pe);if(ve===-1){for(let Xe=0;Xe<A.length;Xe++)if(Xe>=w.length){w.push(pe),ve=Xe;break}else if(w[Xe]===null){w[Xe]=pe,ve=Xe;break}if(ve===-1)break}const _e=A[ve];_e&&_e.connect(pe)}}const H=new J,Q=new J;function ne(ee,ue,pe){H.setFromMatrixPosition(ue.matrixWorld),Q.setFromMatrixPosition(pe.matrixWorld);const ve=H.distanceTo(Q),_e=ue.projectionMatrix.elements,Xe=pe.projectionMatrix.elements,qe=_e[14]/(_e[10]-1),Be=_e[14]/(_e[10]+1),Se=(_e[9]+1)/_e[5],He=(_e[9]-1)/_e[5],oe=(_e[8]-1)/_e[0],lt=(Xe[8]+1)/Xe[0],ze=qe*oe,Qe=qe*lt,De=ve/(-oe+lt),st=De*-oe;if(ue.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(st),ee.translateZ(De),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert(),_e[10]===-1)ee.projectionMatrix.copy(ue.projectionMatrix),ee.projectionMatrixInverse.copy(ue.projectionMatrixInverse);else{const ke=qe+De,$=Be+De,Y=ze-st,fe=Qe+(ve-st),Ee=Se*Be/$*ke,Re=He*Be/$*ke;ee.projectionMatrix.makePerspective(Y,fe,Ee,Re,ke,$),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}}function re(ee,ue){ue===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(ue.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(r===null)return;let ue=ee.near,pe=ee.far;M.texture!==null&&(M.depthNear>0&&(ue=M.depthNear),M.depthFar>0&&(pe=M.depthFar)),z.near=B.near=P.near=ue,z.far=B.far=P.far=pe,(k!==z.near||V!==z.far)&&(r.updateRenderState({depthNear:z.near,depthFar:z.far}),k=z.near,V=z.far),P.layers.mask=ee.layers.mask|2,B.layers.mask=ee.layers.mask|4,z.layers.mask=P.layers.mask|B.layers.mask;const ve=ee.parent,_e=z.cameras;re(z,ve);for(let Xe=0;Xe<_e.length;Xe++)re(_e[Xe],ve);_e.length===2?ne(z,P,B):z.projectionMatrix.copy(P.projectionMatrix),G(ee,z,ve)};function G(ee,ue,pe){pe===null?ee.matrix.copy(ue.matrixWorld):(ee.matrix.copy(pe.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(ue.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0),ee.projectionMatrix.copy(ue.projectionMatrix),ee.projectionMatrixInverse.copy(ue.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=cg*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return z},this.getFoveation=function(){if(!(g===null&&y===null))return c},this.setFoveation=function(ee){c=ee,g!==null&&(g.fixedFoveation=ee),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=ee)},this.hasDepthSensing=function(){return M.texture!==null},this.getDepthSensingMesh=function(){return M.getMesh(z)};let X=null;function ie(ee,ue){if(h=ue.getViewerPose(u||a),x=ue,h!==null){const pe=h.views;y!==null&&(e.setRenderTargetFramebuffer(T,y.framebuffer),e.setRenderTarget(T));let ve=!1;pe.length!==z.cameras.length&&(z.cameras.length=0,ve=!0);for(let Xe=0;Xe<pe.length;Xe++){const qe=pe[Xe];let Be=null;if(y!==null)Be=y.getViewport(qe);else{const He=p.getViewSubImage(g,qe);Be=He.viewport,Xe===0&&(e.setRenderTargetTextures(T,He.colorTexture,g.ignoreDepthValues?void 0:He.depthStencilTexture),e.setRenderTarget(T))}let Se=I[Xe];Se===void 0&&(Se=new Er,Se.layers.enable(Xe),Se.viewport=new Ln,I[Xe]=Se),Se.matrix.fromArray(qe.transform.matrix),Se.matrix.decompose(Se.position,Se.quaternion,Se.scale),Se.projectionMatrix.fromArray(qe.projectionMatrix),Se.projectionMatrixInverse.copy(Se.projectionMatrix).invert(),Se.viewport.set(Be.x,Be.y,Be.width,Be.height),Xe===0&&(z.matrix.copy(Se.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale)),ve===!0&&z.cameras.push(Se)}const _e=r.enabledFeatures;if(_e&&_e.includes("depth-sensing")){const Xe=p.getDepthInformation(pe[0]);Xe&&Xe.isValid&&Xe.texture&&M.init(e,Xe,r.renderState)}}for(let pe=0;pe<A.length;pe++){const ve=w[pe],_e=A[pe];ve!==null&&_e!==void 0&&_e.update(ve,ue,u||a)}X&&X(ee,ue),ue.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ue}),x=null}const se=new NL;se.setAnimationLoop(ie),this.setAnimationLoop=function(ee){X=ee},this.dispose=function(){}}}const md=new po,mG=new Ut;function gG(n,e){function t(b,S){b.matrixAutoUpdate===!0&&b.updateMatrix(),S.value.copy(b.matrix)}function i(b,S){S.color.getRGB(b.fogColor.value,VU(n)),S.isFog?(b.fogNear.value=S.near,b.fogFar.value=S.far):S.isFogExp2&&(b.fogDensity.value=S.density)}function r(b,S,T,A,w){S.isMeshBasicMaterial||S.isMeshLambertMaterial?s(b,S):S.isMeshToonMaterial?(s(b,S),p(b,S)):S.isMeshPhongMaterial?(s(b,S),h(b,S)):S.isMeshStandardMaterial?(s(b,S),g(b,S),S.isMeshPhysicalMaterial&&y(b,S,w)):S.isMeshMatcapMaterial?(s(b,S),x(b,S)):S.isMeshDepthMaterial?s(b,S):S.isMeshDistanceMaterial?(s(b,S),M(b,S)):S.isMeshNormalMaterial?s(b,S):S.isLineBasicMaterial?(a(b,S),S.isLineDashedMaterial&&o(b,S)):S.isPointsMaterial?c(b,S,T,A):S.isSpriteMaterial?u(b,S):S.isShadowMaterial?(b.color.value.copy(S.color),b.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function s(b,S){b.opacity.value=S.opacity,S.color&&b.diffuse.value.copy(S.color),S.emissive&&b.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(b.map.value=S.map,t(S.map,b.mapTransform)),S.alphaMap&&(b.alphaMap.value=S.alphaMap,t(S.alphaMap,b.alphaMapTransform)),S.bumpMap&&(b.bumpMap.value=S.bumpMap,t(S.bumpMap,b.bumpMapTransform),b.bumpScale.value=S.bumpScale,S.side===Fs&&(b.bumpScale.value*=-1)),S.normalMap&&(b.normalMap.value=S.normalMap,t(S.normalMap,b.normalMapTransform),b.normalScale.value.copy(S.normalScale),S.side===Fs&&b.normalScale.value.negate()),S.displacementMap&&(b.displacementMap.value=S.displacementMap,t(S.displacementMap,b.displacementMapTransform),b.displacementScale.value=S.displacementScale,b.displacementBias.value=S.displacementBias),S.emissiveMap&&(b.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,b.emissiveMapTransform)),S.specularMap&&(b.specularMap.value=S.specularMap,t(S.specularMap,b.specularMapTransform)),S.alphaTest>0&&(b.alphaTest.value=S.alphaTest);const T=e.get(S),A=T.envMap,w=T.envMapRotation;A&&(b.envMap.value=A,md.copy(w),md.x*=-1,md.y*=-1,md.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(md.y*=-1,md.z*=-1),b.envMapRotation.value.setFromMatrix4(mG.makeRotationFromEuler(md)),b.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=S.reflectivity,b.ior.value=S.ior,b.refractionRatio.value=S.refractionRatio),S.lightMap&&(b.lightMap.value=S.lightMap,b.lightMapIntensity.value=S.lightMapIntensity,t(S.lightMap,b.lightMapTransform)),S.aoMap&&(b.aoMap.value=S.aoMap,b.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,b.aoMapTransform))}function a(b,S){b.diffuse.value.copy(S.color),b.opacity.value=S.opacity,S.map&&(b.map.value=S.map,t(S.map,b.mapTransform))}function o(b,S){b.dashSize.value=S.dashSize,b.totalSize.value=S.dashSize+S.gapSize,b.scale.value=S.scale}function c(b,S,T,A){b.diffuse.value.copy(S.color),b.opacity.value=S.opacity,b.size.value=S.size*T,b.scale.value=A*.5,S.map&&(b.map.value=S.map,t(S.map,b.uvTransform)),S.alphaMap&&(b.alphaMap.value=S.alphaMap,t(S.alphaMap,b.alphaMapTransform)),S.alphaTest>0&&(b.alphaTest.value=S.alphaTest)}function u(b,S){b.diffuse.value.copy(S.color),b.opacity.value=S.opacity,b.rotation.value=S.rotation,S.map&&(b.map.value=S.map,t(S.map,b.mapTransform)),S.alphaMap&&(b.alphaMap.value=S.alphaMap,t(S.alphaMap,b.alphaMapTransform)),S.alphaTest>0&&(b.alphaTest.value=S.alphaTest)}function h(b,S){b.specular.value.copy(S.specular),b.shininess.value=Math.max(S.shininess,1e-4)}function p(b,S){S.gradientMap&&(b.gradientMap.value=S.gradientMap)}function g(b,S){b.metalness.value=S.metalness,S.metalnessMap&&(b.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,b.metalnessMapTransform)),b.roughness.value=S.roughness,S.roughnessMap&&(b.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,b.roughnessMapTransform)),S.envMap&&(b.envMapIntensity.value=S.envMapIntensity)}function y(b,S,T){b.ior.value=S.ior,S.sheen>0&&(b.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),b.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(b.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,b.sheenColorMapTransform)),S.sheenRoughnessMap&&(b.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,b.sheenRoughnessMapTransform))),S.clearcoat>0&&(b.clearcoat.value=S.clearcoat,b.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(b.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,b.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(b.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===Fs&&b.clearcoatNormalScale.value.negate())),S.dispersion>0&&(b.dispersion.value=S.dispersion),S.iridescence>0&&(b.iridescence.value=S.iridescence,b.iridescenceIOR.value=S.iridescenceIOR,b.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(b.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,b.iridescenceMapTransform)),S.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),S.transmission>0&&(b.transmission.value=S.transmission,b.transmissionSamplerMap.value=T.texture,b.transmissionSamplerSize.value.set(T.width,T.height),S.transmissionMap&&(b.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,b.transmissionMapTransform)),b.thickness.value=S.thickness,S.thicknessMap&&(b.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=S.attenuationDistance,b.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(b.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(b.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=S.specularIntensity,b.specularColor.value.copy(S.specularColor),S.specularColorMap&&(b.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,b.specularColorMapTransform)),S.specularIntensityMap&&(b.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,b.specularIntensityMapTransform))}function x(b,S){S.matcap&&(b.matcap.value=S.matcap)}function M(b,S){const T=e.get(S).light;b.referencePosition.value.setFromMatrixPosition(T.matrixWorld),b.nearDistance.value=T.shadow.camera.near,b.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function vG(n,e,t,i){let r={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(T,A){const w=A.program;i.uniformBlockBinding(T,w)}function u(T,A){let w=r[T.id];w===void 0&&(x(T),w=h(T),r[T.id]=w,T.addEventListener("dispose",b));const D=A.program;i.updateUBOMapping(T,D);const O=e.render.frame;s[T.id]!==O&&(g(T),s[T.id]=O)}function h(T){const A=p();T.__bindingPointIndex=A;const w=n.createBuffer(),D=T.__size,O=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,D,O),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,A,w),w}function p(){for(let T=0;T<o;T++)if(a.indexOf(T)===-1)return a.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(T){const A=r[T.id],w=T.uniforms,D=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,A);for(let O=0,P=w.length;O<P;O++){const B=Array.isArray(w[O])?w[O]:[w[O]];for(let I=0,z=B.length;I<z;I++){const k=B[I];if(y(k,O,I,D)===!0){const V=k.__offset,j=Array.isArray(k.value)?k.value:[k.value];let W=0;for(let te=0;te<j.length;te++){const H=j[te],Q=M(H);typeof H=="number"||typeof H=="boolean"?(k.__data[0]=H,n.bufferSubData(n.UNIFORM_BUFFER,V+W,k.__data)):H.isMatrix3?(k.__data[0]=H.elements[0],k.__data[1]=H.elements[1],k.__data[2]=H.elements[2],k.__data[3]=0,k.__data[4]=H.elements[3],k.__data[5]=H.elements[4],k.__data[6]=H.elements[5],k.__data[7]=0,k.__data[8]=H.elements[6],k.__data[9]=H.elements[7],k.__data[10]=H.elements[8],k.__data[11]=0):(H.toArray(k.__data,W),W+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,V,k.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function y(T,A,w,D){const O=T.value,P=A+"_"+w;if(D[P]===void 0)return typeof O=="number"||typeof O=="boolean"?D[P]=O:D[P]=O.clone(),!0;{const B=D[P];if(typeof O=="number"||typeof O=="boolean"){if(B!==O)return D[P]=O,!0}else if(B.equals(O)===!1)return B.copy(O),!0}return!1}function x(T){const A=T.uniforms;let w=0;const D=16;for(let P=0,B=A.length;P<B;P++){const I=Array.isArray(A[P])?A[P]:[A[P]];for(let z=0,k=I.length;z<k;z++){const V=I[z],j=Array.isArray(V.value)?V.value:[V.value];for(let W=0,te=j.length;W<te;W++){const H=j[W],Q=M(H),ne=w%D,re=ne%Q.boundary,G=ne+re;w+=re,G!==0&&D-G<Q.storage&&(w+=D-G),V.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=w,w+=Q.storage}}}const O=w%D;return O>0&&(w+=D-O),T.__size=w,T.__cache={},this}function M(T){const A={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(A.boundary=4,A.storage=4):T.isVector2?(A.boundary=8,A.storage=8):T.isVector3||T.isColor?(A.boundary=16,A.storage=12):T.isVector4?(A.boundary=16,A.storage=16):T.isMatrix3?(A.boundary=48,A.storage=48):T.isMatrix4?(A.boundary=64,A.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),A}function b(T){const A=T.target;A.removeEventListener("dispose",b);const w=a.indexOf(A.__bindingPointIndex);a.splice(w,1),n.deleteBuffer(r[A.id]),delete r[A.id],delete s[A.id]}function S(){for(const T in r)n.deleteBuffer(r[T]);a=[],r={},s={}}return{bind:c,update:u,dispose:S}}class kw{constructor(e={}){const{canvas:t=FU(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:p=!1,reverseDepthBuffer:g=!1}=e;this.isWebGLRenderer=!0;let y;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=i.getContextAttributes().alpha}else y=a;const x=new Uint32Array(4),M=new Int32Array(4);let b=null,S=null;const T=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=pr,this.toneMapping=kc,this.toneMappingExposure=1;const w=this;let D=!1,O=0,P=0,B=null,I=-1,z=null;const k=new Ln,V=new Ln;let j=null;const W=new Rt(0);let te=0,H=t.width,Q=t.height,ne=1,re=null,G=null;const X=new Ln(0,0,H,Q),ie=new Ln(0,0,H,Q);let se=!1;const ee=new Ay;let ue=!1,pe=!1;const ve=new Ut,_e=new Ut,Xe=new J,qe=new Ln,Be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Se=!1;function He(){return B===null?ne:1}let oe=i;function lt(Z,me){return t.getContext(Z,me)}try{const Z={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${xg}`),t.addEventListener("webglcontextlost",ct,!1),t.addEventListener("webglcontextrestored",xt,!1),t.addEventListener("webglcontextcreationerror",je,!1),oe===null){const me="webgl2";if(oe=lt(me,Z),oe===null)throw lt(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Z){throw console.error("THREE.WebGLRenderer: "+Z.message),Z}let ze,Qe,De,st,ke,$,Y,fe,Ee,Re,Le,Fe,et,tt,Ot,at,yt,gt,ht,nt,wt,St,Ht,Te;function Oe(){ze=new CH(oe),ze.init(),St=new FL(oe,ze),Qe=new SH(oe,ze,e,St),De=new lG(oe,ze),Qe.reverseDepthBuffer&&g&&De.buffers.depth.setReversed(!0),st=new DH(oe),ke=new Zk,$=new cG(oe,ze,De,ke,Qe,St,st),Y=new MH(w),fe=new wH(w),Ee=new zz(oe),Ht=new xH(oe,Ee),Re=new RH(oe,Ee,st,Ht),Le=new LH(oe,Re,Ee,st),ht=new UH(oe,Qe,$),at=new EH(ke),Fe=new Yk(w,Y,fe,ze,Qe,Ht,at),et=new gG(w,ke),tt=new $k,Ot=new iG(ze),gt=new _H(w,Y,fe,De,Le,y,c),yt=new aG(w,Le,Qe),Te=new vG(oe,st,Qe,De),nt=new bH(oe,ze,st),wt=new OH(oe,ze,st),st.programs=Fe.programs,w.capabilities=Qe,w.extensions=ze,w.properties=ke,w.renderLists=tt,w.shadowMap=yt,w.state=De,w.info=st}Oe();const Pe=new pG(w,oe);this.xr=Pe,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){const Z=ze.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){const Z=ze.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(Z){Z!==void 0&&(ne=Z,this.setSize(H,Q,!1))},this.getSize=function(Z){return Z.set(H,Q)},this.setSize=function(Z,me,ye=!0){if(Pe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=Z,Q=me,t.width=Math.floor(Z*ne),t.height=Math.floor(me*ne),ye===!0&&(t.style.width=Z+"px",t.style.height=me+"px"),this.setViewport(0,0,Z,me)},this.getDrawingBufferSize=function(Z){return Z.set(H*ne,Q*ne).floor()},this.setDrawingBufferSize=function(Z,me,ye){H=Z,Q=me,ne=ye,t.width=Math.floor(Z*ye),t.height=Math.floor(me*ye),this.setViewport(0,0,Z,me)},this.getCurrentViewport=function(Z){return Z.copy(k)},this.getViewport=function(Z){return Z.copy(X)},this.setViewport=function(Z,me,ye,xe){Z.isVector4?X.set(Z.x,Z.y,Z.z,Z.w):X.set(Z,me,ye,xe),De.viewport(k.copy(X).multiplyScalar(ne).round())},this.getScissor=function(Z){return Z.copy(ie)},this.setScissor=function(Z,me,ye,xe){Z.isVector4?ie.set(Z.x,Z.y,Z.z,Z.w):ie.set(Z,me,ye,xe),De.scissor(V.copy(ie).multiplyScalar(ne).round())},this.getScissorTest=function(){return se},this.setScissorTest=function(Z){De.setScissorTest(se=Z)},this.setOpaqueSort=function(Z){re=Z},this.setTransparentSort=function(Z){G=Z},this.getClearColor=function(Z){return Z.copy(gt.getClearColor())},this.setClearColor=function(){gt.setClearColor.apply(gt,arguments)},this.getClearAlpha=function(){return gt.getClearAlpha()},this.setClearAlpha=function(){gt.setClearAlpha.apply(gt,arguments)},this.clear=function(Z=!0,me=!0,ye=!0){let xe=0;if(Z){let he=!1;if(B!==null){const ut=B.texture.format;he=ut===ES||ut===SS||ut===Sy}if(he){const ut=B.texture.type,it=ut===ja||ut===jc||ut===ag||ut===jd||ut===xS||ut===bS,ot=gt.getClearColor(),dt=gt.getClearAlpha(),Et=ot.r,Lt=ot.g,Mt=ot.b;it?(x[0]=Et,x[1]=Lt,x[2]=Mt,x[3]=dt,oe.clearBufferuiv(oe.COLOR,0,x)):(M[0]=Et,M[1]=Lt,M[2]=Mt,M[3]=dt,oe.clearBufferiv(oe.COLOR,0,M))}else xe|=oe.COLOR_BUFFER_BIT}me&&(xe|=oe.DEPTH_BUFFER_BIT),ye&&(xe|=oe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),oe.clear(xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ct,!1),t.removeEventListener("webglcontextrestored",xt,!1),t.removeEventListener("webglcontextcreationerror",je,!1),gt.dispose(),tt.dispose(),Ot.dispose(),ke.dispose(),Y.dispose(),fe.dispose(),Le.dispose(),Ht.dispose(),Te.dispose(),Fe.dispose(),Pe.dispose(),Pe.removeEventListener("sessionstart",un),Pe.removeEventListener("sessionend",mn),bn.stop()};function ct(Z){Z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function xt(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1;const Z=st.autoReset,me=yt.enabled,ye=yt.autoUpdate,xe=yt.needsUpdate,he=yt.type;Oe(),st.autoReset=Z,yt.enabled=me,yt.autoUpdate=ye,yt.needsUpdate=xe,yt.type=he}function je(Z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}function Ct(Z){const me=Z.target;me.removeEventListener("dispose",Ct),zt(me)}function zt(Z){Dt(Z),ke.remove(Z)}function Dt(Z){const me=ke.get(Z).programs;me!==void 0&&(me.forEach(function(ye){Fe.releaseProgram(ye)}),Z.isShaderMaterial&&Fe.releaseShaderCache(Z))}this.renderBufferDirect=function(Z,me,ye,xe,he,ut){me===null&&(me=Be);const it=he.isMesh&&he.matrixWorld.determinant()<0,ot=Ae(Z,me,ye,xe,he);De.setMaterial(xe,it);let dt=ye.index,Et=1;if(xe.wireframe===!0){if(dt=Re.getWireframeAttribute(ye),dt===void 0)return;Et=2}const Lt=ye.drawRange,Mt=ye.attributes.position;let Vt=Lt.start*Et,$t=(Lt.start+Lt.count)*Et;ut!==null&&(Vt=Math.max(Vt,ut.start*Et),$t=Math.min($t,(ut.start+ut.count)*Et)),dt!==null?(Vt=Math.max(Vt,0),$t=Math.min($t,dt.count)):Mt!=null&&(Vt=Math.max(Vt,0),$t=Math.min($t,Mt.count));const Zt=$t-Vt;if(Zt<0||Zt===1/0)return;Ht.setup(he,xe,ot,ye,dt);let Rn,Nt=nt;if(dt!==null&&(Rn=Ee.get(dt),Nt=wt,Nt.setIndex(Rn)),he.isMesh)xe.wireframe===!0?(De.setLineWidth(xe.wireframeLinewidth*He()),Nt.setMode(oe.LINES)):Nt.setMode(oe.TRIANGLES);else if(he.isLine){let Pt=xe.linewidth;Pt===void 0&&(Pt=1),De.setLineWidth(Pt*He()),he.isLineSegments?Nt.setMode(oe.LINES):he.isLineLoop?Nt.setMode(oe.LINE_LOOP):Nt.setMode(oe.LINE_STRIP)}else he.isPoints?Nt.setMode(oe.POINTS):he.isSprite&&Nt.setMode(oe.TRIANGLES);if(he.isBatchedMesh)if(he._multiDrawInstances!==null)Nt.renderMultiDrawInstances(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount,he._multiDrawInstances);else if(ze.get("WEBGL_multi_draw"))Nt.renderMultiDraw(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount);else{const Pt=he._multiDrawStarts,Vn=he._multiDrawCounts,dn=he._multiDrawCount,jn=dt?Ee.get(dt).bytesPerElement:1,vn=ke.get(xe).currentProgram.getUniforms();for(let Bn=0;Bn<dn;Bn++)vn.setValue(oe,"_gl_DrawID",Bn),Nt.render(Pt[Bn]/jn,Vn[Bn])}else if(he.isInstancedMesh)Nt.renderInstances(Vt,Zt,he.count);else if(ye.isInstancedBufferGeometry){const Pt=ye._maxInstanceCount!==void 0?ye._maxInstanceCount:1/0,Vn=Math.min(ye.instanceCount,Pt);Nt.renderInstances(Vt,Zt,Vn)}else Nt.render(Vt,Zt)};function Gt(Z,me,ye){Z.transparent===!0&&Z.side===mr&&Z.forceSinglePass===!1?(Z.side=Fs,Z.needsUpdate=!0,In(Z,me,ye),Z.side=$o,Z.needsUpdate=!0,In(Z,me,ye),Z.side=mr):In(Z,me,ye)}this.compile=function(Z,me,ye=null){ye===null&&(ye=Z),S=Ot.get(ye),S.init(me),A.push(S),ye.traverseVisible(function(he){he.isLight&&he.layers.test(me.layers)&&(S.pushLight(he),he.castShadow&&S.pushShadow(he))}),Z!==ye&&Z.traverseVisible(function(he){he.isLight&&he.layers.test(me.layers)&&(S.pushLight(he),he.castShadow&&S.pushShadow(he))}),S.setupLights();const xe=new Set;return Z.traverse(function(he){if(!(he.isMesh||he.isPoints||he.isLine||he.isSprite))return;const ut=he.material;if(ut)if(Array.isArray(ut))for(let it=0;it<ut.length;it++){const ot=ut[it];Gt(ot,ye,he),xe.add(ot)}else Gt(ut,ye,he),xe.add(ut)}),A.pop(),S=null,xe},this.compileAsync=function(Z,me,ye=null){const xe=this.compile(Z,me,ye);return new Promise(he=>{function ut(){if(xe.forEach(function(it){ke.get(it).currentProgram.isReady()&&xe.delete(it)}),xe.size===0){he(Z);return}setTimeout(ut,10)}ze.get("KHR_parallel_shader_compile")!==null?ut():setTimeout(ut,10)})};let tn=null;function Jt(Z){tn&&tn(Z)}function un(){bn.stop()}function mn(){bn.start()}const bn=new NL;bn.setAnimationLoop(Jt),typeof self<"u"&&bn.setContext(self),this.setAnimationLoop=function(Z){tn=Z,Pe.setAnimationLoop(Z),Z===null?bn.stop():bn.start()},Pe.addEventListener("sessionstart",un),Pe.addEventListener("sessionend",mn),this.render=function(Z,me){if(me!==void 0&&me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(D===!0)return;if(Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),me.parent===null&&me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),Pe.enabled===!0&&Pe.isPresenting===!0&&(Pe.cameraAutoUpdate===!0&&Pe.updateCamera(me),me=Pe.getCamera()),Z.isScene===!0&&Z.onBeforeRender(w,Z,me,B),S=Ot.get(Z,A.length),S.init(me),A.push(S),_e.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),ee.setFromProjectionMatrix(_e),pe=this.localClippingEnabled,ue=at.init(this.clippingPlanes,pe),b=tt.get(Z,T.length),b.init(),T.push(b),Pe.enabled===!0&&Pe.isPresenting===!0){const ut=w.xr.getDepthSensingMesh();ut!==null&&hi(ut,me,-1/0,w.sortObjects)}hi(Z,me,0,w.sortObjects),b.finish(),w.sortObjects===!0&&b.sort(re,G),Se=Pe.enabled===!1||Pe.isPresenting===!1||Pe.hasDepthSensing()===!1,Se&&gt.addToRenderList(b,Z),this.info.render.frame++,ue===!0&&at.beginShadows();const ye=S.state.shadowsArray;yt.render(ye,Z,me),ue===!0&&at.endShadows(),this.info.autoReset===!0&&this.info.reset();const xe=b.opaque,he=b.transmissive;if(S.setupLights(),me.isArrayCamera){const ut=me.cameras;if(he.length>0)for(let it=0,ot=ut.length;it<ot;it++){const dt=ut[it];Mi(xe,he,Z,dt)}Se&&gt.render(Z);for(let it=0,ot=ut.length;it<ot;it++){const dt=ut[it];gi(b,Z,dt,dt.viewport)}}else he.length>0&&Mi(xe,he,Z,me),Se&&gt.render(Z),gi(b,Z,me);B!==null&&($.updateMultisampleRenderTarget(B),$.updateRenderTargetMipmap(B)),Z.isScene===!0&&Z.onAfterRender(w,Z,me),Ht.resetDefaultState(),I=-1,z=null,A.pop(),A.length>0?(S=A[A.length-1],ue===!0&&at.setGlobalState(w.clippingPlanes,S.state.camera)):S=null,T.pop(),T.length>0?b=T[T.length-1]:b=null};function hi(Z,me,ye,xe){if(Z.visible===!1)return;if(Z.layers.test(me.layers)){if(Z.isGroup)ye=Z.renderOrder;else if(Z.isLOD)Z.autoUpdate===!0&&Z.update(me);else if(Z.isLight)S.pushLight(Z),Z.castShadow&&S.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||ee.intersectsSprite(Z)){xe&&qe.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(_e);const it=Le.update(Z),ot=Z.material;ot.visible&&b.push(Z,it,ot,ye,qe.z,null)}}else if((Z.isMesh||Z.isLine||Z.isPoints)&&(!Z.frustumCulled||ee.intersectsObject(Z))){const it=Le.update(Z),ot=Z.material;if(xe&&(Z.boundingSphere!==void 0?(Z.boundingSphere===null&&Z.computeBoundingSphere(),qe.copy(Z.boundingSphere.center)):(it.boundingSphere===null&&it.computeBoundingSphere(),qe.copy(it.boundingSphere.center)),qe.applyMatrix4(Z.matrixWorld).applyMatrix4(_e)),Array.isArray(ot)){const dt=it.groups;for(let Et=0,Lt=dt.length;Et<Lt;Et++){const Mt=dt[Et],Vt=ot[Mt.materialIndex];Vt&&Vt.visible&&b.push(Z,it,Vt,ye,qe.z,Mt)}}else ot.visible&&b.push(Z,it,ot,ye,qe.z,null)}}const ut=Z.children;for(let it=0,ot=ut.length;it<ot;it++)hi(ut[it],me,ye,xe)}function gi(Z,me,ye,xe){const he=Z.opaque,ut=Z.transmissive,it=Z.transparent;S.setupLightsView(ye),ue===!0&&at.setGlobalState(w.clippingPlanes,ye),xe&&De.viewport(k.copy(xe)),he.length>0&&Xt(he,me,ye),ut.length>0&&Xt(ut,me,ye),it.length>0&&Xt(it,me,ye),De.buffers.depth.setTest(!0),De.buffers.depth.setMask(!0),De.buffers.color.setMask(!0),De.setPolygonOffset(!1)}function Mi(Z,me,ye,xe){if((ye.isScene===!0?ye.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[xe.id]===void 0&&(S.state.transmissionRenderTarget[xe.id]=new Wa(1,1,{generateMipmaps:!0,type:ze.has("EXT_color_buffer_half_float")||ze.has("EXT_color_buffer_float")?Xr:ja,minFilter:Go,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Xn.workingColorSpace}));const ut=S.state.transmissionRenderTarget[xe.id],it=xe.viewport||k;ut.setSize(it.z,it.w);const ot=w.getRenderTarget();w.setRenderTarget(ut),w.getClearColor(W),te=w.getClearAlpha(),te<1&&w.setClearColor(16777215,.5),w.clear(),Se&&gt.render(ye);const dt=w.toneMapping;w.toneMapping=kc;const Et=xe.viewport;if(xe.viewport!==void 0&&(xe.viewport=void 0),S.setupLightsView(xe),ue===!0&&at.setGlobalState(w.clippingPlanes,xe),Xt(Z,ye,xe),$.updateMultisampleRenderTarget(ut),$.updateRenderTargetMipmap(ut),ze.has("WEBGL_multisampled_render_to_texture")===!1){let Lt=!1;for(let Mt=0,Vt=me.length;Mt<Vt;Mt++){const $t=me[Mt],Zt=$t.object,Rn=$t.geometry,Nt=$t.material,Pt=$t.group;if(Nt.side===mr&&Zt.layers.test(xe.layers)){const Vn=Nt.side;Nt.side=Fs,Nt.needsUpdate=!0,ri(Zt,ye,xe,Rn,Nt,Pt),Nt.side=Vn,Nt.needsUpdate=!0,Lt=!0}}Lt===!0&&($.updateMultisampleRenderTarget(ut),$.updateRenderTargetMipmap(ut))}w.setRenderTarget(ot),w.setClearColor(W,te),Et!==void 0&&(xe.viewport=Et),w.toneMapping=dt}function Xt(Z,me,ye){const xe=me.isScene===!0?me.overrideMaterial:null;for(let he=0,ut=Z.length;he<ut;he++){const it=Z[he],ot=it.object,dt=it.geometry,Et=xe===null?it.material:xe,Lt=it.group;ot.layers.test(ye.layers)&&ri(ot,me,ye,dt,Et,Lt)}}function ri(Z,me,ye,xe,he,ut){Z.onBeforeRender(w,me,ye,xe,he,ut),Z.modelViewMatrix.multiplyMatrices(ye.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),he.onBeforeRender(w,me,ye,xe,Z,ut),he.transparent===!0&&he.side===mr&&he.forceSinglePass===!1?(he.side=Fs,he.needsUpdate=!0,w.renderBufferDirect(ye,me,xe,he,Z,ut),he.side=$o,he.needsUpdate=!0,w.renderBufferDirect(ye,me,xe,he,Z,ut),he.side=mr):w.renderBufferDirect(ye,me,xe,he,Z,ut),Z.onAfterRender(w,me,ye,xe,he,ut)}function In(Z,me,ye){me.isScene!==!0&&(me=Be);const xe=ke.get(Z),he=S.state.lights,ut=S.state.shadowsArray,it=he.state.version,ot=Fe.getParameters(Z,he.state,ut,me,ye),dt=Fe.getProgramCacheKey(ot);let Et=xe.programs;xe.environment=Z.isMeshStandardMaterial?me.environment:null,xe.fog=me.fog,xe.envMap=(Z.isMeshStandardMaterial?fe:Y).get(Z.envMap||xe.environment),xe.envMapRotation=xe.environment!==null&&Z.envMap===null?me.environmentRotation:Z.envMapRotation,Et===void 0&&(Z.addEventListener("dispose",Ct),Et=new Map,xe.programs=Et);let Lt=Et.get(dt);if(Lt!==void 0){if(xe.currentProgram===Lt&&xe.lightsStateVersion===it)return le(Z,ot),Lt}else ot.uniforms=Fe.getUniforms(Z),Z.onBeforeCompile(ot,w),Lt=Fe.acquireProgram(ot,dt),Et.set(dt,Lt),xe.uniforms=ot.uniforms;const Mt=xe.uniforms;return(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||Z.clipping===!0)&&(Mt.clippingPlanes=at.uniform),le(Z,ot),xe.needsLights=We(Z),xe.lightsStateVersion=it,xe.needsLights&&(Mt.ambientLightColor.value=he.state.ambient,Mt.lightProbe.value=he.state.probe,Mt.directionalLights.value=he.state.directional,Mt.directionalLightShadows.value=he.state.directionalShadow,Mt.spotLights.value=he.state.spot,Mt.spotLightShadows.value=he.state.spotShadow,Mt.rectAreaLights.value=he.state.rectArea,Mt.ltc_1.value=he.state.rectAreaLTC1,Mt.ltc_2.value=he.state.rectAreaLTC2,Mt.pointLights.value=he.state.point,Mt.pointLightShadows.value=he.state.pointShadow,Mt.hemisphereLights.value=he.state.hemi,Mt.directionalShadowMap.value=he.state.directionalShadowMap,Mt.directionalShadowMatrix.value=he.state.directionalShadowMatrix,Mt.spotShadowMap.value=he.state.spotShadowMap,Mt.spotLightMatrix.value=he.state.spotLightMatrix,Mt.spotLightMap.value=he.state.spotLightMap,Mt.pointShadowMap.value=he.state.pointShadowMap,Mt.pointShadowMatrix.value=he.state.pointShadowMatrix),xe.currentProgram=Lt,xe.uniformsList=null,Lt}function K(Z){if(Z.uniformsList===null){const me=Z.currentProgram.getUniforms();Z.uniformsList=qx.seqWithValue(me.seq,Z.uniforms)}return Z.uniformsList}function le(Z,me){const ye=ke.get(Z);ye.outputColorSpace=me.outputColorSpace,ye.batching=me.batching,ye.batchingColor=me.batchingColor,ye.instancing=me.instancing,ye.instancingColor=me.instancingColor,ye.instancingMorph=me.instancingMorph,ye.skinning=me.skinning,ye.morphTargets=me.morphTargets,ye.morphNormals=me.morphNormals,ye.morphColors=me.morphColors,ye.morphTargetsCount=me.morphTargetsCount,ye.numClippingPlanes=me.numClippingPlanes,ye.numIntersection=me.numClipIntersection,ye.vertexAlphas=me.vertexAlphas,ye.vertexTangents=me.vertexTangents,ye.toneMapping=me.toneMapping}function Ae(Z,me,ye,xe,he){me.isScene!==!0&&(me=Be),$.resetTextureUnits();const ut=me.fog,it=xe.isMeshStandardMaterial?me.environment:null,ot=B===null?w.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:Ir,dt=(xe.isMeshStandardMaterial?fe:Y).get(xe.envMap||it),Et=xe.vertexColors===!0&&!!ye.attributes.color&&ye.attributes.color.itemSize===4,Lt=!!ye.attributes.tangent&&(!!xe.normalMap||xe.anisotropy>0),Mt=!!ye.morphAttributes.position,Vt=!!ye.morphAttributes.normal,$t=!!ye.morphAttributes.color;let Zt=kc;xe.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(Zt=w.toneMapping);const Rn=ye.morphAttributes.position||ye.morphAttributes.normal||ye.morphAttributes.color,Nt=Rn!==void 0?Rn.length:0,Pt=ke.get(xe),Vn=S.state.lights;if(ue===!0&&(pe===!0||Z!==z)){const yn=Z===z&&xe.id===I;at.setState(xe,Z,yn)}let dn=!1;xe.version===Pt.__version?(Pt.needsLights&&Pt.lightsStateVersion!==Vn.state.version||Pt.outputColorSpace!==ot||he.isBatchedMesh&&Pt.batching===!1||!he.isBatchedMesh&&Pt.batching===!0||he.isBatchedMesh&&Pt.batchingColor===!0&&he.colorTexture===null||he.isBatchedMesh&&Pt.batchingColor===!1&&he.colorTexture!==null||he.isInstancedMesh&&Pt.instancing===!1||!he.isInstancedMesh&&Pt.instancing===!0||he.isSkinnedMesh&&Pt.skinning===!1||!he.isSkinnedMesh&&Pt.skinning===!0||he.isInstancedMesh&&Pt.instancingColor===!0&&he.instanceColor===null||he.isInstancedMesh&&Pt.instancingColor===!1&&he.instanceColor!==null||he.isInstancedMesh&&Pt.instancingMorph===!0&&he.morphTexture===null||he.isInstancedMesh&&Pt.instancingMorph===!1&&he.morphTexture!==null||Pt.envMap!==dt||xe.fog===!0&&Pt.fog!==ut||Pt.numClippingPlanes!==void 0&&(Pt.numClippingPlanes!==at.numPlanes||Pt.numIntersection!==at.numIntersection)||Pt.vertexAlphas!==Et||Pt.vertexTangents!==Lt||Pt.morphTargets!==Mt||Pt.morphNormals!==Vt||Pt.morphColors!==$t||Pt.toneMapping!==Zt||Pt.morphTargetsCount!==Nt)&&(dn=!0):(dn=!0,Pt.__version=xe.version);let jn=Pt.currentProgram;dn===!0&&(jn=In(xe,me,he));let vn=!1,Bn=!1,ln=!1;const kt=jn.getUniforms(),ii=Pt.uniforms;if(De.useProgram(jn.program)&&(vn=!0,Bn=!0,ln=!0),xe.id!==I&&(I=xe.id,Bn=!0),vn||z!==Z){De.buffers.depth.getReversed()?(ve.copy(Z.projectionMatrix),y9(ve),_9(ve),kt.setValue(oe,"projectionMatrix",ve)):kt.setValue(oe,"projectionMatrix",Z.projectionMatrix),kt.setValue(oe,"viewMatrix",Z.matrixWorldInverse);const di=kt.map.cameraPosition;di!==void 0&&di.setValue(oe,Xe.setFromMatrixPosition(Z.matrixWorld)),Qe.logarithmicDepthBuffer&&kt.setValue(oe,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial)&&kt.setValue(oe,"isOrthographic",Z.isOrthographicCamera===!0),z!==Z&&(z=Z,Bn=!0,ln=!0)}if(he.isSkinnedMesh){kt.setOptional(oe,he,"bindMatrix"),kt.setOptional(oe,he,"bindMatrixInverse");const yn=he.skeleton;yn&&(yn.boneTexture===null&&yn.computeBoneTexture(),kt.setValue(oe,"boneTexture",yn.boneTexture,$))}he.isBatchedMesh&&(kt.setOptional(oe,he,"batchingTexture"),kt.setValue(oe,"batchingTexture",he._matricesTexture,$),kt.setOptional(oe,he,"batchingIdTexture"),kt.setValue(oe,"batchingIdTexture",he._indirectTexture,$),kt.setOptional(oe,he,"batchingColorTexture"),he._colorsTexture!==null&&kt.setValue(oe,"batchingColorTexture",he._colorsTexture,$));const si=ye.morphAttributes;if((si.position!==void 0||si.normal!==void 0||si.color!==void 0)&&ht.update(he,ye,jn),(Bn||Pt.receiveShadow!==he.receiveShadow)&&(Pt.receiveShadow=he.receiveShadow,kt.setValue(oe,"receiveShadow",he.receiveShadow)),xe.isMeshGouraudMaterial&&xe.envMap!==null&&(ii.envMap.value=dt,ii.flipEnvMap.value=dt.isCubeTexture&&dt.isRenderTargetTexture===!1?-1:1),xe.isMeshStandardMaterial&&xe.envMap===null&&me.environment!==null&&(ii.envMapIntensity.value=me.environmentIntensity),Bn&&(kt.setValue(oe,"toneMappingExposure",w.toneMappingExposure),Pt.needsLights&&Ge(ii,ln),ut&&xe.fog===!0&&et.refreshFogUniforms(ii,ut),et.refreshMaterialUniforms(ii,xe,ne,Q,S.state.transmissionRenderTarget[Z.id]),qx.upload(oe,K(Pt),ii,$)),xe.isShaderMaterial&&xe.uniformsNeedUpdate===!0&&(qx.upload(oe,K(Pt),ii,$),xe.uniformsNeedUpdate=!1),xe.isSpriteMaterial&&kt.setValue(oe,"center",he.center),kt.setValue(oe,"modelViewMatrix",he.modelViewMatrix),kt.setValue(oe,"normalMatrix",he.normalMatrix),kt.setValue(oe,"modelMatrix",he.matrixWorld),xe.isShaderMaterial||xe.isRawShaderMaterial){const yn=xe.uniformsGroups;for(let di=0,ya=yn.length;di<ya;di++){const Ni=yn[di];Te.update(Ni,jn),Te.bind(Ni,jn)}}return jn}function Ge(Z,me){Z.ambientLightColor.needsUpdate=me,Z.lightProbe.needsUpdate=me,Z.directionalLights.needsUpdate=me,Z.directionalLightShadows.needsUpdate=me,Z.pointLights.needsUpdate=me,Z.pointLightShadows.needsUpdate=me,Z.spotLights.needsUpdate=me,Z.spotLightShadows.needsUpdate=me,Z.rectAreaLights.needsUpdate=me,Z.hemisphereLights.needsUpdate=me}function We(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&Z.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(Z,me,ye){ke.get(Z.texture).__webglTexture=me,ke.get(Z.depthTexture).__webglTexture=ye;const xe=ke.get(Z);xe.__hasExternalTextures=!0,xe.__autoAllocateDepthBuffer=ye===void 0,xe.__autoAllocateDepthBuffer||ze.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),xe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Z,me){const ye=ke.get(Z);ye.__webglFramebuffer=me,ye.__useDefaultFramebuffer=me===void 0},this.setRenderTarget=function(Z,me=0,ye=0){B=Z,O=me,P=ye;let xe=!0,he=null,ut=!1,it=!1;if(Z){const dt=ke.get(Z);if(dt.__useDefaultFramebuffer!==void 0)De.bindFramebuffer(oe.FRAMEBUFFER,null),xe=!1;else if(dt.__webglFramebuffer===void 0)$.setupRenderTarget(Z);else if(dt.__hasExternalTextures)$.rebindTextures(Z,ke.get(Z.texture).__webglTexture,ke.get(Z.depthTexture).__webglTexture);else if(Z.depthBuffer){const Mt=Z.depthTexture;if(dt.__boundDepthTexture!==Mt){if(Mt!==null&&ke.has(Mt)&&(Z.width!==Mt.image.width||Z.height!==Mt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(Z)}}const Et=Z.texture;(Et.isData3DTexture||Et.isDataArrayTexture||Et.isCompressedArrayTexture)&&(it=!0);const Lt=ke.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Array.isArray(Lt[me])?he=Lt[me][ye]:he=Lt[me],ut=!0):Z.samples>0&&$.useMultisampledRTT(Z)===!1?he=ke.get(Z).__webglMultisampledFramebuffer:Array.isArray(Lt)?he=Lt[ye]:he=Lt,k.copy(Z.viewport),V.copy(Z.scissor),j=Z.scissorTest}else k.copy(X).multiplyScalar(ne).floor(),V.copy(ie).multiplyScalar(ne).floor(),j=se;if(De.bindFramebuffer(oe.FRAMEBUFFER,he)&&xe&&De.drawBuffers(Z,he),De.viewport(k),De.scissor(V),De.setScissorTest(j),ut){const dt=ke.get(Z.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_CUBE_MAP_POSITIVE_X+me,dt.__webglTexture,ye)}else if(it){const dt=ke.get(Z.texture),Et=me||0;oe.framebufferTextureLayer(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,dt.__webglTexture,ye||0,Et)}I=-1},this.readRenderTargetPixels=function(Z,me,ye,xe,he,ut,it){if(!(Z&&Z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=ke.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&it!==void 0&&(ot=ot[it]),ot){De.bindFramebuffer(oe.FRAMEBUFFER,ot);try{const dt=Z.texture,Et=dt.format,Lt=dt.type;if(!Qe.textureFormatReadable(Et)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Qe.textureTypeReadable(Lt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}me>=0&&me<=Z.width-xe&&ye>=0&&ye<=Z.height-he&&oe.readPixels(me,ye,xe,he,St.convert(Et),St.convert(Lt),ut)}finally{const dt=B!==null?ke.get(B).__webglFramebuffer:null;De.bindFramebuffer(oe.FRAMEBUFFER,dt)}}},this.readRenderTargetPixelsAsync=async function(Z,me,ye,xe,he,ut,it){if(!(Z&&Z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ot=ke.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&it!==void 0&&(ot=ot[it]),ot){const dt=Z.texture,Et=dt.format,Lt=dt.type;if(!Qe.textureFormatReadable(Et))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Qe.textureTypeReadable(Lt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(me>=0&&me<=Z.width-xe&&ye>=0&&ye<=Z.height-he){De.bindFramebuffer(oe.FRAMEBUFFER,ot);const Mt=oe.createBuffer();oe.bindBuffer(oe.PIXEL_PACK_BUFFER,Mt),oe.bufferData(oe.PIXEL_PACK_BUFFER,ut.byteLength,oe.STREAM_READ),oe.readPixels(me,ye,xe,he,St.convert(Et),St.convert(Lt),0);const Vt=B!==null?ke.get(B).__webglFramebuffer:null;De.bindFramebuffer(oe.FRAMEBUFFER,Vt);const $t=oe.fenceSync(oe.SYNC_GPU_COMMANDS_COMPLETE,0);return oe.flush(),await v9(oe,$t,4),oe.bindBuffer(oe.PIXEL_PACK_BUFFER,Mt),oe.getBufferSubData(oe.PIXEL_PACK_BUFFER,0,ut),oe.deleteBuffer(Mt),oe.deleteSync($t),ut}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(Z,me=null,ye=0){Z.isTexture!==!0&&(Xm("WebGLRenderer: copyFramebufferToTexture function signature has changed."),me=arguments[0]||null,Z=arguments[1]);const xe=Math.pow(2,-ye),he=Math.floor(Z.image.width*xe),ut=Math.floor(Z.image.height*xe),it=me!==null?me.x:0,ot=me!==null?me.y:0;$.setTexture2D(Z,0),oe.copyTexSubImage2D(oe.TEXTURE_2D,ye,0,0,it,ot,he,ut),De.unbindTexture()};const rt=oe.createFramebuffer(),bt=oe.createFramebuffer();this.copyTextureToTexture=function(Z,me,ye=null,xe=null,he=0,ut=null){Z.isTexture!==!0&&(Xm("WebGLRenderer: copyTextureToTexture function signature has changed."),xe=arguments[0]||null,Z=arguments[1],me=arguments[2],ut=arguments[3]||0,ye=null),ut===null&&(he!==0?(Xm("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ut=he,he=0):ut=0);let it,ot,dt,Et,Lt,Mt,Vt,$t,Zt;const Rn=Z.isCompressedTexture?Z.mipmaps[ut]:Z.image;if(ye!==null)it=ye.max.x-ye.min.x,ot=ye.max.y-ye.min.y,dt=ye.isBox3?ye.max.z-ye.min.z:1,Et=ye.min.x,Lt=ye.min.y,Mt=ye.isBox3?ye.min.z:0;else{const si=Math.pow(2,-he);it=Math.floor(Rn.width*si),ot=Math.floor(Rn.height*si),Z.isDataArrayTexture?dt=Rn.depth:Z.isData3DTexture?dt=Math.floor(Rn.depth*si):dt=1,Et=0,Lt=0,Mt=0}xe!==null?(Vt=xe.x,$t=xe.y,Zt=xe.z):(Vt=0,$t=0,Zt=0);const Nt=St.convert(me.format),Pt=St.convert(me.type);let Vn;me.isData3DTexture?($.setTexture3D(me,0),Vn=oe.TEXTURE_3D):me.isDataArrayTexture||me.isCompressedArrayTexture?($.setTexture2DArray(me,0),Vn=oe.TEXTURE_2D_ARRAY):($.setTexture2D(me,0),Vn=oe.TEXTURE_2D),oe.pixelStorei(oe.UNPACK_FLIP_Y_WEBGL,me.flipY),oe.pixelStorei(oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),oe.pixelStorei(oe.UNPACK_ALIGNMENT,me.unpackAlignment);const dn=oe.getParameter(oe.UNPACK_ROW_LENGTH),jn=oe.getParameter(oe.UNPACK_IMAGE_HEIGHT),vn=oe.getParameter(oe.UNPACK_SKIP_PIXELS),Bn=oe.getParameter(oe.UNPACK_SKIP_ROWS),ln=oe.getParameter(oe.UNPACK_SKIP_IMAGES);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,Rn.width),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,Rn.height),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,Et),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,Lt),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,Mt);const kt=Z.isDataArrayTexture||Z.isData3DTexture,ii=me.isDataArrayTexture||me.isData3DTexture;if(Z.isDepthTexture){const si=ke.get(Z),yn=ke.get(me),di=ke.get(si.__renderTarget),ya=ke.get(yn.__renderTarget);De.bindFramebuffer(oe.READ_FRAMEBUFFER,di.__webglFramebuffer),De.bindFramebuffer(oe.DRAW_FRAMEBUFFER,ya.__webglFramebuffer);for(let Ni=0;Ni<dt;Ni++)kt&&(oe.framebufferTextureLayer(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,ke.get(Z).__webglTexture,he,Mt+Ni),oe.framebufferTextureLayer(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,ke.get(me).__webglTexture,ut,Zt+Ni)),oe.blitFramebuffer(Et,Lt,it,ot,Vt,$t,it,ot,oe.DEPTH_BUFFER_BIT,oe.NEAREST);De.bindFramebuffer(oe.READ_FRAMEBUFFER,null),De.bindFramebuffer(oe.DRAW_FRAMEBUFFER,null)}else if(he!==0||Z.isRenderTargetTexture||ke.has(Z)){const si=ke.get(Z),yn=ke.get(me);De.bindFramebuffer(oe.READ_FRAMEBUFFER,rt),De.bindFramebuffer(oe.DRAW_FRAMEBUFFER,bt);for(let di=0;di<dt;di++)kt?oe.framebufferTextureLayer(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,si.__webglTexture,he,Mt+di):oe.framebufferTexture2D(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,si.__webglTexture,he),ii?oe.framebufferTextureLayer(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,yn.__webglTexture,ut,Zt+di):oe.framebufferTexture2D(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,yn.__webglTexture,ut),he!==0?oe.blitFramebuffer(Et,Lt,it,ot,Vt,$t,it,ot,oe.COLOR_BUFFER_BIT,oe.NEAREST):ii?oe.copyTexSubImage3D(Vn,ut,Vt,$t,Zt+di,Et,Lt,it,ot):oe.copyTexSubImage2D(Vn,ut,Vt,$t,Et,Lt,it,ot);De.bindFramebuffer(oe.READ_FRAMEBUFFER,null),De.bindFramebuffer(oe.DRAW_FRAMEBUFFER,null)}else ii?Z.isDataTexture||Z.isData3DTexture?oe.texSubImage3D(Vn,ut,Vt,$t,Zt,it,ot,dt,Nt,Pt,Rn.data):me.isCompressedArrayTexture?oe.compressedTexSubImage3D(Vn,ut,Vt,$t,Zt,it,ot,dt,Nt,Rn.data):oe.texSubImage3D(Vn,ut,Vt,$t,Zt,it,ot,dt,Nt,Pt,Rn):Z.isDataTexture?oe.texSubImage2D(oe.TEXTURE_2D,ut,Vt,$t,it,ot,Nt,Pt,Rn.data):Z.isCompressedTexture?oe.compressedTexSubImage2D(oe.TEXTURE_2D,ut,Vt,$t,Rn.width,Rn.height,Nt,Rn.data):oe.texSubImage2D(oe.TEXTURE_2D,ut,Vt,$t,it,ot,Nt,Pt,Rn);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,dn),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,jn),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,vn),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,Bn),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,ln),ut===0&&me.generateMipmaps&&oe.generateMipmap(Vn),De.unbindTexture()},this.copyTextureToTexture3D=function(Z,me,ye=null,xe=null,he=0){return Z.isTexture!==!0&&(Xm("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ye=arguments[0]||null,xe=arguments[1]||null,Z=arguments[2],me=arguments[3],he=arguments[4]||0),Xm('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Z,me,ye,xe,he)},this.initRenderTarget=function(Z){ke.get(Z).__webglFramebuffer===void 0&&$.setupRenderTarget(Z)},this.initTexture=function(Z){Z.isCubeTexture?$.setTextureCube(Z,0):Z.isData3DTexture?$.setTexture3D(Z,0):Z.isDataArrayTexture||Z.isCompressedArrayTexture?$.setTexture2DArray(Z,0):$.setTexture2D(Z,0),De.unbindTexture()},this.resetState=function(){O=0,P=0,B=null,De.reset(),Ht.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Fc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Xn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Xn._getUnpackColorSpace()}}const yG=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:JA,AddEquation:Yf,AddOperation:vU,AdditiveAnimationBlendMode:ow,AdditiveBlending:CT,AgXToneMapping:SU,AlphaFormat:tw,AlwaysCompare:BU,AlwaysDepth:nb,AlwaysStencilFunc:LT,AmbientLight:SL,AnimationAction:DL,AnimationClip:dg,AnimationLoader:FB,AnimationMixer:uz,AnimationObjectGroup:lz,AnimationUtils:PB,ArcCurve:KU,ArrayCamera:CL,ArrowHelper:Cz,AttachedBindMode:DT,Audio:RL,AudioAnalyser:QB,AudioContext:Pw,AudioListener:ZB,AudioLoader:XB,AxesHelper:Rz,BackSide:Fs,BasicDepthPacking:RU,BasicShadowMap:$5,BatchedMesh:YU,Bone:RS,BooleanKeyframeTrack:rp,Box2:mz,Box3:Kn,Box3Helper:Az,BoxGeometry:ip,BoxHelper:Tz,BufferAttribute:Jn,BufferGeometry:An,BufferGeometryLoader:AL,ByteType:yS,Cache:Pu,Camera:AS,CameraHelper:Mz,CanvasTexture:ZU,CapsuleGeometry:PS,CatmullRomCurve3:$U,CineonToneMapping:xU,CircleGeometry:IS,ClampToEdgeWrapping:Mr,Clock:Iw,Color:Rt,ColorKeyframeTrack:Rw,ColorManagement:Xn,CompressedArrayTexture:rB,CompressedCubeTexture:sB,CompressedTexture:US,CompressedTextureLoader:HB,ConeGeometry:BS,ConstantAlphaFactor:pU,ConstantColorFactor:hU,Controls:Dz,CubeCamera:jU,CubeReflectionMapping:Vc,CubeRefractionMapping:ih,CubeTexture:Ey,CubeTextureLoader:_L,CubeUVReflectionMapping:bg,CubicBezierCurve:bw,CubicBezierCurve3:QU,CubicInterpolant:mL,CullFaceBack:wT,CullFaceFront:K5,CullFaceFrontBack:T8,CullFaceNone:Z5,Curve:Wl,CurvePath:eL,CustomBlending:Q5,CustomToneMapping:bU,CylinderGeometry:Sg,Cylindrical:pz,Data3DTexture:hw,DataArrayTexture:TS,DataTexture:Gl,DataTextureLoader:Ow,DataUtils:Dd,DecrementStencilOp:P8,DecrementWrapStencilOp:B8,DefaultLoadingManager:yL,DepthFormat:Id,DepthStencilFormat:Wd,DepthTexture:LS,DetachedBindMode:MU,DirectionalLight:Nw,DirectionalLightHelper:Ez,DiscreteInterpolant:gL,DodecahedronGeometry:zS,DoubleSide:mr,DstAlphaFactor:oU,DstColorFactor:cU,DynamicCopyUsage:$8,DynamicDrawUsage:Xx,DynamicReadUsage:Y8,EdgesGeometry:tL,EllipseCurve:NS,EqualCompare:LU,EqualDepth:rb,EqualStencilFunc:k8,EquirectangularReflectionMapping:rg,EquirectangularRefractionMapping:Qv,Euler:po,EventDispatcher:qc,ExtrudeGeometry:HS,FileLoader:ga,Float16BufferAttribute:F9,Float32BufferAttribute:qt,FloatType:Yi,Fog:CS,FogExp2:wS,FramebufferTexture:iB,FrontSide:$o,Frustum:Ay,GLBufferAttribute:dz,GLSL1:J8,GLSL3:NT,GreaterCompare:NU,GreaterDepth:ab,GreaterEqualCompare:IU,GreaterEqualDepth:sb,GreaterEqualStencilFunc:W8,GreaterStencilFunc:V8,GridHelper:bz,Group:Nu,HalfFloatType:Xr,HemisphereLight:bL,HemisphereLightHelper:xz,IcosahedronGeometry:Cy,ImageBitmapLoader:wL,ImageLoader:ly,ImageUtils:HU,IncrementStencilOp:N8,IncrementWrapStencilOp:I8,InstancedBufferAttribute:ah,InstancedBufferGeometry:$S,InstancedInterleavedBuffer:zb,InstancedMesh:yw,Int16BufferAttribute:B9,Int32BufferAttribute:z9,Int8BufferAttribute:N9,IntType:xy,InterleavedBuffer:My,InterleavedBufferAttribute:Ga,Interpolant:Eg,InterpolateDiscrete:og,InterpolateLinear:lg,InterpolateSmooth:Wx,InvertStencilOp:z8,KeepStencilOp:Ed,KeyframeTrack:ql,LOD:qU,LatheGeometry:wy,Layers:ug,LessCompare:UU,LessDepth:ib,LessEqualCompare:uw,LessEqualDepth:Vd,LessEqualStencilFunc:G8,LessStencilFunc:H8,Light:mh,LightProbe:TL,Line:ku,Line3:Zo,LineBasicMaterial:xs,LineCurve:Sw,LineCurve3:JU,LineDashedMaterial:hL,LineLoop:_w,LineSegments:Jo,LinearFilter:Zn,LinearInterpolant:Cw,LinearMipMapLinearFilter:UT,LinearMipMapNearestFilter:C8,LinearMipmapLinearFilter:Go,LinearMipmapNearestFilter:Jm,LinearSRGBColorSpace:Ir,LinearToneMapping:yU,LinearTransfer:ey,Loader:Gs,LoaderUtils:Qf,LoadingManager:ZS,LoopOnce:TU,LoopPingPong:wU,LoopRepeat:AU,LuminanceAlphaFormat:rw,LuminanceFormat:iw,MOUSE:E8,Material:Yr,MaterialLoader:KS,MathUtils:np,Matrix2:Fw,Matrix3:Mn,Matrix4:Ut,MaxEquation:nU,Mesh:fi,MeshBasicMaterial:pa,MeshDepthMaterial:qS,MeshDistanceMaterial:YS,MeshLambertMaterial:uL,MeshMatcapMaterial:fL,MeshNormalMaterial:cL,MeshPhongMaterial:oL,MeshPhysicalMaterial:el,MeshStandardMaterial:Dy,MeshToonMaterial:lL,MinEquation:tU,MirroredRepeatWrapping:sg,MixOperation:gU,MultiplyBlending:OT,MultiplyOperation:_y,NearestFilter:qr,NearestMipMapLinearFilter:w8,NearestMipMapNearestFilter:A8,NearestMipmapLinearFilter:wd,NearestMipmapNearestFilter:vS,NeutralToneMapping:EU,NeverCompare:DU,NeverDepth:tb,NeverStencilFunc:F8,NoBlending:Hc,NoColorSpace:Du,NoToneMapping:kc,NormalAnimationBlendMode:MS,NormalBlending:Iu,NotEqualCompare:PU,NotEqualDepth:ob,NotEqualStencilFunc:j8,NumberKeyframeTrack:qd,Object3D:Cn,ObjectLoader:jB,ObjectSpaceNormalMap:OU,OctahedronGeometry:Ry,OneFactor:rU,OneMinusConstantAlphaFactor:mU,OneMinusConstantColorFactor:dU,OneMinusDstAlphaFactor:lU,OneMinusDstColorFactor:uU,OneMinusSrcAlphaFactor:eb,OneMinusSrcColorFactor:aU,OrthographicCamera:ju,PCFShadowMap:gS,PCFSoftShadowMap:Lv,PMREMGenerator:kT,Path:ry,PerspectiveCamera:Er,Plane:Fo,PlaneGeometry:Xl,PlaneHelper:wz,PointLight:Lw,PointLightHelper:yz,Points:DS,PointsMaterial:OS,PolarGridHelper:Sz,PolyhedronGeometry:ph,PositionalAudio:$B,PropertyBinding:ni,PropertyMixer:OL,QuadraticBezierCurve:Ew,QuadraticBezierCurve3:Mw,Quaternion:Ar,QuaternionKeyframeTrack:Yd,QuaternionLinearInterpolant:vL,RED_GREEN_RGTC2_Format:Ub,RED_RGTC1_Format:aw,REVISION:xg,RGBADepthPacking:cw,RGBAFormat:Tr,RGBAIntegerFormat:ES,RGBA_ASTC_10x10_Format:Ab,RGBA_ASTC_10x5_Format:Eb,RGBA_ASTC_10x6_Format:Mb,RGBA_ASTC_10x8_Format:Tb,RGBA_ASTC_12x10_Format:wb,RGBA_ASTC_12x12_Format:Cb,RGBA_ASTC_4x4_Format:mb,RGBA_ASTC_5x4_Format:gb,RGBA_ASTC_5x5_Format:vb,RGBA_ASTC_6x5_Format:yb,RGBA_ASTC_6x6_Format:_b,RGBA_ASTC_8x5_Format:xb,RGBA_ASTC_8x6_Format:bb,RGBA_ASTC_8x8_Format:Sb,RGBA_BPTC_Format:zv,RGBA_ETC2_EAC_Format:pb,RGBA_PVRTC_2BPPV1_Format:fb,RGBA_PVRTC_4BPPV1_Format:ub,RGBA_S3TC_DXT1_Format:Pv,RGBA_S3TC_DXT3_Format:Iv,RGBA_S3TC_DXT5_Format:Bv,RGBDepthPacking:O8,RGBFormat:nw,RGBIntegerFormat:R8,RGB_BPTC_SIGNED_Format:Rb,RGB_BPTC_UNSIGNED_Format:Ob,RGB_ETC1_Format:hb,RGB_ETC2_Format:db,RGB_PVRTC_2BPPV1_Format:cb,RGB_PVRTC_4BPPV1_Format:lb,RGB_S3TC_DXT1_Format:Nv,RGDepthPacking:D8,RGFormat:sw,RGIntegerFormat:SS,RawShaderMaterial:aL,Ray:dh,Raycaster:JS,RectAreaLight:EL,RedFormat:by,RedIntegerFormat:Sy,ReinhardToneMapping:_U,RenderTarget:kU,RepeatWrapping:rh,ReplaceStencilOp:L8,ReverseSubtractEquation:eU,RingGeometry:kS,SIGNED_RED_GREEN_RGTC2_Format:Lb,SIGNED_RED_RGTC1_Format:Db,SRGBColorSpace:pr,SRGBTransfer:Ei,Scene:sh,ShaderChunk:Dn,ShaderLib:kl,ShaderMaterial:ks,ShadowMaterial:sL,Shape:zd,ShapeGeometry:GS,ShapePath:Oz,ShapeUtils:Gc,ShortType:_S,Skeleton:Ty,SkeletonHelper:vz,SkinnedMesh:vw,Source:Od,Sphere:gr,SphereGeometry:Oy,Spherical:UL,SphericalHarmonics3:ML,SplineCurve:Tw,SpotLight:Uw,SpotLightHelper:gz,Sprite:XU,SpriteMaterial:gw,SrcAlphaFactor:Jx,SrcAlphaSaturateFactor:fU,SrcColorFactor:sU,StaticCopyUsage:K8,StaticDrawUsage:ty,StaticReadUsage:q8,StereoCamera:qB,StreamCopyUsage:Q8,StreamDrawUsage:X8,StreamReadUsage:Z8,StringKeyframeTrack:sp,SubtractEquation:J5,SubtractiveBlending:RT,TOUCH:M8,TangentSpaceNormalMap:hh,TetrahedronGeometry:VS,Texture:mi,TextureLoader:xL,TextureUtils:Iz,TorusGeometry:jS,TorusKnotGeometry:WS,Triangle:Nr,TriangleFanDrawMode:Nb,TriangleStripDrawMode:lw,TrianglesDrawMode:CU,TubeGeometry:XS,UVMapping:nh,Uint16BufferAttribute:dw,Uint32BufferAttribute:pw,Uint8BufferAttribute:P9,Uint8ClampedBufferAttribute:I9,Uniform:QS,UniformsGroup:hz,UniformsLib:It,UniformsUtils:hg,UnsignedByteType:ja,UnsignedInt248Type:jd,UnsignedInt5999Type:ew,UnsignedIntType:jc,UnsignedShort4444Type:xS,UnsignedShort5551Type:bS,UnsignedShortType:ag,VSMShadowMap:Hl,Vector2:ft,Vector3:J,Vector4:Ln,VectorKeyframeTrack:Zd,VideoTexture:nB,WebGL3DRenderTarget:M9,WebGLArrayRenderTarget:E9,WebGLCoordinateSystem:Fc,WebGLCubeRenderTarget:mw,WebGLMultipleRenderTargets:Bz,WebGLRenderTarget:Wa,WebGLRenderer:kw,WebGLUtils:FL,WebGPUCoordinateSystem:ny,WireframeGeometry:Aw,WrapAroundEnding:Jv,ZeroCurvatureEnding:Cd,ZeroFactor:iU,ZeroSlopeEnding:Rd,ZeroStencilOp:U8,createCanvasElement:FU},Symbol.toStringTag,{value:"Module"}));var K2={exports:{}},$2={},Q2={exports:{}},J2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a4;function _G(){if(a4)return J2;a4=1;var n=_g();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function o(p,g){var y=g(),x=i({inst:{value:y,getSnapshot:g}}),M=x[0].inst,b=x[1];return s(function(){M.value=y,M.getSnapshot=g,c(M)&&b({inst:M})},[p,y,g]),r(function(){return c(M)&&b({inst:M}),p(function(){c(M)&&b({inst:M})})},[p]),a(y),y}function c(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!t(p,y)}catch{return!0}}function u(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return J2.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:h,J2}var o4;function xG(){return o4||(o4=1,Q2.exports=_G()),Q2.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l4;function bG(){if(l4)return $2;l4=1;var n=_g(),e=xG();function t(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,o=n.useMemo,c=n.useDebugValue;return $2.useSyncExternalStoreWithSelector=function(u,h,p,g,y){var x=s(null);if(x.current===null){var M={hasValue:!1,value:null};x.current=M}else M=x.current;x=o(function(){function S(O){if(!T){if(T=!0,A=O,O=g(O),y!==void 0&&M.hasValue){var P=M.value;if(y(P,O))return w=P}return w=O}if(P=w,i(A,O))return P;var B=g(O);return y!==void 0&&y(P,B)?(A=O,P):(A=O,w=B)}var T=!1,A,w,D=p===void 0?null:p;return[function(){return S(h())},D===null?void 0:function(){return S(D())}]},[h,p,g,y]);var b=r(u,x[0],x[1]);return a(function(){M.hasValue=!0,M.value=b},[b]),c(b),b},$2}var c4;function SG(){return c4||(c4=1,K2.exports=bG()),K2.exports}var EG=SG();const HL=fh(EG),u4=n=>{let e;const t=new Set,i=(u,h)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const g=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(y=>y(e,g))}},r=()=>e,o={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(t.add(u),()=>t.delete(u))},c=e=n(i,r,o);return o},MG=(n=>n?u4(n):u4),{useSyncExternalStoreWithSelector:TG}=HL,AG=n=>n;function wG(n,e=AG,t){const i=TG(n.subscribe,n.getState,n.getInitialState,e,t);return de.useDebugValue(i),i}const f4=(n,e)=>{const t=MG(n),i=(r,s=e)=>wG(t,r,s);return Object.assign(i,t),i},kL=((n,e)=>n?f4(n,e):f4),CG=n=>typeof n=="object"&&typeof n.then=="function",Ld=[];function GL(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function VL(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of Ld)if(GL(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=Ld.indexOf(r);s!==-1&&Ld.splice(s,1)},promise:(CG(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(Ld.push(r),!t)throw r.promise}const jL=(n,e,t)=>VL(n,e,!1,t),RG=(n,e,t)=>void VL(n,e,!0,t),OG=n=>{if(n===void 0||n.length===0)Ld.splice(0,Ld.length);else{const e=Ld.find(t=>GL(n,t.keys,t.equal));e&&e.remove()}};var eM={exports:{}},tM={exports:{}},nM={exports:{}},iM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h4;function DG(){return h4||(h4=1,(function(n){function e(H,Q){var ne=H.length;H.push(Q);e:for(;0<ne;){var re=ne-1>>>1,G=H[re];if(0<r(G,Q))H[re]=Q,H[ne]=G,ne=re;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var Q=H[0],ne=H.pop();if(ne!==Q){H[0]=ne;e:for(var re=0,G=H.length,X=G>>>1;re<X;){var ie=2*(re+1)-1,se=H[ie],ee=ie+1,ue=H[ee];if(0>r(se,ne))ee<G&&0>r(ue,se)?(H[re]=ue,H[ee]=ne,re=ee):(H[re]=se,H[ie]=ne,re=ie);else if(ee<G&&0>r(ue,ne))H[re]=ue,H[ee]=ne,re=ee;else break e}}return Q}function r(H,Q){var ne=H.sortIndex-Q.sortIndex;return ne!==0?ne:H.id-Q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,p=null,g=3,y=!1,x=!1,M=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function A(H){for(var Q=t(u);Q!==null;){if(Q.callback===null)i(u);else if(Q.startTime<=H)i(u),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=t(u)}}function w(H){if(M=!1,A(H),!x)if(t(c)!==null)x=!0,W();else{var Q=t(u);Q!==null&&te(w,Q.startTime-H)}}var D=!1,O=-1,P=5,B=-1;function I(){return!(n.unstable_now()-B<P)}function z(){if(D){var H=n.unstable_now();B=H;var Q=!0;try{e:{x=!1,M&&(M=!1,S(O),O=-1),y=!0;var ne=g;try{t:{for(A(H),p=t(c);p!==null&&!(p.expirationTime>H&&I());){var re=p.callback;if(typeof re=="function"){p.callback=null,g=p.priorityLevel;var G=re(p.expirationTime<=H);if(H=n.unstable_now(),typeof G=="function"){p.callback=G,A(H),Q=!0;break t}p===t(c)&&i(c),A(H)}else i(c);p=t(c)}if(p!==null)Q=!0;else{var X=t(u);X!==null&&te(w,X.startTime-H),Q=!1}}break e}finally{p=null,g=ne,y=!1}Q=void 0}}finally{Q?k():D=!1}}}var k;if(typeof T=="function")k=function(){T(z)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,j=V.port2;V.port1.onmessage=z,k=function(){j.postMessage(null)}}else k=function(){b(z,0)};function W(){D||(D=!0,k())}function te(H,Q){O=b(function(){H(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){x||y||(x=!0,W())},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(H){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var ne=g;g=Q;try{return H()}finally{g=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=g;g=H;try{return Q()}finally{g=ne}},n.unstable_scheduleCallback=function(H,Q,ne){var re=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?re+ne:re):ne=re,H){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ne+G,H={id:h++,callback:Q,priorityLevel:H,startTime:ne,expirationTime:G,sortIndex:-1},ne>re?(H.sortIndex=ne,e(u,H),t(c)===null&&H===t(u)&&(M?(S(O),O=-1):M=!0,te(w,ne-re))):(H.sortIndex=G,e(c,H),x||y||(x=!0,W())),H},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(H){var Q=g;return function(){var ne=g;g=Q;try{return H.apply(this,arguments)}finally{g=ne}}}})(iM)),iM}var d4;function WL(){return d4||(d4=1,nM.exports=DG()),nM.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p4;function UG(){return p4||(p4=1,(function(n){n.exports=function(e){function t(d,m,E,R){return new s0(d,m,E,R)}function i(){}function r(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)m+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(d){return d===null||typeof d!="object"?null:(d=Sl&&d[Sl]||d["@@iterator"],typeof d=="function"?d:null)}function a(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===c0?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case hc:return"Fragment";case Ta:return"Portal";case Tp:return"Profiler";case Fh:return"StrictMode";case Ap:return"Suspense";case lf:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case Ka:return(d.displayName||"Context")+".Provider";case o0:return(d._context.displayName||"Context")+".Consumer";case kh:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case wp:return m=d.displayName||null,m!==null?m:a(d.type)||"Memo";case Aa:m=d._payload,d=d._init;try{return a(d(m))}catch{}}return null}function o(d){if(xo===void 0)try{throw Error()}catch(E){var m=E.stack.trim().match(/\n( *(at )?)/);xo=m&&m[1]||"",El=-1<E.stack.indexOf(`
    at`)?" (<anonymous>)":-1<E.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xo+d+El}function c(d,m){if(!d||tu)return"";tu=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var R={DetermineComponentFrameRoot:function(){try{if(m){var Bt=function(){throw Error()};if(Object.defineProperty(Bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Bt,[])}catch(xn){var Ft=xn}Reflect.construct(d,[],Bt)}else{try{Bt.call()}catch(xn){Ft=xn}d.call(Bt.prototype)}}else{try{throw Error()}catch(xn){Ft=xn}(Bt=d())&&typeof Bt.catch=="function"&&Bt.catch(function(){})}}catch(xn){if(xn&&Ft&&typeof xn.stack=="string")return[xn.stack,Ft.stack]}return[null,null]}};R.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(R.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(R.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var F=R.DetermineComponentFrameRoot(),ce=F[0],Me=F[1];if(ce&&Me){var Ne=ce.split(`
`),pt=Me.split(`
`);for(N=R=0;R<Ne.length&&!Ne[R].includes("DetermineComponentFrameRoot");)R++;for(;N<pt.length&&!pt[N].includes("DetermineComponentFrameRoot");)N++;if(R===Ne.length||N===pt.length)for(R=Ne.length-1,N=pt.length-1;1<=R&&0<=N&&Ne[R]!==pt[N];)N--;for(;1<=R&&0<=N;R--,N--)if(Ne[R]!==pt[N]){if(R!==1||N!==1)do if(R--,N--,0>N||Ne[R]!==pt[N]){var At=`
`+Ne[R].replace(" at new "," at ");return d.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",d.displayName)),At}while(1<=R&&0<=N);break}}}finally{tu=!1,Error.prepareStackTrace=E}return(E=d?d.displayName||d.name:"")?o(E):""}function u(d){switch(d.tag){case 26:case 27:case 5:return o(d.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return d=c(d.type,!1),d;case 11:return d=c(d.type.render,!1),d;case 1:return d=c(d.type,!0),d;default:return""}}function h(d){try{var m="";do m+=u(d),d=d.return;while(d);return m}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}function p(d){var m=d,E=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,(m.flags&4098)!==0&&(E=m.return),d=m.return;while(d)}return m.tag===3?E:null}function g(d){if(p(d)!==d)throw Error(r(188))}function y(d){var m=d.alternate;if(!m){if(m=p(d),m===null)throw Error(r(188));return m!==d?null:d}for(var E=d,R=m;;){var N=E.return;if(N===null)break;var F=N.alternate;if(F===null){if(R=N.return,R!==null){E=R;continue}break}if(N.child===F.child){for(F=N.child;F;){if(F===E)return g(N),d;if(F===R)return g(N),m;F=F.sibling}throw Error(r(188))}if(E.return!==R.return)E=N,R=F;else{for(var ce=!1,Me=N.child;Me;){if(Me===E){ce=!0,E=N,R=F;break}if(Me===R){ce=!0,R=N,E=F;break}Me=Me.sibling}if(!ce){for(Me=F.child;Me;){if(Me===E){ce=!0,E=F,R=N;break}if(Me===R){ce=!0,R=F,E=N;break}Me=Me.sibling}if(!ce)throw Error(r(189))}}if(E.alternate!==R)throw Error(r(190))}if(E.tag!==3)throw Error(r(188));return E.stateNode.current===E?d:m}function x(d){var m=d.tag;if(m===5||m===26||m===27||m===6)return d;for(d=d.child;d!==null;){if(m=x(d),m!==null)return m;d=d.sibling}return null}function M(d){var m=d.tag;if(m===5||m===26||m===27||m===6)return d;for(d=d.child;d!==null;){if(d.tag!==4&&(m=M(d),m!==null))return m;d=d.sibling}return null}function b(d){return{current:d}}function S(d){0>wl||(d.current=Ji[wl],Ji[wl]=null,wl--)}function T(d,m){wl++,Ji[wl]=d.current,d.current=m}function A(d){return d>>>=0,d===0?32:31-(G1(d)/V1|0)|0}function w(d){var m=d&42;if(m!==0)return m;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function D(d,m){var E=d.pendingLanes;if(E===0)return 0;var R=0,N=d.suspendedLanes,F=d.pingedLanes,ce=d.warmLanes;d=d.finishedLanes!==0;var Me=E&134217727;return Me!==0?(E=Me&~N,E!==0?R=w(E):(F&=Me,F!==0?R=w(F):d||(ce=Me&~ce,ce!==0&&(R=w(ce))))):(Me=E&~N,Me!==0?R=w(Me):F!==0?R=w(F):d||(ce=E&~ce,ce!==0&&(R=w(ce)))),R===0?0:m!==0&&m!==R&&(m&N)===0&&(N=R&-R,ce=m&-m,N>=ce||N===32&&(ce&4194176)!==0)?m:R}function O(d,m){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&m)===0}function P(d,m){switch(d){case 1:case 2:case 4:case 8:return m+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B(){var d=So;return So<<=1,(So&4194176)===0&&(So=128),d}function I(){var d=ru;return ru<<=1,(ru&62914560)===0&&(ru=4194304),d}function z(d){for(var m=[],E=0;31>E;E++)m.push(d);return m}function k(d,m){d.pendingLanes|=m,m!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function V(d,m,E,R,N,F){var ce=d.pendingLanes;d.pendingLanes=E,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=E,d.entangledLanes&=E,d.errorRecoveryDisabledLanes&=E,d.shellSuspendCounter=0;var Me=d.entanglements,Ne=d.expirationTimes,pt=d.hiddenUpdates;for(E=ce&~E;0<E;){var At=31-hs(E),Bt=1<<At;Me[At]=0,Ne[At]=-1;var Ft=pt[At];if(Ft!==null)for(pt[At]=null,At=0;At<Ft.length;At++){var xn=Ft[At];xn!==null&&(xn.lane&=-536870913)}E&=~Bt}R!==0&&j(d,R,0),F!==0&&N===0&&d.tag!==0&&(d.suspendedLanes|=F&~(ce&~m))}function j(d,m,E){d.pendingLanes|=m,d.suspendedLanes&=~m;var R=31-hs(m);d.entangledLanes|=m,d.entanglements[R]=d.entanglements[R]|1073741824|E&4194218}function W(d,m){var E=d.entangledLanes|=m;for(d=d.entanglements;E;){var R=31-hs(E),N=1<<R;N&m|d[R]&m&&(d[R]|=m),E&=~N}}function te(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function H(d){if(Os&&typeof Os.onCommitFiberRoot=="function")try{Os.onCommitFiberRoot(er,d,void 0,(d.current.flags&128)===128)}catch{}}function Q(d){if(typeof X1=="function"&&Or(d),Os&&typeof Os.setStrictMode=="function")try{Os.setStrictMode(er,d)}catch{}}function ne(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}function re(d,m){if(typeof d=="object"&&d!==null){var E=C0.get(d);return E!==void 0?E:(m={value:d,source:m,stack:h(m)},C0.set(d,m),m)}return{value:d,source:m,stack:h(m)}}function G(d,m){su[au++]=vf,su[au++]=ou,ou=d,vf=m}function X(d,m,E){Ks[$s++]=Ja,Ks[$s++]=eo,Ks[$s++]=_c,_c=d;var R=Ja;d=eo;var N=32-hs(R)-1;R&=~(1<<N),E+=1;var F=32-hs(m)+N;if(30<F){var ce=N-N%5;F=(R&(1<<ce)-1).toString(32),R>>=ce,N-=ce,Ja=1<<32-hs(m)+N|E<<N|R,eo=F+d}else Ja=1<<F|E<<N|R,eo=d}function ie(d){d.return!==null&&(G(d,1),X(d,1,0))}function se(d){for(;d===ou;)ou=su[--au],su[au]=null,vf=su[--au],su[au]=null;for(;d===_c;)_c=Ks[--$s],Ks[$s]=null,eo=Ks[--$s],Ks[$s]=null,Ja=Ks[--$s],Ks[$s]=null}function ee(d,m){T(Eo,m),T(yf,d),T(_r,null),d=o1(m),S(_r),T(_r,d)}function ue(){S(_r),S(yf),S(Eo)}function pe(d){d.memoizedState!==null&&T(lu,d);var m=_r.current,E=hf(m,d.type);m!==E&&(T(yf,d),T(_r,E))}function ve(d){yf.current===d&&(S(_r),S(yf)),lu.current===d&&(S(lu),us?$a._currentValue=pc:$a._currentValue2=pc)}function _e(d){var m=Error(r(418,""));throw He(re(m,d)),Kh}function Xe(d,m){if(!Gr)throw Error(r(175));U1(d.stateNode,d.type,d.memoizedProps,m,d)||_e(d)}function qe(d){for(Vr=d.return;Vr;)switch(Vr.tag){case 3:case 27:Dr=!0;return;case 5:case 13:Dr=!1;return;default:Vr=Vr.return}}function Be(d){if(!Gr||d!==Vr)return!1;if(!Yn)return qe(d),Yn=!0,!1;var m=!1;if(_i?d.tag!==3&&d.tag!==27&&(d.tag!==5||Ip(d.type)&&!En(d.type,d.memoizedProps))&&(m=!0):d.tag!==3&&(d.tag!==5||Ip(d.type)&&!En(d.type,d.memoizedProps))&&(m=!0),m&&jr&&_e(d),qe(d),d.tag===13){if(!Gr)throw Error(r(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));jr=N1(d)}else jr=Vr?M0(d.stateNode):null;return!0}function Se(){Gr&&(jr=Vr=null,Yn=!1)}function He(d){Ra===null?Ra=[d]:Ra.push(d)}function oe(){for(var d=cu,m=to=cu=0;m<d;){var E=Oa[m];Oa[m++]=null;var R=Oa[m];Oa[m++]=null;var N=Oa[m];Oa[m++]=null;var F=Oa[m];if(Oa[m++]=null,R!==null&&N!==null){var ce=R.pending;ce===null?N.next=N:(N.next=ce.next,ce.next=N),R.pending=N}F!==0&&De(E,N,F)}}function lt(d,m,E,R){Oa[cu++]=d,Oa[cu++]=m,Oa[cu++]=E,Oa[cu++]=R,to|=R,d.lanes|=R,d=d.alternate,d!==null&&(d.lanes|=R)}function ze(d,m,E,R){return lt(d,m,E,R),st(d)}function Qe(d,m){return lt(d,null,null,m),st(d)}function De(d,m,E){d.lanes|=E;var R=d.alternate;R!==null&&(R.lanes|=E);for(var N=!1,F=d.return;F!==null;)F.childLanes|=E,R=F.alternate,R!==null&&(R.childLanes|=E),F.tag===22&&(d=F.stateNode,d===null||d._visibility&1||(N=!0)),d=F,F=F.return;N&&m!==null&&d.tag===3&&(F=d.stateNode,N=31-hs(E),F=F.hiddenUpdates,d=F[N],d===null?F[N]=[m]:d.push(m),m.lane=E|536870912)}function st(d){if(50<wf)throw wf=0,$p=null,Error(r(185));for(var m=d.return;m!==null;)d=m,m=d.return;return d.tag===3?d.stateNode:null}function ke(d){d!==Cl&&d.next===null&&(Cl===null?$h=Cl=d:Cl=Cl.next=d),Ti=!0,uu||(uu=!0,Le(Y))}function $(d,m){if(!R0&&Ti){R0=!0;do for(var E=!1,R=$h;R!==null;){if(d!==0){var N=R.pendingLanes;if(N===0)var F=0;else{var ce=R.suspendedLanes,Me=R.pingedLanes;F=(1<<31-hs(42|d)+1)-1,F&=N&~(ce&~Me),F=F&201326677?F&201326677|1:F?F|2:0}F!==0&&(E=!0,Re(R,F))}else F=Hn,F=D(R,R===li?F:0),(F&3)===0||O(R,F)||(E=!0,Re(R,F));R=R.next}while(E);R0=!1}}function Y(){Ti=uu=!1;var d=0;_f!==0&&(f1()&&(d=_f),_f=0);for(var m=Ca(),E=null,R=$h;R!==null;){var N=R.next,F=fe(R,m);F===0?(R.next=null,E===null?$h=N:E.next=N,N===null&&(Cl=E)):(E=R,(d!==0||(F&3)!==0)&&(Ti=!0)),R=N}$(d)}function fe(d,m){for(var E=d.suspendedLanes,R=d.pingedLanes,N=d.expirationTimes,F=d.pendingLanes&-62914561;0<F;){var ce=31-hs(F),Me=1<<ce,Ne=N[ce];Ne===-1?((Me&E)===0||(Me&R)!==0)&&(N[ce]=P(Me,m)):Ne<=m&&(d.expiredLanes|=Me),F&=~Me}if(m=li,E=Hn,E=D(d,d===m?E:0),R=d.callbackNode,E===0||d===m&&vi===2||d.cancelPendingCommit!==null)return R!==null&&R!==null&&Hp(R),d.callbackNode=null,d.callbackPriority=0;if((E&3)===0||O(d,E)){if(m=E&-E,m===d.callbackPriority)return m;switch(R!==null&&Hp(R),te(E)){case 2:case 8:E=W1;break;case 32:E=Vp;break;case 268435456:E=OE;break;default:E=Vp}return R=Ee.bind(null,d),E=Zh(E,R),d.callbackPriority=m,d.callbackNode=E,m}return R!==null&&R!==null&&Hp(R),d.callbackPriority=2,d.callbackNode=null,2}function Ee(d,m){var E=d.callbackNode;if(Za()&&d.callbackNode!==E)return null;var R=Hn;return R=D(d,d===li?R:0),R===0?null:(oc(d,R,m),fe(d,Ca()),d.callbackNode!=null&&d.callbackNode===E?Ee.bind(null,d):null)}function Re(d,m){if(Za())return null;oc(d,m,!0)}function Le(d){p0?Al(function(){(Qn&6)!==0?Zh(Gp,d):d()}):Zh(Gp,d)}function Fe(){return _f===0&&(_f=B()),_f}function et(d,m){if(xf===null){var E=xf=[];fu=0,Qs=Fe(),hu={status:"pending",value:void 0,then:function(R){E.push(R)}}}return fu++,m.then(tt,tt),m}function tt(){if(--fu===0&&xf!==null){hu!==null&&(hu.status="fulfilled");var d=xf;xf=null,Qs=0,hu=null;for(var m=0;m<d.length;m++)(0,d[m])()}}function Ot(d,m){var E=[],R={status:"pending",value:null,reason:null,then:function(N){E.push(N)}};return d.then(function(){R.status="fulfilled",R.value=m;for(var N=0;N<E.length;N++)(0,E[N])(m)},function(N){for(R.status="rejected",R.reason=N,N=0;N<E.length;N++)(0,E[N])(void 0)}),R}function at(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yt(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function gt(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function ht(d,m,E){var R=d.updateQueue;if(R===null)return null;if(R=R.shared,(Qn&2)!==0){var N=R.pending;return N===null?m.next=m:(m.next=N.next,N.next=m),R.pending=m,m=st(d),De(d,null,E),m}return lt(d,R,m,E),st(d)}function nt(d,m,E){if(m=m.updateQueue,m!==null&&(m=m.shared,(E&4194176)!==0)){var R=m.lanes;R&=d.pendingLanes,E|=R,m.lanes=E,W(d,E)}}function wt(d,m){var E=d.updateQueue,R=d.alternate;if(R!==null&&(R=R.updateQueue,E===R)){var N=null,F=null;if(E=E.firstBaseUpdate,E!==null){do{var ce={lane:E.lane,tag:E.tag,payload:E.payload,callback:null,next:null};F===null?N=F=ce:F=F.next=ce,E=E.next}while(E!==null);F===null?N=F=m:F=F.next=m}else N=F=m;E={baseState:R.baseState,firstBaseUpdate:N,lastBaseUpdate:F,shared:R.shared,callbacks:R.callbacks},d.updateQueue=E;return}d=E.lastBaseUpdate,d===null?E.firstBaseUpdate=m:d.next=m,E.lastBaseUpdate=m}function St(){if(du){var d=hu;if(d!==null)throw d}}function Ht(d,m,E,R){du=!1;var N=d.updateQueue;Rl=!1;var F=N.firstBaseUpdate,ce=N.lastBaseUpdate,Me=N.shared.pending;if(Me!==null){N.shared.pending=null;var Ne=Me,pt=Ne.next;Ne.next=null,ce===null?F=pt:ce.next=pt,ce=Ne;var At=d.alternate;At!==null&&(At=At.updateQueue,Me=At.lastBaseUpdate,Me!==ce&&(Me===null?At.firstBaseUpdate=pt:Me.next=pt,At.lastBaseUpdate=Ne))}if(F!==null){var Bt=N.baseState;ce=0,At=pt=Ne=null,Me=F;do{var Ft=Me.lane&-536870913,xn=Ft!==Me.lane;if(xn?(Hn&Ft)===Ft:(R&Ft)===Ft){Ft!==0&&Ft===Qs&&(du=!0),At!==null&&(At=At.next={lane:0,tag:Me.tag,payload:Me.payload,callback:null,next:null});e:{var aa=d,Cc=Me;Ft=m;var Rc=E;switch(Cc.tag){case 1:if(aa=Cc.payload,typeof aa=="function"){Bt=aa.call(Rc,Bt,Ft);break e}Bt=aa;break e;case 3:aa.flags=aa.flags&-65537|128;case 0:if(aa=Cc.payload,Ft=typeof aa=="function"?aa.call(Rc,Bt,Ft):aa,Ft==null)break e;Bt=Mp({},Bt,Ft);break e;case 2:Rl=!0}}Ft=Me.callback,Ft!==null&&(d.flags|=64,xn&&(d.flags|=8192),xn=N.callbacks,xn===null?N.callbacks=[Ft]:xn.push(Ft))}else xn={lane:Ft,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null},At===null?(pt=At=xn,Ne=Bt):At=At.next=xn,ce|=Ft;if(Me=Me.next,Me===null){if(Me=N.shared.pending,Me===null)break;xn=Me,Me=xn.next,xn.next=null,N.lastBaseUpdate=xn,N.shared.pending=null}}while(!0);At===null&&(Ne=Bt),N.baseState=Ne,N.firstBaseUpdate=pt,N.lastBaseUpdate=At,F===null&&(N.shared.lanes=0),ra|=ce,d.lanes=ce,d.memoizedState=Bt}}function Te(d,m){if(typeof d!="function")throw Error(r(191,d));d.call(m)}function Oe(d,m){var E=d.callbacks;if(E!==null)for(d.callbacks=null,d=0;d<E.length;d++)Te(E[d],m)}function Pe(d,m){if(Ds(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var E=Object.keys(d),R=Object.keys(m);if(E.length!==R.length)return!1;for(R=0;R<E.length;R++){var N=E[R];if(!Mo.call(m,N)||!Ds(d[N],m[N]))return!1}return!0}function ct(d){return d=d.status,d==="fulfilled"||d==="rejected"}function xt(){}function je(d,m,E){switch(E=d[E],E===void 0?d.push(m):E!==m&&(m.then(xt,xt),m=E),m.status){case"fulfilled":return m.value;case"rejected":throw d=m.reason,d===bf?Error(r(483)):d;default:if(typeof m.status=="string")m.then(xt,xt);else{if(d=li,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=m,d.status="pending",d.then(function(R){if(m.status==="pending"){var N=m;N.status="fulfilled",N.value=R}},function(R){if(m.status==="pending"){var N=m;N.status="rejected",N.reason=R}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw d=m.reason,d===bf?Error(r(483)):d}throw xc=m,bf}}function Ct(){if(xc===null)throw Error(r(459));var d=xc;return xc=null,d}function zt(d){var m=Sc;return Sc+=1,bc===null&&(bc=[]),je(bc,d,m)}function Dt(d,m){m=m.props.ref,d.ref=m!==void 0?m:null}function Gt(d,m){throw m.$$typeof===EE?Error(r(525)):(d=Object.prototype.toString.call(m),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d)))}function tn(d){var m=d._init;return m(d._payload)}function Jt(d){function m(Ye,we){if(d){var Je=Ye.deletions;Je===null?(Ye.deletions=[we],Ye.flags|=16):Je.push(we)}}function E(Ye,we){if(!d)return null;for(;we!==null;)m(Ye,we),we=we.sibling;return null}function R(Ye){for(var we=new Map;Ye!==null;)Ye.key!==null?we.set(Ye.key,Ye):we.set(Ye.index,Ye),Ye=Ye.sibling;return we}function N(Ye,we){return Ye=Ma(Ye,we),Ye.index=0,Ye.sibling=null,Ye}function F(Ye,we,Je){return Ye.index=Je,d?(Je=Ye.alternate,Je!==null?(Je=Je.index,Je<we?(Ye.flags|=33554434,we):Je):(Ye.flags|=33554434,we)):(Ye.flags|=1048576,we)}function ce(Ye){return d&&Ye.alternate===null&&(Ye.flags|=33554434),Ye}function Me(Ye,we,Je,Tt){return we===null||we.tag!==6?(we=Sp(Je,Ye.mode,Tt),we.return=Ye,we):(we=N(we,Je),we.return=Ye,we)}function Ne(Ye,we,Je,Tt){var Yt=Je.type;return Yt===hc?At(Ye,we,Je.props.children,Tt,Je.key):we!==null&&(we.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===Aa&&tn(Yt)===we.type)?(we=N(we,Je.props),Dt(we,Je),we.return=Ye,we):(we=_o(Je.type,Je.key,Je.props,null,Ye.mode,Tt),Dt(we,Je),we.return=Ye,we)}function pt(Ye,we,Je,Tt){return we===null||we.tag!==4||we.stateNode.containerInfo!==Je.containerInfo||we.stateNode.implementation!==Je.implementation?(we=a0(Je,Ye.mode,Tt),we.return=Ye,we):(we=N(we,Je.children||[]),we.return=Ye,we)}function At(Ye,we,Je,Tt,Yt){return we===null||we.tag!==7?(we=Vi(Je,Ye.mode,Tt,Yt),we.return=Ye,we):(we=N(we,Je),we.return=Ye,we)}function Bt(Ye,we,Je){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=Sp(""+we,Ye.mode,Je),we.return=Ye,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case zh:return Je=_o(we.type,we.key,we.props,null,Ye.mode,Je),Dt(Je,we),Je.return=Ye,Je;case Ta:return we=a0(we,Ye.mode,Je),we.return=Ye,we;case Aa:var Tt=we._init;return we=Tt(we._payload),Bt(Ye,we,Je)}if(cf(we)||s(we))return we=Vi(we,Ye.mode,Je,null),we.return=Ye,we;if(typeof we.then=="function")return Bt(Ye,zt(we),Je);if(we.$$typeof===Ka)return Bt(Ye,Eh(Ye,we),Je);Gt(Ye,we)}return null}function Ft(Ye,we,Je,Tt){var Yt=we!==null?we.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Yt!==null?null:Me(Ye,we,""+Je,Tt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case zh:return Je.key===Yt?Ne(Ye,we,Je,Tt):null;case Ta:return Je.key===Yt?pt(Ye,we,Je,Tt):null;case Aa:return Yt=Je._init,Je=Yt(Je._payload),Ft(Ye,we,Je,Tt)}if(cf(Je)||s(Je))return Yt!==null?null:At(Ye,we,Je,Tt,null);if(typeof Je.then=="function")return Ft(Ye,we,zt(Je),Tt);if(Je.$$typeof===Ka)return Ft(Ye,we,Eh(Ye,Je),Tt);Gt(Ye,Je)}return null}function xn(Ye,we,Je,Tt,Yt){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return Ye=Ye.get(Je)||null,Me(we,Ye,""+Tt,Yt);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case zh:return Ye=Ye.get(Tt.key===null?Je:Tt.key)||null,Ne(we,Ye,Tt,Yt);case Ta:return Ye=Ye.get(Tt.key===null?Je:Tt.key)||null,pt(we,Ye,Tt,Yt);case Aa:var Li=Tt._init;return Tt=Li(Tt._payload),xn(Ye,we,Je,Tt,Yt)}if(cf(Tt)||s(Tt))return Ye=Ye.get(Je)||null,At(we,Ye,Tt,Yt,null);if(typeof Tt.then=="function")return xn(Ye,we,Je,zt(Tt),Yt);if(Tt.$$typeof===Ka)return xn(Ye,we,Je,Eh(we,Tt),Yt);Gt(we,Tt)}return null}function aa(Ye,we,Je,Tt){for(var Yt=null,Li=null,hn=we,ti=we=0,tr=null;hn!==null&&ti<Je.length;ti++){hn.index>ti?(tr=hn,hn=null):tr=hn.sibling;var Fn=Ft(Ye,hn,Je[ti],Tt);if(Fn===null){hn===null&&(hn=tr);break}d&&hn&&Fn.alternate===null&&m(Ye,hn),we=F(Fn,we,ti),Li===null?Yt=Fn:Li.sibling=Fn,Li=Fn,hn=tr}if(ti===Je.length)return E(Ye,hn),Yn&&G(Ye,ti),Yt;if(hn===null){for(;ti<Je.length;ti++)hn=Bt(Ye,Je[ti],Tt),hn!==null&&(we=F(hn,we,ti),Li===null?Yt=hn:Li.sibling=hn,Li=hn);return Yn&&G(Ye,ti),Yt}for(hn=R(hn);ti<Je.length;ti++)tr=xn(hn,Ye,ti,Je[ti],Tt),tr!==null&&(d&&tr.alternate!==null&&hn.delete(tr.key===null?ti:tr.key),we=F(tr,we,ti),Li===null?Yt=tr:Li.sibling=tr,Li=tr);return d&&hn.forEach(function(Uo){return m(Ye,Uo)}),Yn&&G(Ye,ti),Yt}function Cc(Ye,we,Je,Tt){if(Je==null)throw Error(r(151));for(var Yt=null,Li=null,hn=we,ti=we=0,tr=null,Fn=Je.next();hn!==null&&!Fn.done;ti++,Fn=Je.next()){hn.index>ti?(tr=hn,hn=null):tr=hn.sibling;var Uo=Ft(Ye,hn,Fn.value,Tt);if(Uo===null){hn===null&&(hn=tr);break}d&&hn&&Uo.alternate===null&&m(Ye,hn),we=F(Uo,we,ti),Li===null?Yt=Uo:Li.sibling=Uo,Li=Uo,hn=tr}if(Fn.done)return E(Ye,hn),Yn&&G(Ye,ti),Yt;if(hn===null){for(;!Fn.done;ti++,Fn=Je.next())Fn=Bt(Ye,Fn.value,Tt),Fn!==null&&(we=F(Fn,we,ti),Li===null?Yt=Fn:Li.sibling=Fn,Li=Fn);return Yn&&G(Ye,ti),Yt}for(hn=R(hn);!Fn.done;ti++,Fn=Je.next())Fn=xn(hn,Ye,ti,Fn.value,Tt),Fn!==null&&(d&&Fn.alternate!==null&&hn.delete(Fn.key===null?ti:Fn.key),we=F(Fn,we,ti),Li===null?Yt=Fn:Li.sibling=Fn,Li=Fn);return d&&hn.forEach(function(Qp){return m(Ye,Qp)}),Yn&&G(Ye,ti),Yt}function Rc(Ye,we,Je,Tt){if(typeof Je=="object"&&Je!==null&&Je.type===hc&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case zh:e:{for(var Yt=Je.key;we!==null;){if(we.key===Yt){if(Yt=Je.type,Yt===hc){if(we.tag===7){E(Ye,we.sibling),Tt=N(we,Je.props.children),Tt.return=Ye,Ye=Tt;break e}}else if(we.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===Aa&&tn(Yt)===we.type){E(Ye,we.sibling),Tt=N(we,Je.props),Dt(Tt,Je),Tt.return=Ye,Ye=Tt;break e}E(Ye,we);break}else m(Ye,we);we=we.sibling}Je.type===hc?(Tt=Vi(Je.props.children,Ye.mode,Tt,Je.key),Tt.return=Ye,Ye=Tt):(Tt=_o(Je.type,Je.key,Je.props,null,Ye.mode,Tt),Dt(Tt,Je),Tt.return=Ye,Ye=Tt)}return ce(Ye);case Ta:e:{for(Yt=Je.key;we!==null;){if(we.key===Yt)if(we.tag===4&&we.stateNode.containerInfo===Je.containerInfo&&we.stateNode.implementation===Je.implementation){E(Ye,we.sibling),Tt=N(we,Je.children||[]),Tt.return=Ye,Ye=Tt;break e}else{E(Ye,we);break}else m(Ye,we);we=we.sibling}Tt=a0(Je,Ye.mode,Tt),Tt.return=Ye,Ye=Tt}return ce(Ye);case Aa:return Yt=Je._init,Je=Yt(Je._payload),Rc(Ye,we,Je,Tt)}if(cf(Je))return aa(Ye,we,Je,Tt);if(s(Je)){if(Yt=s(Je),typeof Yt!="function")throw Error(r(150));return Je=Yt.call(Je),Cc(Ye,we,Je,Tt)}if(typeof Je.then=="function")return Rc(Ye,we,zt(Je),Tt);if(Je.$$typeof===Ka)return Rc(Ye,we,Eh(Ye,Je),Tt);Gt(Ye,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint"?(Je=""+Je,we!==null&&we.tag===6?(E(Ye,we.sibling),Tt=N(we,Je),Tt.return=Ye,Ye=Tt):(E(Ye,we),Tt=Sp(Je,Ye.mode,Tt),Tt.return=Ye,Ye=Tt),ce(Ye)):E(Ye,we)}return function(Ye,we,Je,Tt){try{Sc=0;var Yt=Rc(Ye,we,Je,Tt);return bc=null,Yt}catch(hn){if(hn===bf)throw hn;var Li=t(29,hn,null,Ye.mode);return Li.lanes=Tt,Li.return=Ye,Li}finally{}}}function un(d,m){d=ns,T(Sf,d),T(Ai,m),ns=d|m.baseLanes}function mn(){T(Sf,ns),T(Ai,Ai.current)}function bn(){ns=Sf.current,S(Ai),S(Sf)}function hi(d){var m=d.alternate;T(xr,xr.current&1),T(Js,d),xi===null&&(m===null||Ai.current!==null||m.memoizedState!==null)&&(xi=d)}function gi(d){if(d.tag===22){if(T(xr,xr.current),T(Js,d),xi===null){var m=d.alternate;m!==null&&m.memoizedState!==null&&(xi=d)}}else Mi()}function Mi(){T(xr,xr.current),T(Js,Js.current)}function Xt(d){S(Js),xi===d&&(xi=null),S(xr)}function ri(d){for(var m=d;m!==null;){if(m.tag===13){var E=m.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||Lp(E)||Np(E)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function In(){throw Error(r(321))}function K(d,m){if(m===null)return!1;for(var E=0;E<m.length&&E<d.length;E++)if(!Ds(d[E],m[E]))return!1;return!0}function le(d,m,E,R,N,F){return Ol=F,On=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,fn.H=d===null||d.memoizedState===null?Tc:ds,Mc=!1,F=E(R,N),Mc=!1,pu&&(F=Ge(m,E,R,N)),Ae(d),F}function Ae(d){fn.H=ji;var m=en!==null&&en.next!==null;if(Ol=0,$n=en=On=null,Da=!1,mu=0,Ur=null,m)throw Error(r(300));d===null||bi||(d=d.dependencies,d!==null&&Sh(d)&&(bi=!0))}function Ge(d,m,E,R){On=d;var N=0;do{if(pu&&(Ur=null),mu=0,pu=!1,25<=N)throw Error(r(301));if(N+=1,$n=en=null,d.updateQueue!=null){var F=d.updateQueue;F.lastEffect=null,F.events=null,F.stores=null,F.memoCache!=null&&(F.memoCache.index=0)}fn.H=ea,F=m(E,R)}while(pu);return F}function We(){var d=fn.H,m=d.useState()[0];return m=typeof m.then=="function"?xe(m):m,d=d.useState()[0],(en!==null?en.memoizedState:null)!==d&&(On.flags|=1024),m}function rt(){var d=jp!==0;return jp=0,d}function bt(d,m,E){m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~E}function Z(d){if(Da){for(d=d.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Da=!1}Ol=0,$n=en=On=null,pu=!1,mu=jp=0,Ur=null}function me(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?On.memoizedState=$n=d:$n=$n.next=d,$n}function ye(){if(en===null){var d=On.alternate;d=d!==null?d.memoizedState:null}else d=en.next;var m=$n===null?On.memoizedState:$n.next;if(m!==null)$n=m,en=d;else{if(d===null)throw On.alternate===null?Error(r(467)):Error(r(310));en=d,d={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},$n===null?On.memoizedState=$n=d:$n=$n.next=d}return $n}function xe(d){var m=mu;return mu+=1,Ur===null&&(Ur=[]),d=je(Ur,d,m),m=On,($n===null?m.memoizedState:$n.next)===null&&(m=m.alternate,fn.H=m===null||m.memoizedState===null?Tc:ds),d}function he(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return xe(d);if(d.$$typeof===Ka)return zr(d)}throw Error(r(438,String(d)))}function ut(d){var m=null,E=On.updateQueue;if(E!==null&&(m=E.memoCache),m==null){var R=On.alternate;R!==null&&(R=R.updateQueue,R!==null&&(R=R.memoCache,R!=null&&(m={data:R.data.map(function(N){return N.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),E===null&&(E=Wp(),On.updateQueue=E),E.memoCache=m,E=m.data[m.index],E===void 0)for(E=m.data[m.index]=Array(d),R=0;R<d;R++)E[R]=a1;return m.index++,E}function it(d,m){return typeof m=="function"?m(d):m}function ot(d){var m=ye();return dt(m,en,d)}function dt(d,m,E){var R=d.queue;if(R===null)throw Error(r(311));R.lastRenderedReducer=E;var N=d.baseQueue,F=R.pending;if(F!==null){if(N!==null){var ce=N.next;N.next=F.next,F.next=ce}m.baseQueue=N=F,R.pending=null}if(F=d.baseState,N===null)d.memoizedState=F;else{m=N.next;var Me=ce=null,Ne=null,pt=m,At=!1;do{var Bt=pt.lane&-536870913;if(Bt!==pt.lane?(Hn&Bt)===Bt:(Ol&Bt)===Bt){var Ft=pt.revertLane;if(Ft===0)Ne!==null&&(Ne=Ne.next={lane:0,revertLane:0,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null}),Bt===Qs&&(At=!0);else if((Ol&Ft)===Ft){pt=pt.next,Ft===Qs&&(At=!0);continue}else Bt={lane:0,revertLane:pt.revertLane,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null},Ne===null?(Me=Ne=Bt,ce=F):Ne=Ne.next=Bt,On.lanes|=Ft,ra|=Ft;Bt=pt.action,Mc&&E(F,Bt),F=pt.hasEagerState?pt.eagerState:E(F,Bt)}else Ft={lane:Bt,revertLane:pt.revertLane,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null},Ne===null?(Me=Ne=Ft,ce=F):Ne=Ne.next=Ft,On.lanes|=Bt,ra|=Bt;pt=pt.next}while(pt!==null&&pt!==m);if(Ne===null?ce=F:Ne.next=Me,!Ds(F,d.memoizedState)&&(bi=!0,At&&(E=hu,E!==null)))throw E;d.memoizedState=F,d.baseState=ce,d.baseQueue=Ne,R.lastRenderedState=F}return N===null&&(R.lanes=0),[d.memoizedState,R.dispatch]}function Et(d){var m=ye(),E=m.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=d;var R=E.dispatch,N=E.pending,F=m.memoizedState;if(N!==null){E.pending=null;var ce=N=N.next;do F=d(F,ce.action),ce=ce.next;while(ce!==N);Ds(F,m.memoizedState)||(bi=!0),m.memoizedState=F,m.baseQueue===null&&(m.baseState=F),E.lastRenderedState=F}return[F,R]}function Lt(d,m,E){var R=On,N=ye(),F=Yn;if(F){if(E===void 0)throw Error(r(407));E=E()}else E=m();var ce=!Ds((en||N).memoizedState,E);if(ce&&(N.memoizedState=E,bi=!0),N=N.queue,nl($t.bind(null,R,N,d),[d]),N.getSnapshot!==m||ce||$n!==null&&$n.memoizedState.tag&1){if(R.flags|=2048,Ni(9,Vt.bind(null,R,N,E,m),{destroy:void 0},null),li===null)throw Error(r(349));F||(Ol&60)!==0||Mt(R,m,E)}return E}function Mt(d,m,E){d.flags|=16384,d={getSnapshot:m,value:E},m=On.updateQueue,m===null?(m=Wp(),On.updateQueue=m,m.stores=[d]):(E=m.stores,E===null?m.stores=[d]:E.push(d))}function Vt(d,m,E,R){m.value=E,m.getSnapshot=R,Zt(m)&&Rn(d)}function $t(d,m,E){return E(function(){Zt(m)&&Rn(d)})}function Zt(d){var m=d.getSnapshot;d=d.value;try{var E=m();return!Ds(d,E)}catch{return!0}}function Rn(d){var m=Qe(d,2);m!==null&&Rr(m,d,2)}function Nt(d){var m=me();if(typeof d=="function"){var E=d;if(d=E(),Mc){Q(!0);try{E()}finally{Q(!1)}}}return m.memoizedState=m.baseState=d,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:d},m}function Pt(d,m,E,R){return d.baseState=E,dt(d,en,typeof R=="function"?R:it)}function Vn(d,m,E,R,N){if(Jl(d))throw Error(r(485));if(d=m.action,d!==null){var F={payload:N,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ce){F.listeners.push(ce)}};fn.T!==null?E(!0):F.isTransition=!1,R(F),E=m.pending,E===null?(F.next=m.pending=F,dn(m,F)):(F.next=E.next,m.pending=E.next=F)}}function dn(d,m){var E=m.action,R=m.payload,N=d.state;if(m.isTransition){var F=fn.T,ce={};fn.T=ce;try{var Me=E(N,R),Ne=fn.S;Ne!==null&&Ne(ce,Me),jn(d,m,Me)}catch(pt){Bn(d,m,pt)}finally{fn.T=F}}else try{F=E(N,R),jn(d,m,F)}catch(pt){Bn(d,m,pt)}}function jn(d,m,E){E!==null&&typeof E=="object"&&typeof E.then=="function"?E.then(function(R){vn(d,m,R)},function(R){return Bn(d,m,R)}):vn(d,m,E)}function vn(d,m,E){m.status="fulfilled",m.value=E,ln(m),d.state=E,m=d.pending,m!==null&&(E=m.next,E===m?d.pending=null:(E=E.next,m.next=E,dn(d,E)))}function Bn(d,m,E){var R=d.pending;if(d.pending=null,R!==null){R=R.next;do m.status="rejected",m.reason=E,ln(m),m=m.next;while(m!==R)}d.action=null}function ln(d){d=d.listeners;for(var m=0;m<d.length;m++)(0,d[m])()}function kt(d,m){return m}function ii(d,m){if(Yn){var E=li.formState;if(E!==null){e:{var R=On;if(Yn){if(jr){var N=E0(jr,Dr);if(N){jr=M0(N),R=C1(N);break e}}_e(R)}R=!1}R&&(m=E[0])}}E=me(),E.memoizedState=E.baseState=m,R={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kt,lastRenderedState:m},E.queue=R,E=Yu.bind(null,On,R),R.dispatch=E,R=Nt(!1);var F=ll.bind(null,On,!1,R.queue);return R=me(),N={state:m,dispatch:null,action:d,pending:null},R.queue=N,E=Vn.bind(null,On,N,F,E),N.dispatch=E,R.memoizedState=d,[m,E,!1]}function si(d){var m=ye();return yn(m,en,d)}function yn(d,m,E){m=dt(d,m,kt)[0],d=ot(it)[0],m=typeof m=="object"&&m!==null&&typeof m.then=="function"?xe(m):m;var R=ye(),N=R.queue,F=N.dispatch;return E!==R.memoizedState&&(On.flags|=2048,Ni(9,di.bind(null,N,E),{destroy:void 0},null)),[m,F,d]}function di(d,m){d.action=m}function ya(d){var m=ye(),E=en;if(E!==null)return yn(m,E,d);ye(),m=m.memoizedState,E=ye();var R=E.queue.dispatch;return E.memoizedState=d,[m,R,!1]}function Ni(d,m,E,R){return d={tag:d,create:m,inst:E,deps:R,next:null},m=On.updateQueue,m===null&&(m=Wp(),On.updateQueue=m),E=m.lastEffect,E===null?m.lastEffect=d.next=d:(R=E.next,E.next=d,d.next=R,m.lastEffect=d),d}function qu(){return ye().memoizedState}function Kl(d,m,E,R){var N=me();On.flags|=d,N.memoizedState=Ni(1|m,E,{destroy:void 0},R===void 0?null:R)}function $l(d,m,E,R){var N=ye();R=R===void 0?null:R;var F=N.memoizedState.inst;en!==null&&R!==null&&K(R,en.memoizedState.deps)?N.memoizedState=Ni(m,E,F,R):(On.flags|=d,N.memoizedState=Ni(1|m,E,F,R))}function Ql(d,m){Kl(8390656,8,d,m)}function nl(d,m){$l(2048,8,d,m)}function gh(d,m){return $l(4,2,d,m)}function mo(d,m){return $l(4,4,d,m)}function Xa(d,m){if(typeof m=="function"){d=d();var E=m(d);return function(){typeof E=="function"?E():m(null)}}if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function qa(d,m,E){E=E!=null?E.concat([d]):null,$l(4,4,Xa.bind(null,m,d),E)}function bs(){}function go(d,m){var E=ye();m=m===void 0?null:m;var R=E.memoizedState;return m!==null&&K(m,R[1])?R[0]:(E.memoizedState=[d,m],d)}function il(d,m){var E=ye();m=m===void 0?null:m;var R=E.memoizedState;if(m!==null&&K(m,R[1]))return R[0];if(R=d(),Mc){Q(!0);try{d()}finally{Q(!1)}}return E.memoizedState=[R,m],R}function rl(d,m,E){return E===void 0||(Ol&1073741824)!==0?d.memoizedState=m:(d.memoizedState=E,d=e0(),On.lanes|=d,ra|=d,E)}function Yc(d,m,E,R){return Ds(E,m)?E:Ai.current!==null?(d=rl(d,E,R),Ds(d,m)||(bi=!0),d):(Ol&42)===0?(bi=!0,d.memoizedState=E):(d=e0(),On.lanes|=d,ra|=d,m)}function sl(d,m,E,R,N){var F=Tl();es(F!==0&&8>F?F:8);var ce=fn.T,Me={};fn.T=Me,ll(d,!1,m,E);try{var Ne=N(),pt=fn.S;if(pt!==null&&pt(Me,Ne),Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var At=Ot(Ne,R);_a(d,m,At,$i(d))}else _a(d,m,R,$i(d))}catch(Bt){_a(d,m,{then:function(){},status:"rejected",reason:Bt},$i())}finally{es(F),fn.T=ce}}function as(d){var m=d.memoizedState;if(m!==null)return m;m={memoizedState:pc,baseState:pc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:pc},next:null};var E={};return m.next={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:E},next:null},d.memoizedState=m,d=d.alternate,d!==null&&(d.memoizedState=m),m}function al(){return zr($a)}function ol(){return ye().memoizedState}function Zi(){return ye().memoizedState}function Zc(d){for(var m=d.return;m!==null;){switch(m.tag){case 24:case 3:var E=$i();d=gt(E);var R=ht(m,d,E);R!==null&&(Rr(R,m,E),nt(R,m,E)),m={cache:nc()},d.payload=m;return}m=m.return}}function Kc(d,m,E){var R=$i();E={lane:R,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null},Jl(d)?Ki(m,E):(E=ze(d,m,E,R),E!==null&&(Rr(E,d,R),Ss(E,m,R)))}function Yu(d,m,E){var R=$i();_a(d,m,E,R)}function _a(d,m,E,R){var N={lane:R,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null};if(Jl(d))Ki(m,N);else{var F=d.alternate;if(d.lanes===0&&(F===null||F.lanes===0)&&(F=m.lastRenderedReducer,F!==null))try{var ce=m.lastRenderedState,Me=F(ce,E);if(N.hasEagerState=!0,N.eagerState=Me,Ds(Me,ce))return lt(d,m,N,0),li===null&&oe(),!1}catch{}finally{}if(E=ze(d,m,N,R),E!==null)return Rr(E,d,R),Ss(E,m,R),!0}return!1}function ll(d,m,E,R){if(R={lane:2,revertLane:Fe(),action:R,hasEagerState:!1,eagerState:null,next:null},Jl(d)){if(m)throw Error(r(479))}else m=ze(d,E,R,2),m!==null&&Rr(m,d,2)}function Jl(d){var m=d.alternate;return d===On||m!==null&&m===On}function Ki(d,m){pu=Da=!0;var E=d.pending;E===null?m.next=m:(m.next=E.next,E.next=m),d.pending=m}function Ss(d,m,E){if((E&4194176)!==0){var R=m.lanes;R&=d.pendingLanes,E|=R,m.lanes=E,W(d,E)}}function os(d,m,E,R){m=d.memoizedState,E=E(R,m),E=E==null?m:Mp({},m,E),d.memoizedState=E,d.lanes===0&&(d.updateQueue.baseState=E)}function cl(d,m,E,R,N,F,ce){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(R,F,ce):m.prototype&&m.prototype.isPureReactComponent?!Pe(E,R)||!Pe(N,F):!0}function Zu(d,m,E,R){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(E,R),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(E,R),m.state!==d&&Ao.enqueueReplaceState(m,m.state,null)}function js(d,m){var E=m;if("ref"in m){E={};for(var R in m)R!=="ref"&&(E[R]=m[R])}if(d=d.defaultProps){E===m&&(E=Mp({},E));for(var N in d)E[N]===void 0&&(E[N]=d[N])}return E}function xa(d,m){try{var E=d.onUncaughtError;E(m.value,{componentStack:m.stack})}catch(R){setTimeout(function(){throw R})}}function ul(d,m,E){try{var R=d.onCaughtError;R(E.value,{componentStack:E.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function ba(d,m,E){return E=gt(E),E.tag=3,E.payload={element:null},E.callback=function(){xa(d,m)},E}function $c(d){return d=gt(d),d.tag=3,d}function Qr(d,m,E,R){var N=E.type.getDerivedStateFromError;if(typeof N=="function"){var F=R.value;d.payload=function(){return N(F)},d.callback=function(){ul(m,E,R)}}var ce=E.stateNode;ce!==null&&typeof ce.componentDidCatch=="function"&&(d.callback=function(){ul(m,E,R),typeof N!="function"&&(Ac===null?Ac=new Set([this]):Ac.add(this));var Me=R.stack;this.componentDidCatch(R.value,{componentStack:Me!==null?Me:""})})}function Ig(d,m,E,R,N){if(E.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){if(m=E.alternate,m!==null&&bh(m,E,N,!0),E=Js.current,E!==null){switch(E.tag){case 13:return xi===null?_l():E.alternate===null&&Si===0&&(Si=3),E.flags&=-257,E.flags|=65536,E.lanes=N,R===Jh?E.flags|=16384:(m=E.updateQueue,m===null?E.updateQueue=new Set([R]):m.add(R),eu(d,R,N)),!1;case 22:return E.flags|=65536,R===Jh?E.flags|=16384:(m=E.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([R])},E.updateQueue=m):(E=m.retryQueue,E===null?m.retryQueue=new Set([R]):E.add(R)),eu(d,R,N)),!1}throw Error(r(435,E.tag))}return eu(d,R,N),_l(),!1}if(Yn)return m=Js.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=N,R!==Kh&&(d=Error(r(422),{cause:R}),He(re(d,E)))):(R!==Kh&&(m=Error(r(423),{cause:R}),He(re(m,E))),d=d.current.alternate,d.flags|=65536,N&=-N,d.lanes|=N,R=re(R,E),N=ba(d.stateNode,R,N),wt(d,N),Si!==4&&(Si=2)),!1;var F=Error(r(520),{cause:R});if(F=re(F,E),vu===null?vu=[F]:vu.push(F),Si!==4&&(Si=2),m===null)return!0;R=re(R,E),E=m;do{switch(E.tag){case 3:return E.flags|=65536,d=N&-N,E.lanes|=d,d=ba(E.stateNode,R,d),wt(E,d),!1;case 1:if(m=E.type,F=E.stateNode,(E.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Ac===null||!Ac.has(F))))return E.flags|=65536,N&=-N,E.lanes|=N,N=$c(N),Qr(N,d,E,R),wt(E,N),!1}E=E.return}while(E!==null);return!1}function Gi(d,m,E,R){m.child=d===null?To(m,null,E,R):Ec(m,d.child,E,R)}function fl(d,m,E,R,N){E=E.render;var F=m.ref;if("ref"in R){var ce={};for(var Me in R)Me!=="ref"&&(ce[Me]=R[Me])}else ce=R;return tc(m),R=le(d,m,E,ce,F,N),Me=rt(),d!==null&&!bi?(bt(d,m,N),hl(d,m,N)):(Yn&&Me&&ie(m),m.flags|=1,Gi(d,m,R,N),m.child)}function vh(d,m,E,R,N){if(d===null){var F=E.type;return typeof F=="function"&&!Nh(F)&&F.defaultProps===void 0&&E.compare===null?(m.tag=15,m.type=F,op(d,m,F,R,N)):(d=_o(E.type,null,R,m,m.mode,N),d.ref=m.ref,d.return=m,m.child=d)}if(F=d.child,!kg(d,N)){var ce=F.memoizedProps;if(E=E.compare,E=E!==null?E:Pe,E(ce,R)&&d.ref===m.ref)return hl(d,m,N)}return m.flags|=1,d=Ma(F,R),d.ref=m.ref,d.return=m,m.child=d}function op(d,m,E,R,N){if(d!==null){var F=d.memoizedProps;if(Pe(F,R)&&d.ref===m.ref)if(bi=!1,m.pendingProps=R=F,kg(d,N))(d.flags&131072)!==0&&(bi=!0);else return m.lanes=d.lanes,hl(d,m,N)}return Ws(d,m,E,R,N)}function Br(d,m,E){var R=m.pendingProps,N=R.children,F=(m.stateNode._pendingVisibility&2)!==0,ce=d!==null?d.memoizedState:null;if(lr(d,m),R.mode==="hidden"||F){if((m.flags&128)!==0){if(R=ce!==null?ce.baseLanes|E:E,d!==null){for(N=m.child=d.child,F=0;N!==null;)F=F|N.lanes|N.childLanes,N=N.sibling;m.childLanes=F&~R}else m.childLanes=0,m.child=null;return Es(d,m,R,E)}if((E&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},d!==null&&cp(m,ce!==null?ce.cachePool:null),ce!==null?un(m,ce):mn(),gi(m);else return m.lanes=m.childLanes=536870912,Es(d,m,ce!==null?ce.baseLanes|E:E,E)}else ce!==null?(cp(m,ce.cachePool),un(m,ce),Mi(),m.memoizedState=null):(d!==null&&cp(m,null),mn(),Mi());return Gi(d,m,N,E),m.child}function Es(d,m,E,R){var N=Vg();return N=N===null?null:{parent:us?wi._currentValue:wi._currentValue2,pool:N},m.memoizedState={baseLanes:E,cachePool:N},d!==null&&cp(m,null),mn(),gi(m),d!==null&&bh(d,m,R,!0),null}function lr(d,m){var E=m.ref;if(E===null)d!==null&&d.ref!==null&&(m.flags|=2097664);else{if(typeof E!="function"&&typeof E!="object")throw Error(r(284));(d===null||d.ref!==E)&&(m.flags|=2097664)}}function Ws(d,m,E,R,N){return tc(m),E=le(d,m,E,R,void 0,N),R=rt(),d!==null&&!bi?(bt(d,m,N),hl(d,m,N)):(Yn&&R&&ie(m),m.flags|=1,Gi(d,m,E,N),m.child)}function yh(d,m,E,R,N,F){return tc(m),m.updateQueue=null,E=Ge(m,R,E,N),Ae(d),R=rt(),d!==null&&!bi?(bt(d,m,F),hl(d,m,F)):(Yn&&R&&ie(m),m.flags|=1,Gi(d,m,E,F),m.child)}function Xy(d,m,E,R,N){if(tc(m),m.stateNode===null){var F=yc,ce=E.contextType;typeof ce=="object"&&ce!==null&&(F=zr(ce)),F=new E(R,F),m.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=Ao,m.stateNode=F,F._reactInternals=m,F=m.stateNode,F.props=R,F.state=m.memoizedState,F.refs={},at(m),ce=E.contextType,F.context=typeof ce=="object"&&ce!==null?zr(ce):yc,F.state=m.memoizedState,ce=E.getDerivedStateFromProps,typeof ce=="function"&&(os(m,E,ce,R),F.state=m.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(ce=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),ce!==F.state&&Ao.enqueueReplaceState(F,F.state,null),Ht(m,R,F,N),St(),F.state=m.memoizedState),typeof F.componentDidMount=="function"&&(m.flags|=4194308),R=!0}else if(d===null){F=m.stateNode;var Me=m.memoizedProps,Ne=js(E,Me);F.props=Ne;var pt=F.context,At=E.contextType;ce=yc,typeof At=="object"&&At!==null&&(ce=zr(At));var Bt=E.getDerivedStateFromProps;At=typeof Bt=="function"||typeof F.getSnapshotBeforeUpdate=="function",Me=m.pendingProps!==Me,At||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(Me||pt!==ce)&&Zu(m,F,R,ce),Rl=!1;var Ft=m.memoizedState;F.state=Ft,Ht(m,R,F,N),St(),pt=m.memoizedState,Me||Ft!==pt||Rl?(typeof Bt=="function"&&(os(m,E,Bt,R),pt=m.memoizedState),(Ne=Rl||cl(m,E,Ne,R,Ft,pt,ce))?(At||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(m.flags|=4194308)):(typeof F.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=R,m.memoizedState=pt),F.props=R,F.state=pt,F.context=ce,R=Ne):(typeof F.componentDidMount=="function"&&(m.flags|=4194308),R=!1)}else{F=m.stateNode,yt(d,m),ce=m.memoizedProps,At=js(E,ce),F.props=At,Bt=m.pendingProps,Ft=F.context,pt=E.contextType,Ne=yc,typeof pt=="object"&&pt!==null&&(Ne=zr(pt)),Me=E.getDerivedStateFromProps,(pt=typeof Me=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ce!==Bt||Ft!==Ne)&&Zu(m,F,R,Ne),Rl=!1,Ft=m.memoizedState,F.state=Ft,Ht(m,R,F,N),St();var xn=m.memoizedState;ce!==Bt||Ft!==xn||Rl||d!==null&&d.dependencies!==null&&Sh(d.dependencies)?(typeof Me=="function"&&(os(m,E,Me,R),xn=m.memoizedState),(At=Rl||cl(m,E,At,R,Ft,xn,Ne)||d!==null&&d.dependencies!==null&&Sh(d.dependencies))?(pt||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(R,xn,Ne),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(R,xn,Ne)),typeof F.componentDidUpdate=="function"&&(m.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof F.componentDidUpdate!="function"||ce===d.memoizedProps&&Ft===d.memoizedState||(m.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&Ft===d.memoizedState||(m.flags|=1024),m.memoizedProps=R,m.memoizedState=xn),F.props=R,F.state=xn,F.context=Ne,R=At):(typeof F.componentDidUpdate!="function"||ce===d.memoizedProps&&Ft===d.memoizedState||(m.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&Ft===d.memoizedState||(m.flags|=1024),R=!1)}return F=R,lr(d,m),R=(m.flags&128)!==0,F||R?(F=m.stateNode,E=R&&typeof E.getDerivedStateFromError!="function"?null:F.render(),m.flags|=1,d!==null&&R?(m.child=Ec(m,d.child,null,N),m.child=Ec(m,null,E,N)):Gi(d,m,E,N),m.memoizedState=F.state,d=m.child):d=hl(d,m,N),d}function qy(d,m,E,R){return Se(),m.flags|=256,Gi(d,m,E,R),m.child}function Bg(d){return{baseLanes:d,cachePool:jg()}}function _h(d,m,E){return d=d!==null?d.childLanes&~E:0,m&&(d|=sa),d}function Yy(d,m,E){var R=m.pendingProps,N=!1,F=(m.flags&128)!==0,ce;if((ce=F)||(ce=d!==null&&d.memoizedState===null?!1:(xr.current&2)!==0),ce&&(N=!0,m.flags&=-129),ce=(m.flags&32)!==0,m.flags&=-33,d===null){if(Yn){if(N?hi(m):Mi(),Yn){var Me=jr,Ne;(Ne=Me)&&(Me=D1(Me,Dr),Me!==null?(m.memoizedState={dehydrated:Me,treeContext:_c!==null?{id:Ja,overflow:eo}:null,retryLane:536870912},Ne=t(18,null,null,0),Ne.stateNode=Me,Ne.return=m,m.child=Ne,Vr=m,jr=null,Ne=!0):Ne=!1),Ne||_e(m)}if(Me=m.memoizedState,Me!==null&&(Me=Me.dehydrated,Me!==null))return Np(Me)?m.lanes=16:m.lanes=536870912,null;Xt(m)}return Me=R.children,R=R.fallback,N?(Mi(),N=m.mode,Me=Fg({mode:"hidden",children:Me},N),R=Vi(R,N,E,null),Me.return=m,R.return=m,Me.sibling=R,m.child=Me,N=m.child,N.memoizedState=Bg(E),N.childLanes=_h(d,ce,E),m.memoizedState=Yp,R):(hi(m),zg(m,Me))}if(Ne=d.memoizedState,Ne!==null&&(Me=Ne.dehydrated,Me!==null)){if(F)m.flags&256?(hi(m),m.flags&=-257,m=lp(d,m,E)):m.memoizedState!==null?(Mi(),m.child=d.child,m.flags|=128,m=null):(Mi(),N=R.fallback,Me=m.mode,R=Fg({mode:"visible",children:R.children},Me),N=Vi(N,Me,E,null),N.flags|=2,R.return=m,N.return=m,R.sibling=N,m.child=R,Ec(m,d.child,null,E),R=m.child,R.memoizedState=Bg(E),R.childLanes=_h(d,ce,E),m.memoizedState=Yp,m=N);else if(hi(m),Np(Me))ce=A1(Me).digest,R=Error(r(419)),R.stack="",R.digest=ce,He({value:R,source:null,stack:null}),m=lp(d,m,E);else if(bi||bh(d,m,E,!1),ce=(E&d.childLanes)!==0,bi||ce){if(ce=li,ce!==null){if(R=E&-E,(R&42)!==0)R=1;else switch(R){case 2:R=1;break;case 8:R=4;break;case 32:R=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:R=64;break;case 268435456:R=134217728;break;default:R=0}if(R=(R&(ce.suspendedLanes|E))!==0?0:R,R!==0&&R!==Ne.retryLane)throw Ne.retryLane=R,Qe(d,R),Rr(ce,d,R),qp}Lp(Me)||_l(),m=lp(d,m,E)}else Lp(Me)?(m.flags|=128,m.child=d.child,m=xl.bind(null,d),w1(Me,m),m=null):(d=Ne.treeContext,Gr&&(jr=O1(Me),Vr=m,Yn=!0,Ra=null,Dr=!1,d!==null&&(Ks[$s++]=Ja,Ks[$s++]=eo,Ks[$s++]=_c,Ja=d.id,eo=d.overflow,_c=m)),m=zg(m,R.children),m.flags|=4096);return m}return N?(Mi(),N=R.fallback,Me=m.mode,Ne=d.child,F=Ne.sibling,R=Ma(Ne,{mode:"hidden",children:R.children}),R.subtreeFlags=Ne.subtreeFlags&31457280,F!==null?N=Ma(F,N):(N=Vi(N,Me,E,null),N.flags|=2),N.return=m,R.return=m,R.sibling=N,m.child=R,R=N,N=m.child,Me=d.child.memoizedState,Me===null?Me=Bg(E):(Ne=Me.cachePool,Ne!==null?(F=us?wi._currentValue:wi._currentValue2,Ne=Ne.parent!==F?{parent:F,pool:F}:Ne):Ne=jg(),Me={baseLanes:Me.baseLanes|E,cachePool:Ne}),N.memoizedState=Me,N.childLanes=_h(d,ce,E),m.memoizedState=Yp,R):(hi(m),E=d.child,d=E.sibling,E=Ma(E,{mode:"visible",children:R.children}),E.return=m,E.sibling=null,d!==null&&(ce=m.deletions,ce===null?(m.deletions=[d],m.flags|=16):ce.push(d)),m.child=E,m.memoizedState=null,E)}function zg(d,m){return m=Fg({mode:"visible",children:m},d.mode),m.return=d,d.child=m}function Fg(d,m){return Ih(d,m,0,null)}function lp(d,m,E){return Ec(m,d.child,null,E),d=zg(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function Zy(d,m,E){d.lanes|=m;var R=d.alternate;R!==null&&(R.lanes|=m),xh(d.return,m,E)}function Hg(d,m,E,R,N){var F=d.memoizedState;F===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:R,tail:E,tailMode:N}:(F.isBackwards=m,F.rendering=null,F.renderingStartTime=0,F.last=R,F.tail=E,F.tailMode=N)}function Ky(d,m,E){var R=m.pendingProps,N=R.revealOrder,F=R.tail;if(Gi(d,m,R.children,E),R=xr.current,(R&2)!==0)R=R&1|2,m.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Zy(d,E,m);else if(d.tag===19)Zy(d,E,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}R&=1}switch(T(xr,R),N){case"forwards":for(E=m.child,N=null;E!==null;)d=E.alternate,d!==null&&ri(d)===null&&(N=E),E=E.sibling;E=N,E===null?(N=m.child,m.child=null):(N=E.sibling,E.sibling=null),Hg(m,!1,N,E,F);break;case"backwards":for(E=null,N=m.child,m.child=null;N!==null;){if(d=N.alternate,d!==null&&ri(d)===null){m.child=N;break}d=N.sibling,N.sibling=E,E=N,N=d}Hg(m,!0,E,null,F);break;case"together":Hg(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function hl(d,m,E){if(d!==null&&(m.dependencies=d.dependencies),ra|=m.lanes,(E&m.childLanes)===0)if(d!==null){if(bh(d,m,E,!1),(E&m.childLanes)===0)return null}else return null;if(d!==null&&m.child!==d.child)throw Error(r(153));if(m.child!==null){for(d=m.child,E=Ma(d,d.pendingProps),m.child=E,E.return=m;d.sibling!==null;)d=d.sibling,E=E.sibling=Ma(d,d.pendingProps),E.return=m;E.sibling=null}return m.child}function kg(d,m){return(d.lanes&m)!==0?!0:(d=d.dependencies,!!(d!==null&&Sh(d)))}function xE(d,m,E){switch(m.tag){case 3:ee(m,m.stateNode.containerInfo),ec(m,wi,d.memoizedState.cache),Se();break;case 27:case 5:pe(m);break;case 4:ee(m,m.stateNode.containerInfo);break;case 10:ec(m,m.type,m.memoizedProps.value);break;case 13:var R=m.memoizedState;if(R!==null)return R.dehydrated!==null?(hi(m),m.flags|=128,null):(E&m.child.childLanes)!==0?Yy(d,m,E):(hi(m),d=hl(d,m,E),d!==null?d.sibling:null);hi(m);break;case 19:var N=(d.flags&128)!==0;if(R=(E&m.childLanes)!==0,R||(bh(d,m,E,!1),R=(E&m.childLanes)!==0),N){if(R)return Ky(d,m,E);m.flags|=128}if(N=m.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),T(xr,xr.current),R)break;return null;case 22:case 23:return m.lanes=0,Br(d,m,E);case 24:ec(m,wi,d.memoizedState.cache)}return hl(d,m,E)}function $y(d,m,E){if(d!==null)if(d.memoizedProps!==m.pendingProps)bi=!0;else{if(!kg(d,E)&&(m.flags&128)===0)return bi=!1,xE(d,m,E);bi=(d.flags&131072)!==0}else bi=!1,Yn&&(m.flags&1048576)!==0&&X(m,vf,m.index);switch(m.lanes=0,m.tag){case 16:e:{d=m.pendingProps;var R=m.elementType,N=R._init;if(R=N(R._payload),m.type=R,typeof R=="function")Nh(R)?(d=js(R,d),m.tag=1,m=Xy(null,m,R,d,E)):(m.tag=0,m=Ws(null,m,R,d,E));else{if(R!=null){if(N=R.$$typeof,N===kh){m.tag=11,m=fl(null,m,R,d,E);break e}else if(N===wp){m.tag=14,m=vh(null,m,R,d,E);break e}}throw m=a(R)||R,Error(r(306,m,""))}}return m;case 0:return Ws(d,m,m.type,m.pendingProps,E);case 1:return R=m.type,N=js(R,m.pendingProps),Xy(d,m,R,N,E);case 3:e:{if(ee(m,m.stateNode.containerInfo),d===null)throw Error(r(387));var F=m.pendingProps;N=m.memoizedState,R=N.element,yt(d,m),Ht(m,F,null,E);var ce=m.memoizedState;if(F=ce.cache,ec(m,wi,F),F!==N.cache&&Qc(m,[wi],E,!0),St(),F=ce.element,Gr&&N.isDehydrated)if(N={element:F,isDehydrated:!1,cache:ce.cache},m.updateQueue.baseState=N,m.memoizedState=N,m.flags&256){m=qy(d,m,F,E);break e}else if(F!==R){R=re(Error(r(424)),m),He(R),m=qy(d,m,F,E);break e}else for(Gr&&(jr=R1(m.stateNode.containerInfo),Vr=m,Yn=!0,Ra=null,Dr=!0),E=To(m,null,F,E),m.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(Se(),F===R){m=hl(d,m,E);break e}Gi(d,m,F,E)}m=m.child}return m;case 26:if(Zs)return lr(d,m),d===null?(E=w0(m.type,null,m.pendingProps,null))?m.memoizedState=E:Yn||(m.stateNode=Fp(m.type,m.pendingProps,Eo.current,m)):m.memoizedState=w0(m.type,d.memoizedProps,m.pendingProps,d.memoizedState),null;case 27:if(_i)return pe(m),d===null&&_i&&Yn&&(R=m.stateNode=Qa(m.type,m.pendingProps,Eo.current,_r.current,!1),Vr=m,Dr=!0,jr=Pp(R)),R=m.pendingProps.children,d!==null||Yn?Gi(d,m,R,E):m.child=Ec(m,null,R,E),lr(d,m),m.child;case 5:return d===null&&Yn&&(Bp(m.type,m.pendingProps,_r.current),(N=R=jr)&&(R=wE(R,m.type,m.pendingProps,Dr),R!==null?(m.stateNode=R,Vr=m,jr=Pp(R),Dr=!1,N=!0):N=!1),N||_e(m)),pe(m),N=m.type,F=m.pendingProps,ce=d!==null?d.memoizedProps:null,R=F.children,En(N,F)?R=null:ce!==null&&En(N,ce)&&(m.flags|=32),m.memoizedState!==null&&(N=le(d,m,We,null,null,E),us?$a._currentValue=N:$a._currentValue2=N),lr(d,m),Gi(d,m,R,E),m.child;case 6:return d===null&&Yn&&(I1(m.pendingProps,_r.current),(d=E=jr)&&(E=T0(E,m.pendingProps,Dr),E!==null?(m.stateNode=E,Vr=m,jr=null,d=!0):d=!1),d||_e(m)),null;case 13:return Yy(d,m,E);case 4:return ee(m,m.stateNode.containerInfo),R=m.pendingProps,d===null?m.child=Ec(m,null,R,E):Gi(d,m,R,E),m.child;case 11:return fl(d,m,m.type,m.pendingProps,E);case 7:return Gi(d,m,m.pendingProps,E),m.child;case 8:return Gi(d,m,m.pendingProps.children,E),m.child;case 12:return Gi(d,m,m.pendingProps.children,E),m.child;case 10:return R=m.pendingProps,ec(m,m.type,R.value),Gi(d,m,R.children,E),m.child;case 9:return N=m.type._context,R=m.pendingProps.children,tc(m),N=zr(N),R=R(N),m.flags|=1,Gi(d,m,R,E),m.child;case 14:return vh(d,m,m.type,m.pendingProps,E);case 15:return op(d,m,m.type,m.pendingProps,E);case 19:return Ky(d,m,E);case 22:return Br(d,m,E);case 24:return tc(m),R=zr(wi),d===null?(N=Vg(),N===null&&(N=li,F=nc(),N.pooledCache=F,F.refCount++,F!==null&&(N.pooledCacheLanes|=E),N=F),m.memoizedState={parent:R,cache:N},at(m),ec(m,wi,N)):((d.lanes&E)!==0&&(yt(d,m),Ht(m,null,null,E),St()),N=d.memoizedState,F=m.memoizedState,N.parent!==R?(N={parent:R,cache:R},m.memoizedState=N,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=N),ec(m,wi,R)):(R=F.cache,ec(m,wi,R),R!==N.cache&&Qc(m,[wi],E,!0))),Gi(d,m,m.pendingProps.children,E),m.child;case 29:throw m.pendingProps}throw Error(r(156,m.tag))}function ec(d,m,E){us?(T(Dl,m._currentValue),m._currentValue=E):(T(Dl,m._currentValue2),m._currentValue2=E)}function dl(d){var m=Dl.current;us?d._currentValue=m:d._currentValue2=m,S(Dl)}function xh(d,m,E){for(;d!==null;){var R=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,R!==null&&(R.childLanes|=m)):R!==null&&(R.childLanes&m)!==m&&(R.childLanes|=m),d===E)break;d=d.return}}function Qc(d,m,E,R){var N=d.child;for(N!==null&&(N.return=d);N!==null;){var F=N.dependencies;if(F!==null){var ce=N.child;F=F.firstContext;e:for(;F!==null;){var Me=F;F=N;for(var Ne=0;Ne<m.length;Ne++)if(Me.context===m[Ne]){F.lanes|=E,Me=F.alternate,Me!==null&&(Me.lanes|=E),xh(F.return,E,d),R||(ce=null);break e}F=Me.next}}else if(N.tag===18){if(ce=N.return,ce===null)throw Error(r(341));ce.lanes|=E,F=ce.alternate,F!==null&&(F.lanes|=E),xh(ce,E,d),ce=null}else ce=N.child;if(ce!==null)ce.return=N;else for(ce=N;ce!==null;){if(ce===d){ce=null;break}if(N=ce.sibling,N!==null){N.return=ce.return,ce=N;break}ce=ce.return}N=ce}}function bh(d,m,E,R){d=null;for(var N=m,F=!1;N!==null;){if(!F){if((N.flags&524288)!==0)F=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var ce=N.alternate;if(ce===null)throw Error(r(387));if(ce=ce.memoizedProps,ce!==null){var Me=N.type;Ds(N.pendingProps.value,ce.value)||(d!==null?d.push(Me):d=[Me])}}else if(N===lu.current){if(ce=N.alternate,ce===null)throw Error(r(387));ce.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(d!==null?d.push($a):d=[$a])}N=N.return}d!==null&&Qc(m,d,E,R),m.flags|=262144}function Sh(d){for(d=d.firstContext;d!==null;){var m=d.context;if(!Ds(us?m._currentValue:m._currentValue2,d.memoizedValue))return!0;d=d.next}return!1}function tc(d){io=d,ta=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function zr(d){return Gg(io,d)}function Eh(d,m){return io===null&&tc(d),Gg(d,m)}function Gg(d,m){var E=us?m._currentValue:m._currentValue2;if(m={context:m,memoizedValue:E,next:null},ta===null){if(d===null)throw Error(r(308));ta=m,d.dependencies={lanes:0,firstContext:m},d.flags|=524288}else ta=ta.next=m;return E}function nc(){return{controller:new Ef,data:new Map,refCount:0}}function Mh(d){d.refCount--,d.refCount===0&&q1(Y1,function(){d.controller.abort()})}function Vg(){var d=wo.current;return d!==null?d:li.pooledCache}function cp(d,m){m===null?T(wo,wo.current):T(wo,m.pool)}function jg(){var d=Vg();return d===null?null:{parent:us?wi._currentValue:wi._currentValue2,pool:d}}function Ms(d){d.flags|=4}function Ku(d,m){if(d!==null&&d.child===m.child)return!1;if((m.flags&16)!==0)return!0;for(d=m.child;d!==null;){if((d.flags&13878)!==0||(d.subtreeFlags&13878)!==0)return!0;d=d.sibling}return!1}function Jc(d,m,E,R){if(yr)for(E=m.child;E!==null;){if(E.tag===5||E.tag===6)Vh(d,E.stateNode);else if(!(E.tag===4||_i&&E.tag===27)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===m)break;for(;E.sibling===null;){if(E.return===null||E.return===m)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else if(wa)for(var N=m.child;N!==null;){if(N.tag===5){var F=N.stateNode;E&&R&&(F=b0(F,N.type,N.memoizedProps)),Vh(d,F)}else if(N.tag===6)F=N.stateNode,E&&R&&(F=S0(F,N.memoizedProps)),Vh(d,F);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)F=N.child,F!==null&&(F.return=N),Jc(d,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===m)break;for(;N.sibling===null;){if(N.return===null||N.return===m)return;N=N.return}N.sibling.return=N.return,N=N.sibling}}function Qy(d,m,E,R){if(wa)for(var N=m.child;N!==null;){if(N.tag===5){var F=N.stateNode;E&&R&&(F=b0(F,N.type,N.memoizedProps)),x0(d,F)}else if(N.tag===6)F=N.stateNode,E&&R&&(F=S0(F,N.memoizedProps)),x0(d,F);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)F=N.child,F!==null&&(F.return=N),Qy(d,N,!(N.memoizedProps!==null&&N.memoizedProps.mode==="manual"),!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===m)break;for(;N.sibling===null;){if(N.return===null||N.return===m)return;N=N.return}N.sibling.return=N.return,N=N.sibling}}function Th(d,m){if(wa&&Ku(d,m)){d=m.stateNode;var E=d.containerInfo,R=jh();Qy(R,m,!1,!1),d.pendingChildren=R,Ms(m),Up(E,R)}}function up(d,m,E,R){if(yr)d.memoizedProps!==R&&Ms(m);else if(wa){var N=d.stateNode,F=d.memoizedProps;if((d=Ku(d,m))||F!==R){var ce=_r.current;F=pf(N,E,F,R,!d,null),F===N?m.stateNode=N:(Ml(F,E,R,ce)&&Ms(m),m.stateNode=F,d?Jc(F,m,!1,!1):Ms(m))}else m.stateNode=N}}function fp(d,m,E){if(h0(m,E)){if(d.flags|=16777216,!Op(m,E))if(lc())d.flags|=8192;else throw xc=Jh,Qh}else d.flags&=-16777217}function hp(d,m){if(F1(m)){if(d.flags|=16777216,!iu(m))if(lc())d.flags|=8192;else throw xc=Jh,Qh}else d.flags&=-16777217}function $u(d,m){m!==null&&(d.flags|=4),d.flags&16384&&(m=d.tag!==22?I():536870912,d.lanes|=m,Oo|=m)}function Qu(d,m){if(!Yn)switch(d.tailMode){case"hidden":m=d.tail;for(var E=null;m!==null;)m.alternate!==null&&(E=m),m=m.sibling;E===null?d.tail=null:E.sibling=null;break;case"collapsed":E=d.tail;for(var R=null;E!==null;)E.alternate!==null&&(R=E),E=E.sibling;R===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:R.sibling=null}}function Pi(d){var m=d.alternate!==null&&d.alternate.child===d.child,E=0,R=0;if(m)for(var N=d.child;N!==null;)E|=N.lanes|N.childLanes,R|=N.subtreeFlags&31457280,R|=N.flags&31457280,N.return=d,N=N.sibling;else for(N=d.child;N!==null;)E|=N.lanes|N.childLanes,R|=N.subtreeFlags,R|=N.flags,N.return=d,N=N.sibling;return d.subtreeFlags|=R,d.childLanes=E,m}function Jy(d,m,E){var R=m.pendingProps;switch(se(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(m),null;case 1:return Pi(m),null;case 3:return E=m.stateNode,R=null,d!==null&&(R=d.memoizedState.cache),m.memoizedState.cache!==R&&(m.flags|=2048),dl(wi),ue(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(d===null||d.child===null)&&(Be(m)?Ms(m):d===null||d.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Ra!==null&&(Uh(Ra),Ra=null))),Th(d,m),Pi(m),null;case 26:if(Zs){E=m.type;var N=m.memoizedState;return d===null?(Ms(m),N!==null?(Pi(m),hp(m,N)):(Pi(m),fp(m,E,R))):N?N!==d.memoizedState?(Ms(m),Pi(m),hp(m,N)):(Pi(m),m.flags&=-16777217):(yr?d.memoizedProps!==R&&Ms(m):up(d,m,E,R),Pi(m),fp(m,E,R)),null}case 27:if(_i){if(ve(m),E=Eo.current,N=m.type,d!==null&&m.stateNode!=null)yr?d.memoizedProps!==R&&Ms(m):up(d,m,N,R);else{if(!R){if(m.stateNode===null)throw Error(r(166));return Pi(m),null}d=_r.current,Be(m)?Xe(m,d):(d=Qa(N,R,E,d,!0),m.stateNode=d,Ms(m))}return Pi(m),null}case 5:if(ve(m),E=m.type,d!==null&&m.stateNode!=null)up(d,m,E,R);else{if(!R){if(m.stateNode===null)throw Error(r(166));return Pi(m),null}d=_r.current,Be(m)?Xe(m,d):(N=f0(E,R,Eo.current,d,m),Jc(N,m,!1,!1),m.stateNode=N,Ml(N,E,R,d)&&Ms(m))}return Pi(m),fp(m,m.type,m.pendingProps),null;case 6:if(d&&m.stateNode!=null)E=d.memoizedProps,yr?E!==R&&Ms(m):wa&&(E!==R?(m.stateNode=pi(R,Eo.current,_r.current,m),Ms(m)):m.stateNode=d.stateNode);else{if(typeof R!="string"&&m.stateNode===null)throw Error(r(166));if(d=Eo.current,E=_r.current,Be(m)){if(!Gr)throw Error(r(176));if(d=m.stateNode,E=m.memoizedProps,R=null,N=Vr,N!==null)switch(N.tag){case 27:case 5:R=N.memoizedProps}A0(d,E,m,R)||_e(m)}else m.stateNode=pi(R,d,E,m)}return Pi(m),null;case 13:if(R=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(N=Be(m),R!==null&&R.dehydrated!==null){if(d===null){if(!N)throw Error(r(318));if(!Gr)throw Error(r(344));if(N=m.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));L1(N,m)}else Se(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Pi(m),N=!1}else Ra!==null&&(Uh(Ra),Ra=null),N=!0;if(!N)return m.flags&256?(Xt(m),m):(Xt(m),null)}if(Xt(m),(m.flags&128)!==0)return m.lanes=E,m;if(E=R!==null,d=d!==null&&d.memoizedState!==null,E){R=m.child,N=null,R.alternate!==null&&R.alternate.memoizedState!==null&&R.alternate.memoizedState.cachePool!==null&&(N=R.alternate.memoizedState.cachePool.pool);var F=null;R.memoizedState!==null&&R.memoizedState.cachePool!==null&&(F=R.memoizedState.cachePool.pool),F!==N&&(R.flags|=2048)}return E!==d&&E&&(m.child.flags|=8192),$u(m,m.updateQueue),Pi(m),null;case 4:return ue(),Th(d,m),d===null&&Qi(m.stateNode.containerInfo),Pi(m),null;case 10:return dl(m.type),Pi(m),null;case 19:if(S(xr),N=m.memoizedState,N===null)return Pi(m),null;if(R=(m.flags&128)!==0,F=N.rendering,F===null)if(R)Qu(N,!1);else{if(Si!==0||d!==null&&(d.flags&128)!==0)for(d=m.child;d!==null;){if(F=ri(d),F!==null){for(m.flags|=128,Qu(N,!1),d=F.updateQueue,m.updateQueue=d,$u(m,d),m.subtreeFlags=0,d=E,E=m.child;E!==null;)Ph(E,d),E=E.sibling;return T(xr,xr.current&1|2),m.child}d=d.sibling}N.tail!==null&&Ca()>Af&&(m.flags|=128,R=!0,Qu(N,!1),m.lanes=4194304)}else{if(!R)if(d=ri(F),d!==null){if(m.flags|=128,R=!0,d=d.updateQueue,m.updateQueue=d,$u(m,d),Qu(N,!0),N.tail===null&&N.tailMode==="hidden"&&!F.alternate&&!Yn)return Pi(m),null}else 2*Ca()-N.renderingStartTime>Af&&E!==536870912&&(m.flags|=128,R=!0,Qu(N,!1),m.lanes=4194304);N.isBackwards?(F.sibling=m.child,m.child=F):(d=N.last,d!==null?d.sibling=F:m.child=F,N.last=F)}return N.tail!==null?(m=N.tail,N.rendering=m,N.tail=m.sibling,N.renderingStartTime=Ca(),m.sibling=null,d=xr.current,T(xr,R?d&1|2:d&1),m):(Pi(m),null);case 22:case 23:return Xt(m),bn(),R=m.memoizedState!==null,d!==null?d.memoizedState!==null!==R&&(m.flags|=8192):R&&(m.flags|=8192),R?(E&536870912)!==0&&(m.flags&128)===0&&(Pi(m),m.subtreeFlags&6&&(m.flags|=8192)):Pi(m),E=m.updateQueue,E!==null&&$u(m,E.retryQueue),E=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),R=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(R=m.memoizedState.cachePool.pool),R!==E&&(m.flags|=2048),d!==null&&S(wo),null;case 24:return E=null,d!==null&&(E=d.memoizedState.cache),m.memoizedState.cache!==E&&(m.flags|=2048),dl(wi),Pi(m),null;case 25:return null}throw Error(r(156,m.tag))}function bE(d,m){switch(se(m),m.tag){case 1:return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return dl(wi),ue(),d=m.flags,(d&65536)!==0&&(d&128)===0?(m.flags=d&-65537|128,m):null;case 26:case 27:case 5:return ve(m),null;case 13:if(Xt(m),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(r(340));Se()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return S(xr),null;case 4:return ue(),null;case 10:return dl(m.type),null;case 22:case 23:return Xt(m),bn(),d!==null&&S(wo),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 24:return dl(wi),null;case 25:return null;default:return null}}function e1(d,m){switch(se(m),m.tag){case 3:dl(wi),ue();break;case 26:case 27:case 5:ve(m);break;case 4:ue();break;case 13:Xt(m);break;case 19:S(xr);break;case 10:dl(m.type);break;case 22:case 23:Xt(m),bn(),d!==null&&S(wo);break;case 24:dl(wi)}}function Ah(d,m){try{var E=m.updateQueue,R=E!==null?E.lastEffect:null;if(R!==null){var N=R.next;E=N;do{if((E.tag&d)===d){R=void 0;var F=E.create,ce=E.inst;R=F(),ce.destroy=R}E=E.next}while(E!==N)}}catch(Me){ai(m,m.return,Me)}}function ic(d,m,E){try{var R=m.updateQueue,N=R!==null?R.lastEffect:null;if(N!==null){var F=N.next;R=F;do{if((R.tag&d)===d){var ce=R.inst,Me=ce.destroy;if(Me!==void 0){ce.destroy=void 0,N=m;var Ne=E;try{Me()}catch(pt){ai(N,Ne,pt)}}}R=R.next}while(R!==F)}}catch(pt){ai(m,m.return,pt)}}function t1(d){var m=d.updateQueue;if(m!==null){var E=d.stateNode;try{Oe(m,E)}catch(R){ai(d,d.return,R)}}}function Ts(d,m,E){E.props=js(d.type,d.memoizedProps),E.state=d.memoizedState;try{E.componentWillUnmount()}catch(R){ai(d,m,R)}}function Ya(d,m){try{var E=d.ref;if(E!==null){var R=d.stateNode;switch(d.tag){case 26:case 27:case 5:var N=ff(R);break;default:N=R}typeof E=="function"?d.refCleanup=E(N):E.current=N}}catch(F){ai(d,m,F)}}function As(d,m){var E=d.ref,R=d.refCleanup;if(E!==null)if(typeof R=="function")try{R()}catch(N){ai(d,m,N)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof E=="function")try{E(null)}catch(N){ai(d,m,N)}else E.current=null}function Wg(d){var m=d.type,E=d.memoizedProps,R=d.stateNode;try{TE(R,m,E,d)}catch(N){ai(d,d.return,N)}}function Xg(d,m,E){try{y1(d.stateNode,d.type,E,m,d)}catch(R){ai(d,d.return,R)}}function qg(d){return d.tag===5||d.tag===3||(Zs?d.tag===26:!1)||(_i?d.tag===27:!1)||d.tag===4}function wh(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||qg(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&(!_i||d.tag!==27)&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Yg(d,m,E){var R=d.tag;if(R===5||R===6)d=d.stateNode,m?x1(E,d,m):v0(E,d);else if(!(R===4||_i&&R===27)&&(d=d.child,d!==null))for(Yg(d,m,E),d=d.sibling;d!==null;)Yg(d,m,E),d=d.sibling}function pl(d,m,E){var R=d.tag;if(R===5||R===6)d=d.stateNode,m?_1(E,d,m):g1(E,d);else if(!(R===4||_i&&R===27)&&(d=d.child,d!==null))for(pl(d,m,E),d=d.sibling;d!==null;)pl(d,m,E),d=d.sibling}function dp(d,m,E){d=d.containerInfo;try{mf(d,E)}catch(R){ai(m,m.return,R)}}function Ch(d,m){for(Cp(d.containerInfo),_n=m;_n!==null;)if(d=_n,m=d.child,(d.subtreeFlags&1028)!==0&&m!==null)m.return=d,_n=m;else for(;_n!==null;){d=_n;var E=d.alternate;switch(m=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((m&1024)!==0&&E!==null){m=void 0;var R=d,N=E.memoizedProps;E=E.memoizedState;var F=R.stateNode;try{var ce=js(R.type,N,R.elementType===R.type);m=F.getSnapshotBeforeUpdate(ce,E),F.__reactInternalSnapshotBeforeUpdate=m}catch(Me){ai(R,R.return,Me)}}break;case 3:(m&1024)!==0&&yr&&T1(d.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(r(163))}if(m=d.sibling,m!==null){m.return=d.return,_n=m;break}_n=d.return}return ce=zn,zn=!1,ce}function pp(d,m,E){var R=E.flags;switch(E.tag){case 0:case 11:case 15:gl(d,E),R&4&&Ah(5,E);break;case 1:if(gl(d,E),R&4)if(d=E.stateNode,m===null)try{d.componentDidMount()}catch(Me){ai(E,E.return,Me)}else{var N=js(E.type,m.memoizedProps);m=m.memoizedState;try{d.componentDidUpdate(N,m,d.__reactInternalSnapshotBeforeUpdate)}catch(Me){ai(E,E.return,Me)}}R&64&&t1(E),R&512&&Ya(E,E.return);break;case 3:if(gl(d,E),R&64&&(R=E.updateQueue,R!==null)){if(d=null,E.child!==null)switch(E.child.tag){case 27:case 5:d=ff(E.child.stateNode);break;case 1:d=E.child.stateNode}try{Oe(R,d)}catch(Me){ai(E,E.return,Me)}}break;case 26:if(Zs){gl(d,E),R&512&&Ya(E,E.return);break}case 27:case 5:gl(d,E),m===null&&R&4&&Wg(E),R&512&&Ya(E,E.return);break;case 12:gl(d,E);break;case 13:gl(d,E),R&4&&mp(d,E);break;case 22:if(N=E.memoizedState!==null||Co,!N){m=m!==null&&m.memoizedState!==null||Wi;var F=Co,ce=Wi;Co=N,(Wi=m)&&!ce?vl(d,E,(E.subtreeFlags&8772)!==0):gl(d,E),Co=F,Wi=ce}R&512&&(E.memoizedProps.mode==="manual"?Ya(E,E.return):As(E,E.return));break;default:gl(d,E)}}function Zg(d){var m=d.alternate;m!==null&&(d.alternate=null,Zg(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&ME(m)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function Fr(d,m,E){for(E=E.child;E!==null;)rc(d,m,E),E=E.sibling}function rc(d,m,E){if(Os&&typeof Os.onCommitFiberUnmount=="function")try{Os.onCommitFiberUnmount(er,E)}catch{}switch(E.tag){case 26:if(Zs){Wi||As(E,m),Fr(d,m,E),E.memoizedState?nu(E.memoizedState):E.stateNode&&gf(E.stateNode);break}case 27:if(_i){Wi||As(E,m);var R=Qt,N=wn;Qt=E.stateNode,Fr(d,m,E),vc(E.stateNode),Qt=R,wn=N;break}case 5:Wi||As(E,m);case 6:if(yr){if(R=Qt,N=wn,Qt=null,Fr(d,m,E),Qt=R,wn=N,Qt!==null)if(wn)try{b1(Qt,E.stateNode)}catch(F){ai(E,m,F)}else try{y0(Qt,E.stateNode)}catch(F){ai(E,m,F)}}else Fr(d,m,E);break;case 18:yr&&Qt!==null&&(wn?Wh(Qt,E.stateNode):P1(Qt,E.stateNode));break;case 4:yr?(R=Qt,N=wn,Qt=E.stateNode.containerInfo,wn=!0,Fr(d,m,E),Qt=R,wn=N):(wa&&dp(E.stateNode,E,jh()),Fr(d,m,E));break;case 0:case 11:case 14:case 15:Wi||ic(2,E,m),Wi||ic(4,E,m),Fr(d,m,E);break;case 1:Wi||(As(E,m),R=E.stateNode,typeof R.componentWillUnmount=="function"&&Ts(E,m,R)),Fr(d,m,E);break;case 21:Fr(d,m,E);break;case 22:Wi||As(E,m),Wi=(R=Wi)||E.memoizedState!==null,Fr(d,m,E),Wi=R;break;default:Fr(d,m,E)}}function mp(d,m){if(Gr&&m.memoizedState===null&&(d=m.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{RE(d)}catch(E){ai(m,m.return,E)}}function n1(d){switch(d.tag){case 13:case 19:var m=d.stateNode;return m===null&&(m=d.stateNode=new oi),m;case 22:return d=d.stateNode,m=d._retryCache,m===null&&(m=d._retryCache=new oi),m;default:throw Error(r(435,d.tag))}}function ml(d,m){var E=n1(d);m.forEach(function(R){var N=fc.bind(null,d,R);E.has(R)||(E.add(R),R.then(N,N))})}function ls(d,m){var E=m.deletions;if(E!==null)for(var R=0;R<E.length;R++){var N=E[R],F=d,ce=m;if(yr){var Me=ce;e:for(;Me!==null;){switch(Me.tag){case 27:case 5:Qt=Me.stateNode,wn=!1;break e;case 3:Qt=Me.stateNode.containerInfo,wn=!0;break e;case 4:Qt=Me.stateNode.containerInfo,wn=!0;break e}Me=Me.return}if(Qt===null)throw Error(r(160));rc(F,ce,N),Qt=null,wn=!1}else rc(F,ce,N);F=N.alternate,F!==null&&(F.return=null),N.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)Kg(m,d),m=m.sibling}function Kg(d,m){var E=d.alternate,R=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:ls(m,d),ws(d),R&4&&(ic(3,d,d.return),Ah(3,d),ic(5,d,d.return));break;case 1:ls(m,d),ws(d),R&512&&(Wi||E===null||As(E,E.return)),R&64&&Co&&(d=d.updateQueue,d!==null&&(R=d.callbacks,R!==null&&(E=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=E===null?R:E.concat(R))));break;case 26:if(Zs){var N=Fi;ls(m,d),ws(d),R&512&&(Wi||E===null||As(E,E.return)),R&4&&(R=E!==null?E.memoizedState:null,m=d.memoizedState,E===null?m===null?d.stateNode===null?d.stateNode=qh(N,d.type,d.memoizedProps,d):Yh(N,d.type,d.stateNode):d.stateNode=B1(N,m,d.memoizedProps):R!==m?(R===null?E.stateNode!==null&&gf(E.stateNode):nu(R),m===null?Yh(N,d.type,d.stateNode):B1(N,m,d.memoizedProps)):m===null&&d.stateNode!==null&&Xg(d,d.memoizedProps,E.memoizedProps));break}case 27:if(_i&&R&4&&d.alternate===null){N=d.stateNode;var F=d.memoizedProps;try{gc(N),k1(d.type,F,N,d)}catch(At){ai(d,d.return,At)}}case 5:if(ls(m,d),ws(d),R&512&&(Wi||E===null||As(E,E.return)),yr){if(d.flags&32){m=d.stateNode;try{_0(m)}catch(At){ai(d,d.return,At)}}R&4&&d.stateNode!=null&&(m=d.memoizedProps,Xg(d,m,E!==null?E.memoizedProps:m)),R&1024&&(D0=!0)}break;case 6:if(ls(m,d),ws(d),R&4&&yr){if(d.stateNode===null)throw Error(r(162));R=d.memoizedProps,E=E!==null?E.memoizedProps:R,m=d.stateNode;try{v1(m,E,R)}catch(At){ai(d,d.return,At)}}break;case 3:if(Zs?(z1(),N=Fi,Fi=zp(m.containerInfo),ls(m,d),Fi=N):ls(m,d),ws(d),R&4){if(yr&&Gr&&E!==null&&E.memoizedState.isDehydrated)try{CE(m.containerInfo)}catch(At){ai(d,d.return,At)}if(wa){R=m.containerInfo,E=m.pendingChildren;try{mf(R,E)}catch(At){ai(d,d.return,At)}}}D0&&(D0=!1,i1(d));break;case 4:Zs?(E=Fi,Fi=zp(d.stateNode.containerInfo),ls(m,d),ws(d),Fi=E):(ls(m,d),ws(d)),R&4&&wa&&dp(d.stateNode,d,d.stateNode.pendingChildren);break;case 12:ls(m,d),ws(d);break;case 13:ls(m,d),ws(d),d.child.flags&8192&&d.memoizedState!==null!=(E!==null&&E.memoizedState!==null)&&(ps=Ca()),R&4&&(R=d.updateQueue,R!==null&&(d.updateQueue=null,ml(d,R)));break;case 22:R&512&&(Wi||E===null||As(E,E.return)),N=d.memoizedState!==null;var ce=E!==null&&E.memoizedState!==null,Me=Co,Ne=Wi;if(Co=Me||N,Wi=Ne||ce,ls(m,d),Wi=Ne,Co=Me,ws(d),m=d.stateNode,m._current=d,m._visibility&=-3,m._visibility|=m._pendingVisibility&2,R&8192&&(m._visibility=N?m._visibility&-2:m._visibility|1,N&&(m=Co||Wi,E===null||ce||m||Ju(d)),yr&&(d.memoizedProps===null||d.memoizedProps.mode!=="manual"))){e:if(E=null,yr)for(m=d;;){if(m.tag===5||Zs&&m.tag===26||_i&&m.tag===27){if(E===null){ce=E=m;try{F=ce.stateNode,N?S1(F):M1(ce.stateNode,ce.memoizedProps)}catch(At){ai(ce,ce.return,At)}}}else if(m.tag===6){if(E===null){ce=m;try{var pt=ce.stateNode;N?E1(pt):AE(pt,ce.memoizedProps)}catch(At){ai(ce,ce.return,At)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===d)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break e;for(;m.sibling===null;){if(m.return===null||m.return===d)break e;E===m&&(E=null),m=m.return}E===m&&(E=null),m.sibling.return=m.return,m=m.sibling}}R&4&&(R=d.updateQueue,R!==null&&(E=R.retryQueue,E!==null&&(R.retryQueue=null,ml(d,E))));break;case 19:ls(m,d),ws(d),R&4&&(R=d.updateQueue,R!==null&&(d.updateQueue=null,ml(d,R)));break;case 21:break;default:ls(m,d),ws(d)}}function ws(d){var m=d.flags;if(m&2){try{if(yr&&(!_i||d.tag!==27)){e:{for(var E=d.return;E!==null;){if(qg(E)){var R=E;break e}E=E.return}throw Error(r(160))}switch(R.tag){case 27:if(_i){var N=R.stateNode,F=wh(d);pl(d,F,N);break}case 5:var ce=R.stateNode;R.flags&32&&(_0(ce),R.flags&=-33);var Me=wh(d);pl(d,Me,ce);break;case 3:case 4:var Ne=R.stateNode.containerInfo,pt=wh(d);Yg(d,pt,Ne);break;default:throw Error(r(161))}}}catch(At){ai(d,d.return,At)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function i1(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var m=d;i1(m),m.tag===5&&m.flags&1024&&Dp(m.stateNode),d=d.sibling}}function gl(d,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)pp(d,m.alternate,m),m=m.sibling}function Ju(d){for(d=d.child;d!==null;){var m=d;switch(m.tag){case 0:case 11:case 14:case 15:ic(4,m,m.return),Ju(m);break;case 1:As(m,m.return);var E=m.stateNode;typeof E.componentWillUnmount=="function"&&Ts(m,m.return,E),Ju(m);break;case 26:case 27:case 5:As(m,m.return),Ju(m);break;case 22:As(m,m.return),m.memoizedState===null&&Ju(m);break;default:Ju(m)}d=d.sibling}}function vl(d,m,E){for(E=E&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var R=m.alternate,N=d,F=m,ce=F.flags;switch(F.tag){case 0:case 11:case 15:vl(N,F,E),Ah(4,F);break;case 1:if(vl(N,F,E),R=F,N=R.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(pt){ai(R,R.return,pt)}if(R=F,N=R.updateQueue,N!==null){var Me=R.stateNode;try{var Ne=N.shared.hiddenCallbacks;if(Ne!==null)for(N.shared.hiddenCallbacks=null,N=0;N<Ne.length;N++)Te(Ne[N],Me)}catch(pt){ai(R,R.return,pt)}}E&&ce&64&&t1(F),Ya(F,F.return);break;case 26:case 27:case 5:vl(N,F,E),E&&R===null&&ce&4&&Wg(F),Ya(F,F.return);break;case 12:vl(N,F,E);break;case 13:vl(N,F,E),E&&ce&4&&mp(N,F);break;case 22:F.memoizedState===null&&vl(N,F,E),Ya(F,F.return);break;default:vl(N,F,E)}m=m.sibling}}function gp(d,m){var E=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),d=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(d=m.memoizedState.cachePool.pool),d!==E&&(d!=null&&d.refCount++,E!=null&&Mh(E))}function Rh(d,m){d=null,m.alternate!==null&&(d=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==d&&(m.refCount++,d!=null&&Mh(d))}function Cr(d,m,E,R){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)$g(d,m,E,R),m=m.sibling}function $g(d,m,E,R){var N=m.flags;switch(m.tag){case 0:case 11:case 15:Cr(d,m,E,R),N&2048&&Ah(9,m);break;case 3:Cr(d,m,E,R),N&2048&&(d=null,m.alternate!==null&&(d=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==d&&(m.refCount++,d!=null&&Mh(d)));break;case 12:if(N&2048){Cr(d,m,E,R),d=m.stateNode;try{var F=m.memoizedProps,ce=F.id,Me=F.onPostCommit;typeof Me=="function"&&Me(ce,m.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(Ne){ai(m,m.return,Ne)}}else Cr(d,m,E,R);break;case 23:break;case 22:F=m.stateNode,m.memoizedState!==null?F._visibility&4?Cr(d,m,E,R):Jr(d,m):F._visibility&4?Cr(d,m,E,R):(F._visibility|=4,Hr(d,m,E,R,(m.subtreeFlags&10256)!==0)),N&2048&&gp(m.alternate,m);break;case 24:Cr(d,m,E,R),N&2048&&Rh(m.alternate,m);break;default:Cr(d,m,E,R)}}function Hr(d,m,E,R,N){for(N=N&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var F=d,ce=m,Me=E,Ne=R,pt=ce.flags;switch(ce.tag){case 0:case 11:case 15:Hr(F,ce,Me,Ne,N),Ah(8,ce);break;case 23:break;case 22:var At=ce.stateNode;ce.memoizedState!==null?At._visibility&4?Hr(F,ce,Me,Ne,N):Jr(F,ce):(At._visibility|=4,Hr(F,ce,Me,Ne,N)),N&&pt&2048&&gp(ce.alternate,ce);break;case 24:Hr(F,ce,Me,Ne,N),N&&pt&2048&&Rh(ce.alternate,ce);break;default:Hr(F,ce,Me,Ne,N)}m=m.sibling}}function Jr(d,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var E=d,R=m,N=R.flags;switch(R.tag){case 22:Jr(E,R),N&2048&&gp(R.alternate,R);break;case 24:Jr(E,R),N&2048&&Rh(R.alternate,R);break;default:Jr(E,R)}m=m.sibling}}function Sa(d){if(d.subtreeFlags&na)for(d=d.child;d!==null;)vp(d),d=d.sibling}function vp(d){switch(d.tag){case 26:Sa(d),d.flags&na&&(d.memoizedState!==null?H1(Fi,d.memoizedState,d.memoizedProps):fs(d.type,d.memoizedProps));break;case 5:Sa(d),d.flags&na&&fs(d.type,d.memoizedProps);break;case 3:case 4:if(Zs){var m=Fi;Fi=zp(d.stateNode.containerInfo),Sa(d),Fi=m}else Sa(d);break;case 22:d.memoizedState===null&&(m=d.alternate,m!==null&&m.memoizedState!==null?(m=na,na=16777216,Sa(d),na=m):Sa(d));break;default:Sa(d)}}function Oh(d){var m=d.alternate;if(m!==null&&(d=m.child,d!==null)){m.child=null;do m=d.sibling,d.sibling=null,d=m;while(d!==null)}}function sc(d){var m=d.deletions;if((d.flags&16)!==0){if(m!==null)for(var E=0;E<m.length;E++){var R=m[E];_n=R,Qg(R,d)}Oh(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)yp(d),d=d.sibling}function yp(d){switch(d.tag){case 0:case 11:case 15:sc(d),d.flags&2048&&ic(9,d,d.return);break;case 3:sc(d);break;case 12:sc(d);break;case 22:var m=d.stateNode;d.memoizedState!==null&&m._visibility&4&&(d.return===null||d.return.tag!==13)?(m._visibility&=-5,yl(d)):sc(d);break;default:sc(d)}}function yl(d){var m=d.deletions;if((d.flags&16)!==0){if(m!==null)for(var E=0;E<m.length;E++){var R=m[E];_n=R,Qg(R,d)}Oh(d)}for(d=d.child;d!==null;){switch(m=d,m.tag){case 0:case 11:case 15:ic(8,m,m.return),yl(m);break;case 22:E=m.stateNode,E._visibility&4&&(E._visibility&=-5,yl(m));break;default:yl(m)}d=d.sibling}}function Qg(d,m){for(;_n!==null;){var E=_n;switch(E.tag){case 0:case 11:case 15:ic(8,E,m);break;case 23:case 22:if(E.memoizedState!==null&&E.memoizedState.cachePool!==null){var R=E.memoizedState.cachePool.pool;R!=null&&R.refCount++}break;case 24:Mh(E.memoizedState.cache)}if(R=E.child,R!==null)R.return=E,_n=R;else e:for(E=d;_n!==null;){R=_n;var N=R.sibling,F=R.return;if(Zg(R),R===E){_n=null;break e}if(N!==null){N.return=F,_n=N;break e}_n=F}}}function ef(d){var m=c1(d);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(r(364));return m}if(d=m0(d),d===null)throw Error(r(362));return d.stateNode.current}function ac(d,m){var E=d.tag;switch(m.$$typeof){case Tf:if(d.type===m.value)return!0;break;case Ua:e:{for(m=m.value,d=[d,0],E=0;E<d.length;){var R=d[E++],N=R.tag,F=d[E++],ce=m[F];if(N!==5&&N!==26&&N!==27||!df(R)){for(;ce!=null&&ac(R,ce);)F++,ce=m[F];if(F===m.length){m=!0;break e}else for(R=R.child;R!==null;)d.push(R,F),R=R.sibling}}m=!1}return m;case Ui:if((E===5||E===26||E===27)&&d1(d.stateNode,m.value))return!0;break;case Ro:if((E===5||E===6||E===26||E===27)&&(d=h1(d),d!==null&&0<=d.indexOf(m.value)))return!0;break;case ro:if((E===5||E===26||E===27)&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Jg(d){switch(d.$$typeof){case Tf:return"<"+(a(d.value)||"Unknown")+">";case Ua:return":has("+(Jg(d)||"")+")";case Ui:return'[role="'+d.value+'"]';case Ro:return'"'+d.value+'"';case ro:return'[data-testname="'+d.value+'"]';default:throw Error(r(365))}}function Cs(d,m){var E=[];d=[d,0];for(var R=0;R<d.length;){var N=d[R++],F=N.tag,ce=d[R++],Me=m[ce];if(F!==5&&F!==26&&F!==27||!df(N)){for(;Me!=null&&ac(N,Me);)ce++,Me=m[ce];if(ce===m.length)E.push(N);else for(N=N.child;N!==null;)d.push(N,ce),N=N.sibling}}return E}function Dh(d,m){if(!mc)throw Error(r(363));d=ef(d),d=Cs(d,m),m=[],d=Array.from(d);for(var E=0;E<d.length;){var R=d[E++],N=R.tag;if(N===5||N===26||N===27)df(R)||m.push(R.stateNode);else for(R=R.child;R!==null;)d.push(R),R=R.sibling}return m}function $i(){if((Qn&2)!==0&&Hn!==0)return Hn&-Hn;if(fn.T!==null){var d=Qs;return d!==0?d:Fe()}return u1()}function e0(){sa===0&&(sa=(Hn&536870912)===0||Yn?B():536870912);var d=Js.current;return d!==null&&(d.flags|=32),sa}function Rr(d,m,E){(d===li&&vi===2||d.cancelPendingCommit!==null)&&(kr(d,0),Rs(d,Hn,sa,!1)),k(d,E),((Qn&2)===0||d!==li)&&(d===li&&((Qn&2)===0&&(Ul|=E),Si===4&&Rs(d,Hn,sa,!1)),ke(d))}function oc(d,m,E){if((Qn&6)!==0)throw Error(r(327));var R=!E&&(m&60)===0&&(m&d.expiredLanes)===0||O(d,m),N=R?n0(d,m):xp(d,m,!0),F=R;do{if(N===0){ia&&!R&&Rs(d,m,0,!1);break}else if(N===6)Rs(d,m,0,!Na);else{if(E=d.current.alternate,F&&!tf(E)){N=xp(d,m,!1),F=!1;continue}if(N===2){if(F=m,d.errorRecoveryDisabledLanes&F)var ce=0;else ce=d.pendingLanes&-536870913,ce=ce!==0?ce:ce&536870912?536870912:0;if(ce!==0){m=ce;e:{var Me=d;N=vu;var Ne=Gr&&Me.current.memoizedState.isDehydrated;if(Ne&&(kr(Me,ce).flags|=256),ce=xp(Me,ce,!1),ce!==2){if(br&&!Ne){Me.errorRecoveryDisabledLanes|=F,Ul|=F,N=4;break e}F=Xi,Xi=N,F!==null&&Uh(F)}N=ce}if(F=!1,N!==2)continue}}if(N===1){kr(d,0),Rs(d,m,0,!0);break}e:{switch(R=d,N){case 0:case 1:throw Error(r(345));case 4:if((m&4194176)===m){Rs(R,m,sa,!Na);break e}break;case 2:Xi=null;break;case 3:case 5:break;default:throw Error(r(329))}if(R.finishedWork=E,R.finishedLanes=m,(m&62914560)===m&&(F=ps+300-Ca(),10<F)){if(Rs(R,m,sa,!Na),D(R,0)!==0)break e;R.timeoutHandle=ur(_p.bind(null,R,E,Xi,td,Zp,m,sa,Ul,Oo,Na,2,-0,0),F);break e}_p(R,E,Xi,td,Zp,m,sa,Ul,Oo,Na,0,-0,0)}}break}while(!0);ke(d)}function Uh(d){Xi===null?Xi=d:Xi.push.apply(Xi,d)}function _p(d,m,E,R,N,F,ce,Me,Ne,pt,At,Bt,Ft){var xn=m.subtreeFlags;if((xn&8192||(xn&16785408)===16785408)&&(d0(),vp(m),m=fr(),m!==null)){d.cancelPendingCommit=m(cc.bind(null,d,E,R,N,ce,Me,Ne,1,Bt,Ft)),Rs(d,F,ce,!pt);return}cc(d,E,R,N,ce,Me,Ne,At,Bt,Ft)}function tf(d){for(var m=d;;){var E=m.tag;if((E===0||E===11||E===15)&&m.flags&16384&&(E=m.updateQueue,E!==null&&(E=E.stores,E!==null)))for(var R=0;R<E.length;R++){var N=E[R],F=N.getSnapshot;N=N.value;try{if(!Ds(F(),N))return!1}catch{return!1}}if(E=m.child,m.subtreeFlags&16384&&E!==null)E.return=m,m=E;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Rs(d,m,E,R){m&=~ed,m&=~Ul,d.suspendedLanes|=m,d.pingedLanes&=~m,R&&(d.warmLanes|=m),R=d.expirationTimes;for(var N=m;0<N;){var F=31-hs(N),ce=1<<F;R[F]=-1,N&=~ce}E!==0&&j(d,E,m)}function Lh(){return(Qn&6)===0?($(0),!1):!0}function nf(){if(nn!==null){if(vi===0)var d=nn.return;else d=nn,ta=io=null,Z(d),bc=null,Sc=0,d=nn;for(;d!==null;)e1(d.alternate,d),d=d.return;nn=null}}function kr(d,m){d.finishedWork=null,d.finishedLanes=0;var E=d.timeoutHandle;E!==dc&&(d.timeoutHandle=dc,Rp(E)),E=d.cancelPendingCommit,E!==null&&(d.cancelPendingCommit=null,E()),nf(),li=d,nn=E=Ma(d.current,null),Hn=m,vi=0,ts=null,Na=!1,ia=O(d,m),br=!1,Oo=sa=ed=Ul=ra=Si=0,Xi=vu=null,Zp=!1,(m&8)!==0&&(m|=m&32);var R=d.entangledLanes;if(R!==0)for(d=d.entanglements,R&=m;0<R;){var N=31-hs(R),F=1<<N;m|=d[N],R&=~F}return ns=m,oe(),E}function Xs(d,m){On=null,fn.H=ji,m===bf?(m=Ct(),vi=3):m===Qh?(m=Ct(),vi=4):vi=m===qp?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,ts=m,nn===null&&(Si=1,xa(d,re(m,d.current)))}function lc(){var d=Js.current;return d===null?!0:(Hn&4194176)===Hn?xi===null:(Hn&62914560)===Hn||(Hn&536870912)!==0?d===xi:!1}function vo(){var d=fn.H;return fn.H=ji,d===null?ji:d}function yo(){var d=fn.A;return fn.A=Mf,d}function _l(){Si=4,Na||(Hn&4194176)!==Hn&&Js.current!==null||(ia=!0),(ra&134217727)===0&&(Ul&134217727)===0||li===null||Rs(li,Hn,sa,!1)}function xp(d,m,E){var R=Qn;Qn|=2;var N=vo(),F=yo();(li!==d||Hn!==m)&&(td=null,kr(d,m)),m=!1;var ce=Si;e:do try{if(vi!==0&&nn!==null){var Me=nn,Ne=ts;switch(vi){case 8:nf(),ce=6;break e;case 3:case 2:case 6:Js.current===null&&(m=!0);var pt=vi;if(vi=0,ts=null,Ea(d,Me,Ne,pt),E&&ia){ce=0;break e}break;default:pt=vi,vi=0,ts=null,Ea(d,Me,Ne,pt)}}t0(),ce=Si;break}catch(At){Xs(d,At)}while(!0);return m&&d.shellSuspendCounter++,ta=io=null,Qn=R,fn.H=N,fn.A=F,nn===null&&(li=null,Hn=0,oe()),ce}function t0(){for(;nn!==null;)zi(nn)}function n0(d,m){var E=Qn;Qn|=2;var R=vo(),N=yo();li!==d||Hn!==m?(td=null,Af=Ca()+500,kr(d,m)):ia=O(d,m);e:do try{if(vi!==0&&nn!==null){m=nn;var F=ts;t:switch(vi){case 1:vi=0,ts=null,Ea(d,m,F,1);break;case 2:if(ct(F)){vi=0,ts=null,ei(m);break}m=function(){vi===2&&li===d&&(vi=7),ke(d)},F.then(m,m);break e;case 3:vi=7;break e;case 4:vi=5;break e;case 7:ct(F)?(vi=0,ts=null,ei(m)):(vi=0,ts=null,Ea(d,m,F,7));break;case 5:var ce=null;switch(nn.tag){case 26:ce=nn.memoizedState;case 5:case 27:var Me=nn,Ne=Me.type,pt=Me.pendingProps;if(ce?iu(ce):Op(Ne,pt)){vi=0,ts=null;var At=Me.sibling;if(At!==null)nn=At;else{var Bt=Me.return;Bt!==null?(nn=Bt,qs(Bt)):nn=null}break t}}vi=0,ts=null,Ea(d,m,F,5);break;case 6:vi=0,ts=null,Ea(d,m,F,6);break;case 8:nf(),Si=6;break e;default:throw Error(r(462))}}cs();break}catch(Ft){Xs(d,Ft)}while(!0);return ta=io=null,fn.H=R,fn.A=N,Qn=E,nn!==null?0:(li=null,Hn=0,oe(),Si)}function cs(){for(;nn!==null&&!j1();)zi(nn)}function zi(d){var m=$y(d.alternate,d,ns);d.memoizedProps=d.pendingProps,m===null?qs(d):nn=m}function ei(d){var m=d,E=m.alternate;switch(m.tag){case 15:case 0:m=yh(E,m,m.pendingProps,m.type,void 0,Hn);break;case 11:m=yh(E,m,m.pendingProps,m.type.render,m.ref,Hn);break;case 5:Z(m);default:e1(E,m),m=nn=Ph(m,ns),m=$y(E,m,ns)}d.memoizedProps=d.pendingProps,m===null?qs(d):nn=m}function Ea(d,m,E,R){ta=io=null,Z(m),bc=null,Sc=0;var N=m.return;try{if(Ig(d,N,m,E,Hn)){Si=1,xa(d,re(E,d.current)),nn=null;return}}catch(F){if(N!==null)throw nn=N,F;Si=1,xa(d,re(E,d.current)),nn=null;return}m.flags&32768?(Yn||R===1?d=!0:ia||(Hn&536870912)!==0?d=!1:(Na=d=!0,(R===2||R===3||R===6)&&(R=Js.current,R!==null&&R.tag===13&&(R.flags|=16384))),bp(m,d)):qs(m)}function qs(d){var m=d;do{if((m.flags&32768)!==0){bp(m,Na);return}d=m.return;var E=Jy(m.alternate,m,ns);if(E!==null){nn=E;return}if(m=m.sibling,m!==null){nn=m;return}nn=m=d}while(m!==null);Si===0&&(Si=5)}function bp(d,m){do{var E=bE(d.alternate,d);if(E!==null){E.flags&=32767,nn=E;return}if(E=d.return,E!==null&&(E.flags|=32768,E.subtreeFlags=0,E.deletions=null),!m&&(d=d.sibling,d!==null)){nn=d;return}nn=d=E}while(d!==null);Si=6,nn=null}function cc(d,m,E,R,N,F,ce,Me,Ne,pt){var At=fn.T,Bt=Tl();try{es(2),fn.T=null,r1(d,m,E,R,Bt,N,F,ce,Me,Ne,pt)}finally{fn.T=At,es(Bt)}}function r1(d,m,E,R,N,F,ce,Me){do Za();while(Do!==null);if((Qn&6)!==0)throw Error(r(327));var Ne=d.finishedWork;if(R=d.finishedLanes,Ne===null)return null;if(d.finishedWork=null,d.finishedLanes=0,Ne===d.current)throw Error(r(177));d.callbackNode=null,d.callbackPriority=0,d.cancelPendingCommit=null;var pt=Ne.lanes|Ne.childLanes;if(pt|=to,V(d,R,pt,F,ce,Me),d===li&&(nn=li=null,Hn=0),(Ne.subtreeFlags&10256)===0&&(Ne.flags&10256)===0||so||(so=!0,wc=pt,Kp=E,bl(Vp,function(){return Za(),null})),E=(Ne.flags&15990)!==0,(Ne.subtreeFlags&15990)!==0||E?(E=fn.T,fn.T=null,F=Tl(),es(2),ce=Qn,Qn|=4,Ch(d,Ne),Kg(Ne,d),l1(d.containerInfo),d.current=Ne,pp(d,Ne.alternate,Ne),kp(),Qn=ce,es(F),fn.T=E):d.current=Ne,so?(so=!1,Do=d,yu=R):i0(d,pt),pt=d.pendingLanes,pt===0&&(Ac=null),H(Ne.stateNode),ke(d),m!==null)for(N=d.onRecoverableError,Ne=0;Ne<m.length;Ne++)pt=m[Ne],N(pt.value,{componentStack:pt.stack});return(yu&3)!==0&&Za(),pt=d.pendingLanes,(R&4194218)!==0&&(pt&42)!==0?d===$p?wf++:(wf=0,$p=d):wf=0,$(0),null}function i0(d,m){(d.pooledCacheLanes&=m)===0&&(m=d.pooledCache,m!=null&&(d.pooledCache=null,Mh(m)))}function Za(){if(Do!==null){var d=Do,m=wc;wc=0;var E=te(yu),R=32>E?32:E;E=fn.T;var N=Tl();try{if(es(R),fn.T=null,Do===null)var F=!1;else{R=Kp,Kp=null;var ce=Do,Me=yu;if(Do=null,yu=0,(Qn&6)!==0)throw Error(r(331));var Ne=Qn;if(Qn|=4,yp(ce.current),$g(ce,ce.current,Me,R),Qn=Ne,$(0,!1),Os&&typeof Os.onPostCommitFiberRoot=="function")try{Os.onPostCommitFiberRoot(er,ce)}catch{}F=!0}return F}finally{es(N),fn.T=E,i0(d,m)}}return!1}function rf(d,m,E){m=re(E,m),m=ba(d.stateNode,m,2),d=ht(d,m,2),d!==null&&(k(d,2),ke(d))}function ai(d,m,E){if(d.tag===3)rf(d,d,E);else for(;m!==null;){if(m.tag===3){rf(m,d,E);break}else if(m.tag===1){var R=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Ac===null||!Ac.has(R))){d=re(E,d),E=$c(2),R=ht(m,E,2),R!==null&&(Qr(E,R,m,d),k(R,2),ke(R));break}}m=m.return}}function eu(d,m,E){var R=d.pingCache;if(R===null){R=d.pingCache=new La;var N=new Set;R.set(m,N)}else N=R.get(m),N===void 0&&(N=new Set,R.set(m,N));N.has(E)||(br=!0,N.add(E),d=r0.bind(null,d,m,E),m.then(d,d))}function r0(d,m,E){var R=d.pingCache;R!==null&&R.delete(m),d.pingedLanes|=d.suspendedLanes&E,d.warmLanes&=~E,li===d&&(Hn&E)===E&&(Si===4||Si===3&&(Hn&62914560)===Hn&&300>Ca()-ps?(Qn&2)===0&&kr(d,0):ed|=E,Oo===Hn&&(Oo=0)),ke(d)}function uc(d,m){m===0&&(m=I()),d=Qe(d,m),d!==null&&(k(d,m),ke(d))}function xl(d){var m=d.memoizedState,E=0;m!==null&&(E=m.retryLane),uc(d,E)}function fc(d,m){var E=0;switch(d.tag){case 13:var R=d.stateNode,N=d.memoizedState;N!==null&&(E=N.retryLane);break;case 19:R=d.stateNode;break;case 22:R=d.stateNode._retryCache;break;default:throw Error(r(314))}R!==null&&R.delete(m),uc(d,E)}function bl(d,m){return Zh(d,m)}function s0(d,m,E,R){this.tag=d,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nh(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Ma(d,m){var E=d.alternate;return E===null?(E=t(d.tag,m,d.key,d.mode),E.elementType=d.elementType,E.type=d.type,E.stateNode=d.stateNode,E.alternate=d,d.alternate=E):(E.pendingProps=m,E.type=d.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=d.flags&31457280,E.childLanes=d.childLanes,E.lanes=d.lanes,E.child=d.child,E.memoizedProps=d.memoizedProps,E.memoizedState=d.memoizedState,E.updateQueue=d.updateQueue,m=d.dependencies,E.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},E.sibling=d.sibling,E.index=d.index,E.ref=d.ref,E.refCleanup=d.refCleanup,E}function Ph(d,m){d.flags&=31457282;var E=d.alternate;return E===null?(d.childLanes=0,d.lanes=m,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=E.childLanes,d.lanes=E.lanes,d.child=E.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=E.memoizedProps,d.memoizedState=E.memoizedState,d.updateQueue=E.updateQueue,d.type=E.type,m=E.dependencies,d.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),d}function _o(d,m,E,R,N,F){var ce=0;if(R=d,typeof d=="function")Nh(d)&&(ce=1);else if(typeof d=="string")ce=Zs&&_i?Xh(d,E,_r.current)?26:bo(d)?27:5:Zs?Xh(d,E,_r.current)?26:5:_i&&bo(d)?27:5;else e:switch(d){case hc:return Vi(E.children,N,F,m);case Fh:ce=8,N|=24;break;case Tp:return d=t(12,E,m,N|2),d.elementType=Tp,d.lanes=F,d;case Ap:return d=t(13,E,m,N),d.elementType=Ap,d.lanes=F,d;case lf:return d=t(19,E,m,N),d.elementType=lf,d.lanes=F,d;case l0:return Ih(E,N,F,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case Hh:case Ka:ce=10;break e;case o0:ce=9;break e;case kh:ce=11;break e;case wp:ce=14;break e;case Aa:ce=16,R=null;break e}ce=29,E=Error(r(130,d===null?"null":typeof d,"")),R=null}return m=t(ce,E,m,N),m.elementType=d,m.type=R,m.lanes=F,m}function Vi(d,m,E,R){return d=t(7,d,R,m),d.lanes=E,d}function Ih(d,m,E,R){d=t(22,d,R,m),d.elementType=l0,d.lanes=E;var N={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var F=N._current;if(F===null)throw Error(r(456));if((N._pendingVisibility&2)===0){var ce=Qe(F,2);ce!==null&&(N._pendingVisibility|=2,Rr(ce,F,2))}},attach:function(){var F=N._current;if(F===null)throw Error(r(456));if((N._pendingVisibility&2)!==0){var ce=Qe(F,2);ce!==null&&(N._pendingVisibility&=-3,Rr(ce,F,2))}}};return d.stateNode=N,d}function Sp(d,m,E){return d=t(6,d,null,m),d.lanes=E,d}function a0(d,m,E){return m=t(4,d.children!==null?d.children:[],d.key,m),m.lanes=E,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function SE(d,m,E,R,N,F,ce,Me){this.tag=1,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=dc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z(0),this.hiddenUpdates=z(null),this.identifierPrefix=R,this.onUncaughtError=N,this.onCaughtError=F,this.onRecoverableError=ce,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Me,this.incompleteTransitions=new Map}function s1(d,m,E,R,N,F,ce,Me,Ne,pt,At,Bt){return d=new SE(d,m,E,ce,Me,Ne,pt,Bt),m=1,F===!0&&(m|=24),F=t(3,null,null,m),d.current=F,F.stateNode=d,m=nc(),m.refCount++,d.pooledCache=m,m.refCount++,F.memoizedState={element:R,isDehydrated:E,cache:m},at(F),d}function cr(d){return d?(d=yc,d):yc}function Ep(d){var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=y(m),d=d!==null?x(d):null,d===null?null:ff(d.stateNode)}function sf(d,m,E,R,N,F){N=cr(N),R.context===null?R.context=N:R.pendingContext=N,R=gt(m),R.payload={element:E},F=F===void 0?null:F,F!==null&&(R.callback=F),E=ht(d,R,m),E!==null&&(Rr(E,d,m),nt(E,d,m))}function af(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var E=d.retryLane;d.retryLane=E!==0&&E<m?E:m}}function Bh(d,m){af(d,m),(d=d.alternate)&&af(d,m)}var Sn={},of=_g(),Ys=WL(),Mp=Object.assign,EE=Symbol.for("react.element"),zh=Symbol.for("react.transitional.element"),Ta=Symbol.for("react.portal"),hc=Symbol.for("react.fragment"),Fh=Symbol.for("react.strict_mode"),Tp=Symbol.for("react.profiler"),Hh=Symbol.for("react.provider"),o0=Symbol.for("react.consumer"),Ka=Symbol.for("react.context"),kh=Symbol.for("react.forward_ref"),Ap=Symbol.for("react.suspense"),lf=Symbol.for("react.suspense_list"),wp=Symbol.for("react.memo"),Aa=Symbol.for("react.lazy"),l0=Symbol.for("react.offscreen"),a1=Symbol.for("react.memo_cache_sentinel"),Sl=Symbol.iterator,c0=Symbol.for("react.client.reference"),fn=of.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xo,El,tu=!1,cf=Array.isArray,u0=e.rendererVersion,Gh=e.rendererPackageName,uf=e.extraDevToolsConfig,ff=e.getPublicInstance,o1=e.getRootHostContext,hf=e.getChildHostContext,Cp=e.prepareForCommit,l1=e.resetAfterCommit,f0=e.createInstance,Vh=e.appendInitialChild,Ml=e.finalizeInitialChildren,En=e.shouldSetTextContent,pi=e.createTextInstance,ur=e.scheduleTimeout,Rp=e.cancelTimeout,dc=e.noTimeout,us=e.isPrimaryRenderer;e.warnsIfNotActing;var yr=e.supportsMutation,wa=e.supportsPersistence,Gr=e.supportsHydration,c1=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Qi=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var es=e.setCurrentUpdatePriority,Tl=e.getCurrentUpdatePriority,u1=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var f1=e.shouldAttemptEagerTransition,ME=e.detachDeletedInstance;e.requestPostPaintCallback;var h0=e.maySuspendCommit,Op=e.preloadInstance,d0=e.startSuspendingCommit,fs=e.suspendInstance,fr=e.waitForCommitToBeReady,pc=e.NotPendingTransition,$a=e.HostTransitionContext,Dp=e.resetFormInstance;e.bindToConsole;var p0=e.supportsMicrotasks,Al=e.scheduleMicrotask,mc=e.supportsTestSelectors,m0=e.findFiberRoot,g0=e.getBoundingRect,h1=e.getTextContent,df=e.isHiddenSubtree,d1=e.matchAccessibilityRole,p1=e.setFocusIfFocusable,m1=e.setupIntersectionObserver,g1=e.appendChild,v0=e.appendChildToContainer,v1=e.commitTextUpdate,TE=e.commitMount,y1=e.commitUpdate,_1=e.insertBefore,x1=e.insertInContainerBefore,y0=e.removeChild,b1=e.removeChildFromContainer,_0=e.resetTextContent,S1=e.hideInstance,E1=e.hideTextInstance,M1=e.unhideInstance,AE=e.unhideTextInstance,T1=e.clearContainer,pf=e.cloneInstance,jh=e.createContainerChildSet,x0=e.appendChildToContainerChildSet,Up=e.finalizeContainerChildren,mf=e.replaceContainerChildren,b0=e.cloneHiddenInstance,S0=e.cloneHiddenTextInstance,Lp=e.isSuspenseInstancePending,Np=e.isSuspenseInstanceFallback,A1=e.getSuspenseInstanceFallbackErrorDetails,w1=e.registerSuspenseInstanceRetry,E0=e.canHydrateFormStateMarker,C1=e.isFormStateMarkerMatching,M0=e.getNextHydratableSibling,Pp=e.getFirstHydratableChild,R1=e.getFirstHydratableChildWithinContainer,O1=e.getFirstHydratableChildWithinSuspenseInstance,wE=e.canHydrateInstance,T0=e.canHydrateTextInstance,D1=e.canHydrateSuspenseInstance,U1=e.hydrateInstance,A0=e.hydrateTextInstance,L1=e.hydrateSuspenseInstance,N1=e.getNextHydratableInstanceAfterSuspenseInstance,CE=e.commitHydratedContainer,RE=e.commitHydratedSuspenseInstance,P1=e.clearSuspenseBoundary,Wh=e.clearSuspenseBoundaryFromContainer,Ip=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Bp=e.validateHydratableInstance,I1=e.validateHydratableTextInstance,Zs=e.supportsResources,Xh=e.isHostHoistableType,zp=e.getHoistableRoot,w0=e.getResource,B1=e.acquireResource,nu=e.releaseResource,qh=e.hydrateHoistable,Yh=e.mountHoistable,gf=e.unmountHoistable,Fp=e.createHoistableInstance,z1=e.prepareToCommitHoistables,F1=e.mayResourceSuspendCommit,iu=e.preloadResource,H1=e.suspendResource,_i=e.supportsSingletons,Qa=e.resolveSingletonInstance,gc=e.clearSingleton,k1=e.acquireSingletonInstance,vc=e.releaseSingletonInstance,bo=e.isHostSingletonType,Ji=[],wl=-1,yc={},hs=Math.clz32?Math.clz32:A,G1=Math.log,V1=Math.LN2,So=128,ru=4194304,Zh=Ys.unstable_scheduleCallback,Hp=Ys.unstable_cancelCallback,j1=Ys.unstable_shouldYield,kp=Ys.unstable_requestPaint,Ca=Ys.unstable_now,Gp=Ys.unstable_ImmediatePriority,W1=Ys.unstable_UserBlockingPriority,Vp=Ys.unstable_NormalPriority,OE=Ys.unstable_IdlePriority,X1=Ys.log,Or=Ys.unstable_setDisableYieldValue,er=null,Os=null,Ds=typeof Object.is=="function"?Object.is:ne,C0=new WeakMap,su=[],au=0,ou=null,vf=0,Ks=[],$s=0,_c=null,Ja=1,eo="",_r=b(null),yf=b(null),Eo=b(null),lu=b(null),Vr=null,jr=null,Yn=!1,Ra=null,Dr=!1,Kh=Error(r(519)),Oa=[],cu=0,to=0,$h=null,Cl=null,uu=!1,Ti=!1,R0=!1,_f=0,xf=null,fu=0,Qs=0,hu=null,Rl=!1,du=!1,Mo=Object.prototype.hasOwnProperty,bf=Error(r(460)),Qh=Error(r(474)),Jh={then:function(){}},xc=null,bc=null,Sc=0,Ec=Jt(!0),To=Jt(!1),Ai=b(null),Sf=b(0),Js=b(null),xi=null,xr=b(0),Ol=0,On=null,en=null,$n=null,Da=!1,pu=!1,Mc=!1,jp=0,mu=0,Ur=null,no=0,Wp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},ji={readContext:zr,use:he,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useLayoutEffect:In,useInsertionEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useSyncExternalStore:In,useId:In};ji.useCacheRefresh=In,ji.useMemoCache=In,ji.useHostTransitionStatus=In,ji.useFormState=In,ji.useActionState=In,ji.useOptimistic=In;var Tc={readContext:zr,use:he,useCallback:function(d,m){return me().memoizedState=[d,m===void 0?null:m],d},useContext:zr,useEffect:Ql,useImperativeHandle:function(d,m,E){E=E!=null?E.concat([d]):null,Kl(4194308,4,Xa.bind(null,m,d),E)},useLayoutEffect:function(d,m){return Kl(4194308,4,d,m)},useInsertionEffect:function(d,m){Kl(4,2,d,m)},useMemo:function(d,m){var E=me();m=m===void 0?null:m;var R=d();if(Mc){Q(!0);try{d()}finally{Q(!1)}}return E.memoizedState=[R,m],R},useReducer:function(d,m,E){var R=me();if(E!==void 0){var N=E(m);if(Mc){Q(!0);try{E(m)}finally{Q(!1)}}}else N=m;return R.memoizedState=R.baseState=N,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:N},R.queue=d,d=d.dispatch=Kc.bind(null,On,d),[R.memoizedState,d]},useRef:function(d){var m=me();return d={current:d},m.memoizedState=d},useState:function(d){d=Nt(d);var m=d.queue,E=Yu.bind(null,On,m);return m.dispatch=E,[d.memoizedState,E]},useDebugValue:bs,useDeferredValue:function(d,m){var E=me();return rl(E,d,m)},useTransition:function(){var d=Nt(!1);return d=sl.bind(null,On,d.queue,!0,!1),me().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,m,E){var R=On,N=me();if(Yn){if(E===void 0)throw Error(r(407));E=E()}else{if(E=m(),li===null)throw Error(r(349));(Hn&60)!==0||Mt(R,m,E)}N.memoizedState=E;var F={value:E,getSnapshot:m};return N.queue=F,Ql($t.bind(null,R,F,d),[d]),R.flags|=2048,Ni(9,Vt.bind(null,R,F,E,m),{destroy:void 0},null),E},useId:function(){var d=me(),m=li.identifierPrefix;if(Yn){var E=eo,R=Ja;E=(R&~(1<<32-hs(R)-1)).toString(32)+E,m=":"+m+"R"+E,E=jp++,0<E&&(m+="H"+E.toString(32)),m+=":"}else E=no++,m=":"+m+"r"+E.toString(32)+":";return d.memoizedState=m},useCacheRefresh:function(){return me().memoizedState=Zc.bind(null,On)}};Tc.useMemoCache=ut,Tc.useHostTransitionStatus=al,Tc.useFormState=ii,Tc.useActionState=ii,Tc.useOptimistic=function(d){var m=me();m.memoizedState=m.baseState=d;var E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=E,m=ll.bind(null,On,!0,E),E.dispatch=m,[d,m]};var ds={readContext:zr,use:he,useCallback:go,useContext:zr,useEffect:nl,useImperativeHandle:qa,useInsertionEffect:gh,useLayoutEffect:mo,useMemo:il,useReducer:ot,useRef:qu,useState:function(){return ot(it)},useDebugValue:bs,useDeferredValue:function(d,m){var E=ye();return Yc(E,en.memoizedState,d,m)},useTransition:function(){var d=ot(it)[0],m=ye().memoizedState;return[typeof d=="boolean"?d:xe(d),m]},useSyncExternalStore:Lt,useId:ol};ds.useCacheRefresh=Zi,ds.useMemoCache=ut,ds.useHostTransitionStatus=al,ds.useFormState=si,ds.useActionState=si,ds.useOptimistic=function(d,m){var E=ye();return Pt(E,en,d,m)};var ea={readContext:zr,use:he,useCallback:go,useContext:zr,useEffect:nl,useImperativeHandle:qa,useInsertionEffect:gh,useLayoutEffect:mo,useMemo:il,useReducer:Et,useRef:qu,useState:function(){return Et(it)},useDebugValue:bs,useDeferredValue:function(d,m){var E=ye();return en===null?rl(E,d,m):Yc(E,en.memoizedState,d,m)},useTransition:function(){var d=Et(it)[0],m=ye().memoizedState;return[typeof d=="boolean"?d:xe(d),m]},useSyncExternalStore:Lt,useId:ol};ea.useCacheRefresh=Zi,ea.useMemoCache=ut,ea.useHostTransitionStatus=al,ea.useFormState=ya,ea.useActionState=ya,ea.useOptimistic=function(d,m){var E=ye();return en!==null?Pt(E,en,d,m):(E.baseState=d,[d,E.queue.dispatch])};var Ao={isMounted:function(d){return(d=d._reactInternals)?p(d)===d:!1},enqueueSetState:function(d,m,E){d=d._reactInternals;var R=$i(),N=gt(R);N.payload=m,E!=null&&(N.callback=E),m=ht(d,N,R),m!==null&&(Rr(m,d,R),nt(m,d,R))},enqueueReplaceState:function(d,m,E){d=d._reactInternals;var R=$i(),N=gt(R);N.tag=1,N.payload=m,E!=null&&(N.callback=E),m=ht(d,N,R),m!==null&&(Rr(m,d,R),nt(m,d,R))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var E=$i(),R=gt(E);R.tag=2,m!=null&&(R.callback=m),m=ht(d,R,E),m!==null&&(Rr(m,d,E),nt(m,d,E))}},Xp=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},qp=Error(r(461)),bi=!1,Yp={dehydrated:null,treeContext:null,retryLane:0},Dl=b(null),io=null,ta=null,Ef=typeof AbortController<"u"?AbortController:function(){var d=[],m=this.signal={aborted:!1,addEventListener:function(E,R){d.push(R)}};this.abort=function(){m.aborted=!0,d.forEach(function(E){return E()})}},q1=Ys.unstable_scheduleCallback,Y1=Ys.unstable_NormalPriority,wi={$$typeof:Ka,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},O0=fn.S;fn.S=function(d,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&et(d,m),O0!==null&&O0(d,m)};var wo=b(null),Co=!1,Wi=!1,D0=!1,oi=typeof WeakSet=="function"?WeakSet:Set,_n=null,zn=!1,Qt=null,wn=!1,Fi=null,na=8192,Mf={getCacheForType:function(d){var m=zr(wi),E=m.data.get(d);return E===void 0&&(E=d(),m.data.set(d,E)),E}},Tf=0,Ua=1,Ui=2,ro=3,Ro=4;if(typeof Symbol=="function"&&Symbol.for){var gu=Symbol.for;Tf=gu("selector.component"),Ua=gu("selector.has_pseudo_class"),Ui=gu("selector.role"),ro=gu("selector.test_id"),Ro=gu("selector.text")}var La=typeof WeakMap=="function"?WeakMap:Map,Qn=0,li=null,nn=null,Hn=0,vi=0,ts=null,Na=!1,ia=!1,br=!1,ns=0,Si=0,ra=0,Ul=0,ed=0,sa=0,Oo=0,vu=null,Xi=null,Zp=!1,ps=0,Af=1/0,td=null,Ac=null,so=!1,Do=null,yu=0,wc=0,Kp=null,wf=0,$p=null;return Sn.attemptContinuousHydration=function(d){if(d.tag===13){var m=Qe(d,67108864);m!==null&&Rr(m,d,67108864),Bh(d,67108864)}},Sn.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var m=$i(),E=Qe(d,m);E!==null&&Rr(E,d,m),Bh(d,m)}},Sn.attemptSynchronousHydration=function(d){switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var m=w(d.pendingLanes);if(m!==0){for(d.pendingLanes|=2,d.entangledLanes|=2;m;){var E=1<<31-hs(m);d.entanglements[1]|=E,m&=~E}ke(d),(Qn&6)===0&&(Af=Ca()+500,$(0))}}break;case 13:m=Qe(d,2),m!==null&&Rr(m,d,2),Lh(),Bh(d,2)}},Sn.batchedUpdates=function(d,m){return d(m)},Sn.createComponentSelector=function(d){return{$$typeof:Tf,value:d}},Sn.createContainer=function(d,m,E,R,N,F,ce,Me,Ne,pt){return s1(d,m,!1,null,E,R,F,ce,Me,Ne,pt,null)},Sn.createHasPseudoClassSelector=function(d){return{$$typeof:Ua,value:d}},Sn.createHydrationContainer=function(d,m,E,R,N,F,ce,Me,Ne,pt,At,Bt,Ft){return d=s1(E,R,!0,d,N,F,Me,Ne,pt,At,Bt,Ft),d.context=cr(null),E=d.current,R=$i(),N=gt(R),N.callback=m??null,ht(E,N,R),d.current.lanes=R,k(d,R),ke(d),d},Sn.createPortal=function(d,m,E){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ta,key:R==null?null:""+R,children:d,containerInfo:m,implementation:E}},Sn.createRoleSelector=function(d){return{$$typeof:Ui,value:d}},Sn.createTestNameSelector=function(d){return{$$typeof:ro,value:d}},Sn.createTextSelector=function(d){return{$$typeof:Ro,value:d}},Sn.defaultOnCaughtError=function(d){console.error(d)},Sn.defaultOnRecoverableError=function(d){Xp(d)},Sn.defaultOnUncaughtError=function(d){Xp(d)},Sn.deferredUpdates=function(d){var m=fn.T,E=Tl();try{return es(32),fn.T=null,d()}finally{es(E),fn.T=m}},Sn.discreteUpdates=function(d,m,E,R,N){var F=fn.T,ce=Tl();try{return es(2),fn.T=null,d(m,E,R,N)}finally{es(ce),fn.T=F,Qn===0&&(Af=Ca()+500)}},Sn.findAllNodes=Dh,Sn.findBoundingRects=function(d,m){if(!mc)throw Error(r(363));m=Dh(d,m),d=[];for(var E=0;E<m.length;E++)d.push(g0(m[E]));for(m=d.length-1;0<m;m--){E=d[m];for(var R=E.x,N=R+E.width,F=E.y,ce=F+E.height,Me=m-1;0<=Me;Me--)if(m!==Me){var Ne=d[Me],pt=Ne.x,At=pt+Ne.width,Bt=Ne.y,Ft=Bt+Ne.height;if(R>=pt&&F>=Bt&&N<=At&&ce<=Ft){d.splice(m,1);break}else if(R!==pt||E.width!==Ne.width||Ft<F||Bt>ce){if(!(F!==Bt||E.height!==Ne.height||At<R||pt>N)){pt>R&&(Ne.width+=pt-R,Ne.x=R),At<N&&(Ne.width=N-pt),d.splice(m,1);break}}else{Bt>F&&(Ne.height+=Bt-F,Ne.y=F),Ft<ce&&(Ne.height=ce-Bt),d.splice(m,1);break}}}return d},Sn.findHostInstance=Ep,Sn.findHostInstanceWithNoPortals=function(d){return d=y(d),d=d!==null?M(d):null,d===null?null:ff(d.stateNode)},Sn.findHostInstanceWithWarning=function(d){return Ep(d)},Sn.flushPassiveEffects=Za,Sn.flushSyncFromReconciler=function(d){var m=Qn;Qn|=1;var E=fn.T,R=Tl();try{if(es(2),fn.T=null,d)return d()}finally{es(R),fn.T=E,Qn=m,(Qn&6)===0&&$(0)}},Sn.flushSyncWork=Lh,Sn.focusWithin=function(d,m){if(!mc)throw Error(r(363));for(d=ef(d),m=Cs(d,m),m=Array.from(m),d=0;d<m.length;){var E=m[d++],R=E.tag;if(!df(E)){if((R===5||R===26||R===27)&&p1(E.stateNode))return!0;for(E=E.child;E!==null;)m.push(E),E=E.sibling}}return!1},Sn.getFindAllNodesFailureDescription=function(d,m){if(!mc)throw Error(r(363));var E=0,R=[];d=[ef(d),0];for(var N=0;N<d.length;){var F=d[N++],ce=F.tag,Me=d[N++],Ne=m[Me];if((ce!==5&&ce!==26&&ce!==27||!df(F))&&(ac(F,Ne)&&(R.push(Jg(Ne)),Me++,Me>E&&(E=Me)),Me<m.length))for(F=F.child;F!==null;)d.push(F,Me),F=F.sibling}if(E<m.length){for(d=[];E<m.length;E++)d.push(Jg(m[E]));return`findAllNodes was able to match part of the selector:
  `+(R.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},Sn.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 27:case 5:return ff(d.child.stateNode);default:return d.child.stateNode}},Sn.injectIntoDevTools=function(){var d={bundleType:0,version:u0,rendererPackageName:Gh,currentDispatcherRef:fn,findFiberByHostInstance:c1,reconcilerVersion:"19.0.0"};if(uf!==null&&(d.rendererConfig=uf),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)d=!0;else{try{er=m.inject(d),Os=m}catch{}d=!!m.checkDCE}}return d},Sn.isAlreadyRendering=function(){return!1},Sn.observeVisibleRects=function(d,m,E,R){if(!mc)throw Error(r(363));d=Dh(d,m);var N=m1(d,E,R).disconnect;return{disconnect:function(){N()}}},Sn.shouldError=function(){return null},Sn.shouldSuspend=function(){return!1},Sn.startHostTransition=function(d,m,E,R){if(d.tag!==5)throw Error(r(476));var N=as(d).queue;sl(d,N,m,pc,E===null?i:function(){var F=as(d).next.queue;return _a(d,F,{},$i()),E(R)})},Sn.updateContainer=function(d,m,E,R){var N=m.current,F=$i();return sf(N,F,d,m,E,R),F},Sn.updateContainerSync=function(d,m,E,R){return m.tag===0&&Za(),sf(m.current,2,d,m,E,R),2},Sn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(tM)),tM.exports}var m4;function LG(){return m4||(m4=1,eM.exports=UG()),eM.exports}var NG=LG();const PG=fh(NG);var g4=WL();function Gw(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=Gw(i,e,t);if(r)return r;i=e?null:i.sibling}}function XL(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Vw=XL(L.createContext(null));let qL=class extends L.Component{render(){return L.createElement(Vw.Provider,{value:this._reactInternals},this.props.children)}};function YL(){const n=L.useContext(Vw);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=L.useId();return L.useMemo(()=>{for(const t of[n,n?.alternate]){if(!t)continue;const i=Gw(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}const IG=Symbol.for("react.context"),BG=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===IG;function zG(){const n=YL(),[e]=L.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;BG(i)&&i!==Vw&&!e.has(i)&&e.set(i,L.use(XL(i))),t=t.return}return e}function FG(){const n=zG();return L.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>L.createElement(e,null,L.createElement(t.Provider,{...i,value:n.get(t)})),e=>L.createElement(qL,{...e})),[n])}function ZL(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const KL=n=>n&&n.isOrthographicCamera,HG=n=>n&&n.hasOwnProperty("current"),kG=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),Uy=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?L.useLayoutEffect:L.useEffect;function jw(n){const e=L.useRef(n);return Uy(()=>void(e.current=n),[n]),e}function GG(){const n=YL(),e=FG();return L.useMemo(()=>({children:t})=>{const r=!!Gw(n,!0,s=>s.type===L.StrictMode)?L.StrictMode:L.Fragment;return ge.jsx(r,{children:ge.jsx(e,{children:t})})},[n,e])}function VG({set:n}){return Uy(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const jG=(n=>(n=class extends L.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function $L(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function bm(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const qi={obj:n=>n===Object(n)&&!qi.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(qi.str(n)||qi.num(n)||qi.boo(n))return n===e;const s=qi.obj(n);if(s&&i==="reference")return n===e;const a=qi.arr(n);if(a&&t==="reference")return n===e;if((a||s)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(o in r?e:n)if(!qi.equ(n[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:n)if(n[o]!==e[o])return!1;if(qi.und(o)){if(a&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function WG(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function XG(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const QL=["children","key","ref"];function qG(n){const e={};for(const t in n)QL.includes(t)||(e[t]=n[t]);return e}function Fb(n,e,t,i){const r=n;let s=r?.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:qG(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=s)),s}function cy(n,e){let t=n[e];if(!e.includes("-"))return{root:n,key:e,target:t};t=n;for(const r of e.split("-")){var i;e=r,n=t,t=(i=t)==null?void 0:i[e]}return{root:n,key:e,target:t}}const v4=/-\d+$/;function Hb(n,e){if(qi.str(e.props.attach)){if(v4.test(e.props.attach)){const r=e.props.attach.replace(v4,""),{root:s,key:a}=cy(n.object,r);Array.isArray(s[a])||(s[a]=[])}const{root:t,key:i}=cy(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else qi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function kb(n,e){if(qi.str(e.props.attach)){const{root:t,key:i}=cy(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const VT=[...QL,"args","dispose","attach","object","onUpdate","dispose"],y4=new Map;function YG(n){let e=y4.get(n.constructor);try{e||(e=new n.constructor,y4.set(n.constructor,e))}catch{}return e}function ZG(n,e){const t={};for(const i in e)if(!VT.includes(i)&&!qi.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(VT.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:s}=cy(n.object,i);if(r.constructor&&r.constructor.length===0){const a=YG(r);qi.und(a)||(t[s]=a[s])}else t[s]=0}return t}const KG=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],$G=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Bc(n,e){var t;const i=n.__r3f,r=i&&ZL(i).getState(),s=i?.eventCount;for(const o in e){let c=e[o];if(VT.includes(o))continue;if(i&&$G.test(o)){typeof c=="function"?i.handlers[o]=c:delete i.handlers[o],i.eventCount=Object.keys(i.handlers).length;continue}if(c===void 0)continue;let{root:u,key:h,target:p}=cy(n,o);if(p instanceof ug&&c instanceof ug)p.mask=c.mask;else if(p instanceof Rt&&kG(c))p.set(c);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof p.copy=="function"&&c!=null&&c.constructor&&p.constructor===c.constructor)p.copy(c);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&Array.isArray(c))typeof p.fromArray=="function"?p.fromArray(c):p.set(...c);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof c=="number")typeof p.setScalar=="function"?p.setScalar(c):p.set(c);else{var a;u[h]=c,r&&!r.linear&&KG.includes(h)&&(a=u[h])!=null&&a.isTexture&&u[h].format===Tr&&u[h].type===ja&&(u[h].colorSpace=pr)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&s!==i.eventCount){const o=i.object,c=r.internal.interaction.indexOf(o);c>-1&&r.internal.interaction.splice(c,1),i.eventCount&&o.raycast!==null&&r.internal.interaction.push(o)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Tg(i),n}function Tg(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function JL(n,e){n.manual||(KL(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const fa=n=>n?.isObject3D;function nx(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function eN(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function QG(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{eN(t.capturedMap,e,i,r)})}function JG(n){function e(c){const{internal:u}=n.getState(),h=c.offsetX-u.initialClick[0],p=c.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+p*p))}function t(c){return c.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var p;return(p=u.__r3f)==null?void 0:p.handlers["onPointer"+h]}))}function i(c,u){const h=n.getState(),p=new Set,g=[],y=u?u(h.internal.interaction):h.internal.interaction;for(let S=0;S<y.length;S++){const T=bm(y[S]);T&&(T.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(c,h);function x(S){const T=bm(S);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var A;T.events.compute==null||T.events.compute(c,T,(A=T.previousRoot)==null?void 0:A.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(S,!0):[]}let M=y.flatMap(x).sort((S,T)=>{const A=bm(S.object),w=bm(T.object);return!A||!w?S.distance-T.distance:w.events.priority-A.events.priority||S.distance-T.distance}).filter(S=>{const T=nx(S);return p.has(T)?!1:(p.add(T),!0)});h.events.filter&&(M=h.events.filter(M,h));for(const S of M){let T=S.object;for(;T;){var b;(b=T.__r3f)!=null&&b.eventCount&&g.push({...S,eventObject:T}),T=T.parent}}if("pointerId"in c&&h.internal.capturedMap.has(c.pointerId))for(let S of h.internal.capturedMap.get(c.pointerId).values())p.has(nx(S.intersection))||g.push(S.intersection);return g}function r(c,u,h,p){if(c.length){const g={stopped:!1};for(const y of c){let x=bm(y.object);if(x||y.object.traverseAncestors(M=>{const b=bm(M);if(b)return x=b,!1}),x){const{raycaster:M,pointer:b,camera:S,internal:T}=x,A=new J(b.x,b.y,0).unproject(S),w=I=>{var z,k;return(z=(k=T.capturedMap.get(I))==null?void 0:k.has(y.eventObject))!=null?z:!1},D=I=>{const z={intersection:y,target:u.target};T.capturedMap.has(I)?T.capturedMap.get(I).set(y.eventObject,z):T.capturedMap.set(I,new Map([[y.eventObject,z]])),u.target.setPointerCapture(I)},O=I=>{const z=T.capturedMap.get(I);z&&eN(T.capturedMap,y.eventObject,z,I)};let P={};for(let I in u){let z=u[I];typeof z!="function"&&(P[I]=z)}let B={...y,...P,pointer:b,intersections:c,stopped:g.stopped,delta:h,unprojectedPoint:A,ray:M.ray,camera:S,stopPropagation(){const I="pointerId"in u&&T.capturedMap.get(u.pointerId);if((!I||I.has(y.eventObject))&&(B.stopped=g.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(z=>z.eventObject===y.eventObject))){const z=c.slice(0,c.indexOf(y));s([...z,y])}},target:{hasPointerCapture:w,setPointerCapture:D,releasePointerCapture:O},currentTarget:{hasPointerCapture:w,setPointerCapture:D,releasePointerCapture:O},nativeEvent:u};if(p(B),g.stopped===!0)break}}}return c}function s(c){const{internal:u}=n.getState();for(const h of u.hovered.values())if(!c.length||!c.find(p=>p.object===h.object&&p.index===h.index&&p.instanceId===h.instanceId)){const g=h.eventObject.__r3f;if(u.hovered.delete(nx(h)),g!=null&&g.eventCount){const y=g.handlers,x={...h,intersections:c};y.onPointerOut==null||y.onPointerOut(x),y.onPointerLeave==null||y.onPointerLeave(x)}}}function a(c,u){for(let h=0;h<u.length;h++){const p=u[h].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(c)}}function o(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:h}=n.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),s([]))})}}return function(h){const{onPointerMissed:p,internal:g}=n.getState();g.lastEvent.current=h;const y=c==="onPointerMove",x=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",b=i(h,y?t:void 0),S=x?e(h):0;c==="onPointerDown"&&(g.initialClick=[h.offsetX,h.offsetY],g.initialHits=b.map(A=>A.eventObject)),x&&!b.length&&S<=2&&(a(h,g.interaction),p&&p(h)),y&&s(b);function T(A){const w=A.eventObject,D=w.__r3f;if(!(D!=null&&D.eventCount))return;const O=D.handlers;if(y){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const P=nx(A),B=g.hovered.get(P);B?B.stopped&&A.stopPropagation():(g.hovered.set(P,A),O.onPointerOver==null||O.onPointerOver(A),O.onPointerEnter==null||O.onPointerEnter(A))}O.onPointerMove==null||O.onPointerMove(A)}else{const P=O[c];P?(!x||g.initialHits.includes(w))&&(a(h,g.interaction.filter(B=>!g.initialHits.includes(B))),P(A)):x&&g.initialHits.includes(w)&&a(h,g.interaction.filter(B=>!g.initialHits.includes(B)))}}r(b,h,S,T)}}return{handlePointer:o}}const _4=n=>!!(n!=null&&n.render),Ww=L.createContext(null),eV=(n,e)=>{const t=kL((o,c)=>{const u=new J,h=new J,p=new J;function g(S=c().camera,T=h,A=c().size){const{width:w,height:D,top:O,left:P}=A,B=w/D;T.isVector3?p.copy(T):p.set(...T);const I=S.getWorldPosition(u).distanceTo(p);if(KL(S))return{width:w/S.zoom,height:D/S.zoom,top:O,left:P,factor:1,distance:I,aspect:B};{const z=S.fov*Math.PI/180,k=2*Math.tan(z/2)*I,V=k*(w/D);return{width:V,height:k,top:O,left:P,factor:w/V,distance:I,aspect:B}}}let y;const x=S=>o(T=>({performance:{...T.performance,current:S}})),M=new ft;return{set:o,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(S=1)=>n(c(),S),advance:(S,T)=>e(S,T,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Iw,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=c();y&&clearTimeout(y),S.performance.current!==S.performance.min&&x(S.performance.min),y=setTimeout(()=>x(c().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:S=>o(T=>({...T,events:{...T.events,...S}})),setSize:(S,T,A=0,w=0)=>{const D=c().camera,O={width:S,height:T,top:A,left:w};o(P=>({size:O,viewport:{...P.viewport,...g(D,h,O)}}))},setDpr:S=>o(T=>{const A=$L(S);return{viewport:{...T.viewport,dpr:A,initialDpr:T.viewport.initialDpr||A}}}),setFrameloop:(S="always")=>{const T=c().clock;T.stop(),T.elapsedTime=0,S!=="never"&&(T.start(),T.elapsedTime=0),o(()=>({frameloop:S}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:L.createRef(),active:!1,frames:0,priority:0,subscribe:(S,T,A)=>{const w=c().internal;return w.priority=w.priority+(T>0?1:0),w.subscribers.push({ref:S,priority:T,store:A}),w.subscribers=w.subscribers.sort((D,O)=>D.priority-O.priority),()=>{const D=c().internal;D!=null&&D.subscribers&&(D.priority=D.priority-(T>0?1:0),D.subscribers=D.subscribers.filter(O=>O.ref!==S))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,a=i.camera;return t.subscribe(()=>{const{camera:o,size:c,viewport:u,gl:h,set:p}=t.getState();if(c.width!==r.width||c.height!==r.height||u.dpr!==s){r=c,s=u.dpr,JL(o,c),u.dpr>0&&h.setPixelRatio(u.dpr);const g=typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(c.width,c.height,g)}o!==a&&(a=o,p(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};function Xw(){const n=L.useContext(Ww);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function on(n=t=>t,e){return Xw()(n,e)}function Yl(n,e=0){const t=Xw(),i=t.getState().internal.subscribe,r=jw(n);return Uy(()=>i(r,e,t),[e,i,t]),null}const x4=new WeakMap,tV=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function tN(n,e){return function(t,...i){let r;return tV(t)?(r=x4.get(t),r||(r=new t,x4.set(t,r))):r=t,n&&n(r),Promise.all(i.map(s=>new Promise((a,o)=>r.load(s,c=>{fa(c?.scene)&&Object.assign(c,WG(c.scene)),a(c)},e,c=>o(new Error(`Could not load ${s}: ${c?.message}`))))))}}function pg(n,e,t,i){const r=Array.isArray(e)?e:[e],s=jL(tN(t,i),[n,...r],{equal:qi.equ});return Array.isArray(e)?s:s[0]}pg.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return RG(tN(t),[n,...i])};pg.clear=function(n,e){const t=Array.isArray(e)?e:[e];return OG([n,...t])};function nV(n){const e=PG(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:L.version}),e}const nN=0,mg={},iV=/^three(?=[A-Z])/,tE=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let rV=0;const sV=n=>typeof n=="function";function Ly(n){if(sV(n)){const e=`${rV++}`;return mg[e]=n,e}else Object.assign(mg,n)}function iN(n,e){const t=tE(n),i=mg[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function aV(n,e,t){var i;return n=tE(n)in mg?n:n.replace(iV,""),iN(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,Fb(e.object,t,n,e)}function oV(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?kb(n.parent,n):fa(n.object)&&(n.object.visible=!1),n.isHidden=!0,Tg(n)}}function rN(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?Hb(n.parent,n):fa(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Tg(n)}}function qw(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,s;const a=mg[tE(e.type)];e.object=(r=e.props.object)!=null?r:new a(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(Bc(e.object,e.props),e.props.attach)Hb(n,e);else if(fa(e.object)&&fa(n.object)){const a=n.object.children.indexOf(t?.object);if(t&&a!==-1){const o=n.object.children.indexOf(e.object);if(o!==-1){n.object.children.splice(o,1);const c=o<a?a-1:a;n.object.children.splice(c,0,e.object)}else e.object.parent=n.object,n.object.children.splice(a,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const a of e.children)qw(e,a);Tg(e)}}function rM(n,e){e&&(e.parent=n,n.children.push(e),qw(n,e))}function b4(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),qw(n,e,t)}function sN(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():g4.unstable_scheduleCallback(g4.unstable_IdlePriority,e)}}function jT(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?kb(n,e):fa(e.object)&&fa(n.object)&&(n.object.remove(e.object),QG(ZL(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const a=e.children[s];jT(e,a,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&sN(e.object),t===void 0&&Tg(e)}function lV(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const Yx=[];function cV(){for(const[t]of Yx){const i=t.parent;if(i){t.props.attach?kb(i,t):fa(t.object)&&fa(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?kb(t,r):fa(r.object)&&fa(t.object)&&t.object.remove(r.object)}t.isHidden&&rN(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&sN(t.object)}for(const[t,i,r]of Yx){t.props=i;const s=t.parent;if(s){var n,e;const a=mg[tE(t.type)];t.object=(n=t.props.object)!=null?n:new a(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,lV(r,t.object),Bc(t.object,t.props),t.props.attach?Hb(s,t):fa(t.object)&&fa(s.object)&&s.object.add(t.object);for(const o of t.children)o.props.attach?Hb(t,o):fa(o.object)&&fa(t.object)&&t.object.add(o.object);Tg(t)}}Yx.length=0}const sM=()=>{},S4={};let ix=nN;const uV=0,fV=4,Gb=nV({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:aV,removeChild:jT,appendChild:rM,appendInitialChild:rM,insertBefore:b4,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||rM(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||jT(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||b4(i,e,t)},getRootHostContext:()=>S4,getChildHostContext:()=>S4,commitUpdate(n,e,t,i,r){var s,a,o;iN(e,i);let c=!1;if((n.type==="primitive"&&t.object!==i.object||((s=i.args)==null?void 0:s.length)!==((a=t.args)==null?void 0:a.length)||(o=i.args)!=null&&o.some((h,p)=>{var g;return h!==((g=t.args)==null?void 0:g[p])}))&&(c=!0),c)Yx.push([n,{...i},r]);else{const h=ZG(n,i);Object.keys(h).length&&(Object.assign(n.props,h),Bc(n.object,h))}(r.sibling===null||(r.flags&fV)===uV)&&cV()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n?.object,prepareForCommit:()=>null,preparePortalMount:n=>Fb(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:oV,unhideInstance:rN,createTextInstance:sM,hideTextInstance:sM,unhideTextInstance:sM,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:L.createContext(null),setCurrentUpdatePriority(n){ix=n},getCurrentUpdatePriority(){return ix},resolveUpdatePriority(){var n;if(ix!==nN)return ix;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return jx.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return jx.ContinuousEventPriority;default:return jx.DefaultEventPriority}},resetFormInstance(){}}),Kd=new Map,Sm={objects:"shallow",strict:!1};function hV(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function dV(n){const e=Kd.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||eV(qT,M4),a=t||Gb.createContainer(s,jx.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||Kd.set(n,{fiber:a,store:s});let o,c,u=!1,h=null;return{async configure(p={}){let g;h=new Promise(X=>g=X);let{gl:y,size:x,scene:M,events:b,onCreated:S,shadows:T=!1,linear:A=!1,flat:w=!1,legacy:D=!1,orthographic:O=!1,frameloop:P="always",dpr:B=[1,2],performance:I,raycaster:z,camera:k,onPointerMissed:V}=p,j=s.getState(),W=j.gl;if(!j.gl){const X={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},ie=typeof y=="function"?await y(X):y;_4(ie)?W=ie:W=new kw({...X,...y}),j.set({gl:W})}let te=j.raycaster;te||j.set({raycaster:te=new JS});const{params:H,...Q}=z||{};if(qi.equ(Q,te,Sm)||Bc(te,{...Q}),qi.equ(H,te.params,Sm)||Bc(te,{params:{...te.params,...H}}),!j.camera||j.camera===c&&!qi.equ(c,k,Sm)){c=k;const X=k?.isCamera,ie=X?k:O?new ju(0,0,0,0,.1,1e3):new Er(75,0,.1,1e3);X||(ie.position.z=5,k&&(Bc(ie,k),ie.manual||("aspect"in k||"left"in k||"right"in k||"bottom"in k||"top"in k)&&(ie.manual=!0,ie.updateProjectionMatrix())),!j.camera&&!(k!=null&&k.rotation)&&ie.lookAt(0,0,0)),j.set({camera:ie}),te.camera=ie}if(!j.scene){let X;M!=null&&M.isScene?(X=M,Fb(X,s,"",{})):(X=new sh,Fb(X,s,"",{}),M&&Bc(X,M)),j.set({scene:X})}b&&!j.events.handlers&&j.set({events:b(s)});const ne=hV(n,x);if(qi.equ(ne,j.size,Sm)||j.setSize(ne.width,ne.height,ne.top,ne.left),B&&j.viewport.dpr!==$L(B)&&j.setDpr(B),j.frameloop!==P&&j.setFrameloop(P),j.onPointerMissed||j.set({onPointerMissed:V}),I&&!qi.equ(I,j.performance,Sm)&&j.set(X=>({performance:{...X.performance,...I}})),!j.xr){var re;const X=(ee,ue)=>{const pe=s.getState();pe.frameloop!=="never"&&M4(ee,!0,pe,ue)},ie=()=>{const ee=s.getState();ee.gl.xr.enabled=ee.gl.xr.isPresenting,ee.gl.xr.setAnimationLoop(ee.gl.xr.isPresenting?X:null),ee.gl.xr.isPresenting||qT(ee)},se={connect(){const ee=s.getState().gl;ee.xr.addEventListener("sessionstart",ie),ee.xr.addEventListener("sessionend",ie)},disconnect(){const ee=s.getState().gl;ee.xr.removeEventListener("sessionstart",ie),ee.xr.removeEventListener("sessionend",ie)}};typeof((re=W.xr)==null?void 0:re.addEventListener)=="function"&&se.connect(),j.set({xr:se})}if(W.shadowMap){const X=W.shadowMap.enabled,ie=W.shadowMap.type;if(W.shadowMap.enabled=!!T,qi.boo(T))W.shadowMap.type=Lv;else if(qi.str(T)){var G;const se={basic:$5,percentage:gS,soft:Lv,variance:Hl};W.shadowMap.type=(G=se[T])!=null?G:Lv}else qi.obj(T)&&Object.assign(W.shadowMap,T);(X!==W.shadowMap.enabled||ie!==W.shadowMap.type)&&(W.shadowMap.needsUpdate=!0)}return Xn.enabled=!D,u||(W.outputColorSpace=A?Ir:pr,W.toneMapping=w?kc:JA),j.legacy!==D&&j.set(()=>({legacy:D})),j.linear!==A&&j.set(()=>({linear:A})),j.flat!==w&&j.set(()=>({flat:w})),y&&!qi.fun(y)&&!_4(y)&&!qi.equ(y,W,Sm)&&Bc(W,y),o=S,u=!0,g(),this},render(p){return!u&&!h&&this.configure(),h.then(()=>{Gb.updateContainer(ge.jsx(pV,{store:s,children:p,onCreated:o,rootElement:n}),a,null,()=>{})}),s},unmount(){aN(n)}}}function pV({store:n,children:e,onCreated:t,rootElement:i}){return Uy(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),ge.jsx(Ww.Provider,{value:n,children:e})}function aN(n,e){const t=Kd.get(n),i=t?.fiber;if(i){const r=t?.store.getState();r&&(r.internal.active=!1),Gb.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,a,o,c;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),XG(r.scene),Kd.delete(n)}catch{}},500)})}}function oN(n,e,t){return ge.jsx(mV,{children:n,container:e,state:t})}function mV({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,a=Xw(),[o]=L.useState(()=>new JS),[c]=L.useState(()=>new ft),u=jw((p,g)=>{let y;if(g.camera&&r){const x=g.camera;y=p.viewport.getCurrentViewport(x,new J,r),x!==p.camera&&JL(x,r)}return{...p,...g,scene:t,raycaster:o,pointer:c,mouse:c,previousRoot:a,events:{...p.events,...g.events,...i},size:{...p.size,...r},viewport:{...p.viewport,...y},setEvents:x=>g.set(M=>({...M,events:{...M.events,...x}}))}}),h=L.useMemo(()=>{const p=kL((y,x)=>({...s,set:y,get:x})),g=y=>p.setState(x=>u.current(y,x));return g(a.getState()),a.subscribe(g),p},[a,t]);return ge.jsx(ge.Fragment,{children:Gb.createPortal(ge.jsx(Ww.Provider,{value:h,children:e}),h,null)})}function Yw(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}const lN=new Set,cN=new Set,uN=new Set,gV=n=>Yw(n,lN),vV=n=>Yw(n,cN),yV=n=>Yw(n,uN);function aM(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Gv(n,e){switch(n){case"before":return aM(lN,e);case"after":return aM(cN,e);case"tail":return aM(uN,e)}}let oM,lM;function WT(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),oM=e.internal.subscribers;for(let r=0;r<oM.length;r++)lM=oM[r],lM.ref.current(lM.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let Vb=!1,XT=!1,cM,E4,Em;function fN(n){E4=requestAnimationFrame(fN),Vb=!0,cM=0,Gv("before",n),XT=!0;for(const t of Kd.values()){var e;Em=t.store.getState(),Em.internal.active&&(Em.frameloop==="always"||Em.internal.frames>0)&&!((e=Em.gl.xr)!=null&&e.isPresenting)&&(cM+=WT(n,Em))}if(XT=!1,Gv("after",n),cM===0)return Gv("tail",n),Vb=!1,cancelAnimationFrame(E4)}function qT(n,e=1){var t;if(!n)return Kd.forEach(i=>qT(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):XT?n.internal.frames=2:n.internal.frames=1,Vb||(Vb=!0,requestAnimationFrame(fN)))}function M4(n,e=!0,t,i){if(e&&Gv("before",n),t)WT(n,t,i);else for(const r of Kd.values())WT(n,r.store.getState());e&&Gv("after",n)}const uM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function _V(n){const{handlePointer:e}=JG(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(uM).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(s=>({events:{...s.events,connected:t}})),r.handlers)for(const s in r.handlers){const a=r.handlers[s],[o,c]=uM[s];t.addEventListener(o,a,{passive:c})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const s=i.handlers[r],[a]=uM[r];i.connected.removeEventListener(a,s)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function T4(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function xV({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=L.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=L.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,h=L.useRef(!1);L.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,g,y]=L.useMemo(()=>{const S=()=>{if(!o.current.element)return;const{left:T,top:A,width:w,height:D,bottom:O,right:P,x:B,y:I}=o.current.element.getBoundingClientRect(),z={left:T,top:A,width:w,height:D,bottom:O,right:P,x:B,y:I};o.current.element instanceof HTMLElement&&i&&(z.height=o.current.element.offsetHeight,z.width=o.current.element.offsetWidth),Object.freeze(z),h.current&&!MV(o.current.lastBounds,z)&&a(o.current.lastBounds=z)};return[S,u?T4(S,u):S,c?T4(S,c):S]},[a,i,c,u]);function x(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",y,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function M(){o.current.element&&(o.current.resizeObserver=new r(y),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(S=>S.addEventListener("scroll",y,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const b=S=>{!S||S===o.current.element||(x(),o.current.element=S,o.current.scrollContainers=hN(S),M())};return SV(y,!!e),bV(g),L.useEffect(()=>{x(),M()},[e,y,g]),L.useEffect(()=>x,[]),[b,s,p]}function bV(n){L.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function SV(n,e){L.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function hN(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...hN(n.parentElement)]}const EV=["x","y","top","bottom","left","right","width","height"],MV=(n,e)=>EV.every(t=>n[t]===e[t]);function TV({ref:n,children:e,fallback:t,resize:i,style:r,gl:s,events:a=_V,eventSource:o,eventPrefix:c,shadows:u,linear:h,flat:p,legacy:g,orthographic:y,frameloop:x,dpr:M,performance:b,raycaster:S,camera:T,scene:A,onPointerMissed:w,onCreated:D,...O}){L.useMemo(()=>Ly(yG),[]);const P=GG(),[B,I]=xV({scroll:!0,debounce:{scroll:50,resize:0},...i}),z=L.useRef(null),k=L.useRef(null);L.useImperativeHandle(n,()=>z.current);const V=jw(w),[j,W]=L.useState(!1),[te,H]=L.useState(!1);if(j)throw j;if(te)throw te;const Q=L.useRef(null);Uy(()=>{const re=z.current;if(I.width>0&&I.height>0&&re){Q.current||(Q.current=dV(re));async function G(){await Q.current.configure({gl:s,scene:A,events:a,shadows:u,linear:h,flat:p,legacy:g,orthographic:y,frameloop:x,dpr:M,performance:b,raycaster:S,camera:T,size:I,onPointerMissed:(...X)=>V.current==null?void 0:V.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(o?HG(o)?o.current:o:k.current),c&&X.setEvents({compute:(ie,se)=>{const ee=ie[c+"X"],ue=ie[c+"Y"];se.pointer.set(ee/se.size.width*2-1,-(ue/se.size.height)*2+1),se.raycaster.setFromCamera(se.pointer,se.camera)}}),D?.(X)}}),Q.current.render(ge.jsx(P,{children:ge.jsx(jG,{set:H,children:ge.jsx(L.Suspense,{fallback:ge.jsx(VG,{set:W}),children:e??null})})}))}G()}}),L.useEffect(()=>{const re=z.current;if(re)return()=>aN(re)},[]);const ne=o?"none":"auto";return ge.jsx("div",{ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ne,...r},...O,children:ge.jsx("div",{ref:B,style:{width:"100%",height:"100%"},children:ge.jsx("canvas",{ref:z,style:{display:"block"},children:t})})})}function dN(n){return ge.jsx(qL,{children:ge.jsx(TV,{...n})})}function Gn(){return Gn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Gn.apply(null,arguments)}const Ny=new J,Zw=new J,AV=new J,A4=new ft;function wV(n,e,t){const i=Ny.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function CV(n,e){const t=Ny.setFromMatrixPosition(n.matrixWorld),i=Zw.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(AV);return r.angleTo(s)>Math.PI/2}function RV(n,e,t,i){const r=Ny.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),A4.set(s.x,s.y),t.setFromCamera(A4,e);const a=t.intersectObjects(i,!0);if(a.length){const o=a[0].distance;return r.distanceTo(t.ray.origin)<o}return!0}function OV(n,e){if(e instanceof ju)return e.zoom;if(e instanceof Er){const t=Ny.setFromMatrixPosition(n.matrixWorld),i=Zw.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function DV(n,e,t){if(e instanceof Er||e instanceof ju){const i=Ny.setFromMatrixPosition(n.matrixWorld),r=Zw.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),a=(t[1]-t[0])/(e.far-e.near),o=t[1]-a*e.far;return Math.round(a*s+o)}}const YT=n=>Math.abs(n)<1e-10?0:n;function pN(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=YT(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const UV=(n=>e=>pN(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),LV=(n=>(e,t)=>pN(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function NV(n){return n&&typeof n=="object"&&"current"in n}const nE=L.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:a,portal:o,distanceFactor:c,sprite:u=!1,transform:h=!1,occlude:p,onOcclude:g,castShadow:y,receiveShadow:x,material:M,geometry:b,zIndexRange:S=[16777271,0],calculatePosition:T=wV,as:A="div",wrapperClass:w,pointerEvents:D="auto",...O},P)=>{const{gl:B,camera:I,scene:z,size:k,raycaster:V,events:j,viewport:W}=on(),[te]=L.useState(()=>document.createElement(A)),H=L.useRef(null),Q=L.useRef(null),ne=L.useRef(0),re=L.useRef([0,0]),G=L.useRef(null),X=L.useRef(null),ie=o?.current||j.connected||B.domElement.parentNode,se=L.useRef(null),ee=L.useRef(!1),ue=L.useMemo(()=>p&&p!=="blending"||Array.isArray(p)&&p.length&&NV(p[0]),[p]);L.useLayoutEffect(()=>{const qe=B.domElement;p&&p==="blending"?(qe.style.zIndex=`${Math.floor(S[0]/2)}`,qe.style.position="absolute",qe.style.pointerEvents="none"):(qe.style.zIndex=null,qe.style.position=null,qe.style.pointerEvents=null)},[p]),L.useLayoutEffect(()=>{if(Q.current){const qe=H.current=mS.createRoot(te);if(z.updateMatrixWorld(),h)te.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Be=T(Q.current,I,k);te.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Be[0]}px,${Be[1]}px,0);transform-origin:0 0;`}return ie&&(r?ie.prepend(te):ie.appendChild(te)),()=>{ie&&ie.removeChild(te),qe.unmount()}}},[ie,h]),L.useLayoutEffect(()=>{w&&(te.className=w)},[w]);const pe=L.useMemo(()=>h?{position:"absolute",top:0,left:0,width:k.width,height:k.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...a&&{top:-k.height/2,left:-k.width/2,width:k.width,height:k.height},...t},[t,s,a,k,h]),ve=L.useMemo(()=>({position:"absolute",pointerEvents:D}),[D]);L.useLayoutEffect(()=>{if(ee.current=!1,h){var qe;(qe=H.current)==null||qe.render(L.createElement("div",{ref:G,style:pe},L.createElement("div",{ref:X,style:ve},L.createElement("div",{ref:P,className:i,style:t,children:n}))))}else{var Be;(Be=H.current)==null||Be.render(L.createElement("div",{ref:P,style:pe,className:i,children:n}))}});const _e=L.useRef(!0);Yl(qe=>{if(Q.current){I.updateMatrixWorld(),Q.current.updateWorldMatrix(!0,!1);const Be=h?re.current:T(Q.current,I,k);if(h||Math.abs(ne.current-I.zoom)>e||Math.abs(re.current[0]-Be[0])>e||Math.abs(re.current[1]-Be[1])>e){const Se=CV(Q.current,I);let He=!1;ue&&(Array.isArray(p)?He=p.map(Qe=>Qe.current):p!=="blending"&&(He=[z]));const oe=_e.current;if(He){const Qe=RV(Q.current,I,V,He);_e.current=Qe&&!Se}else _e.current=!Se;oe!==_e.current&&(g?g(!_e.current):te.style.display=_e.current?"block":"none");const lt=Math.floor(S[0]/2),ze=p?ue?[S[0],lt]:[lt-1,0]:S;if(te.style.zIndex=`${DV(Q.current,I,ze)}`,h){const[Qe,De]=[k.width/2,k.height/2],st=I.projectionMatrix.elements[5]*De,{isOrthographicCamera:ke,top:$,left:Y,bottom:fe,right:Ee}=I,Re=UV(I.matrixWorldInverse),Le=ke?`scale(${st})translate(${YT(-(Ee+Y)/2)}px,${YT(($+fe)/2)}px)`:`translateZ(${st}px)`;let Fe=Q.current.matrixWorld;u&&(Fe=I.matrixWorldInverse.clone().transpose().copyPosition(Fe).scale(Q.current.scale),Fe.elements[3]=Fe.elements[7]=Fe.elements[11]=0,Fe.elements[15]=1),te.style.width=k.width+"px",te.style.height=k.height+"px",te.style.perspective=ke?"":`${st}px`,G.current&&X.current&&(G.current.style.transform=`${Le}${Re}translate(${Qe}px,${De}px)`,X.current.style.transform=LV(Fe,1/((c||10)/400)))}else{const Qe=c===void 0?1:OV(Q.current,I)*c;te.style.transform=`translate3d(${Be[0]}px,${Be[1]}px,0) scale(${Qe})`}re.current=Be,ne.current=I.zoom}}if(!ue&&se.current&&!ee.current)if(h){if(G.current){const Be=G.current.children[0];if(Be!=null&&Be.clientWidth&&Be!=null&&Be.clientHeight){const{isOrthographicCamera:Se}=I;if(Se||b)O.scale&&(Array.isArray(O.scale)?O.scale instanceof J?se.current.scale.copy(O.scale.clone().divideScalar(1)):se.current.scale.set(1/O.scale[0],1/O.scale[1],1/O.scale[2]):se.current.scale.setScalar(1/O.scale));else{const He=(c||10)/400,oe=Be.clientWidth*He,lt=Be.clientHeight*He;se.current.scale.set(oe,lt,1)}ee.current=!0}}}else{const Be=te.children[0];if(Be!=null&&Be.clientWidth&&Be!=null&&Be.clientHeight){const Se=1/W.factor,He=Be.clientWidth*Se,oe=Be.clientHeight*Se;se.current.scale.set(He,oe,1),ee.current=!0}se.current.lookAt(qe.camera.position)}});const Xe=L.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return L.createElement("group",Gn({},O,{ref:Q}),p&&!ue&&L.createElement("mesh",{castShadow:y,receiveShadow:x,ref:se},b||L.createElement("planeGeometry",null),M||L.createElement("shaderMaterial",{side:mr,vertexShader:Xe.vertexShader,fragmentShader:Xe.fragmentShader})))});function PV(n,e,t){return Math.max(e,Math.min(n,t))}const zs={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function w4(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function C4(n,e,t,i=.15){return i===0?PV(n,e,t):n<e?-w4(e-n,t-e,i)+e:n>t?+w4(n-t,t-e,i)+t:n}function IV(n,[e,t],[i,r]){const[[s,a],[o,c]]=n;return[C4(e,s,a,i),C4(t,o,c,r)]}function BV(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zV(n){var e=BV(n,"string");return typeof e=="symbol"?e:String(e)}function za(n,e,t){return e=zV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function R4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function or(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?R4(Object(t),!0).forEach(function(i){za(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):R4(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const mN={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function O4(n){return n?n[0].toUpperCase()+n.slice(1):""}const FV=["enter","leave"];function HV(n=!1,e){return n&&!FV.includes(e)}function kV(n,e="",t=!1){const i=mN[n],r=i&&i[e]||e;return"on"+O4(n)+O4(r)+(HV(t,r)?"Capture":"")}const GV=["gotpointercapture","lostpointercapture"];function VV(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=GV.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function jV(n,e=""){const t=mN[n],i=t&&t[e]||e;return n+i}function iE(n){return"touches"in n}function gN(n){return iE(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function WV(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function XV(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function vN(n){return iE(n)?XV(n)[0]:n}function qV(n){return WV(n).map(e=>e.identifier)}function fM(n){const e=vN(n);return iE(n)?e.identifier:e.pointerId}function D4(n){const e=vN(n);return[e.clientX,e.clientY]}function YV(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function jb(n,...e){return typeof n=="function"?n(...e):n}function ZV(){}function KV(...n){return n.length===0?ZV:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function U4(n,e){return Object.assign({},e,n||{})}const $V=32;class QV{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?jb(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,YV(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const O=t._delta.map(Math.abs);zs.addTo(t._distance,O)}this.axisIntent&&this.axisIntent(e);const[a,o]=t._movement,[c,u]=i.threshold,{_step:h,values:p}=t;if(i.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(a)>=c&&p[0]),h[1]===!1&&(h[1]=Math.abs(o)>=u&&p[1])):(h[0]===!1&&(h[0]=Math.abs(a)>=c&&Math.sign(a)*c),h[1]===!1&&(h[1]=Math.abs(o)>=u&&Math.sign(o)*u)),t.intentional=h[0]!==!1||h[1]!==!1,!t.intentional)return;const g=[0,0];if(i.hasCustomTransform){const[O,P]=p;g[0]=h[0]!==!1?O-h[0]:0,g[1]=h[1]!==!1?P-h[1]:0}else g[0]=h[0]!==!1?a-h[0]:0,g[1]=h[1]!==!1?o-h[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(g);const y=t.offset,x=t._active&&!t._blocked||t.active;x&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=jb(i.bounds,t)),this.setup&&this.setup()),t.movement=g,this.computeOffset()));const[M,b]=t.offset,[[S,T],[A,w]]=t._bounds;t.overflow=[M<S?-1:M>T?1:0,b<A?-1:b>w?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const D=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=IV(t._bounds,t.offset,D),t.delta=zs.sub(t.offset,y),this.computeMovement(),x&&(!t.last||s>$V)){t.delta=zs.sub(t.offset,y);const O=t.delta.map(Math.abs);zs.addTo(t.distance,O),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[O[0]/s,O[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(or(or(or({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function JV([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class ej extends QV{constructor(...e){super(...e),za(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=zs.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=zs.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[gN(e)]:i.axisThreshold;t.axis=JV(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const tj=n=>n,L4=.15,yN={enabled(n=!0){return n},eventOptions(n,e,t){return or(or({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[L4,L4];case!1:return[0,0];default:return zs.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return zs.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||tj},threshold(n){return zs.toVector(n,0)}},nj=0,Py=or(or({},yN),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=nj){return n},bounds(n={}){if(typeof n=="function")return s=>Py.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),N4={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class ij extends ej{constructor(...e){super(...e),za(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=Py.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=fM(e),i._pointerActive=!0,this.computeValues(D4(e)),this.computeInitial(),t.preventScrollAxis&&gN(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=fM(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=D4(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=zs.sub(s,t._values),this.computeValues(s)),zs.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=fM(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,a]=t._distance;if(t.tap=s<=i.tapsThreshold&&a<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[o,c]=t._delta,[u,h]=t._movement,[p,g]=i.swipe.velocity,[y,x]=i.swipe.distance,M=i.swipe.duration;if(t.elapsedTime<M){const b=Math.abs(o/t.timeDelta),S=Math.abs(c/t.timeDelta);b>p&&Math.abs(u)>y&&(t.swipe[0]=Math.sign(o)),S>g&&Math.abs(h)>x&&(t.swipe[1]=Math.sign(c))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,rj(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=N4[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,zs.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in N4&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function rj(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Iy=typeof window<"u"&&window.document&&window.document.createElement;function _N(){return Iy&&"ontouchstart"in window}function sj(){return _N()||Iy&&window.navigator.maxTouchPoints>1}function aj(){return Iy&&"onpointerdown"in window}function oj(){return Iy&&"exitPointerLock"in window.document}function lj(){try{return"constructor"in GestureEvent}catch{return!1}}const Ho={isBrowser:Iy,gesture:lj(),touch:_N(),touchscreen:sj(),pointer:aj(),pointerLock:oj()},cj=250,uj=180,fj=.5,hj=50,dj=250,pj=10,P4={mouse:0,touch:0,pen:8},mj=or(or({},Py),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&Ho.pointerLock,Ho.touch&&t?"touch":this.pointerLock?"mouse":Ho.pointer&&!r?"pointer":Ho.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?cj:void 0,!(!Ho.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=zs.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=fj,distance:e=hj,duration:t=dj}={}){return{velocity:this.transform(zs.toVector(n)),distance:this.transform(zs.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return uj;case!1:return 0;default:return n}},axisThreshold(n){return n?or(or({},P4),n):P4},keyboardDisplacement(n=pj){return n}});or(or({},yN),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!Ho.touch&&Ho.gesture)return"gesture";if(Ho.touch&&i)return"touch";if(Ho.touchscreen){if(Ho.pointer)return"pointer";if(Ho.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=a=>{const o=U4(jb(t,a),{min:-1/0,max:1/0});return[o.min,o.max]},s=a=>{const o=U4(jb(i,a),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:a=>[r(a),s(a)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",zs.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});or(or({},Py),{},{mouseOnly:(n=!0)=>n});or(or({},Py),{},{mouseOnly:(n=!0)=>n});const xN=new Map,ZT=new Map;function gj(n){xN.set(n.key,n.engine),ZT.set(n.key,n.resolver)}const vj={key:"drag",engine:ij,resolver:mj};function yj(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function _j(n,e){if(n==null)return{};var t=yj(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const xj={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Ho.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},bj=["target","eventOptions","window","enabled","transform"];function Zx(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=Zx(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function Sj(n,e,t={}){const i=n,{target:r,eventOptions:s,window:a,enabled:o,transform:c}=i,u=_j(i,bj);if(t.shared=Zx({target:r,eventOptions:s,window:a,enabled:o,transform:c},xj),e){const h=ZT.get(e);t[e]=Zx(or({shared:t.shared},u),h)}else for(const h in u){const p=ZT.get(h);p&&(t[h]=Zx(or({shared:t.shared},u[h]),p))}return t}class bN{constructor(e,t){za(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const a=this._listeners,o=jV(t,i),c=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=or(or({},c),s);e.addEventListener(o,r,u);const h=()=>{e.removeEventListener(o,r,u),a.delete(h)};return a.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class Ej{constructor(){za(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class Mj{constructor(e){za(this,"gestures",new Set),za(this,"_targetEventStore",new bN(this)),za(this,"gestureEventStores",{}),za(this,"gestureTimeoutStores",{}),za(this,"handlers",{}),za(this,"config",{}),za(this,"pointerIds",new Set),za(this,"touchIds",new Set),za(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Tj(this,e)}setEventIds(e){if(iE(e))return this.touchIds=new Set(qV(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=Sj(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const a of this.gestures){const o=this.config[a],c=I4(i,o.eventOptions,!!r);if(o.enabled){const u=xN.get(a);new u(this,e,a).bind(c)}}const s=I4(i,t.eventOptions,!!r);for(const a in this.nativeHandlers)s(a,"",o=>this.nativeHandlers[a](or(or({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const s in i)i[s]=KV(...i[s]);if(!r)return i;for(const s in i){const{device:a,capture:o,passive:c}=VV(s);this._targetEventStore.add(r,a,"",i[s],{capture:o,passive:c})}}}}function Mm(n,e){n.gestures.add(e),n.gestureEventStores[e]=new bN(n,e),n.gestureTimeoutStores[e]=new Ej}function Tj(n,e){e.drag&&Mm(n,"drag"),e.wheel&&Mm(n,"wheel"),e.scroll&&Mm(n,"scroll"),e.move&&Mm(n,"move"),e.pinch&&Mm(n,"pinch"),e.hover&&Mm(n,"hover")}const I4=(n,e,t)=>(i,r,s,a={},o=!1)=>{var c,u;const h=(c=a.capture)!==null&&c!==void 0?c:e.capture,p=(u=a.passive)!==null&&u!==void 0?u:e.passive;let g=o?i:kV(i,r,h);t&&p&&(g+="Passive"),n[g]=n[g]||[],n[g].push(s)};function Aj(n,e={},t,i){const r=de.useMemo(()=>new Mj(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),de.useEffect(r.effect.bind(r)),de.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function wj(n,e){return gj(vj),Aj({drag:n},e||{},"drag")}const rE=parseInt(xg.replace(/\D+/g,"")),SN=rE>=125?"uv1":"uv2";var ko=Uint8Array,Zf=Uint16Array,KT=Uint32Array,EN=new ko([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),MN=new ko([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cj=new ko([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),TN=function(n,e){for(var t=new Zf(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new KT(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},AN=TN(EN,2),wN=AN[0],Rj=AN[1];wN[28]=258,Rj[258]=28;var Oj=TN(MN,0),Dj=Oj[0],$T=new Zf(32768);for(var Hi=0;Hi<32768;++Hi){var kf=(Hi&43690)>>>1|(Hi&21845)<<1;kf=(kf&52428)>>>2|(kf&13107)<<2,kf=(kf&61680)>>>4|(kf&3855)<<4,$T[Hi]=((kf&65280)>>>8|(kf&255)<<8)>>>1}var Vv=(function(n,e,t){for(var i=n.length,r=0,s=new Zf(e);r<i;++r)++s[n[r]-1];var a=new Zf(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var o;if(t){o=new Zf(1<<e);var c=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],h=e-n[r],p=a[n[r]-1]++<<h,g=p|(1<<h)-1;p<=g;++p)o[$T[p]>>>c]=u}else for(o=new Zf(i),r=0;r<i;++r)n[r]&&(o[r]=$T[a[n[r]-1]++]>>>15-n[r]);return o}),By=new ko(288);for(var Hi=0;Hi<144;++Hi)By[Hi]=8;for(var Hi=144;Hi<256;++Hi)By[Hi]=9;for(var Hi=256;Hi<280;++Hi)By[Hi]=7;for(var Hi=280;Hi<288;++Hi)By[Hi]=8;var CN=new ko(32);for(var Hi=0;Hi<32;++Hi)CN[Hi]=5;var Uj=Vv(By,9,1),Lj=Vv(CN,5,1),hM=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Bl=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},dM=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Nj=function(n){return(n/8|0)+(n&7&&1)},Pj=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Zf?Zf:n instanceof KT?KT:ko)(t-e);return i.set(n.subarray(e,t)),i},Ij=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new ko(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new ko(i*3));var a=function(pe){var ve=e.length;if(pe>ve){var _e=new ko(Math.max(ve*2,pe));_e.set(e),e=_e}},o=t.f||0,c=t.p||0,u=t.b||0,h=t.l,p=t.d,g=t.m,y=t.n,x=i*8;do{if(!h){t.f=o=Bl(n,c,1);var M=Bl(n,c+1,3);if(c+=3,M)if(M==1)h=Uj,p=Lj,g=9,y=5;else if(M==2){var A=Bl(n,c,31)+257,w=Bl(n,c+10,15)+4,D=A+Bl(n,c+5,31)+1;c+=14;for(var O=new ko(D),P=new ko(19),B=0;B<w;++B)P[Cj[B]]=Bl(n,c+B*3,7);c+=w*3;for(var I=hM(P),z=(1<<I)-1,k=Vv(P,I,1),B=0;B<D;){var V=k[Bl(n,c,z)];c+=V&15;var b=V>>>4;if(b<16)O[B++]=b;else{var j=0,W=0;for(b==16?(W=3+Bl(n,c,3),c+=2,j=O[B-1]):b==17?(W=3+Bl(n,c,7),c+=3):b==18&&(W=11+Bl(n,c,127),c+=7);W--;)O[B++]=j}}var te=O.subarray(0,A),H=O.subarray(A);g=hM(te),y=hM(H),h=Vv(te,g,1),p=Vv(H,y,1)}else throw"invalid block type";else{var b=Nj(c)+4,S=n[b-4]|n[b-3]<<8,T=b+S;if(T>i){if(s)throw"unexpected EOF";break}r&&a(u+S),e.set(n.subarray(b,T),u),t.b=u+=S,t.p=c=T*8;continue}if(c>x){if(s)throw"unexpected EOF";break}}r&&a(u+131072);for(var Q=(1<<g)-1,ne=(1<<y)-1,re=c;;re=c){var j=h[dM(n,c)&Q],G=j>>>4;if(c+=j&15,c>x){if(s)throw"unexpected EOF";break}if(!j)throw"invalid length/literal";if(G<256)e[u++]=G;else if(G==256){re=c,h=null;break}else{var X=G-254;if(G>264){var B=G-257,ie=EN[B];X=Bl(n,c,(1<<ie)-1)+wN[B],c+=ie}var se=p[dM(n,c)&ne],ee=se>>>4;if(!se)throw"invalid distance";c+=se&15;var H=Dj[ee];if(ee>3){var ie=MN[ee];H+=dM(n,c)&(1<<ie)-1,c+=ie}if(c>x){if(s)throw"unexpected EOF";break}r&&a(u+131072);for(var ue=u+X;u<ue;u+=4)e[u]=e[u-H],e[u+1]=e[u+1-H],e[u+2]=e[u+2-H],e[u+3]=e[u+3-H];u=ue}}t.l=h,t.p=re,t.b=u,h&&(o=1,t.m=g,t.d=p,t.n=y)}while(!o);return u==e.length?e:Pj(e,0,u)},Bj=new ko(0),zj=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function rx(n,e){return Ij((zj(n),n.subarray(2,-4)),e)}var Fj=typeof TextDecoder<"u"&&new TextDecoder,Hj=0;try{Fj.decode(Bj,{stream:!0}),Hj=1}catch{}const kj=n=>n&&n.isCubeTexture;class Gj extends fi{constructor(e,t){var i,r;const s=kj(e),o=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,c=Math.floor(Math.log2(o)),u=Math.pow(2,c),h=3*Math.max(u,112),p=4*u,g=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/p}`,`#define CUBEUV_MAX_MIP ${c}.0`],y=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,x=g.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${rE>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,M={map:{value:e},height:{value:t?.height||15},radius:{value:t?.radius||100}},b=new Cy(1,16),S=new ks({uniforms:M,fragmentShader:x,vertexShader:y,side:mr});super(b,S)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class Vj extends Ow{constructor(e){super(e),this.type=Xr}parse(e){const a=function(B,I){switch(B){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(I||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(I||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(I||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(I||""))}},p=function(B,I,z){I=I||1024;let V=B.pos,j=-1,W=0,te="",H=String.fromCharCode.apply(null,new Uint16Array(B.subarray(V,V+128)));for(;0>(j=H.indexOf(`
`))&&W<I&&V<B.byteLength;)te+=H,W+=H.length,V+=128,H+=String.fromCharCode.apply(null,new Uint16Array(B.subarray(V,V+128)));return-1<j?(B.pos+=W+j+1,te+H.slice(0,j)):!1},g=function(B){const I=/^#\?(\S+)/,z=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,k=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,V=/^\s*FORMAT=(\S+)\s*$/,j=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,W={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let te,H;for((B.pos>=B.byteLength||!(te=p(B)))&&a(1,"no header found"),(H=te.match(I))||a(3,"bad initial token"),W.valid|=1,W.programtype=H[1],W.string+=te+`
`;te=p(B),te!==!1;){if(W.string+=te+`
`,te.charAt(0)==="#"){W.comments+=te+`
`;continue}if((H=te.match(z))&&(W.gamma=parseFloat(H[1])),(H=te.match(k))&&(W.exposure=parseFloat(H[1])),(H=te.match(V))&&(W.valid|=2,W.format=H[1]),(H=te.match(j))&&(W.valid|=4,W.height=parseInt(H[1],10),W.width=parseInt(H[2],10)),W.valid&2&&W.valid&4)break}return W.valid&2||a(3,"missing format specifier"),W.valid&4||a(3,"missing image size specifier"),W},y=function(B,I,z){const k=I;if(k<8||k>32767||B[0]!==2||B[1]!==2||B[2]&128)return new Uint8Array(B);k!==(B[2]<<8|B[3])&&a(3,"wrong scanline width");const V=new Uint8Array(4*I*z);V.length||a(4,"unable to allocate buffer space");let j=0,W=0;const te=4*k,H=new Uint8Array(4),Q=new Uint8Array(te);let ne=z;for(;ne>0&&W<B.byteLength;){W+4>B.byteLength&&a(1),H[0]=B[W++],H[1]=B[W++],H[2]=B[W++],H[3]=B[W++],(H[0]!=2||H[1]!=2||(H[2]<<8|H[3])!=k)&&a(3,"bad rgbe scanline format");let re=0,G;for(;re<te&&W<B.byteLength;){G=B[W++];const ie=G>128;if(ie&&(G-=128),(G===0||re+G>te)&&a(3,"bad scanline data"),ie){const se=B[W++];for(let ee=0;ee<G;ee++)Q[re++]=se}else Q.set(B.subarray(W,W+G),re),re+=G,W+=G}const X=k;for(let ie=0;ie<X;ie++){let se=0;V[j]=Q[ie+se],se+=k,V[j+1]=Q[ie+se],se+=k,V[j+2]=Q[ie+se],se+=k,V[j+3]=Q[ie+se],j+=4}ne--}return V},x=function(B,I,z,k){const V=B[I+3],j=Math.pow(2,V-128)/255;z[k+0]=B[I+0]*j,z[k+1]=B[I+1]*j,z[k+2]=B[I+2]*j,z[k+3]=1},M=function(B,I,z,k){const V=B[I+3],j=Math.pow(2,V-128)/255;z[k+0]=Dd.toHalfFloat(Math.min(B[I+0]*j,65504)),z[k+1]=Dd.toHalfFloat(Math.min(B[I+1]*j,65504)),z[k+2]=Dd.toHalfFloat(Math.min(B[I+2]*j,65504)),z[k+3]=Dd.toHalfFloat(1)},b=new Uint8Array(e);b.pos=0;const S=g(b),T=S.width,A=S.height,w=y(b.subarray(b.pos),T,A);let D,O,P;switch(this.type){case Yi:P=w.length/4;const B=new Float32Array(P*4);for(let z=0;z<P;z++)x(w,z*4,B,z*4);D=B,O=Yi;break;case Xr:P=w.length/4;const I=new Uint16Array(P*4);for(let z=0;z<P;z++)M(w,z*4,I,z*4);D=I,O=Xr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:T,height:A,data:D,header:S.string,gamma:S.gamma,exposure:S.exposure,type:O}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(a,o){switch(a.type){case Yi:case Xr:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=Zn,a.magFilter=Zn,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,o)}return super.load(e,s,i,r)}}const rv=rE>=152;class jj extends Ow{constructor(e){super(e),this.type=Xr}parse(e){const I=Math.pow(2.7182818,2.2);function z(K,le){for(var Ae=0,Ge=0;Ge<65536;++Ge)(Ge==0||K[Ge>>3]&1<<(Ge&7))&&(le[Ae++]=Ge);for(var We=Ae-1;Ae<65536;)le[Ae++]=0;return We}function k(K){for(var le=0;le<16384;le++)K[le]={},K[le].len=0,K[le].lit=0,K[le].p=null}const V={l:0,c:0,lc:0};function j(K,le,Ae,Ge,We){for(;Ae<K;)le=le<<8|nt(Ge,We),Ae+=8;Ae-=K,V.l=le>>Ae&(1<<K)-1,V.c=le,V.lc=Ae}const W=new Array(59);function te(K){for(var le=0;le<=58;++le)W[le]=0;for(var le=0;le<65537;++le)W[K[le]]+=1;for(var Ae=0,le=58;le>0;--le){var Ge=Ae+W[le]>>1;W[le]=Ae,Ae=Ge}for(var le=0;le<65537;++le){var We=K[le];We>0&&(K[le]=We|W[We]++<<6)}}function H(K,le,Ae,Ge,We,rt,bt){for(var Z=Ae,me=0,ye=0;We<=rt;We++){if(Z.value-Ae.value>Ge)return!1;j(6,me,ye,K,Z);var xe=V.l;if(me=V.c,ye=V.lc,bt[We]=xe,xe==63){if(Z.value-Ae.value>Ge)throw"Something wrong with hufUnpackEncTable";j(8,me,ye,K,Z);var he=V.l+6;if(me=V.c,ye=V.lc,We+he>rt+1)throw"Something wrong with hufUnpackEncTable";for(;he--;)bt[We++]=0;We--}else if(xe>=59){var he=xe-59+2;if(We+he>rt+1)throw"Something wrong with hufUnpackEncTable";for(;he--;)bt[We++]=0;We--}}te(bt)}function Q(K){return K&63}function ne(K){return K>>6}function re(K,le,Ae,Ge){for(;le<=Ae;le++){var We=ne(K[le]),rt=Q(K[le]);if(We>>rt)throw"Invalid table entry";if(rt>14){var bt=Ge[We>>rt-14];if(bt.len)throw"Invalid table entry";if(bt.lit++,bt.p){var Z=bt.p;bt.p=new Array(bt.lit);for(var me=0;me<bt.lit-1;++me)bt.p[me]=Z[me]}else bt.p=new Array(1);bt.p[bt.lit-1]=le}else if(rt)for(var ye=0,me=1<<14-rt;me>0;me--){var bt=Ge[(We<<14-rt)+ye];if(bt.len||bt.p)throw"Invalid table entry";bt.len=rt,bt.lit=le,ye++}}return!0}const G={c:0,lc:0};function X(K,le,Ae,Ge){K=K<<8|nt(Ae,Ge),le+=8,G.c=K,G.lc=le}const ie={c:0,lc:0};function se(K,le,Ae,Ge,We,rt,bt,Z,me,ye){if(K==le){Ge<8&&(X(Ae,Ge,We,bt),Ae=G.c,Ge=G.lc),Ge-=8;var xe=Ae>>Ge,xe=new Uint8Array([xe])[0];if(me.value+xe>ye)return!1;for(var he=Z[me.value-1];xe-- >0;)Z[me.value++]=he}else if(me.value<ye)Z[me.value++]=K;else return!1;ie.c=Ae,ie.lc=Ge}function ee(K){return K&65535}function ue(K){var le=ee(K);return le>32767?le-65536:le}const pe={a:0,b:0};function ve(K,le){var Ae=ue(K),Ge=ue(le),We=Ge,rt=Ae+(We&1)+(We>>1),bt=rt,Z=rt-We;pe.a=bt,pe.b=Z}function _e(K,le){var Ae=ee(K),Ge=ee(le),We=Ae-(Ge>>1)&65535,rt=Ge+We-32768&65535;pe.a=rt,pe.b=We}function Xe(K,le,Ae,Ge,We,rt,bt){for(var Z=bt<16384,me=Ae>We?We:Ae,ye=1,xe;ye<=me;)ye<<=1;for(ye>>=1,xe=ye,ye>>=1;ye>=1;){for(var he=0,ut=he+rt*(We-xe),it=rt*ye,ot=rt*xe,dt=Ge*ye,Et=Ge*xe,Lt,Mt,Vt,$t;he<=ut;he+=ot){for(var Zt=he,Rn=he+Ge*(Ae-xe);Zt<=Rn;Zt+=Et){var Nt=Zt+dt,Pt=Zt+it,Vn=Pt+dt;Z?(ve(K[Zt+le],K[Pt+le]),Lt=pe.a,Vt=pe.b,ve(K[Nt+le],K[Vn+le]),Mt=pe.a,$t=pe.b,ve(Lt,Mt),K[Zt+le]=pe.a,K[Nt+le]=pe.b,ve(Vt,$t),K[Pt+le]=pe.a,K[Vn+le]=pe.b):(_e(K[Zt+le],K[Pt+le]),Lt=pe.a,Vt=pe.b,_e(K[Nt+le],K[Vn+le]),Mt=pe.a,$t=pe.b,_e(Lt,Mt),K[Zt+le]=pe.a,K[Nt+le]=pe.b,_e(Vt,$t),K[Pt+le]=pe.a,K[Vn+le]=pe.b)}if(Ae&ye){var Pt=Zt+it;Z?ve(K[Zt+le],K[Pt+le]):_e(K[Zt+le],K[Pt+le]),Lt=pe.a,K[Pt+le]=pe.b,K[Zt+le]=Lt}}if(We&ye)for(var Zt=he,Rn=he+Ge*(Ae-xe);Zt<=Rn;Zt+=Et){var Nt=Zt+dt;Z?ve(K[Zt+le],K[Nt+le]):_e(K[Zt+le],K[Nt+le]),Lt=pe.a,K[Nt+le]=pe.b,K[Zt+le]=Lt}xe=ye,ye>>=1}return he}function qe(K,le,Ae,Ge,We,rt,bt,Z,me,ye){for(var xe=0,he=0,ut=Z,it=Math.trunc(We.value+(rt+7)/8);We.value<it;)for(X(xe,he,Ae,We),xe=G.c,he=G.lc;he>=14;){var ot=xe>>he-14&16383,dt=le[ot];if(dt.len)he-=dt.len,se(dt.lit,bt,xe,he,Ae,Ge,We,me,ye,ut),xe=ie.c,he=ie.lc;else{if(!dt.p)throw"hufDecode issues";var Et;for(Et=0;Et<dt.lit;Et++){for(var Lt=Q(K[dt.p[Et]]);he<Lt&&We.value<it;)X(xe,he,Ae,We),xe=G.c,he=G.lc;if(he>=Lt&&ne(K[dt.p[Et]])==(xe>>he-Lt&(1<<Lt)-1)){he-=Lt,se(dt.p[Et],bt,xe,he,Ae,Ge,We,me,ye,ut),xe=ie.c,he=ie.lc;break}}if(Et==dt.lit)throw"hufDecode issues"}}var Mt=8-rt&7;for(xe>>=Mt,he-=Mt;he>0;){var dt=le[xe<<14-he&16383];if(dt.len)he-=dt.len,se(dt.lit,bt,xe,he,Ae,Ge,We,me,ye,ut),xe=ie.c,he=ie.lc;else throw"hufDecode issues"}return!0}function Be(K,le,Ae,Ge,We,rt){var bt={value:0},Z=Ae.value,me=ht(le,Ae),ye=ht(le,Ae);Ae.value+=4;var xe=ht(le,Ae);if(Ae.value+=4,me<0||me>=65537||ye<0||ye>=65537)throw"Something wrong with HUF_ENCSIZE";var he=new Array(65537),ut=new Array(16384);k(ut);var it=Ge-(Ae.value-Z);if(H(K,le,Ae,it,me,ye,he),xe>8*(Ge-(Ae.value-Z)))throw"Something wrong with hufUncompress";re(he,me,ye,ut),qe(he,ut,K,le,Ae,xe,ye,rt,We,bt)}function Se(K,le,Ae){for(var Ge=0;Ge<Ae;++Ge)le[Ge]=K[le[Ge]]}function He(K){for(var le=1;le<K.length;le++){var Ae=K[le-1]+K[le]-128;K[le]=Ae}}function oe(K,le){for(var Ae=0,Ge=Math.floor((K.length+1)/2),We=0,rt=K.length-1;!(We>rt||(le[We++]=K[Ae++],We>rt));)le[We++]=K[Ge++]}function lt(K){for(var le=K.byteLength,Ae=new Array,Ge=0,We=new DataView(K);le>0;){var rt=We.getInt8(Ge++);if(rt<0){var bt=-rt;le-=bt+1;for(var Z=0;Z<bt;Z++)Ae.push(We.getUint8(Ge++))}else{var bt=rt;le-=2;for(var me=We.getUint8(Ge++),Z=0;Z<bt+1;Z++)Ae.push(me)}}return Ae}function ze(K,le,Ae,Ge,We,rt){var Nt=new DataView(rt.buffer),bt=Ae[K.idx[0]].width,Z=Ae[K.idx[0]].height,me=3,ye=Math.floor(bt/8),xe=Math.ceil(bt/8),he=Math.ceil(Z/8),ut=bt-(xe-1)*8,it=Z-(he-1)*8,ot={value:0},dt=new Array(me),Et=new Array(me),Lt=new Array(me),Mt=new Array(me),Vt=new Array(me);for(let vn=0;vn<me;++vn)Vt[vn]=le[K.idx[vn]],dt[vn]=vn<1?0:dt[vn-1]+xe*he,Et[vn]=new Float32Array(64),Lt[vn]=new Uint16Array(64),Mt[vn]=new Uint16Array(xe*64);for(let vn=0;vn<he;++vn){var $t=8;vn==he-1&&($t=it);var Zt=8;for(let ln=0;ln<xe;++ln){ln==xe-1&&(Zt=ut);for(let kt=0;kt<me;++kt)Lt[kt].fill(0),Lt[kt][0]=We[dt[kt]++],Qe(ot,Ge,Lt[kt]),De(Lt[kt],Et[kt]),st(Et[kt]);ke(Et);for(let kt=0;kt<me;++kt)$(Et[kt],Mt[kt],ln*64)}let Bn=0;for(let ln=0;ln<me;++ln){const kt=Ae[K.idx[ln]].type;for(let ii=8*vn;ii<8*vn+$t;++ii){Bn=Vt[ln][ii];for(let si=0;si<ye;++si){const yn=si*64+(ii&7)*8;Nt.setUint16(Bn+0*kt,Mt[ln][yn+0],!0),Nt.setUint16(Bn+2*kt,Mt[ln][yn+1],!0),Nt.setUint16(Bn+4*kt,Mt[ln][yn+2],!0),Nt.setUint16(Bn+6*kt,Mt[ln][yn+3],!0),Nt.setUint16(Bn+8*kt,Mt[ln][yn+4],!0),Nt.setUint16(Bn+10*kt,Mt[ln][yn+5],!0),Nt.setUint16(Bn+12*kt,Mt[ln][yn+6],!0),Nt.setUint16(Bn+14*kt,Mt[ln][yn+7],!0),Bn+=16*kt}}if(ye!=xe)for(let ii=8*vn;ii<8*vn+$t;++ii){const si=Vt[ln][ii]+8*ye*2*kt,yn=ye*64+(ii&7)*8;for(let di=0;di<Zt;++di)Nt.setUint16(si+di*2*kt,Mt[ln][yn+di],!0)}}}for(var Rn=new Uint16Array(bt),Nt=new DataView(rt.buffer),Pt=0;Pt<me;++Pt){Ae[K.idx[Pt]].decoded=!0;var Vn=Ae[K.idx[Pt]].type;if(Ae[Pt].type==2)for(var dn=0;dn<Z;++dn){const vn=Vt[Pt][dn];for(var jn=0;jn<bt;++jn)Rn[jn]=Nt.getUint16(vn+jn*2*Vn,!0);for(var jn=0;jn<bt;++jn)Nt.setFloat32(vn+jn*2*Vn,Oe(Rn[jn]),!0)}}}function Qe(K,le,Ae){for(var Ge,We=1;We<64;)Ge=le[K.value],Ge==65280?We=64:Ge>>8==255?We+=Ge&255:(Ae[We]=Ge,We++),K.value++}function De(K,le){le[0]=Oe(K[0]),le[1]=Oe(K[1]),le[2]=Oe(K[5]),le[3]=Oe(K[6]),le[4]=Oe(K[14]),le[5]=Oe(K[15]),le[6]=Oe(K[27]),le[7]=Oe(K[28]),le[8]=Oe(K[2]),le[9]=Oe(K[4]),le[10]=Oe(K[7]),le[11]=Oe(K[13]),le[12]=Oe(K[16]),le[13]=Oe(K[26]),le[14]=Oe(K[29]),le[15]=Oe(K[42]),le[16]=Oe(K[3]),le[17]=Oe(K[8]),le[18]=Oe(K[12]),le[19]=Oe(K[17]),le[20]=Oe(K[25]),le[21]=Oe(K[30]),le[22]=Oe(K[41]),le[23]=Oe(K[43]),le[24]=Oe(K[9]),le[25]=Oe(K[11]),le[26]=Oe(K[18]),le[27]=Oe(K[24]),le[28]=Oe(K[31]),le[29]=Oe(K[40]),le[30]=Oe(K[44]),le[31]=Oe(K[53]),le[32]=Oe(K[10]),le[33]=Oe(K[19]),le[34]=Oe(K[23]),le[35]=Oe(K[32]),le[36]=Oe(K[39]),le[37]=Oe(K[45]),le[38]=Oe(K[52]),le[39]=Oe(K[54]),le[40]=Oe(K[20]),le[41]=Oe(K[22]),le[42]=Oe(K[33]),le[43]=Oe(K[38]),le[44]=Oe(K[46]),le[45]=Oe(K[51]),le[46]=Oe(K[55]),le[47]=Oe(K[60]),le[48]=Oe(K[21]),le[49]=Oe(K[34]),le[50]=Oe(K[37]),le[51]=Oe(K[47]),le[52]=Oe(K[50]),le[53]=Oe(K[56]),le[54]=Oe(K[59]),le[55]=Oe(K[61]),le[56]=Oe(K[35]),le[57]=Oe(K[36]),le[58]=Oe(K[48]),le[59]=Oe(K[49]),le[60]=Oe(K[57]),le[61]=Oe(K[58]),le[62]=Oe(K[62]),le[63]=Oe(K[63])}function st(K){const le=.5*Math.cos(.7853975),Ae=.5*Math.cos(3.14159/16),Ge=.5*Math.cos(3.14159/8),We=.5*Math.cos(3*3.14159/16),rt=.5*Math.cos(5*3.14159/16),bt=.5*Math.cos(3*3.14159/8),Z=.5*Math.cos(7*3.14159/16);for(var me=new Array(4),ye=new Array(4),xe=new Array(4),he=new Array(4),ut=0;ut<8;++ut){var it=ut*8;me[0]=Ge*K[it+2],me[1]=bt*K[it+2],me[2]=Ge*K[it+6],me[3]=bt*K[it+6],ye[0]=Ae*K[it+1]+We*K[it+3]+rt*K[it+5]+Z*K[it+7],ye[1]=We*K[it+1]-Z*K[it+3]-Ae*K[it+5]-rt*K[it+7],ye[2]=rt*K[it+1]-Ae*K[it+3]+Z*K[it+5]+We*K[it+7],ye[3]=Z*K[it+1]-rt*K[it+3]+We*K[it+5]-Ae*K[it+7],xe[0]=le*(K[it+0]+K[it+4]),xe[3]=le*(K[it+0]-K[it+4]),xe[1]=me[0]+me[3],xe[2]=me[1]-me[2],he[0]=xe[0]+xe[1],he[1]=xe[3]+xe[2],he[2]=xe[3]-xe[2],he[3]=xe[0]-xe[1],K[it+0]=he[0]+ye[0],K[it+1]=he[1]+ye[1],K[it+2]=he[2]+ye[2],K[it+3]=he[3]+ye[3],K[it+4]=he[3]-ye[3],K[it+5]=he[2]-ye[2],K[it+6]=he[1]-ye[1],K[it+7]=he[0]-ye[0]}for(var ot=0;ot<8;++ot)me[0]=Ge*K[16+ot],me[1]=bt*K[16+ot],me[2]=Ge*K[48+ot],me[3]=bt*K[48+ot],ye[0]=Ae*K[8+ot]+We*K[24+ot]+rt*K[40+ot]+Z*K[56+ot],ye[1]=We*K[8+ot]-Z*K[24+ot]-Ae*K[40+ot]-rt*K[56+ot],ye[2]=rt*K[8+ot]-Ae*K[24+ot]+Z*K[40+ot]+We*K[56+ot],ye[3]=Z*K[8+ot]-rt*K[24+ot]+We*K[40+ot]-Ae*K[56+ot],xe[0]=le*(K[ot]+K[32+ot]),xe[3]=le*(K[ot]-K[32+ot]),xe[1]=me[0]+me[3],xe[2]=me[1]-me[2],he[0]=xe[0]+xe[1],he[1]=xe[3]+xe[2],he[2]=xe[3]-xe[2],he[3]=xe[0]-xe[1],K[0+ot]=he[0]+ye[0],K[8+ot]=he[1]+ye[1],K[16+ot]=he[2]+ye[2],K[24+ot]=he[3]+ye[3],K[32+ot]=he[3]-ye[3],K[40+ot]=he[2]-ye[2],K[48+ot]=he[1]-ye[1],K[56+ot]=he[0]-ye[0]}function ke(K){for(var le=0;le<64;++le){var Ae=K[0][le],Ge=K[1][le],We=K[2][le];K[0][le]=Ae+1.5747*We,K[1][le]=Ae-.1873*Ge-.4682*We,K[2][le]=Ae+1.8556*Ge}}function $(K,le,Ae){for(var Ge=0;Ge<64;++Ge)le[Ae+Ge]=Dd.toHalfFloat(Y(K[Ge]))}function Y(K){return K<=1?Math.sign(K)*Math.pow(Math.abs(K),2.2):Math.sign(K)*Math.pow(I,Math.abs(K)-1)}function fe(K){return new DataView(K.array.buffer,K.offset.value,K.size)}function Ee(K){var le=K.viewer.buffer.slice(K.offset.value,K.offset.value+K.size),Ae=new Uint8Array(lt(le)),Ge=new Uint8Array(Ae.length);return He(Ae),oe(Ae,Ge),new DataView(Ge.buffer)}function Re(K){var le=K.array.slice(K.offset.value,K.offset.value+K.size),Ae=rx(le),Ge=new Uint8Array(Ae.length);return He(Ae),oe(Ae,Ge),new DataView(Ge.buffer)}function Le(K){for(var le=K.viewer,Ae={value:K.offset.value},Ge=new Uint16Array(K.width*K.scanlineBlockSize*(K.channels*K.type)),We=new Uint8Array(8192),rt=0,bt=new Array(K.channels),Z=0;Z<K.channels;Z++)bt[Z]={},bt[Z].start=rt,bt[Z].end=bt[Z].start,bt[Z].nx=K.width,bt[Z].ny=K.lines,bt[Z].size=K.type,rt+=bt[Z].nx*bt[Z].ny*bt[Z].size;var me=Pe(le,Ae),ye=Pe(le,Ae);if(ye>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(me<=ye)for(var Z=0;Z<ye-me+1;Z++)We[Z+me]=wt(le,Ae);var xe=new Uint16Array(65536),he=z(We,xe),ut=ht(le,Ae);Be(K.array,le,Ae,ut,Ge,rt);for(var Z=0;Z<K.channels;++Z)for(var it=bt[Z],ot=0;ot<bt[Z].size;++ot)Xe(Ge,it.start+ot,it.nx,it.size,it.ny,it.nx*it.size,he);Se(xe,Ge,rt);for(var dt=0,Et=new Uint8Array(Ge.buffer.byteLength),Lt=0;Lt<K.lines;Lt++)for(var Mt=0;Mt<K.channels;Mt++){var it=bt[Mt],Vt=it.nx*it.size,$t=new Uint8Array(Ge.buffer,it.end*2,Vt*2);Et.set($t,dt),dt+=Vt*2,it.end+=Vt}return new DataView(Et.buffer)}function Fe(K){var le=K.array.slice(K.offset.value,K.offset.value+K.size),Ae=rx(le);const Ge=K.lines*K.channels*K.width,We=K.type==1?new Uint16Array(Ge):new Uint32Array(Ge);let rt=0,bt=0;const Z=new Array(4);for(let me=0;me<K.lines;me++)for(let ye=0;ye<K.channels;ye++){let xe=0;switch(K.type){case 1:Z[0]=rt,Z[1]=Z[0]+K.width,rt=Z[1]+K.width;for(let he=0;he<K.width;++he){const ut=Ae[Z[0]++]<<8|Ae[Z[1]++];xe+=ut,We[bt]=xe,bt++}break;case 2:Z[0]=rt,Z[1]=Z[0]+K.width,Z[2]=Z[1]+K.width,rt=Z[2]+K.width;for(let he=0;he<K.width;++he){const ut=Ae[Z[0]++]<<24|Ae[Z[1]++]<<16|Ae[Z[2]++]<<8;xe+=ut,We[bt]=xe,bt++}break}}return new DataView(We.buffer)}function et(K){var le=K.viewer,Ae={value:K.offset.value},Ge=new Uint8Array(K.width*K.lines*(K.channels*K.type*2)),We={version:St(le,Ae),unknownUncompressedSize:St(le,Ae),unknownCompressedSize:St(le,Ae),acCompressedSize:St(le,Ae),dcCompressedSize:St(le,Ae),rleCompressedSize:St(le,Ae),rleUncompressedSize:St(le,Ae),rleRawSize:St(le,Ae),totalAcUncompressedCount:St(le,Ae),totalDcUncompressedCount:St(le,Ae),acCompression:St(le,Ae)};if(We.version<2)throw"EXRLoader.parse: "+Mi.compression+" version "+We.version+" is unsupported";for(var rt=new Array,bt=Pe(le,Ae)-2;bt>0;){var Z=tt(le.buffer,Ae),me=wt(le,Ae),ye=me>>2&3,xe=(me>>4)-1,he=new Int8Array([xe])[0],ut=wt(le,Ae);rt.push({name:Z,index:he,type:ut,compression:ye}),bt-=Z.length+3}for(var it=Mi.channels,ot=new Array(K.channels),dt=0;dt<K.channels;++dt){var Et=ot[dt]={},Lt=it[dt];Et.name=Lt.name,Et.compression=0,Et.decoded=!1,Et.type=Lt.pixelType,Et.pLinear=Lt.pLinear,Et.width=K.width,Et.height=K.lines}for(var Mt={idx:new Array(3)},Vt=0;Vt<K.channels;++Vt)for(var Et=ot[Vt],dt=0;dt<rt.length;++dt){var $t=rt[dt];Et.name==$t.name&&(Et.compression=$t.compression,$t.index>=0&&(Mt.idx[$t.index]=Vt),Et.offset=Vt)}if(We.acCompressedSize>0)switch(We.acCompression){case 0:var Nt=new Uint16Array(We.totalAcUncompressedCount);Be(K.array,le,Ae,We.acCompressedSize,Nt,We.totalAcUncompressedCount);break;case 1:var Zt=K.array.slice(Ae.value,Ae.value+We.totalAcUncompressedCount),Rn=rx(Zt),Nt=new Uint16Array(Rn.buffer);Ae.value+=We.totalAcUncompressedCount;break}if(We.dcCompressedSize>0){var Pt={array:K.array,offset:Ae,size:We.dcCompressedSize},Vn=new Uint16Array(Re(Pt).buffer);Ae.value+=We.dcCompressedSize}if(We.rleRawSize>0){var Zt=K.array.slice(Ae.value,Ae.value+We.rleCompressedSize),Rn=rx(Zt),dn=lt(Rn.buffer);Ae.value+=We.rleCompressedSize}for(var jn=0,vn=new Array(ot.length),dt=0;dt<vn.length;++dt)vn[dt]=new Array;for(var Bn=0;Bn<K.lines;++Bn)for(var ln=0;ln<ot.length;++ln)vn[ln].push(jn),jn+=ot[ln].width*K.type*2;ze(Mt,vn,ot,Nt,Vn,Ge);for(var dt=0;dt<ot.length;++dt){var Et=ot[dt];if(!Et.decoded)switch(Et.compression){case 2:for(var kt=0,ii=0,Bn=0;Bn<K.lines;++Bn){for(var si=vn[dt][kt],yn=0;yn<Et.width;++yn){for(var di=0;di<2*Et.type;++di)Ge[si++]=dn[ii+di*Et.width*Et.height];ii++}kt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Ge.buffer)}function tt(K,le){for(var Ae=new Uint8Array(K),Ge=0;Ae[le.value+Ge]!=0;)Ge+=1;var We=new TextDecoder().decode(Ae.slice(le.value,le.value+Ge));return le.value=le.value+Ge+1,We}function Ot(K,le,Ae){var Ge=new TextDecoder().decode(new Uint8Array(K).slice(le.value,le.value+Ae));return le.value=le.value+Ae,Ge}function at(K,le){var Ae=gt(K,le),Ge=ht(K,le);return[Ae,Ge]}function yt(K,le){var Ae=ht(K,le),Ge=ht(K,le);return[Ae,Ge]}function gt(K,le){var Ae=K.getInt32(le.value,!0);return le.value=le.value+4,Ae}function ht(K,le){var Ae=K.getUint32(le.value,!0);return le.value=le.value+4,Ae}function nt(K,le){var Ae=K[le.value];return le.value=le.value+1,Ae}function wt(K,le){var Ae=K.getUint8(le.value);return le.value=le.value+1,Ae}const St=function(K,le){let Ae;return"getBigInt64"in DataView.prototype?Ae=Number(K.getBigInt64(le.value,!0)):Ae=K.getUint32(le.value+4,!0)+Number(K.getUint32(le.value,!0)<<32),le.value+=8,Ae};function Ht(K,le){var Ae=K.getFloat32(le.value,!0);return le.value+=4,Ae}function Te(K,le){return Dd.toHalfFloat(Ht(K,le))}function Oe(K){var le=(K&31744)>>10,Ae=K&1023;return(K>>15?-1:1)*(le?le===31?Ae?NaN:1/0:Math.pow(2,le-15)*(1+Ae/1024):6103515625e-14*(Ae/1024))}function Pe(K,le){var Ae=K.getUint16(le.value,!0);return le.value+=2,Ae}function ct(K,le){return Oe(Pe(K,le))}function xt(K,le,Ae,Ge){for(var We=Ae.value,rt=[];Ae.value<We+Ge-1;){var bt=tt(le,Ae),Z=gt(K,Ae),me=wt(K,Ae);Ae.value+=3;var ye=gt(K,Ae),xe=gt(K,Ae);rt.push({name:bt,pixelType:Z,pLinear:me,xSampling:ye,ySampling:xe})}return Ae.value+=1,rt}function je(K,le){var Ae=Ht(K,le),Ge=Ht(K,le),We=Ht(K,le),rt=Ht(K,le),bt=Ht(K,le),Z=Ht(K,le),me=Ht(K,le),ye=Ht(K,le);return{redX:Ae,redY:Ge,greenX:We,greenY:rt,blueX:bt,blueY:Z,whiteX:me,whiteY:ye}}function Ct(K,le){var Ae=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Ge=wt(K,le);return Ae[Ge]}function zt(K,le){var Ae=ht(K,le),Ge=ht(K,le),We=ht(K,le),rt=ht(K,le);return{xMin:Ae,yMin:Ge,xMax:We,yMax:rt}}function Dt(K,le){var Ae=["INCREASING_Y"],Ge=wt(K,le);return Ae[Ge]}function Gt(K,le){var Ae=Ht(K,le),Ge=Ht(K,le);return[Ae,Ge]}function tn(K,le){var Ae=Ht(K,le),Ge=Ht(K,le),We=Ht(K,le);return[Ae,Ge,We]}function Jt(K,le,Ae,Ge,We){if(Ge==="string"||Ge==="stringvector"||Ge==="iccProfile")return Ot(le,Ae,We);if(Ge==="chlist")return xt(K,le,Ae,We);if(Ge==="chromaticities")return je(K,Ae);if(Ge==="compression")return Ct(K,Ae);if(Ge==="box2i")return zt(K,Ae);if(Ge==="lineOrder")return Dt(K,Ae);if(Ge==="float")return Ht(K,Ae);if(Ge==="v2f")return Gt(K,Ae);if(Ge==="v3f")return tn(K,Ae);if(Ge==="int")return gt(K,Ae);if(Ge==="rational")return at(K,Ae);if(Ge==="timecode")return yt(K,Ae);if(Ge==="preview")return Ae.value+=We,"skipped";Ae.value+=We}function un(K,le,Ae){const Ge={};if(K.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Ge.version=K.getUint8(4);const We=K.getUint8(5);Ge.spec={singleTile:!!(We&2),longName:!!(We&4),deepFormat:!!(We&8),multiPart:!!(We&16)},Ae.value=8;for(var rt=!0;rt;){var bt=tt(le,Ae);if(bt==0)rt=!1;else{var Z=tt(le,Ae),me=ht(K,Ae),ye=Jt(K,le,Ae,Z,me);ye===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Z}'.`):Ge[bt]=ye}}if((We&-5)!=0)throw console.error("EXRHeader:",Ge),"THREE.EXRLoader: provided file is currently unsupported.";return Ge}function mn(K,le,Ae,Ge,We){const rt={size:0,viewer:le,array:Ae,offset:Ge,width:K.dataWindow.xMax-K.dataWindow.xMin+1,height:K.dataWindow.yMax-K.dataWindow.yMin+1,channels:K.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:K.channels[0].pixelType,uncompress:null,getter:null,format:null,[rv?"colorSpace":"encoding"]:null};switch(K.compression){case"NO_COMPRESSION":rt.lines=1,rt.uncompress=fe;break;case"RLE_COMPRESSION":rt.lines=1,rt.uncompress=Ee;break;case"ZIPS_COMPRESSION":rt.lines=1,rt.uncompress=Re;break;case"ZIP_COMPRESSION":rt.lines=16,rt.uncompress=Re;break;case"PIZ_COMPRESSION":rt.lines=32,rt.uncompress=Le;break;case"PXR24_COMPRESSION":rt.lines=16,rt.uncompress=Fe;break;case"DWAA_COMPRESSION":rt.lines=32,rt.uncompress=et;break;case"DWAB_COMPRESSION":rt.lines=256,rt.uncompress=et;break;default:throw"EXRLoader.parse: "+K.compression+" is unsupported"}if(rt.scanlineBlockSize=rt.lines,rt.type==1)switch(We){case Yi:rt.getter=ct,rt.inputSize=2;break;case Xr:rt.getter=Pe,rt.inputSize=2;break}else if(rt.type==2)switch(We){case Yi:rt.getter=Ht,rt.inputSize=4;break;case Xr:rt.getter=Te,rt.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+rt.type+" for "+K.compression+".";rt.blockCount=(K.dataWindow.yMax+1)/rt.scanlineBlockSize;for(var bt=0;bt<rt.blockCount;bt++)St(le,Ge);rt.outputChannels=rt.channels==3?4:rt.channels;const Z=rt.width*rt.height*rt.outputChannels;switch(We){case Yi:rt.byteArray=new Float32Array(Z),rt.channels<rt.outputChannels&&rt.byteArray.fill(1,0,Z);break;case Xr:rt.byteArray=new Uint16Array(Z),rt.channels<rt.outputChannels&&rt.byteArray.fill(15360,0,Z);break;default:console.error("THREE.EXRLoader: unsupported type: ",We);break}return rt.bytesPerLine=rt.width*rt.inputSize*rt.channels,rt.outputChannels==4?rt.format=Tr:rt.format=by,rv?rt.colorSpace="srgb-linear":rt.encoding=3e3,rt}const bn=new DataView(e),hi=new Uint8Array(e),gi={value:0},Mi=un(bn,e,gi),Xt=mn(Mi,bn,hi,gi,this.type),ri={value:0},In={R:0,G:1,B:2,A:3,Y:0};for(let K=0;K<Xt.height/Xt.scanlineBlockSize;K++){const le=ht(bn,gi);Xt.size=ht(bn,gi),Xt.lines=le+Xt.scanlineBlockSize>Xt.height?Xt.height-le:Xt.scanlineBlockSize;const Ge=Xt.size<Xt.lines*Xt.bytesPerLine?Xt.uncompress(Xt):fe(Xt);gi.value+=Xt.size;for(let We=0;We<Xt.scanlineBlockSize;We++){const rt=We+K*Xt.scanlineBlockSize;if(rt>=Xt.height)break;for(let bt=0;bt<Xt.channels;bt++){const Z=In[Mi.channels[bt].name];for(let me=0;me<Xt.width;me++){ri.value=(We*(Xt.channels*Xt.width)+bt*Xt.width+me)*Xt.inputSize;const ye=(Xt.height-1-rt)*(Xt.width*Xt.outputChannels)+me*Xt.outputChannels+Z;Xt.byteArray[ye]=Xt.getter(Ge,ri)}}}}return{header:Mi,width:Xt.width,height:Xt.height,data:Xt.byteArray,format:Xt.format,[rv?"colorSpace":"encoding"]:Xt[rv?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(a,o){rv?a.colorSpace=o.colorSpace:a.encoding=o.encoding,a.minFilter=Zn,a.magFilter=Zn,a.generateMipmaps=!1,a.flipY=!1,t&&t(a,o)}return super.load(e,s,i,r)}}const B4=new Kn,sx=new J;class sE extends $S{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new qt(e,3)),this.setAttribute("uv",new qt(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new zb(t,6,1);return this.setAttribute("instanceStart",new Ga(i,3,0)),this.setAttribute("instanceEnd",new Ga(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,t=3){let i;e instanceof Float32Array?i=e:Array.isArray(e)&&(i=new Float32Array(e));const r=new zb(i,t*2,1);return this.setAttribute("instanceColorStart",new Ga(r,t,0)),this.setAttribute("instanceColorEnd",new Ga(r,t,t)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new Aw(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Kn);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),B4.setFromBufferAttribute(t),this.boundingBox.union(B4))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gr),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)sx.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(sx)),sx.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(sx));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class RN extends sE{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e,t=3){const i=e.length-t,r=new Float32Array(2*i);if(t===3)for(let s=0;s<i;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5];else for(let s=0;s<i;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5],r[2*s+6]=e[s+6],r[2*s+7]=e[s+7];return super.setColors(r,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class aE extends ks{constructor(e){super({type:"LineMaterial",uniforms:hg.clone(hg.merge([It.common,It.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new ft(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${rE>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const pM=new Ln,z4=new J,F4=new J,gs=new Ln,vs=new Ln,Dc=new Ln,mM=new J,gM=new Ut,_s=new Zo,H4=new J,ax=new Kn,ox=new gr,Uc=new Ln;let zc,Fd;function k4(n,e,t){return Uc.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),Uc.multiplyScalar(1/Uc.w),Uc.x=Fd/t.width,Uc.y=Fd/t.height,Uc.applyMatrix4(n.projectionMatrixInverse),Uc.multiplyScalar(1/Uc.w),Math.abs(Math.max(Uc.x,Uc.y))}function Wj(n,e){const t=n.matrixWorld,i=n.geometry,r=i.attributes.instanceStart,s=i.attributes.instanceEnd,a=Math.min(i.instanceCount,r.count);for(let o=0,c=a;o<c;o++){_s.start.fromBufferAttribute(r,o),_s.end.fromBufferAttribute(s,o),_s.applyMatrix4(t);const u=new J,h=new J;zc.distanceSqToSegment(_s.start,_s.end,h,u),h.distanceTo(u)<Fd*.5&&e.push({point:h,pointOnLine:u,distance:zc.origin.distanceTo(h),object:n,face:null,faceIndex:o,uv:null,[SN]:null})}}function Xj(n,e,t){const i=e.projectionMatrix,s=n.material.resolution,a=n.matrixWorld,o=n.geometry,c=o.attributes.instanceStart,u=o.attributes.instanceEnd,h=Math.min(o.instanceCount,c.count),p=-e.near;zc.at(1,Dc),Dc.w=1,Dc.applyMatrix4(e.matrixWorldInverse),Dc.applyMatrix4(i),Dc.multiplyScalar(1/Dc.w),Dc.x*=s.x/2,Dc.y*=s.y/2,Dc.z=0,mM.copy(Dc),gM.multiplyMatrices(e.matrixWorldInverse,a);for(let g=0,y=h;g<y;g++){if(gs.fromBufferAttribute(c,g),vs.fromBufferAttribute(u,g),gs.w=1,vs.w=1,gs.applyMatrix4(gM),vs.applyMatrix4(gM),gs.z>p&&vs.z>p)continue;if(gs.z>p){const A=gs.z-vs.z,w=(gs.z-p)/A;gs.lerp(vs,w)}else if(vs.z>p){const A=vs.z-gs.z,w=(vs.z-p)/A;vs.lerp(gs,w)}gs.applyMatrix4(i),vs.applyMatrix4(i),gs.multiplyScalar(1/gs.w),vs.multiplyScalar(1/vs.w),gs.x*=s.x/2,gs.y*=s.y/2,vs.x*=s.x/2,vs.y*=s.y/2,_s.start.copy(gs),_s.start.z=0,_s.end.copy(vs),_s.end.z=0;const M=_s.closestPointToPointParameter(mM,!0);_s.at(M,H4);const b=np.lerp(gs.z,vs.z,M),S=b>=-1&&b<=1,T=mM.distanceTo(H4)<Fd*.5;if(S&&T){_s.start.fromBufferAttribute(c,g),_s.end.fromBufferAttribute(u,g),_s.start.applyMatrix4(a),_s.end.applyMatrix4(a);const A=new J,w=new J;zc.distanceSqToSegment(_s.start,_s.end,w,A),t.push({point:w,pointOnLine:A,distance:zc.origin.distanceTo(w),object:n,face:null,faceIndex:g,uv:null,[SN]:null})}}}class ON extends fi{constructor(e=new sE,t=new aE({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let a=0,o=0,c=t.count;a<c;a++,o+=2)z4.fromBufferAttribute(t,a),F4.fromBufferAttribute(i,a),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+z4.distanceTo(F4);const s=new zb(r,2,1);return e.setAttribute("instanceDistanceStart",new Ga(s,1,0)),e.setAttribute("instanceDistanceEnd",new Ga(s,1,1)),this}raycast(e,t){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;zc=e.ray;const a=this.matrixWorld,o=this.geometry,c=this.material;Fd=c.linewidth+s,o.boundingSphere===null&&o.computeBoundingSphere(),ox.copy(o.boundingSphere).applyMatrix4(a);let u;if(i)u=Fd*.5;else{const p=Math.max(r.near,ox.distanceToPoint(zc.origin));u=k4(r,p,c.resolution)}if(ox.radius+=u,zc.intersectsSphere(ox)===!1)return;o.boundingBox===null&&o.computeBoundingBox(),ax.copy(o.boundingBox).applyMatrix4(a);let h;if(i)h=Fd*.5;else{const p=Math.max(r.near,ax.distanceToPoint(zc.origin));h=k4(r,p,c.resolution)}ax.expandByScalar(h),zc.intersectsBox(ax)!==!1&&(i?Wj(this,t):Xj(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(pM),this.material.uniforms.resolution.value.set(pM.z,pM.w))}}class DN extends ON{constructor(e=new RN,t=new aE({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const qj=new J,Yj=new J,Zj=new J,Kj=(n,e,t)=>{const i=t.width/2,r=t.height/2;e.updateMatrixWorld(!1);const s=n.project(e);return s.x=s.x*i+i,s.y=-(s.y*r)+r,s},$j=(n,e,t,i=1)=>{const r=qj.set(n.x/t.width*2-1,-(n.y/t.height)*2+1,i);return r.unproject(e),r},UN=(n,e,t,i)=>{const r=Kj(Zj.copy(n),t,i);let s=0;for(let a=0;a<2;++a){const o=Yj.copy(r).setComponent(a,r.getComponent(a)+e),c=$j(o,t,i,o.z);s=Math.max(s,n.distanceTo(c))}return s},Wb=L.forwardRef(function({points:e,color:t=16777215,vertexColors:i,linewidth:r,lineWidth:s,segments:a,dashed:o,...c},u){var h,p;const g=on(S=>S.size),y=L.useMemo(()=>a?new ON:new DN,[a]),[x]=L.useState(()=>new aE),M=(i==null||(h=i[0])==null?void 0:h.length)===4?4:3,b=L.useMemo(()=>{const S=a?new sE:new RN,T=e.map(A=>{const w=Array.isArray(A);return A instanceof J||A instanceof Ln?[A.x,A.y,A.z]:A instanceof ft?[A.x,A.y,0]:w&&A.length===3?[A[0],A[1],A[2]]:w&&A.length===2?[A[0],A[1],0]:A});if(S.setPositions(T.flat()),i){t=16777215;const A=i.map(w=>w instanceof Rt?w.toArray():w);S.setColors(A.flat(),M)}return S},[e,a,i,M]);return L.useLayoutEffect(()=>{y.computeLineDistances()},[e,y]),L.useLayoutEffect(()=>{o?x.defines.USE_DASH="":delete x.defines.USE_DASH,x.needsUpdate=!0},[o,x]),L.useEffect(()=>()=>{b.dispose(),x.dispose()},[b]),L.createElement("primitive",Gn({object:y,ref:u},c),L.createElement("primitive",{object:b,attach:"geometry"}),L.createElement("primitive",Gn({object:x,attach:"material",color:t,vertexColors:!!i,resolution:[g.width,g.height],linewidth:(p=r??s)!==null&&p!==void 0?p:1,dashed:o,transparent:M===4},c)))});function Qj(){var n=Object.create(null);function e(r,s){var a=r.id,o=r.name,c=r.dependencies;c===void 0&&(c=[]);var u=r.init;u===void 0&&(u=function(){});var h=r.getTransferables;if(h===void 0&&(h=null),!n[a])try{c=c.map(function(g){return g&&g.isWorkerModule&&(e(g,function(y){if(y instanceof Error)throw y}),g=n[g.id].value),g}),u=i("<"+o+">.init",u),h&&(h=i("<"+o+">.getTransferables",h));var p=null;typeof u=="function"?p=u.apply(void 0,c):console.error("worker module init function failed to rehydrate"),n[a]={id:a,value:p,getTransferables:h},s(p)}catch(g){g&&g.noLog||console.error(g),s(g)}}function t(r,s){var a,o=r.id,c=r.args;(!n[o]||typeof n[o].value!="function")&&s(new Error("Worker module "+o+": not found or its 'init' did not return a function"));try{var u=(a=n[o]).value.apply(a,c);u&&typeof u.then=="function"?u.then(h,function(p){return s(p instanceof Error?p:new Error(""+p))}):h(u)}catch(p){s(p)}function h(p){try{var g=n[o].getTransferables&&n[o].getTransferables(p);(!g||!Array.isArray(g)||!g.length)&&(g=void 0),s(p,g)}catch(y){console.error(y),s(y)}}}function i(r,s){var a=void 0;self.troikaDefine=function(c){return a=c};var o=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(o)}catch(c){console.error(c)}return URL.revokeObjectURL(o),delete self.troikaDefine,a}self.addEventListener("message",function(r){var s=r.data,a=s.messageId,o=s.action,c=s.data;try{o==="registerModule"&&e(c,function(u){u instanceof Error?postMessage({messageId:a,success:!1,error:u.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof u=="function"}})}),o==="callModule"&&t(c,function(u,h){u instanceof Error?postMessage({messageId:a,success:!1,error:u.message}):postMessage({messageId:a,success:!0,result:u},h||void 0)})}catch(u){postMessage({messageId:a,success:!1,error:u.stack})}})}function Jj(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var r=Promise.all(t).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var LN=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return LN=function(){return n},n},eW=0,tW=0,vM=!1,jv=Object.create(null),Wv=Object.create(null),QT=Object.create(null);function Ag(n){if((!n||typeof n.init!="function")&&!vM)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId,s=Jj(n);r==null&&(r="#default");var a="workerModule"+ ++eW,o=n.name||a,c=null;e=e&&e.map(function(h){return typeof h=="function"&&!h.workerModuleData&&(vM=!0,h=Ag({workerId:r,name:"<"+o+"> function dependency: "+h.name,init:`function(){return (
`+Kx(h)+`
)}`}),vM=!1),h&&h.workerModuleData&&(h=h.workerModuleData),h});function u(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(!LN())return s.apply(void 0,h);if(!c){c=G4(r,"registerModule",u.workerModuleData);var g=function(){c=null,Wv[r].delete(g)};(Wv[r]||(Wv[r]=new Set)).add(g)}return c.then(function(y){var x=y.isCallable;if(x)return G4(r,"callModule",{id:a,args:h});throw new Error("Worker module function was called but `init` did not return a callable function")})}return u.workerModuleData={isWorkerModule:!0,id:a,name:o,dependencies:e,init:Kx(t),getTransferables:i&&Kx(i)},u.onMainThread=s,u}function nW(n){Wv[n]&&Wv[n].forEach(function(e){e()}),jv[n]&&(jv[n].terminate(),delete jv[n])}function Kx(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function iW(n){var e=jv[n];if(!e){var t=Kx(Qj);e=jv[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,a=QT[s];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete QT[s],a(r)}}return e}function G4(n,e,t){return new Promise(function(i,r){var s=++tW;QT[s]=function(a){a.success?i(a.result):r(new Error("Error in worker "+e+" call: "+a.error))},iW(n).postMessage({messageId:s,action:e,data:t})})}function NN(){var n=(function(e){function t(re,G,X,ie,se,ee,ue,pe){var ve=1-ue;pe.x=ve*ve*re+2*ve*ue*X+ue*ue*se,pe.y=ve*ve*G+2*ve*ue*ie+ue*ue*ee}function i(re,G,X,ie,se,ee,ue,pe,ve,_e){var Xe=1-ve;_e.x=Xe*Xe*Xe*re+3*Xe*Xe*ve*X+3*Xe*ve*ve*se+ve*ve*ve*ue,_e.y=Xe*Xe*Xe*G+3*Xe*Xe*ve*ie+3*Xe*ve*ve*ee+ve*ve*ve*pe}function r(re,G){for(var X=/([MLQCZ])([^MLQCZ]*)/g,ie,se,ee,ue,pe;ie=X.exec(re);){var ve=ie[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(_e){return parseFloat(_e)});switch(ie[1]){case"M":ue=se=ve[0],pe=ee=ve[1];break;case"L":(ve[0]!==ue||ve[1]!==pe)&&G("L",ue,pe,ue=ve[0],pe=ve[1]);break;case"Q":{G("Q",ue,pe,ue=ve[2],pe=ve[3],ve[0],ve[1]);break}case"C":{G("C",ue,pe,ue=ve[4],pe=ve[5],ve[0],ve[1],ve[2],ve[3]);break}case"Z":(ue!==se||pe!==ee)&&G("L",ue,pe,se,ee);break}}}function s(re,G,X){X===void 0&&(X=16);var ie={x:0,y:0};r(re,function(se,ee,ue,pe,ve,_e,Xe,qe,Be){switch(se){case"L":G(ee,ue,pe,ve);break;case"Q":{for(var Se=ee,He=ue,oe=1;oe<X;oe++)t(ee,ue,_e,Xe,pe,ve,oe/(X-1),ie),G(Se,He,ie.x,ie.y),Se=ie.x,He=ie.y;break}case"C":{for(var lt=ee,ze=ue,Qe=1;Qe<X;Qe++)i(ee,ue,_e,Xe,qe,Be,pe,ve,Qe/(X-1),ie),G(lt,ze,ie.x,ie.y),lt=ie.x,ze=ie.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",c=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function h(re,G){var X=re.getContext?re.getContext("webgl",u):re,ie=c.get(X);if(!ie){let lt=function($){var Y=ee[$];if(!Y&&(Y=ee[$]=X.getExtension($),!Y))throw new Error($+" not supported");return Y},ze=function($,Y){var fe=X.createShader(Y);return X.shaderSource(fe,$),X.compileShader(fe),fe},Qe=function($,Y,fe,Ee){if(!ue[$]){var Re={},Le={},Fe=X.createProgram();X.attachShader(Fe,ze(Y,X.VERTEX_SHADER)),X.attachShader(Fe,ze(fe,X.FRAGMENT_SHADER)),X.linkProgram(Fe),ue[$]={program:Fe,transaction:function(tt){X.useProgram(Fe),tt({setUniform:function(at,yt){for(var gt=[],ht=arguments.length-2;ht-- >0;)gt[ht]=arguments[ht+2];var nt=Le[yt]||(Le[yt]=X.getUniformLocation(Fe,yt));X["uniform"+at].apply(X,[nt].concat(gt))},setAttribute:function(at,yt,gt,ht,nt){var wt=Re[at];wt||(wt=Re[at]={buf:X.createBuffer(),loc:X.getAttribLocation(Fe,at),data:null}),X.bindBuffer(X.ARRAY_BUFFER,wt.buf),X.vertexAttribPointer(wt.loc,yt,X.FLOAT,!1,0,0),X.enableVertexAttribArray(wt.loc),se?X.vertexAttribDivisor(wt.loc,ht):lt("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(wt.loc,ht),nt!==wt.data&&(X.bufferData(X.ARRAY_BUFFER,nt,gt),wt.data=nt)}})}}}ue[$].transaction(Ee)},De=function($,Y){ve++;try{X.activeTexture(X.TEXTURE0+ve);var fe=pe[$];fe||(fe=pe[$]=X.createTexture(),X.bindTexture(X.TEXTURE_2D,fe),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,X.NEAREST),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,X.NEAREST)),X.bindTexture(X.TEXTURE_2D,fe),Y(fe,ve)}finally{ve--}},st=function($,Y,fe){var Ee=X.createFramebuffer();_e.push(Ee),X.bindFramebuffer(X.FRAMEBUFFER,Ee),X.activeTexture(X.TEXTURE0+Y),X.bindTexture(X.TEXTURE_2D,$),X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,$,0);try{fe(Ee)}finally{X.deleteFramebuffer(Ee),X.bindFramebuffer(X.FRAMEBUFFER,_e[--_e.length-1]||null)}},ke=function(){ee={},ue={},pe={},ve=-1,_e.length=0};var Xe=lt,qe=ze,Be=Qe,Se=De,He=st,oe=ke,se=typeof WebGL2RenderingContext<"u"&&X instanceof WebGL2RenderingContext,ee={},ue={},pe={},ve=-1,_e=[];X.canvas.addEventListener("webglcontextlost",function($){ke(),$.preventDefault()},!1),c.set(X,ie={gl:X,isWebGL2:se,getExtension:lt,withProgram:Qe,withTexture:De,withTextureFramebuffer:st,handleContextLoss:ke})}G(ie)}function p(re,G,X,ie,se,ee,ue,pe){ue===void 0&&(ue=15),pe===void 0&&(pe=null),h(re,function(ve){var _e=ve.gl,Xe=ve.withProgram,qe=ve.withTexture;qe("copy",function(Be,Se){_e.texImage2D(_e.TEXTURE_2D,0,_e.RGBA,se,ee,0,_e.RGBA,_e.UNSIGNED_BYTE,G),Xe("copy",a,o,function(He){var oe=He.setUniform,lt=He.setAttribute;lt("aUV",2,_e.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),oe("1i","image",Se),_e.bindFramebuffer(_e.FRAMEBUFFER,pe||null),_e.disable(_e.BLEND),_e.colorMask(ue&8,ue&4,ue&2,ue&1),_e.viewport(X,ie,se,ee),_e.scissor(X,ie,se,ee),_e.drawArrays(_e.TRIANGLES,0,3)})})})}function g(re,G,X){var ie=re.width,se=re.height;h(re,function(ee){var ue=ee.gl,pe=new Uint8Array(ie*se*4);ue.readPixels(0,0,ie,se,ue.RGBA,ue.UNSIGNED_BYTE,pe),re.width=G,re.height=X,p(ue,pe,0,0,ie,se)})}var y=Object.freeze({__proto__:null,withWebGLContext:h,renderImageData:p,resizeWebGLCanvasWithoutClearing:g});function x(re,G,X,ie,se,ee){ee===void 0&&(ee=1);var ue=new Uint8Array(re*G),pe=ie[2]-ie[0],ve=ie[3]-ie[1],_e=[];s(X,function(lt,ze,Qe,De){_e.push({x1:lt,y1:ze,x2:Qe,y2:De,minX:Math.min(lt,Qe),minY:Math.min(ze,De),maxX:Math.max(lt,Qe),maxY:Math.max(ze,De)})}),_e.sort(function(lt,ze){return lt.maxX-ze.maxX});for(var Xe=0;Xe<re;Xe++)for(var qe=0;qe<G;qe++){var Be=He(ie[0]+pe*(Xe+.5)/re,ie[1]+ve*(qe+.5)/G),Se=Math.pow(1-Math.abs(Be)/se,ee)/2;Be<0&&(Se=1-Se),Se=Math.max(0,Math.min(255,Math.round(Se*255))),ue[qe*re+Xe]=Se}return ue;function He(lt,ze){for(var Qe=1/0,De=1/0,st=_e.length;st--;){var ke=_e[st];if(ke.maxX+De<=lt)break;if(lt+De>ke.minX&&ze-De<ke.maxY&&ze+De>ke.minY){var $=S(lt,ze,ke.x1,ke.y1,ke.x2,ke.y2);$<Qe&&(Qe=$,De=Math.sqrt(Qe))}}return oe(lt,ze)&&(De=-De),De}function oe(lt,ze){for(var Qe=0,De=_e.length;De--;){var st=_e[De];if(st.maxX<=lt)break;var ke=st.y1>ze!=st.y2>ze&&lt<(st.x2-st.x1)*(ze-st.y1)/(st.y2-st.y1)+st.x1;ke&&(Qe+=st.y1<st.y2?1:-1)}return Qe!==0}}function M(re,G,X,ie,se,ee,ue,pe,ve,_e){ee===void 0&&(ee=1),pe===void 0&&(pe=0),ve===void 0&&(ve=0),_e===void 0&&(_e=0),b(re,G,X,ie,se,ee,ue,null,pe,ve,_e)}function b(re,G,X,ie,se,ee,ue,pe,ve,_e,Xe){ee===void 0&&(ee=1),ve===void 0&&(ve=0),_e===void 0&&(_e=0),Xe===void 0&&(Xe=0);for(var qe=x(re,G,X,ie,se,ee),Be=new Uint8Array(qe.length*4),Se=0;Se<qe.length;Se++)Be[Se*4+Xe]=qe[Se];p(ue,Be,ve,_e,re,G,1<<3-Xe,pe)}function S(re,G,X,ie,se,ee){var ue=se-X,pe=ee-ie,ve=ue*ue+pe*pe,_e=ve?Math.max(0,Math.min(1,((re-X)*ue+(G-ie)*pe)/ve)):0,Xe=re-(X+_e*ue),qe=G-(ie+_e*pe);return Xe*Xe+qe*qe}var T=Object.freeze({__proto__:null,generate:x,generateIntoCanvas:M,generateIntoFramebuffer:b}),A="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",w="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",D="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",O=new Float32Array([0,0,2,0,0,2]),P=null,B=!1,I={},z=new WeakMap;function k(re){if(!B&&!te(re))throw new Error("WebGL generation not supported")}function V(re,G,X,ie,se,ee,ue){if(ee===void 0&&(ee=1),ue===void 0&&(ue=null),!ue&&(ue=P,!ue)){var pe=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!pe)throw new Error("OffscreenCanvas or DOM canvas not supported");ue=P=pe.getContext("webgl",{depth:!1})}k(ue);var ve=new Uint8Array(re*G*4);h(ue,function(Be){var Se=Be.gl,He=Be.withTexture,oe=Be.withTextureFramebuffer;He("readable",function(lt,ze){Se.texImage2D(Se.TEXTURE_2D,0,Se.RGBA,re,G,0,Se.RGBA,Se.UNSIGNED_BYTE,null),oe(lt,ze,function(Qe){W(re,G,X,ie,se,ee,Se,Qe,0,0,0),Se.readPixels(0,0,re,G,Se.RGBA,Se.UNSIGNED_BYTE,ve)})})});for(var _e=new Uint8Array(re*G),Xe=0,qe=0;Xe<ve.length;Xe+=4)_e[qe++]=ve[Xe];return _e}function j(re,G,X,ie,se,ee,ue,pe,ve,_e){ee===void 0&&(ee=1),pe===void 0&&(pe=0),ve===void 0&&(ve=0),_e===void 0&&(_e=0),W(re,G,X,ie,se,ee,ue,null,pe,ve,_e)}function W(re,G,X,ie,se,ee,ue,pe,ve,_e,Xe){ee===void 0&&(ee=1),ve===void 0&&(ve=0),_e===void 0&&(_e=0),Xe===void 0&&(Xe=0),k(ue);var qe=[];s(X,function(Be,Se,He,oe){qe.push(Be,Se,He,oe)}),qe=new Float32Array(qe),h(ue,function(Be){var Se=Be.gl,He=Be.isWebGL2,oe=Be.getExtension,lt=Be.withProgram,ze=Be.withTexture,Qe=Be.withTextureFramebuffer,De=Be.handleContextLoss;if(ze("rawDistances",function(st,ke){(re!==st._lastWidth||G!==st._lastHeight)&&Se.texImage2D(Se.TEXTURE_2D,0,Se.RGBA,st._lastWidth=re,st._lastHeight=G,0,Se.RGBA,Se.UNSIGNED_BYTE,null),lt("main",A,w,function($){var Y=$.setAttribute,fe=$.setUniform,Ee=!He&&oe("ANGLE_instanced_arrays"),Re=!He&&oe("EXT_blend_minmax");Y("aUV",2,Se.STATIC_DRAW,0,O),Y("aLineSegment",4,Se.DYNAMIC_DRAW,1,qe),fe.apply(void 0,["4f","uGlyphBounds"].concat(ie)),fe("1f","uMaxDistance",se),fe("1f","uExponent",ee),Qe(st,ke,function(Le){Se.enable(Se.BLEND),Se.colorMask(!0,!0,!0,!0),Se.viewport(0,0,re,G),Se.scissor(0,0,re,G),Se.blendFunc(Se.ONE,Se.ONE),Se.blendEquationSeparate(Se.FUNC_ADD,He?Se.MAX:Re.MAX_EXT),Se.clear(Se.COLOR_BUFFER_BIT),He?Se.drawArraysInstanced(Se.TRIANGLES,0,3,qe.length/4):Ee.drawArraysInstancedANGLE(Se.TRIANGLES,0,3,qe.length/4)})}),lt("post",a,D,function($){$.setAttribute("aUV",2,Se.STATIC_DRAW,0,O),$.setUniform("1i","tex",ke),Se.bindFramebuffer(Se.FRAMEBUFFER,pe),Se.disable(Se.BLEND),Se.colorMask(Xe===0,Xe===1,Xe===2,Xe===3),Se.viewport(ve,_e,re,G),Se.scissor(ve,_e,re,G),Se.drawArrays(Se.TRIANGLES,0,3)})}),Se.isContextLost())throw De(),new Error("webgl context lost")})}function te(re){var G=!re||re===P?I:re.canvas||re,X=z.get(G);if(X===void 0){B=!0;var ie=null;try{var se=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ee=V(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,re);X=ee&&se.length===ee.length&&ee.every(function(ue,pe){return ue===se[pe]}),X||(ie="bad trial run results",console.info(se,ee))}catch(ue){X=!1,ie=ue.message}ie&&console.warn("WebGL SDF generation not supported:",ie),B=!1,z.set(G,X)}return X}var H=Object.freeze({__proto__:null,generate:V,generateIntoCanvas:j,generateIntoFramebuffer:W,isSupported:te});function Q(re,G,X,ie,se,ee){se===void 0&&(se=Math.max(ie[2]-ie[0],ie[3]-ie[1])/2),ee===void 0&&(ee=1);try{return V.apply(H,arguments)}catch(ue){return console.info("WebGL SDF generation failed, falling back to JS",ue),x.apply(T,arguments)}}function ne(re,G,X,ie,se,ee,ue,pe,ve,_e){se===void 0&&(se=Math.max(ie[2]-ie[0],ie[3]-ie[1])/2),ee===void 0&&(ee=1),pe===void 0&&(pe=0),ve===void 0&&(ve=0),_e===void 0&&(_e=0);try{return j.apply(H,arguments)}catch(Xe){return console.info("WebGL SDF generation failed, falling back to JS",Xe),M.apply(T,arguments)}}return e.forEachPathCommand=r,e.generate=Q,e.generateIntoCanvas=ne,e.javascript=T,e.pathToLineSegments=s,e.webgl=H,e.webglUtils=y,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return n}function rW(){var n=(function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(De,st){i[De]=1<<st+1,r[i[De]]=De}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,a=i.L|i.R|i.AL,o=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,c=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,u=i.S|i.WS|i.B|s|i.PDI|c,h=null;function p(){if(!h){h=new Map;var De=function(ke){if(t.hasOwnProperty(ke)){var $=0;t[ke].split(",").forEach(function(Y){var fe=Y.split("+"),Ee=fe[0],Re=fe[1];Ee=parseInt(Ee,36),Re=Re?parseInt(Re,36):0,h.set($+=Ee,i[ke]);for(var Le=0;Le<Re;Le++)h.set(++$,i[ke])})}};for(var st in t)De(st)}}function g(De){return p(),h.get(De.codePointAt(0))||i.L}function y(De){return r[g(De)]}var x={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function M(De,st){var ke=36,$=0,Y=new Map,fe=st&&new Map,Ee;return De.split(",").forEach(function Re(Le){if(Le.indexOf("+")!==-1)for(var Fe=+Le;Fe--;)Re(Ee);else{Ee=Le;var et=Le.split(">"),tt=et[0],Ot=et[1];tt=String.fromCodePoint($+=parseInt(tt,ke)),Ot=String.fromCodePoint($+=parseInt(Ot,ke)),Y.set(tt,Ot),st&&fe.set(Ot,tt)}}),{map:Y,reverseMap:fe}}var b,S,T;function A(){if(!b){var De=M(x.pairs,!0),st=De.map,ke=De.reverseMap;b=st,S=ke,T=M(x.canonical,!1).map}}function w(De){return A(),b.get(De)||null}function D(De){return A(),S.get(De)||null}function O(De){return A(),T.get(De)||null}var P=i.L,B=i.R,I=i.EN,z=i.ES,k=i.ET,V=i.AN,j=i.CS,W=i.B,te=i.S,H=i.ON,Q=i.BN,ne=i.NSM,re=i.AL,G=i.LRO,X=i.RLO,ie=i.LRE,se=i.RLE,ee=i.PDF,ue=i.LRI,pe=i.RLI,ve=i.FSI,_e=i.PDI;function Xe(De,st){for(var ke=125,$=new Uint32Array(De.length),Y=0;Y<De.length;Y++)$[Y]=g(De[Y]);var fe=new Map;function Ee(Br,Es){var lr=$[Br];$[Br]=Es,fe.set(lr,fe.get(lr)-1),lr&o&&fe.set(o,fe.get(o)-1),fe.set(Es,(fe.get(Es)||0)+1),Es&o&&fe.set(o,(fe.get(o)||0)+1)}for(var Re=new Uint8Array(De.length),Le=new Map,Fe=[],et=null,tt=0;tt<De.length;tt++)et||Fe.push(et={start:tt,end:De.length-1,level:st==="rtl"?1:st==="ltr"?0:vh(tt,!1)}),$[tt]&W&&(et.end=tt,et=null);for(var Ot=se|ie|X|G|s|_e|ee|W,at=function(Br){return Br+(Br&1?1:2)},yt=function(Br){return Br+(Br&1?2:1)},gt=0;gt<Fe.length;gt++){et=Fe[gt];var ht=[{_level:et.level,_override:0,_isolate:0}],nt=void 0,wt=0,St=0,Ht=0;fe.clear();for(var Te=et.start;Te<=et.end;Te++){var Oe=$[Te];if(nt=ht[ht.length-1],fe.set(Oe,(fe.get(Oe)||0)+1),Oe&o&&fe.set(o,(fe.get(o)||0)+1),Oe&Ot)if(Oe&(se|ie)){Re[Te]=nt._level;var Pe=(Oe===se?yt:at)(nt._level);Pe<=ke&&!wt&&!St?ht.push({_level:Pe,_override:0,_isolate:0}):wt||St++}else if(Oe&(X|G)){Re[Te]=nt._level;var ct=(Oe===X?yt:at)(nt._level);ct<=ke&&!wt&&!St?ht.push({_level:ct,_override:Oe&X?B:P,_isolate:0}):wt||St++}else if(Oe&s){Oe&ve&&(Oe=vh(Te+1,!0)===1?pe:ue),Re[Te]=nt._level,nt._override&&Ee(Te,nt._override);var xt=(Oe===pe?yt:at)(nt._level);xt<=ke&&wt===0&&St===0?(Ht++,ht.push({_level:xt,_override:0,_isolate:1,_isolInitIndex:Te})):wt++}else if(Oe&_e){if(wt>0)wt--;else if(Ht>0){for(St=0;!ht[ht.length-1]._isolate;)ht.pop();var je=ht[ht.length-1]._isolInitIndex;je!=null&&(Le.set(je,Te),Le.set(Te,je)),ht.pop(),Ht--}nt=ht[ht.length-1],Re[Te]=nt._level,nt._override&&Ee(Te,nt._override)}else Oe&ee?(wt===0&&(St>0?St--:!nt._isolate&&ht.length>1&&(ht.pop(),nt=ht[ht.length-1])),Re[Te]=nt._level):Oe&W&&(Re[Te]=et.level);else Re[Te]=nt._level,nt._override&&Oe!==Q&&Ee(Te,nt._override)}for(var Ct=[],zt=null,Dt=et.start;Dt<=et.end;Dt++){var Gt=$[Dt];if(!(Gt&c)){var tn=Re[Dt],Jt=Gt&s,un=Gt===_e;zt&&tn===zt._level?(zt._end=Dt,zt._endsWithIsolInit=Jt):Ct.push(zt={_start:Dt,_end:Dt,_level:tn,_startsWithPDI:un,_endsWithIsolInit:Jt})}}for(var mn=[],bn=0;bn<Ct.length;bn++){var hi=Ct[bn];if(!hi._startsWithPDI||hi._startsWithPDI&&!Le.has(hi._start)){for(var gi=[zt=hi],Mi=void 0;zt&&zt._endsWithIsolInit&&(Mi=Le.get(zt._end))!=null;)for(var Xt=bn+1;Xt<Ct.length;Xt++)if(Ct[Xt]._start===Mi){gi.push(zt=Ct[Xt]);break}for(var ri=[],In=0;In<gi.length;In++)for(var K=gi[In],le=K._start;le<=K._end;le++)ri.push(le);for(var Ae=Re[ri[0]],Ge=et.level,We=ri[0]-1;We>=0;We--)if(!($[We]&c)){Ge=Re[We];break}var rt=ri[ri.length-1],bt=Re[rt],Z=et.level;if(!($[rt]&s)){for(var me=rt+1;me<=et.end;me++)if(!($[me]&c)){Z=Re[me];break}}mn.push({_seqIndices:ri,_sosType:Math.max(Ge,Ae)%2?B:P,_eosType:Math.max(Z,bt)%2?B:P})}}for(var ye=0;ye<mn.length;ye++){var xe=mn[ye],he=xe._seqIndices,ut=xe._sosType,it=xe._eosType,ot=Re[he[0]]&1?B:P;if(fe.get(ne))for(var dt=0;dt<he.length;dt++){var Et=he[dt];if($[Et]&ne){for(var Lt=ut,Mt=dt-1;Mt>=0;Mt--)if(!($[he[Mt]]&c)){Lt=$[he[Mt]];break}Ee(Et,Lt&(s|_e)?H:Lt)}}if(fe.get(I))for(var Vt=0;Vt<he.length;Vt++){var $t=he[Vt];if($[$t]&I)for(var Zt=Vt-1;Zt>=-1;Zt--){var Rn=Zt===-1?ut:$[he[Zt]];if(Rn&a){Rn===re&&Ee($t,V);break}}}if(fe.get(re))for(var Nt=0;Nt<he.length;Nt++){var Pt=he[Nt];$[Pt]&re&&Ee(Pt,B)}if(fe.get(z)||fe.get(j))for(var Vn=1;Vn<he.length-1;Vn++){var dn=he[Vn];if($[dn]&(z|j)){for(var jn=0,vn=0,Bn=Vn-1;Bn>=0&&(jn=$[he[Bn]],!!(jn&c));Bn--);for(var ln=Vn+1;ln<he.length&&(vn=$[he[ln]],!!(vn&c));ln++);jn===vn&&($[dn]===z?jn===I:jn&(I|V))&&Ee(dn,jn)}}if(fe.get(I))for(var kt=0;kt<he.length;kt++){var ii=he[kt];if($[ii]&I){for(var si=kt-1;si>=0&&$[he[si]]&(k|c);si--)Ee(he[si],I);for(kt++;kt<he.length&&$[he[kt]]&(k|c|I);kt++)$[he[kt]]!==I&&Ee(he[kt],I)}}if(fe.get(k)||fe.get(z)||fe.get(j))for(var yn=0;yn<he.length;yn++){var di=he[yn];if($[di]&(k|z|j)){Ee(di,H);for(var ya=yn-1;ya>=0&&$[he[ya]]&c;ya--)Ee(he[ya],H);for(var Ni=yn+1;Ni<he.length&&$[he[Ni]]&c;Ni++)Ee(he[Ni],H)}}if(fe.get(I))for(var qu=0,Kl=ut;qu<he.length;qu++){var $l=he[qu],Ql=$[$l];Ql&I?Kl===P&&Ee($l,P):Ql&a&&(Kl=Ql)}if(fe.get(o)){var nl=B|I|V,gh=nl|P,mo=[];{for(var Xa=[],qa=0;qa<he.length;qa++)if($[he[qa]]&o){var bs=De[he[qa]],go=void 0;if(w(bs)!==null)if(Xa.length<63)Xa.push({char:bs,seqIndex:qa});else break;else if((go=D(bs))!==null)for(var il=Xa.length-1;il>=0;il--){var rl=Xa[il].char;if(rl===go||rl===D(O(bs))||w(O(rl))===bs){mo.push([Xa[il].seqIndex,qa]),Xa.length=il;break}}}mo.sort(function(Br,Es){return Br[0]-Es[0]})}for(var Yc=0;Yc<mo.length;Yc++){for(var sl=mo[Yc],as=sl[0],al=sl[1],ol=!1,Zi=0,Zc=as+1;Zc<al;Zc++){var Kc=he[Zc];if($[Kc]&gh){ol=!0;var Yu=$[Kc]&nl?B:P;if(Yu===ot){Zi=Yu;break}}}if(ol&&!Zi){Zi=ut;for(var _a=as-1;_a>=0;_a--){var ll=he[_a];if($[ll]&gh){var Jl=$[ll]&nl?B:P;Jl!==ot?Zi=Jl:Zi=ot;break}}}if(Zi){if($[he[as]]=$[he[al]]=Zi,Zi!==ot){for(var Ki=as+1;Ki<he.length;Ki++)if(!($[he[Ki]]&c)){g(De[he[Ki]])&ne&&($[he[Ki]]=Zi);break}}if(Zi!==ot){for(var Ss=al+1;Ss<he.length;Ss++)if(!($[he[Ss]]&c)){g(De[he[Ss]])&ne&&($[he[Ss]]=Zi);break}}}}for(var os=0;os<he.length;os++)if($[he[os]]&o){for(var cl=os,Zu=os,js=ut,xa=os-1;xa>=0;xa--)if($[he[xa]]&c)cl=xa;else{js=$[he[xa]]&nl?B:P;break}for(var ul=it,ba=os+1;ba<he.length;ba++)if($[he[ba]]&(o|c))Zu=ba;else{ul=$[he[ba]]&nl?B:P;break}for(var $c=cl;$c<=Zu;$c++)$[he[$c]]=js===ul?js:ot;os=Zu}}}for(var Qr=et.start;Qr<=et.end;Qr++){var Ig=Re[Qr],Gi=$[Qr];if(Ig&1?Gi&(P|I|V)&&Re[Qr]++:Gi&B?Re[Qr]++:Gi&(V|I)&&(Re[Qr]+=2),Gi&c&&(Re[Qr]=Qr===0?et.level:Re[Qr-1]),Qr===et.end||g(De[Qr])&(te|W))for(var fl=Qr;fl>=0&&g(De[fl])&u;fl--)Re[fl]=et.level}}return{levels:Re,paragraphs:Fe};function vh(Br,Es){for(var lr=Br;lr<De.length;lr++){var Ws=$[lr];if(Ws&(B|re))return 1;if(Ws&(W|P)||Es&&Ws===_e)return 0;if(Ws&s){var yh=op(lr);lr=yh===-1?De.length:yh}}return 0}function op(Br){for(var Es=1,lr=Br+1;lr<De.length;lr++){var Ws=$[lr];if(Ws&W)break;if(Ws&_e){if(--Es===0)return lr}else Ws&s&&Es++}return-1}}var qe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Be;function Se(){if(!Be){var De=M(qe,!0),st=De.map,ke=De.reverseMap;ke.forEach(function($,Y){st.set(Y,$)}),Be=st}}function He(De){return Se(),Be.get(De)||null}function oe(De,st,ke,$){var Y=De.length;ke=Math.max(0,ke==null?0:+ke),$=Math.min(Y-1,$==null?Y-1:+$);for(var fe=new Map,Ee=ke;Ee<=$;Ee++)if(st[Ee]&1){var Re=He(De[Ee]);Re!==null&&fe.set(Ee,Re)}return fe}function lt(De,st,ke,$){var Y=De.length;ke=Math.max(0,ke==null?0:+ke),$=Math.min(Y-1,$==null?Y-1:+$);var fe=[];return st.paragraphs.forEach(function(Ee){var Re=Math.max(ke,Ee.start),Le=Math.min($,Ee.end);if(Re<Le){for(var Fe=st.levels.slice(Re,Le+1),et=Le;et>=Re&&g(De[et])&u;et--)Fe[et]=Ee.level;for(var tt=Ee.level,Ot=1/0,at=0;at<Fe.length;at++){var yt=Fe[at];yt>tt&&(tt=yt),yt<Ot&&(Ot=yt|1)}for(var gt=tt;gt>=Ot;gt--)for(var ht=0;ht<Fe.length;ht++)if(Fe[ht]>=gt){for(var nt=ht;ht+1<Fe.length&&Fe[ht+1]>=gt;)ht++;ht>nt&&fe.push([nt+Re,ht+Re])}}}),fe}function ze(De,st,ke,$){var Y=Qe(De,st,ke,$),fe=[].concat(De);return Y.forEach(function(Ee,Re){fe[Re]=(st.levels[Ee]&1?He(De[Ee]):null)||De[Ee]}),fe.join("")}function Qe(De,st,ke,$){for(var Y=lt(De,st,ke,$),fe=[],Ee=0;Ee<De.length;Ee++)fe[Ee]=Ee;return Y.forEach(function(Re){for(var Le=Re[0],Fe=Re[1],et=fe.slice(Le,Fe+1),tt=et.length;tt--;)fe[Fe-tt]=et[tt]}),fe}return e.closingToOpeningBracket=D,e.getBidiCharType=g,e.getBidiCharTypeName=y,e.getCanonicalBracket=O,e.getEmbeddingLevels=Xe,e.getMirroredCharacter=He,e.getMirroredCharactersMap=oe,e.getReorderSegments=lt,e.getReorderedIndices=Qe,e.getReorderedString=ze,e.openingToClosingBracket=w,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return n}const PN=/\bvoid\s+main\s*\(\s*\)\s*{/g;function JT(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let s=Dn[r];return s?JT(s):i}return n.replace(e,t)}const ys=[];for(let n=0;n<256;n++)ys[n]=(n<16?"0":"")+n.toString(16);function sW(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ys[n&255]+ys[n>>8&255]+ys[n>>16&255]+ys[n>>24&255]+"-"+ys[e&255]+ys[e>>8&255]+"-"+ys[e>>16&15|64]+ys[e>>24&255]+"-"+ys[t&63|128]+ys[t>>8&255]+"-"+ys[t>>16&255]+ys[t>>24&255]+ys[i&255]+ys[i>>8&255]+ys[i>>16&255]+ys[i>>24&255]).toUpperCase()}const gd=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},aW=Date.now(),V4=new WeakMap,j4=new Map;let oW=1e10;function eA(n,e){const t=fW(e);let i=V4.get(n);if(i||V4.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,s=function(u,h){n.onBeforeCompile.call(this,u,h);const p=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let g=j4[p];if(!g){const y=lW(this,u,e,t);g=j4[p]=y}u.vertexShader=g.vertexShader,u.fragmentShader=g.fragmentShader,gd(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-aW}}),this[r]&&this[r](u)},a=function(){return o(e.chained?n:n.clone())},o=function(u){const h=Object.create(u,c);return Object.defineProperty(h,"baseMaterial",{value:n}),Object.defineProperty(h,"id",{value:oW++}),h.uuid=sW(),h.uniforms=gd({},u.uniforms,e.uniforms),h.defines=gd({},u.defines,e.defines),h.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",h.extensions=gd({},u.extensions,e.extensions),h._listeners=void 0,h},c={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>n.type,set:u=>{n.type=u}},isDerivedFrom:{writable:!0,configurable:!0,value:function(u){const h=this.baseMaterial;return u===h||h.isDerivedMaterial&&h.isDerivedFrom(u)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(u){this[r]=u}},copy:{writable:!0,configurable:!0,value:function(u){return n.copy.call(this,u),!n.isShaderMaterial&&!n.isDerivedMaterial&&(gd(this.extensions,u.extensions),gd(this.defines,u.defines),gd(this.uniforms,hg.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new n.constructor;return o(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=eA(n.isDerivedMaterial?n.getDepthMaterial():new qS({depthPacking:cw}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=eA(n.isDerivedMaterial?n.getDistanceMaterial():new YS,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:h}=this;u&&u.dispose(),h&&h.dispose(),n.dispose.call(this)}}};return i[t]=a,new a}function lW(n,{vertexShader:e,fragmentShader:t},i,r){let{vertexDefs:s,vertexMainIntro:a,vertexMainOutro:o,vertexTransform:c,fragmentDefs:u,fragmentMainIntro:h,fragmentMainOutro:p,fragmentColorTransform:g,customRewriter:y,timeUniform:x}=i;if(s=s||"",a=a||"",o=o||"",u=u||"",h=h||"",p=p||"",(c||y)&&(e=JT(e)),(g||y)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=JT(t)),y){let M=y({vertexShader:e,fragmentShader:t});e=M.vertexShader,t=M.fragmentShader}if(g){let M=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,b=>(M.push(b),"")),p=`${g}
${M.join(`
`)}
${p}`}if(x){const M=`
uniform float ${x};
`;s=M+s,u=M+u}return c&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${c}
}
`,a=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${a}
`,e=e.replace(/\b(position|normal|uv)\b/g,(M,b,S,T)=>/\battribute\s+vec[23]\s+$/.test(T.substr(0,S))?b:`troika_${b}_${r}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=W4(e,r,s,a,o),t=W4(t,r,u,h,p),{vertexShader:e,fragmentShader:t}}function W4(n,e,t,i,r){return(i||r||t)&&(n=n.replace(PN,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function cW(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let uW=0;const X4=new Map;function fW(n){const e=JSON.stringify(n,cW);let t=X4.get(e);return t==null&&X4.set(e,t=++uW),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function hW(){return typeof window>"u"&&(self.window=self),(function(n){var e={parse:function(r){var s=e._bin,a=new Uint8Array(r);if(s.readASCII(a,0,4)=="ttcf"){var o=4;s.readUshort(a,o),o+=2,s.readUshort(a,o),o+=2;var c=s.readUint(a,o);o+=4;for(var u=[],h=0;h<c;h++){var p=s.readUint(a,o);o+=4,u.push(e._readFont(a,p))}return u}return[e._readFont(a,0)]},_readFont:function(r,s){var a=e._bin,o=s;a.readFixed(r,s),s+=4;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],h={_data:r,_offset:o},p={},g=0;g<c;g++){var y=a.readASCII(r,s,4);s+=4,a.readUint(r,s),s+=4;var x=a.readUint(r,s);s+=4;var M=a.readUint(r,s);s+=4,p[y]={offset:x,length:M}}for(g=0;g<u.length;g++){var b=u[g];p[b]&&(h[b.trim()]=e[b.trim()].parse(r,p[b].offset,p[b].length,h))}return h},_tabOffset:function(r,s,a){for(var o=e._bin,c=o.readUshort(r,a+4),u=a+12,h=0;h<c;h++){var p=o.readASCII(r,u,4);u+=4,o.readUint(r,u),u+=4;var g=o.readUint(r,u);if(u+=4,o.readUint(r,u),u+=4,p==s)return g}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,a){for(var o=[],c=0;c<a;c++)o.push(e._bin.readUshort(r,s+2*c));return o},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,a){for(var o="",c=0;c<a;c++)o+=String.fromCharCode(r[s+c]);return o},readUnicode:function(r,s,a){for(var o="",c=0;c<a;c++){var u=r[s++]<<8|r[s++];o+=String.fromCharCode(u)}return o},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,a){var o=e._bin._tdec;return o&&s==0&&a==r.length?o.decode(r):e._bin.readASCII(r,s,a)},readBytes:function(r,s,a){for(var o=[],c=0;c<a;c++)o.push(r[s+c]);return o},readASCIIArray:function(r,s,a){for(var o=[],c=0;c<a;c++)o.push(String.fromCharCode(r[s+c]));return o},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,a,o,c){var u=e._bin,h={},p=s;u.readFixed(r,s),s+=4;var g=u.readUshort(r,s);s+=2;var y=u.readUshort(r,s);s+=2;var x=u.readUshort(r,s);return s+=2,h.scriptList=e._lctf.readScriptList(r,p+g),h.featureList=e._lctf.readFeatureList(r,p+y),h.lookupList=e._lctf.readLookupList(r,p+x,c),h},e._lctf.readLookupList=function(r,s,a){var o=e._bin,c=s,u=[],h=o.readUshort(r,s);s+=2;for(var p=0;p<h;p++){var g=o.readUshort(r,s);s+=2;var y=e._lctf.readLookupTable(r,c+g,a);u.push(y)}return u},e._lctf.readLookupTable=function(r,s,a){var o=e._bin,c=s,u={tabs:[]};u.ltype=o.readUshort(r,s),s+=2,u.flag=o.readUshort(r,s),s+=2;var h=o.readUshort(r,s);s+=2;for(var p=u.ltype,g=0;g<h;g++){var y=o.readUshort(r,s);s+=2;var x=a(r,p,c+y,u);u.tabs.push(x)}return u},e._lctf.numOfOnes=function(r){for(var s=0,a=0;a<32;a++)(r>>>a&1)!=0&&s++;return s},e._lctf.readClassDef=function(r,s){var a=e._bin,o=[],c=a.readUshort(r,s);if(s+=2,c==1){var u=a.readUshort(r,s);s+=2;var h=a.readUshort(r,s);s+=2;for(var p=0;p<h;p++)o.push(u+p),o.push(u+p),o.push(a.readUshort(r,s)),s+=2}if(c==2){var g=a.readUshort(r,s);for(s+=2,p=0;p<g;p++)o.push(a.readUshort(r,s)),s+=2,o.push(a.readUshort(r,s)),s+=2,o.push(a.readUshort(r,s)),s+=2}return o},e._lctf.getInterval=function(r,s){for(var a=0;a<r.length;a+=3){var o=r[a],c=r[a+1];if(r[a+2],o<=s&&s<=c)return a}return-1},e._lctf.readCoverage=function(r,s){var a=e._bin,o={};o.fmt=a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);return s+=2,o.fmt==1&&(o.tab=a.readUshorts(r,s,c)),o.fmt==2&&(o.tab=a.readUshorts(r,s,3*c)),o},e._lctf.coverageIndex=function(r,s){var a=r.tab;if(r.fmt==1)return a.indexOf(s);if(r.fmt==2){var o=e._lctf.getInterval(a,s);if(o!=-1)return a[o+2]+(s-a[o])}return-1},e._lctf.readFeatureList=function(r,s){var a=e._bin,o=s,c=[],u=a.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var p=a.readASCII(r,s,4);s+=4;var g=a.readUshort(r,s);s+=2;var y=e._lctf.readFeatureTable(r,o+g);y.tag=p.trim(),c.push(y)}return c},e._lctf.readFeatureTable=function(r,s){var a=e._bin,o=s,c={},u=a.readUshort(r,s);s+=2,u>0&&(c.featureParams=o+u);var h=a.readUshort(r,s);s+=2,c.tab=[];for(var p=0;p<h;p++)c.tab.push(a.readUshort(r,s+2*p));return c},e._lctf.readScriptList=function(r,s){var a=e._bin,o=s,c={},u=a.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var p=a.readASCII(r,s,4);s+=4;var g=a.readUshort(r,s);s+=2,c[p.trim()]=e._lctf.readScriptTable(r,o+g)}return c},e._lctf.readScriptTable=function(r,s){var a=e._bin,o=s,c={},u=a.readUshort(r,s);s+=2,u>0&&(c.default=e._lctf.readLangSysTable(r,o+u));var h=a.readUshort(r,s);s+=2;for(var p=0;p<h;p++){var g=a.readASCII(r,s,4);s+=4;var y=a.readUshort(r,s);s+=2,c[g.trim()]=e._lctf.readLangSysTable(r,o+y)}return c},e._lctf.readLangSysTable=function(r,s){var a=e._bin,o={};a.readUshort(r,s),s+=2,o.reqFeature=a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);return s+=2,o.features=a.readUshorts(r,s,c),o},e.CFF={},e.CFF.parse=function(r,s,a){var o=e._bin;(r=new Uint8Array(r.buffer,s,a))[s=0],r[++s],r[++s],r[++s],s++;var c=[];s=e.CFF.readIndex(r,s,c);for(var u=[],h=0;h<c.length-1;h++)u.push(o.readASCII(r,s+c[h],c[h+1]-c[h]));s+=c[c.length-1];var p=[];s=e.CFF.readIndex(r,s,p);var g=[];for(h=0;h<p.length-1;h++)g.push(e.CFF.readDict(r,s+p[h],s+p[h+1]));s+=p[p.length-1];var y=g[0],x=[];s=e.CFF.readIndex(r,s,x);var M=[];for(h=0;h<x.length-1;h++)M.push(o.readASCII(r,s+x[h],x[h+1]-x[h]));if(s+=x[x.length-1],e.CFF.readSubrs(r,s,y),y.CharStrings){s=y.CharStrings,x=[],s=e.CFF.readIndex(r,s,x);var b=[];for(h=0;h<x.length-1;h++)b.push(o.readBytes(r,s+x[h],x[h+1]-x[h]));y.CharStrings=b}if(y.ROS){s=y.FDArray;var S=[];for(s=e.CFF.readIndex(r,s,S),y.FDArray=[],h=0;h<S.length-1;h++){var T=e.CFF.readDict(r,s+S[h],s+S[h+1]);e.CFF._readFDict(r,T,M),y.FDArray.push(T)}s+=S[S.length-1],s=y.FDSelect,y.FDSelect=[];var A=r[s];if(s++,A!=3)throw A;var w=o.readUshort(r,s);for(s+=2,h=0;h<w+1;h++)y.FDSelect.push(o.readUshort(r,s),r[s+2]),s+=3}return y.Encoding&&(y.Encoding=e.CFF.readEncoding(r,y.Encoding,y.CharStrings.length)),y.charset&&(y.charset=e.CFF.readCharset(r,y.charset,y.CharStrings.length)),e.CFF._readFDict(r,y,M),y},e.CFF._readFDict=function(r,s,a){var o;for(var c in s.Private&&(o=s.Private[1],s.Private=e.CFF.readDict(r,o,o+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,o+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(c)!=-1&&(s[c]=a[s[c]-426+35])},e.CFF.readSubrs=function(r,s,a){var o=e._bin,c=[];s=e.CFF.readIndex(r,s,c);var u,h=c.length;u=h<1240?107:h<33900?1131:32768,a.Bias=u,a.Subrs=[];for(var p=0;p<c.length-1;p++)a.Subrs.push(o.readBytes(r,s+c[p],c[p+1]-c[p]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var a=0;a<r.charset.length;a++)if(r.charset[a]==s)return a;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,a){e._bin;var o=[".notdef"],c=r[s];if(s++,c!=0)throw"error: unknown encoding format: "+c;var u=r[s];s++;for(var h=0;h<u;h++)o.push(r[s+h]);return o},e.CFF.readCharset=function(r,s,a){var o=e._bin,c=[".notdef"],u=r[s];if(s++,u==0)for(var h=0;h<a;h++){var p=o.readUshort(r,s);s+=2,c.push(p)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;c.length<a;){p=o.readUshort(r,s),s+=2;var g=0;for(u==1?(g=r[s],s++):(g=o.readUshort(r,s),s+=2),h=0;h<=g;h++)c.push(p),p++}}return c},e.CFF.readIndex=function(r,s,a){var o=e._bin,c=o.readUshort(r,s)+1,u=r[s+=2];if(s++,u==1)for(var h=0;h<c;h++)a.push(r[s+h]);else if(u==2)for(h=0;h<c;h++)a.push(o.readUshort(r,s+2*h));else if(u==3)for(h=0;h<c;h++)a.push(16777215&o.readUint(r,s+3*h-1));else if(c!=1)throw"unsupported offset size: "+u+", count: "+c;return(s+=c*u)-1},e.CFF.getCharString=function(r,s,a){var o=e._bin,c=r[s],u=r[s+1];r[s+2],r[s+3],r[s+4];var h=1,p=null,g=null;c<=20&&(p=c,h=1),c==12&&(p=100*c+u,h=2),21<=c&&c<=27&&(p=c,h=1),c==28&&(g=o.readShort(r,s+1),h=3),29<=c&&c<=31&&(p=c,h=1),32<=c&&c<=246&&(g=c-139,h=1),247<=c&&c<=250&&(g=256*(c-247)+u+108,h=2),251<=c&&c<=254&&(g=256*-(c-251)-u-108,h=2),c==255&&(g=o.readInt(r,s+1)/65535,h=5),a.val=g??"o"+p,a.size=h},e.CFF.readCharString=function(r,s,a){for(var o=s+a,c=e._bin,u=[];s<o;){var h=r[s],p=r[s+1];r[s+2],r[s+3],r[s+4];var g=1,y=null,x=null;h<=20&&(y=h,g=1),h==12&&(y=100*h+p,g=2),h!=19&&h!=20||(y=h,g=2),21<=h&&h<=27&&(y=h,g=1),h==28&&(x=c.readShort(r,s+1),g=3),29<=h&&h<=31&&(y=h,g=1),32<=h&&h<=246&&(x=h-139,g=1),247<=h&&h<=250&&(x=256*(h-247)+p+108,g=2),251<=h&&h<=254&&(x=256*-(h-251)-p-108,g=2),h==255&&(x=c.readInt(r,s+1)/65535,g=5),u.push(x??"o"+y),s+=g}return u},e.CFF.readDict=function(r,s,a){for(var o=e._bin,c={},u=[];s<a;){var h=r[s],p=r[s+1];r[s+2],r[s+3],r[s+4];var g=1,y=null,x=null;if(h==28&&(x=o.readShort(r,s+1),g=3),h==29&&(x=o.readInt(r,s+1),g=5),32<=h&&h<=246&&(x=h-139,g=1),247<=h&&h<=250&&(x=256*(h-247)+p+108,g=2),251<=h&&h<=254&&(x=256*-(h-251)-p-108,g=2),h==255)throw x=o.readInt(r,s+1)/65535,g=5,"unknown number";if(h==30){var M=[];for(g=1;;){var b=r[s+g];g++;var S=b>>4,T=15&b;if(S!=15&&M.push(S),T!=15&&M.push(T),T==15)break}for(var A="",w=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],D=0;D<M.length;D++)A+=w[M[D]];x=parseFloat(A)}h<=21&&(y=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][h],g=1,h==12&&(y=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][p],g=2)),y!=null?(c[y]=u.length==1?u[0]:u,u=[]):u.push(x),s+=g}return c},e.cmap={},e.cmap.parse=function(r,s,a){r=new Uint8Array(r.buffer,s,a),s=0;var o=e._bin,c={};o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2;var h=[];c.tables=[];for(var p=0;p<u;p++){var g=o.readUshort(r,s);s+=2;var y=o.readUshort(r,s);s+=2;var x=o.readUint(r,s);s+=4;var M="p"+g+"e"+y,b=h.indexOf(x);if(b==-1){var S;b=c.tables.length,h.push(x);var T=o.readUshort(r,x);T==0?S=e.cmap.parse0(r,x):T==4?S=e.cmap.parse4(r,x):T==6?S=e.cmap.parse6(r,x):T==12?S=e.cmap.parse12(r,x):console.debug("unknown format: "+T,g,y,x),c.tables.push(S)}if(c[M]!=null)throw"multiple tables for one platform+encoding";c[M]=b}return c},e.cmap.parse0=function(r,s){var a=e._bin,o={};o.format=a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,o.map=[];for(var u=0;u<c-6;u++)o.map.push(r[s+u]);return o},e.cmap.parse4=function(r,s){var a=e._bin,o=s,c={};c.format=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2;var h=a.readUshort(r,s);s+=2;var p=h/2;c.searchRange=a.readUshort(r,s),s+=2,c.entrySelector=a.readUshort(r,s),s+=2,c.rangeShift=a.readUshort(r,s),s+=2,c.endCount=a.readUshorts(r,s,p),s+=2*p,s+=2,c.startCount=a.readUshorts(r,s,p),s+=2*p,c.idDelta=[];for(var g=0;g<p;g++)c.idDelta.push(a.readShort(r,s)),s+=2;for(c.idRangeOffset=a.readUshorts(r,s,p),s+=2*p,c.glyphIdArray=[];s<o+u;)c.glyphIdArray.push(a.readUshort(r,s)),s+=2;return c},e.cmap.parse6=function(r,s){var a=e._bin,o={};o.format=a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,o.firstCode=a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,o.glyphIdArray=[];for(var u=0;u<c;u++)o.glyphIdArray.push(a.readUshort(r,s)),s+=2;return o},e.cmap.parse12=function(r,s){var a=e._bin,o={};o.format=a.readUshort(r,s),s+=2,s+=2,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4;var c=a.readUint(r,s);s+=4,o.groups=[];for(var u=0;u<c;u++){var h=s+12*u,p=a.readUint(r,h+0),g=a.readUint(r,h+4),y=a.readUint(r,h+8);o.groups.push([p,g,y])}return o},e.glyf={},e.glyf.parse=function(r,s,a,o){for(var c=[],u=0;u<o.maxp.numGlyphs;u++)c.push(null);return c},e.glyf._parseGlyf=function(r,s){var a=e._bin,o=r._data,c=e._tabOffset(o,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var u={};if(u.noc=a.readShort(o,c),c+=2,u.xMin=a.readShort(o,c),c+=2,u.yMin=a.readShort(o,c),c+=2,u.xMax=a.readShort(o,c),c+=2,u.yMax=a.readShort(o,c),c+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var h=0;h<u.noc;h++)u.endPts.push(a.readUshort(o,c)),c+=2;var p=a.readUshort(o,c);if(c+=2,o.length-c<p)return null;u.instructions=a.readBytes(o,c,p),c+=p;var g=u.endPts[u.noc-1]+1;for(u.flags=[],h=0;h<g;h++){var y=o[c];if(c++,u.flags.push(y),(8&y)!=0){var x=o[c];c++;for(var M=0;M<x;M++)u.flags.push(y),h++}}for(u.xs=[],h=0;h<g;h++){var b=(2&u.flags[h])!=0,S=(16&u.flags[h])!=0;b?(u.xs.push(S?o[c]:-o[c]),c++):S?u.xs.push(0):(u.xs.push(a.readShort(o,c)),c+=2)}for(u.ys=[],h=0;h<g;h++)b=(4&u.flags[h])!=0,S=(32&u.flags[h])!=0,b?(u.ys.push(S?o[c]:-o[c]),c++):S?u.ys.push(0):(u.ys.push(a.readShort(o,c)),c+=2);var T=0,A=0;for(h=0;h<g;h++)T+=u.xs[h],A+=u.ys[h],u.xs[h]=T,u.ys[h]=A}else{var w;u.parts=[];do{w=a.readUshort(o,c),c+=2;var D={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(D),D.glyphIndex=a.readUshort(o,c),c+=2,1&w){var O=a.readShort(o,c);c+=2;var P=a.readShort(o,c);c+=2}else O=a.readInt8(o,c),c++,P=a.readInt8(o,c),c++;2&w?(D.m.tx=O,D.m.ty=P):(D.p1=O,D.p2=P),8&w?(D.m.a=D.m.d=a.readF2dot14(o,c),c+=2):64&w?(D.m.a=a.readF2dot14(o,c),c+=2,D.m.d=a.readF2dot14(o,c),c+=2):128&w&&(D.m.a=a.readF2dot14(o,c),c+=2,D.m.b=a.readF2dot14(o,c),c+=2,D.m.c=a.readF2dot14(o,c),c+=2,D.m.d=a.readF2dot14(o,c),c+=2)}while(32&w);if(256&w){var B=a.readUshort(o,c);for(c+=2,u.instr=[],h=0;h<B;h++)u.instr.push(o[c]),c++}}return u},e.GDEF={},e.GDEF.parse=function(r,s,a,o){var c=s;s+=4;var u=e._bin.readUshort(r,s);return{glyphClassDef:u===0?null:e._lctf.readClassDef(r,c+u)}},e.GPOS={},e.GPOS.parse=function(r,s,a,o){return e._lctf.parse(r,s,a,o,e.GPOS.subt)},e.GPOS.subt=function(r,s,a,o){var c=e._bin,u=a,h={};if(h.fmt=c.readUshort(r,a),a+=2,s==1||s==2||s==3||s==7||s==8&&h.fmt<=2){var p=c.readUshort(r,a);a+=2,h.coverage=e._lctf.readCoverage(r,p+u)}if(s==1&&h.fmt==1){var g=c.readUshort(r,a);a+=2,g!=0&&(h.pos=e.GPOS.readValueRecord(r,a,g))}else if(s==2&&h.fmt>=1&&h.fmt<=2){g=c.readUshort(r,a),a+=2;var y=c.readUshort(r,a);a+=2;var x=e._lctf.numOfOnes(g),M=e._lctf.numOfOnes(y);if(h.fmt==1){h.pairsets=[];var b=c.readUshort(r,a);a+=2;for(var S=0;S<b;S++){var T=u+c.readUshort(r,a);a+=2;var A=c.readUshort(r,T);T+=2;for(var w=[],D=0;D<A;D++){var O=c.readUshort(r,T);T+=2,g!=0&&(V=e.GPOS.readValueRecord(r,T,g),T+=2*x),y!=0&&(j=e.GPOS.readValueRecord(r,T,y),T+=2*M),w.push({gid2:O,val1:V,val2:j})}h.pairsets.push(w)}}if(h.fmt==2){var P=c.readUshort(r,a);a+=2;var B=c.readUshort(r,a);a+=2;var I=c.readUshort(r,a);a+=2;var z=c.readUshort(r,a);for(a+=2,h.classDef1=e._lctf.readClassDef(r,u+P),h.classDef2=e._lctf.readClassDef(r,u+B),h.matrix=[],S=0;S<I;S++){var k=[];for(D=0;D<z;D++){var V=null,j=null;g!=0&&(V=e.GPOS.readValueRecord(r,a,g),a+=2*x),y!=0&&(j=e.GPOS.readValueRecord(r,a,y),a+=2*M),k.push({val1:V,val2:j})}h.matrix.push(k)}}}else if(s==4&&h.fmt==1)h.markCoverage=e._lctf.readCoverage(r,c.readUshort(r,a)+u),h.baseCoverage=e._lctf.readCoverage(r,c.readUshort(r,a+2)+u),h.markClassCount=c.readUshort(r,a+4),h.markArray=e.GPOS.readMarkArray(r,c.readUshort(r,a+6)+u),h.baseArray=e.GPOS.readBaseArray(r,c.readUshort(r,a+8)+u,h.markClassCount);else if(s==6&&h.fmt==1)h.mark1Coverage=e._lctf.readCoverage(r,c.readUshort(r,a)+u),h.mark2Coverage=e._lctf.readCoverage(r,c.readUshort(r,a+2)+u),h.markClassCount=c.readUshort(r,a+4),h.mark1Array=e.GPOS.readMarkArray(r,c.readUshort(r,a+6)+u),h.mark2Array=e.GPOS.readBaseArray(r,c.readUshort(r,a+8)+u,h.markClassCount);else{if(s==9&&h.fmt==1){var W=c.readUshort(r,a);a+=2;var te=c.readUint(r,a);if(a+=4,o.ltype==9)o.ltype=W;else if(o.ltype!=W)throw"invalid extension substitution";return e.GPOS.subt(r,o.ltype,u+te)}console.debug("unsupported GPOS table LookupType",s,"format",h.fmt)}return h},e.GPOS.readValueRecord=function(r,s,a){var o=e._bin,c=[];return c.push(1&a?o.readShort(r,s):0),s+=1&a?2:0,c.push(2&a?o.readShort(r,s):0),s+=2&a?2:0,c.push(4&a?o.readShort(r,s):0),s+=4&a?2:0,c.push(8&a?o.readShort(r,s):0),s+=8&a?2:0,c},e.GPOS.readBaseArray=function(r,s,a){var o=e._bin,c=[],u=s,h=o.readUshort(r,s);s+=2;for(var p=0;p<h;p++){for(var g=[],y=0;y<a;y++)g.push(e.GPOS.readAnchorRecord(r,u+o.readUshort(r,s))),s+=2;c.push(g)}return c},e.GPOS.readMarkArray=function(r,s){var a=e._bin,o=[],c=s,u=a.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var p=e.GPOS.readAnchorRecord(r,a.readUshort(r,s+2)+c);p.markClass=a.readUshort(r,s),o.push(p),s+=4}return o},e.GPOS.readAnchorRecord=function(r,s){var a=e._bin,o={};return o.fmt=a.readUshort(r,s),o.x=a.readShort(r,s+2),o.y=a.readShort(r,s+4),o},e.GSUB={},e.GSUB.parse=function(r,s,a,o){return e._lctf.parse(r,s,a,o,e.GSUB.subt)},e.GSUB.subt=function(r,s,a,o){var c=e._bin,u=a,h={};if(h.fmt=c.readUshort(r,a),a+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&h.fmt<=2||s==6&&h.fmt<=2){var p=c.readUshort(r,a);a+=2,h.coverage=e._lctf.readCoverage(r,u+p)}if(s==1&&h.fmt>=1&&h.fmt<=2){if(h.fmt==1)h.delta=c.readShort(r,a),a+=2;else if(h.fmt==2){var g=c.readUshort(r,a);a+=2,h.newg=c.readUshorts(r,a,g),a+=2*h.newg.length}}else if(s==2&&h.fmt==1){g=c.readUshort(r,a),a+=2,h.seqs=[];for(var y=0;y<g;y++){var x=c.readUshort(r,a)+u;a+=2;var M=c.readUshort(r,x);h.seqs.push(c.readUshorts(r,x+2,M))}}else if(s==4)for(h.vals=[],g=c.readUshort(r,a),a+=2,y=0;y<g;y++){var b=c.readUshort(r,a);a+=2,h.vals.push(e.GSUB.readLigatureSet(r,u+b))}else if(s==5&&h.fmt==2){if(h.fmt==2){var S=c.readUshort(r,a);a+=2,h.cDef=e._lctf.readClassDef(r,u+S),h.scset=[];var T=c.readUshort(r,a);for(a+=2,y=0;y<T;y++){var A=c.readUshort(r,a);a+=2,h.scset.push(A==0?null:e.GSUB.readSubClassSet(r,u+A))}}}else if(s==6&&h.fmt==3){if(h.fmt==3){for(y=0;y<3;y++){g=c.readUshort(r,a),a+=2;for(var w=[],D=0;D<g;D++)w.push(e._lctf.readCoverage(r,u+c.readUshort(r,a+2*D)));a+=2*g,y==0&&(h.backCvg=w),y==1&&(h.inptCvg=w),y==2&&(h.ahedCvg=w)}g=c.readUshort(r,a),a+=2,h.lookupRec=e.GSUB.readSubstLookupRecords(r,a,g)}}else{if(s==7&&h.fmt==1){var O=c.readUshort(r,a);a+=2;var P=c.readUint(r,a);if(a+=4,o.ltype==9)o.ltype=O;else if(o.ltype!=O)throw"invalid extension substitution";return e.GSUB.subt(r,o.ltype,u+P)}console.debug("unsupported GSUB table LookupType",s,"format",h.fmt)}return h},e.GSUB.readSubClassSet=function(r,s){var a=e._bin.readUshort,o=s,c=[],u=a(r,s);s+=2;for(var h=0;h<u;h++){var p=a(r,s);s+=2,c.push(e.GSUB.readSubClassRule(r,o+p))}return c},e.GSUB.readSubClassRule=function(r,s){var a=e._bin.readUshort,o={},c=a(r,s),u=a(r,s+=2);s+=2,o.input=[];for(var h=0;h<c-1;h++)o.input.push(a(r,s)),s+=2;return o.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,u),o},e.GSUB.readSubstLookupRecords=function(r,s,a){for(var o=e._bin.readUshort,c=[],u=0;u<a;u++)c.push(o(r,s),o(r,s+2)),s+=4;return c},e.GSUB.readChainSubClassSet=function(r,s){var a=e._bin,o=s,c=[],u=a.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var p=a.readUshort(r,s);s+=2,c.push(e.GSUB.readChainSubClassRule(r,o+p))}return c},e.GSUB.readChainSubClassRule=function(r,s){for(var a=e._bin,o={},c=["backtrack","input","lookahead"],u=0;u<c.length;u++){var h=a.readUshort(r,s);s+=2,u==1&&h--,o[c[u]]=a.readUshorts(r,s,h),s+=2*o[c[u]].length}return h=a.readUshort(r,s),s+=2,o.subst=a.readUshorts(r,s,2*h),s+=2*o.subst.length,o},e.GSUB.readLigatureSet=function(r,s){var a=e._bin,o=s,c=[],u=a.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var p=a.readUshort(r,s);s+=2,c.push(e.GSUB.readLigature(r,o+p))}return c},e.GSUB.readLigature=function(r,s){var a=e._bin,o={chain:[]};o.nglyph=a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2;for(var u=0;u<c-1;u++)o.chain.push(a.readUshort(r,s)),s+=2;return o},e.head={},e.head.parse=function(r,s,a){var o=e._bin,c={};return o.readFixed(r,s),s+=4,c.fontRevision=o.readFixed(r,s),s+=4,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4,c.flags=o.readUshort(r,s),s+=2,c.unitsPerEm=o.readUshort(r,s),s+=2,c.created=o.readUint64(r,s),s+=8,c.modified=o.readUint64(r,s),s+=8,c.xMin=o.readShort(r,s),s+=2,c.yMin=o.readShort(r,s),s+=2,c.xMax=o.readShort(r,s),s+=2,c.yMax=o.readShort(r,s),s+=2,c.macStyle=o.readUshort(r,s),s+=2,c.lowestRecPPEM=o.readUshort(r,s),s+=2,c.fontDirectionHint=o.readShort(r,s),s+=2,c.indexToLocFormat=o.readShort(r,s),s+=2,c.glyphDataFormat=o.readShort(r,s),s+=2,c},e.hhea={},e.hhea.parse=function(r,s,a){var o=e._bin,c={};return o.readFixed(r,s),s+=4,c.ascender=o.readShort(r,s),s+=2,c.descender=o.readShort(r,s),s+=2,c.lineGap=o.readShort(r,s),s+=2,c.advanceWidthMax=o.readUshort(r,s),s+=2,c.minLeftSideBearing=o.readShort(r,s),s+=2,c.minRightSideBearing=o.readShort(r,s),s+=2,c.xMaxExtent=o.readShort(r,s),s+=2,c.caretSlopeRise=o.readShort(r,s),s+=2,c.caretSlopeRun=o.readShort(r,s),s+=2,c.caretOffset=o.readShort(r,s),s+=2,s+=8,c.metricDataFormat=o.readShort(r,s),s+=2,c.numberOfHMetrics=o.readUshort(r,s),s+=2,c},e.hmtx={},e.hmtx.parse=function(r,s,a,o){for(var c=e._bin,u={aWidth:[],lsBearing:[]},h=0,p=0,g=0;g<o.maxp.numGlyphs;g++)g<o.hhea.numberOfHMetrics&&(h=c.readUshort(r,s),s+=2,p=c.readShort(r,s),s+=2),u.aWidth.push(h),u.lsBearing.push(p);return u},e.kern={},e.kern.parse=function(r,s,a,o){var c=e._bin,u=c.readUshort(r,s);if(s+=2,u==1)return e.kern.parseV1(r,s-2,a,o);var h=c.readUshort(r,s);s+=2;for(var p={glyph1:[],rval:[]},g=0;g<h;g++){s+=2,a=c.readUshort(r,s),s+=2;var y=c.readUshort(r,s);s+=2;var x=y>>>8;if((x&=15)!=0)throw"unknown kern table format: "+x;s=e.kern.readFormat0(r,s,p)}return p},e.kern.parseV1=function(r,s,a,o){var c=e._bin;c.readFixed(r,s),s+=4;var u=c.readUint(r,s);s+=4;for(var h={glyph1:[],rval:[]},p=0;p<u;p++){c.readUint(r,s),s+=4;var g=c.readUshort(r,s);s+=2,c.readUshort(r,s),s+=2;var y=g>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;s=e.kern.readFormat0(r,s,h)}return h},e.kern.readFormat0=function(r,s,a){var o=e._bin,c=-1,u=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var h=0;h<u;h++){var p=o.readUshort(r,s);s+=2;var g=o.readUshort(r,s);s+=2;var y=o.readShort(r,s);s+=2,p!=c&&(a.glyph1.push(p),a.rval.push({glyph2:[],vals:[]}));var x=a.rval[a.rval.length-1];x.glyph2.push(g),x.vals.push(y),c=p}return s},e.loca={},e.loca.parse=function(r,s,a,o){var c=e._bin,u=[],h=o.head.indexToLocFormat,p=o.maxp.numGlyphs+1;if(h==0)for(var g=0;g<p;g++)u.push(c.readUshort(r,s+(g<<1))<<1);if(h==1)for(g=0;g<p;g++)u.push(c.readUint(r,s+(g<<2)));return u},e.maxp={},e.maxp.parse=function(r,s,a){var o=e._bin,c={},u=o.readUint(r,s);return s+=4,c.numGlyphs=o.readUshort(r,s),s+=2,u==65536&&(c.maxPoints=o.readUshort(r,s),s+=2,c.maxContours=o.readUshort(r,s),s+=2,c.maxCompositePoints=o.readUshort(r,s),s+=2,c.maxCompositeContours=o.readUshort(r,s),s+=2,c.maxZones=o.readUshort(r,s),s+=2,c.maxTwilightPoints=o.readUshort(r,s),s+=2,c.maxStorage=o.readUshort(r,s),s+=2,c.maxFunctionDefs=o.readUshort(r,s),s+=2,c.maxInstructionDefs=o.readUshort(r,s),s+=2,c.maxStackElements=o.readUshort(r,s),s+=2,c.maxSizeOfInstructions=o.readUshort(r,s),s+=2,c.maxComponentElements=o.readUshort(r,s),s+=2,c.maxComponentDepth=o.readUshort(r,s),s+=2),c},e.name={},e.name.parse=function(r,s,a){var o=e._bin,c={};o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2,o.readUshort(r,s);for(var h,p=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],g=s+=2,y=0;y<u;y++){var x=o.readUshort(r,s);s+=2;var M=o.readUshort(r,s);s+=2;var b=o.readUshort(r,s);s+=2;var S=o.readUshort(r,s);s+=2;var T=o.readUshort(r,s);s+=2;var A=o.readUshort(r,s);s+=2;var w,D=p[S],O=g+12*u+A;if(x==0)w=o.readUnicode(r,O,T/2);else if(x==3&&M==0)w=o.readUnicode(r,O,T/2);else if(M==0)w=o.readASCII(r,O,T);else if(M==1)w=o.readUnicode(r,O,T/2);else if(M==3)w=o.readUnicode(r,O,T/2);else{if(x!=1)throw"unknown encoding "+M+", platformID: "+x;w=o.readASCII(r,O,T),console.debug("reading unknown MAC encoding "+M+" as ASCII")}var P="p"+x+","+b.toString(16);c[P]==null&&(c[P]={}),c[P][D!==void 0?D:S]=w,c[P]._lang=b}for(var B in c)if(c[B].postScriptName!=null&&c[B]._lang==1033)return c[B];for(var B in c)if(c[B].postScriptName!=null&&c[B]._lang==0)return c[B];for(var B in c)if(c[B].postScriptName!=null&&c[B]._lang==3084)return c[B];for(var B in c)if(c[B].postScriptName!=null)return c[B];for(var B in c){h=B;break}return console.debug("returning name table with languageID "+c[h]._lang),c[h]},e["OS/2"]={},e["OS/2"].parse=function(r,s,a){var o=e._bin.readUshort(r,s);s+=2;var c={};if(o==0)e["OS/2"].version0(r,s,c);else if(o==1)e["OS/2"].version1(r,s,c);else if(o==2||o==3||o==4)e["OS/2"].version2(r,s,c);else{if(o!=5)throw"unknown OS/2 table version: "+o;e["OS/2"].version5(r,s,c)}return c},e["OS/2"].version0=function(r,s,a){var o=e._bin;return a.xAvgCharWidth=o.readShort(r,s),s+=2,a.usWeightClass=o.readUshort(r,s),s+=2,a.usWidthClass=o.readUshort(r,s),s+=2,a.fsType=o.readUshort(r,s),s+=2,a.ySubscriptXSize=o.readShort(r,s),s+=2,a.ySubscriptYSize=o.readShort(r,s),s+=2,a.ySubscriptXOffset=o.readShort(r,s),s+=2,a.ySubscriptYOffset=o.readShort(r,s),s+=2,a.ySuperscriptXSize=o.readShort(r,s),s+=2,a.ySuperscriptYSize=o.readShort(r,s),s+=2,a.ySuperscriptXOffset=o.readShort(r,s),s+=2,a.ySuperscriptYOffset=o.readShort(r,s),s+=2,a.yStrikeoutSize=o.readShort(r,s),s+=2,a.yStrikeoutPosition=o.readShort(r,s),s+=2,a.sFamilyClass=o.readShort(r,s),s+=2,a.panose=o.readBytes(r,s,10),s+=10,a.ulUnicodeRange1=o.readUint(r,s),s+=4,a.ulUnicodeRange2=o.readUint(r,s),s+=4,a.ulUnicodeRange3=o.readUint(r,s),s+=4,a.ulUnicodeRange4=o.readUint(r,s),s+=4,a.achVendID=[o.readInt8(r,s),o.readInt8(r,s+1),o.readInt8(r,s+2),o.readInt8(r,s+3)],s+=4,a.fsSelection=o.readUshort(r,s),s+=2,a.usFirstCharIndex=o.readUshort(r,s),s+=2,a.usLastCharIndex=o.readUshort(r,s),s+=2,a.sTypoAscender=o.readShort(r,s),s+=2,a.sTypoDescender=o.readShort(r,s),s+=2,a.sTypoLineGap=o.readShort(r,s),s+=2,a.usWinAscent=o.readUshort(r,s),s+=2,a.usWinDescent=o.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,a){var o=e._bin;return s=e["OS/2"].version0(r,s,a),a.ulCodePageRange1=o.readUint(r,s),s+=4,a.ulCodePageRange2=o.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,a){var o=e._bin;return s=e["OS/2"].version1(r,s,a),a.sxHeight=o.readShort(r,s),s+=2,a.sCapHeight=o.readShort(r,s),s+=2,a.usDefault=o.readUshort(r,s),s+=2,a.usBreak=o.readUshort(r,s),s+=2,a.usMaxContext=o.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,a){var o=e._bin;return s=e["OS/2"].version2(r,s,a),a.usLowerOpticalPointSize=o.readUshort(r,s),s+=2,a.usUpperOpticalPointSize=o.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,a){var o=e._bin,c={};return c.version=o.readFixed(r,s),s+=4,c.italicAngle=o.readFixed(r,s),s+=4,c.underlinePosition=o.readShort(r,s),s+=2,c.underlineThickness=o.readShort(r,s),s+=2,c},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var a=r.cmap,o=-1;if(a.p0e4!=null?o=a.p0e4:a.p3e1!=null?o=a.p3e1:a.p1e0!=null?o=a.p1e0:a.p0e3!=null&&(o=a.p0e3),o==-1)throw"no familiar platform and encoding!";var c=a.tables[o];if(c.format==0)return s>=c.map.length?0:c.map[s];if(c.format==4){for(var u=-1,h=0;h<c.endCount.length;h++)if(s<=c.endCount[h]){u=h;break}return u==-1||c.startCount[u]>s?0:65535&(c.idRangeOffset[u]!=0?c.glyphIdArray[s-c.startCount[u]+(c.idRangeOffset[u]>>1)-(c.idRangeOffset.length-u)]:s+c.idDelta[u])}if(c.format==12){if(s>c.groups[c.groups.length-1][1])return 0;for(h=0;h<c.groups.length;h++){var p=c.groups[h];if(p[0]<=s&&s<=p[1])return p[2]+(s-p[0])}return 0}throw"unknown cmap table format "+c.format},e.U.glyphToPath=function(r,s){var a={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var o=r.SVG.entries[s];return o==null?a:(typeof o=="string"&&(o=e.SVG.toPath(o),r.SVG.entries[s]=o),o)}if(r.CFF){var c={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},u=r.CFF,h=r.CFF.Private;if(u.ROS){for(var p=0;u.FDSelect[p+2]<=s;)p+=2;h=u.FDArray[u.FDSelect[p+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],c,u,h,a)}else r.glyf&&e.U._drawGlyf(s,r,a);return a},e.U._drawGlyf=function(r,s,a){var o=s.glyf[r];o==null&&(o=s.glyf[r]=e.glyf._parseGlyf(s,r)),o!=null&&(o.noc>-1?e.U._simpleGlyph(o,a):e.U._compoGlyph(o,s,a))},e.U._simpleGlyph=function(r,s){for(var a=0;a<r.noc;a++){for(var o=a==0?0:r.endPts[a-1]+1,c=r.endPts[a],u=o;u<=c;u++){var h=u==o?c:u-1,p=u==c?o:u+1,g=1&r.flags[u],y=1&r.flags[h],x=1&r.flags[p],M=r.xs[u],b=r.ys[u];if(u==o)if(g){if(!y){e.U.P.moveTo(s,M,b);continue}e.U.P.moveTo(s,r.xs[h],r.ys[h])}else y?e.U.P.moveTo(s,r.xs[h],r.ys[h]):e.U.P.moveTo(s,(r.xs[h]+M)/2,(r.ys[h]+b)/2);g?y&&e.U.P.lineTo(s,M,b):x?e.U.P.qcurveTo(s,M,b,r.xs[p],r.ys[p]):e.U.P.qcurveTo(s,M,b,(M+r.xs[p])/2,(b+r.ys[p])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,a){for(var o=0;o<r.parts.length;o++){var c={cmds:[],crds:[]},u=r.parts[o];e.U._drawGlyf(u.glyphIndex,s,c);for(var h=u.m,p=0;p<c.crds.length;p+=2){var g=c.crds[p],y=c.crds[p+1];a.crds.push(g*h.a+y*h.b+h.tx),a.crds.push(g*h.c+y*h.d+h.ty)}for(p=0;p<c.cmds.length;p++)a.cmds.push(c.cmds[p])}},e.U._getGlyphClass=function(r,s){var a=e._lctf.getInterval(s,r);return a==-1?0:s[a+2]},e.U._applySubs=function(r,s,a,o){for(var c=r.length-s-1,u=0;u<a.tabs.length;u++)if(a.tabs[u]!=null){var h,p=a.tabs[u];if(!p.coverage||(h=e._lctf.coverageIndex(p.coverage,r[s]))!=-1){if(a.ltype==1)r[s],p.fmt==1?r[s]=r[s]+p.delta:r[s]=p.newg[h];else if(a.ltype==4)for(var g=p.vals[h],y=0;y<g.length;y++){var x=g[y],M=x.chain.length;if(!(M>c)){for(var b=!0,S=0,T=0;T<M;T++){for(;r[s+S+(1+T)]==-1;)S++;x.chain[T]!=r[s+S+(1+T)]&&(b=!1)}if(b){for(r[s]=x.nglyph,T=0;T<M+S;T++)r[s+T+1]=-1;break}}}else if(a.ltype==5&&p.fmt==2)for(var A=e._lctf.getInterval(p.cDef,r[s]),w=p.cDef[A+2],D=p.scset[w],O=0;O<D.length;O++){var P=D[O],B=P.input;if(!(B.length>c)){for(b=!0,T=0;T<B.length;T++){var I=e._lctf.getInterval(p.cDef,r[s+1+T]);if(A==-1&&p.cDef[I+2]!=B[T]){b=!1;break}}if(b){var z=P.substLookupRecords;for(y=0;y<z.length;y+=2)z[y],z[y+1]}}}else if(a.ltype==6&&p.fmt==3){if(!e.U._glsCovered(r,p.backCvg,s-p.backCvg.length)||!e.U._glsCovered(r,p.inptCvg,s)||!e.U._glsCovered(r,p.ahedCvg,s+p.inptCvg.length))continue;var k=p.lookupRec;for(O=0;O<k.length;O+=2){A=k[O];var V=o[k[O+1]];e.U._applySubs(r,s+A,V,o)}}}}},e.U._glsCovered=function(r,s,a){for(var o=0;o<s.length;o++)if(e._lctf.coverageIndex(s[o],r[a+o])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,a){for(var o={cmds:[],crds:[]},c=0,u=0;u<s.length;u++){var h=s[u];if(h!=-1){for(var p=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,g=e.U.glyphToPath(r,h),y=0;y<g.crds.length;y+=2)o.crds.push(g.crds[y]+c),o.crds.push(g.crds[y+1]);for(a&&o.cmds.push(a),y=0;y<g.cmds.length;y++)o.cmds.push(g.cmds[y]);a&&o.cmds.push("X"),c+=r.hmtx.aWidth[h],u<s.length-1&&(c+=e.U.getPairAdjustment(r,h,p))}}return o},e.U.P={},e.U.P.moveTo=function(r,s,a){r.cmds.push("M"),r.crds.push(s,a)},e.U.P.lineTo=function(r,s,a){r.cmds.push("L"),r.crds.push(s,a)},e.U.P.curveTo=function(r,s,a,o,c,u,h){r.cmds.push("C"),r.crds.push(s,a,o,c,u,h)},e.U.P.qcurveTo=function(r,s,a,o,c){r.cmds.push("Q"),r.crds.push(s,a,o,c)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,a,o,c){for(var u=s.stack,h=s.nStems,p=s.haveWidth,g=s.width,y=s.open,x=0,M=s.x,b=s.y,S=0,T=0,A=0,w=0,D=0,O=0,P=0,B=0,I=0,z=0,k={val:0,size:0};x<r.length;){e.CFF.getCharString(r,x,k);var V=k.val;if(x+=k.size,V=="o1"||V=="o18")u.length%2!=0&&!p&&(g=u.shift()+o.nominalWidthX),h+=u.length>>1,u.length=0,p=!0;else if(V=="o3"||V=="o23")u.length%2!=0&&!p&&(g=u.shift()+o.nominalWidthX),h+=u.length>>1,u.length=0,p=!0;else if(V=="o4")u.length>1&&!p&&(g=u.shift()+o.nominalWidthX,p=!0),y&&e.U.P.closePath(c),b+=u.pop(),e.U.P.moveTo(c,M,b),y=!0;else if(V=="o5")for(;u.length>0;)M+=u.shift(),b+=u.shift(),e.U.P.lineTo(c,M,b);else if(V=="o6"||V=="o7")for(var j=u.length,W=V=="o6",te=0;te<j;te++){var H=u.shift();W?M+=H:b+=H,W=!W,e.U.P.lineTo(c,M,b)}else if(V=="o8"||V=="o24"){j=u.length;for(var Q=0;Q+6<=j;)S=M+u.shift(),T=b+u.shift(),A=S+u.shift(),w=T+u.shift(),M=A+u.shift(),b=w+u.shift(),e.U.P.curveTo(c,S,T,A,w,M,b),Q+=6;V=="o24"&&(M+=u.shift(),b+=u.shift(),e.U.P.lineTo(c,M,b))}else{if(V=="o11")break;if(V=="o1234"||V=="o1235"||V=="o1236"||V=="o1237")V=="o1234"&&(T=b,A=(S=M+u.shift())+u.shift(),z=w=T+u.shift(),O=w,B=b,M=(P=(D=(I=A+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(c,S,T,A,w,I,z),e.U.P.curveTo(c,D,O,P,B,M,b)),V=="o1235"&&(S=M+u.shift(),T=b+u.shift(),A=S+u.shift(),w=T+u.shift(),I=A+u.shift(),z=w+u.shift(),D=I+u.shift(),O=z+u.shift(),P=D+u.shift(),B=O+u.shift(),M=P+u.shift(),b=B+u.shift(),u.shift(),e.U.P.curveTo(c,S,T,A,w,I,z),e.U.P.curveTo(c,D,O,P,B,M,b)),V=="o1236"&&(S=M+u.shift(),T=b+u.shift(),A=S+u.shift(),z=w=T+u.shift(),O=w,P=(D=(I=A+u.shift())+u.shift())+u.shift(),B=O+u.shift(),M=P+u.shift(),e.U.P.curveTo(c,S,T,A,w,I,z),e.U.P.curveTo(c,D,O,P,B,M,b)),V=="o1237"&&(S=M+u.shift(),T=b+u.shift(),A=S+u.shift(),w=T+u.shift(),I=A+u.shift(),z=w+u.shift(),D=I+u.shift(),O=z+u.shift(),P=D+u.shift(),B=O+u.shift(),Math.abs(P-M)>Math.abs(B-b)?M=P+u.shift():b=B+u.shift(),e.U.P.curveTo(c,S,T,A,w,I,z),e.U.P.curveTo(c,D,O,P,B,M,b));else if(V=="o14"){if(u.length>0&&!p&&(g=u.shift()+a.nominalWidthX,p=!0),u.length==4){var ne=u.shift(),re=u.shift(),G=u.shift(),X=u.shift(),ie=e.CFF.glyphBySE(a,G),se=e.CFF.glyphBySE(a,X);e.U._drawCFF(a.CharStrings[ie],s,a,o,c),s.x=ne,s.y=re,e.U._drawCFF(a.CharStrings[se],s,a,o,c)}y&&(e.U.P.closePath(c),y=!1)}else if(V=="o19"||V=="o20")u.length%2!=0&&!p&&(g=u.shift()+o.nominalWidthX),h+=u.length>>1,u.length=0,p=!0,x+=h+7>>3;else if(V=="o21")u.length>2&&!p&&(g=u.shift()+o.nominalWidthX,p=!0),b+=u.pop(),M+=u.pop(),y&&e.U.P.closePath(c),e.U.P.moveTo(c,M,b),y=!0;else if(V=="o22")u.length>1&&!p&&(g=u.shift()+o.nominalWidthX,p=!0),M+=u.pop(),y&&e.U.P.closePath(c),e.U.P.moveTo(c,M,b),y=!0;else if(V=="o25"){for(;u.length>6;)M+=u.shift(),b+=u.shift(),e.U.P.lineTo(c,M,b);S=M+u.shift(),T=b+u.shift(),A=S+u.shift(),w=T+u.shift(),M=A+u.shift(),b=w+u.shift(),e.U.P.curveTo(c,S,T,A,w,M,b)}else if(V=="o26")for(u.length%2&&(M+=u.shift());u.length>0;)S=M,T=b+u.shift(),M=A=S+u.shift(),b=(w=T+u.shift())+u.shift(),e.U.P.curveTo(c,S,T,A,w,M,b);else if(V=="o27")for(u.length%2&&(b+=u.shift());u.length>0;)T=b,A=(S=M+u.shift())+u.shift(),w=T+u.shift(),M=A+u.shift(),b=w,e.U.P.curveTo(c,S,T,A,w,M,b);else if(V=="o10"||V=="o29"){var ee=V=="o10"?o:a;if(u.length==0)console.debug("error: empty stack");else{var ue=u.pop(),pe=ee.Subrs[ue+ee.Bias];s.x=M,s.y=b,s.nStems=h,s.haveWidth=p,s.width=g,s.open=y,e.U._drawCFF(pe,s,a,o,c),M=s.x,b=s.y,h=s.nStems,p=s.haveWidth,g=s.width,y=s.open}}else if(V=="o30"||V=="o31"){var ve=u.length,_e=(Q=0,V=="o31");for(Q+=ve-(j=-3&ve);Q<j;)_e?(T=b,A=(S=M+u.shift())+u.shift(),b=(w=T+u.shift())+u.shift(),j-Q==5?(M=A+u.shift(),Q++):M=A,_e=!1):(S=M,T=b+u.shift(),A=S+u.shift(),w=T+u.shift(),M=A+u.shift(),j-Q==5?(b=w+u.shift(),Q++):b=w,_e=!0),e.U.P.curveTo(c,S,T,A,w,M,b),Q+=4}else{if((V+"").charAt(0)=="o")throw console.debug("Unknown operation: "+V,r),V;u.push(V)}}}s.x=M,s.y=b,s.nStems=h,s.haveWidth=p,s.width=g,s.open=y};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n})({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function dW(){return(function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(V,j){for(var W=new t(31),te=0;te<31;++te)W[te]=j+=1<<V[te-1];var H=new i(W[30]);for(te=1;te<30;++te)for(var Q=W[te];Q<W[te+1];++Q)H[Q]=Q-W[te]<<5|te;return[W,H]},c=o(r,2),u=c[0],h=c[1];u[28]=258,h[258]=28;for(var p=o(s,0)[0],g=new t(32768),y=0;y<32768;++y){var x=(43690&y)>>>1|(21845&y)<<1;x=(61680&(x=(52428&x)>>>2|(13107&x)<<2))>>>4|(3855&x)<<4,g[y]=((65280&x)>>>8|(255&x)<<8)>>>1}var M=function(V,j,W){for(var te=V.length,H=0,Q=new t(j);H<te;++H)++Q[V[H]-1];var ne,re=new t(j);for(H=0;H<j;++H)re[H]=re[H-1]+Q[H-1]<<1;{ne=new t(1<<j);var G=15-j;for(H=0;H<te;++H)if(V[H])for(var X=H<<4|V[H],ie=j-V[H],se=re[V[H]-1]++<<ie,ee=se|(1<<ie)-1;se<=ee;++se)ne[g[se]>>>G]=X}return ne},b=new e(288);for(y=0;y<144;++y)b[y]=8;for(y=144;y<256;++y)b[y]=9;for(y=256;y<280;++y)b[y]=7;for(y=280;y<288;++y)b[y]=8;var S=new e(32);for(y=0;y<32;++y)S[y]=5;var T=M(b,9),A=M(S,5),w=function(V){for(var j=V[0],W=1;W<V.length;++W)V[W]>j&&(j=V[W]);return j},D=function(V,j,W){var te=j/8|0;return(V[te]|V[te+1]<<8)>>(7&j)&W},O=function(V,j){var W=j/8|0;return(V[W]|V[W+1]<<8|V[W+2]<<16)>>(7&j)},P=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],B=function(V,j,W){var te=new Error(j||P[V]);if(te.code=V,Error.captureStackTrace&&Error.captureStackTrace(te,B),!W)throw te;return te},I=function(V,j,W){var te=V.length;if(!te||W&&!W.l&&te<5)return j||new e(0);var H=!j||W,Q=!W||W.i;W||(W={}),j||(j=new e(3*te));var ne,re=function(nt){var wt=j.length;if(nt>wt){var St=new e(Math.max(2*wt,nt));St.set(j),j=St}},G=W.f||0,X=W.p||0,ie=W.b||0,se=W.l,ee=W.d,ue=W.m,pe=W.n,ve=8*te;do{if(!se){W.f=G=D(V,X,1);var _e=D(V,X+1,3);if(X+=3,!_e){var Xe=V[(ke=((ne=X)/8|0)+(7&ne&&1)+4)-4]|V[ke-3]<<8,qe=ke+Xe;if(qe>te){Q&&B(0);break}H&&re(ie+Xe),j.set(V.subarray(ke,qe),ie),W.b=ie+=Xe,W.p=X=8*qe;continue}if(_e==1)se=T,ee=A,ue=9,pe=5;else if(_e==2){var Be=D(V,X,31)+257,Se=D(V,X+10,15)+4,He=Be+D(V,X+5,31)+1;X+=14;for(var oe=new e(He),lt=new e(19),ze=0;ze<Se;++ze)lt[a[ze]]=D(V,X+3*ze,7);X+=3*Se;var Qe=w(lt),De=(1<<Qe)-1,st=M(lt,Qe);for(ze=0;ze<He;){var ke,$=st[D(V,X,De)];if(X+=15&$,(ke=$>>>4)<16)oe[ze++]=ke;else{var Y=0,fe=0;for(ke==16?(fe=3+D(V,X,3),X+=2,Y=oe[ze-1]):ke==17?(fe=3+D(V,X,7),X+=3):ke==18&&(fe=11+D(V,X,127),X+=7);fe--;)oe[ze++]=Y}}var Ee=oe.subarray(0,Be),Re=oe.subarray(Be);ue=w(Ee),pe=w(Re),se=M(Ee,ue),ee=M(Re,pe)}else B(1);if(X>ve){Q&&B(0);break}}H&&re(ie+131072);for(var Le=(1<<ue)-1,Fe=(1<<pe)-1,et=X;;et=X){var tt=(Y=se[O(V,X)&Le])>>>4;if((X+=15&Y)>ve){Q&&B(0);break}if(Y||B(2),tt<256)j[ie++]=tt;else{if(tt==256){et=X,se=null;break}var Ot=tt-254;if(tt>264){var at=r[ze=tt-257];Ot=D(V,X,(1<<at)-1)+u[ze],X+=at}var yt=ee[O(V,X)&Fe],gt=yt>>>4;if(yt||B(3),X+=15&yt,Re=p[gt],gt>3&&(at=s[gt],Re+=O(V,X)&(1<<at)-1,X+=at),X>ve){Q&&B(0);break}H&&re(ie+131072);for(var ht=ie+Ot;ie<ht;ie+=4)j[ie]=j[ie-Re],j[ie+1]=j[ie+1-Re],j[ie+2]=j[ie+2-Re],j[ie+3]=j[ie+3-Re];ie=ht}}W.l=se,W.p=et,W.b=ie,se&&(G=1,W.m=ue,W.d=ee,W.n=pe)}while(!G);return ie==j.length?j:(function(nt,wt,St){(St==null||St>nt.length)&&(St=nt.length);var Ht=new(nt instanceof t?t:nt instanceof i?i:e)(St-wt);return Ht.set(nt.subarray(wt,St)),Ht})(j,0,ie)},z=new e(0),k=typeof TextDecoder<"u"&&new TextDecoder;try{k.decode(z,{stream:!0})}catch{}return n.convert_streams=function(V){var j=new DataView(V),W=0;function te(){var Be=j.getUint16(W);return W+=2,Be}function H(){var Be=j.getUint32(W);return W+=4,Be}function Q(Be){Xe.setUint16(qe,Be),qe+=2}function ne(Be){Xe.setUint32(qe,Be),qe+=4}for(var re={signature:H(),flavor:H(),length:H(),numTables:te(),reserved:te(),totalSfntSize:H(),majorVersion:te(),minorVersion:te(),metaOffset:H(),metaLength:H(),metaOrigLength:H(),privOffset:H(),privLength:H()},G=0;Math.pow(2,G)<=re.numTables;)G++;G--;for(var X=16*Math.pow(2,G),ie=16*re.numTables-X,se=12,ee=[],ue=0;ue<re.numTables;ue++)ee.push({tag:H(),offset:H(),compLength:H(),origLength:H(),origChecksum:H()}),se+=16;var pe,ve=new Uint8Array(12+16*ee.length+ee.reduce((function(Be,Se){return Be+Se.origLength+4}),0)),_e=ve.buffer,Xe=new DataView(_e),qe=0;return ne(re.flavor),Q(re.numTables),Q(X),Q(G),Q(ie),ee.forEach((function(Be){ne(Be.tag),ne(Be.origChecksum),ne(se),ne(Be.origLength),Be.outOffset=se,(se+=Be.origLength)%4!=0&&(se+=4-se%4)})),ee.forEach((function(Be){var Se,He=V.slice(Be.offset,Be.offset+Be.compLength);if(Be.compLength!=Be.origLength){var oe=new Uint8Array(Be.origLength);Se=new Uint8Array(He,2),I(Se,oe)}else oe=new Uint8Array(He);ve.set(oe,Be.outOffset);var lt=0;(se=Be.outOffset+Be.origLength)%4!=0&&(lt=4-se%4),ve.set(new Uint8Array(lt).buffer,Be.outOffset+Be.origLength),pe=se+lt})),_e.slice(0,pe)},Object.defineProperty(n,"__esModule",{value:!0}),n})({}).convert_streams}function pW(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,a=4,o=8,c=16,u=32;let h;function p(P){if(!h){const B={R:s,L:r,D:a,C:c,U:u,T:o};h=new Map;for(let I in i){let z=0;i[I].split(",").forEach(k=>{let[V,j]=k.split("+");V=parseInt(V,36),j=j?parseInt(j,36):0,h.set(z+=V,B[I]);for(let W=j;W--;)h.set(++z,B[I])})}}return h.get(P)||u}const g=1,y=2,x=3,M=4,b=[null,"isol","init","fina","medi"];function S(P){const B=new Uint8Array(P.length);let I=u,z=g,k=-1;for(let V=0;V<P.length;V++){const j=P.codePointAt(V);let W=p(j)|0,te=g;W&o||(I&(r|a|c)?W&(s|a|c)?(te=x,(z===g||z===x)&&B[k]++):W&(r|u)&&(z===y||z===M)&&B[k]--:I&(s|u)&&(z===y||z===M)&&B[k]--,z=B[V]=te,I=W,k=V,j>65535&&V++)}return B}function T(P,B){const I=[];for(let k=0;k<B.length;k++){const V=B.codePointAt(k);V>65535&&k++,I.push(n.U.codeToGlyph(P,V))}const z=P.GSUB;if(z){const{lookupList:k,featureList:V}=z;let j;const W=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,te=[];V.forEach(H=>{if(W.test(H.tag))for(let Q=0;Q<H.tab.length;Q++){if(te[H.tab[Q]])continue;te[H.tab[Q]]=!0;const ne=k[H.tab[Q]],re=/^(isol|init|fina|medi)$/.test(H.tag);re&&!j&&(j=S(B));for(let G=0;G<I.length;G++)(!j||!re||b[j[G]]===H.tag)&&n.U._applySubs(I,G,ne,k)}})}return I}function A(P,B){const I=new Int16Array(B.length*3);let z=0;for(;z<B.length;z++){const W=B[z];if(W===-1)continue;I[z*3+2]=P.hmtx.aWidth[W];const te=P.GPOS;if(te){const H=te.lookupList;for(let Q=0;Q<H.length;Q++){const ne=H[Q];for(let re=0;re<ne.tabs.length;re++){const G=ne.tabs[re];if(ne.ltype===1){if(n._lctf.coverageIndex(G.coverage,W)!==-1&&G.pos){j(G.pos,z);break}}else if(ne.ltype===2){let X=null,ie=k();if(ie!==-1){const se=n._lctf.coverageIndex(G.coverage,B[ie]);if(se!==-1){if(G.fmt===1){const ee=G.pairsets[se];for(let ue=0;ue<ee.length;ue++)ee[ue].gid2===W&&(X=ee[ue])}else if(G.fmt===2){const ee=n.U._getGlyphClass(B[ie],G.classDef1),ue=n.U._getGlyphClass(W,G.classDef2);X=G.matrix[ee][ue]}if(X){X.val1&&j(X.val1,ie),X.val2&&j(X.val2,z);break}}}}else if(ne.ltype===4){const X=n._lctf.coverageIndex(G.markCoverage,W);if(X!==-1){const ie=k(V),se=ie===-1?-1:n._lctf.coverageIndex(G.baseCoverage,B[ie]);if(se!==-1){const ee=G.markArray[X],ue=G.baseArray[se][ee.markClass];I[z*3]=ue.x-ee.x+I[ie*3]-I[ie*3+2],I[z*3+1]=ue.y-ee.y+I[ie*3+1];break}}}else if(ne.ltype===6){const X=n._lctf.coverageIndex(G.mark1Coverage,W);if(X!==-1){const ie=k();if(ie!==-1){const se=B[ie];if(w(P,se)===3){const ee=n._lctf.coverageIndex(G.mark2Coverage,se);if(ee!==-1){const ue=G.mark1Array[X],pe=G.mark2Array[ee][ue.markClass];I[z*3]=pe.x-ue.x+I[ie*3]-I[ie*3+2],I[z*3+1]=pe.y-ue.y+I[ie*3+1];break}}}}}}}}else if(P.kern&&!P.cff){const H=k();if(H!==-1){const Q=P.kern.glyph1.indexOf(B[H]);if(Q!==-1){const ne=P.kern.rval[Q].glyph2.indexOf(W);ne!==-1&&(I[H*3+2]+=P.kern.rval[Q].vals[ne])}}}}return I;function k(W){for(let te=z-1;te>=0;te--)if(B[te]!==-1&&(!W||W(B[te])))return te;return-1}function V(W){return w(P,W)===1}function j(W,te){for(let H=0;H<3;H++)I[te*3+H]+=W[H]||0}}function w(P,B){const I=P.GDEF&&P.GDEF.glyphClassDef;return I?n.U._getGlyphClass(B,I):0}function D(...P){for(let B=0;B<P.length;B++)if(typeof P[B]=="number")return P[B]}function O(P){const B=Object.create(null),I=P["OS/2"],z=P.hhea,k=P.head.unitsPerEm,V=D(I&&I.sTypoAscender,z&&z.ascender,k),j={unitsPerEm:k,ascender:V,descender:D(I&&I.sTypoDescender,z&&z.descender,0),capHeight:D(I&&I.sCapHeight,V),xHeight:D(I&&I.sxHeight,V),lineGap:D(I&&I.sTypoLineGap,z&&z.lineGap),supportsCodePoint(W){return n.U.codeToGlyph(P,W)>0},forEachGlyph(W,te,H,Q){let ne=0;const re=1/j.unitsPerEm*te,G=T(P,W);let X=0;const ie=A(P,G);return G.forEach((se,ee)=>{if(se!==-1){let ue=B[se];if(!ue){const{cmds:pe,crds:ve}=n.U.glyphToPath(P,se);let _e="",Xe=0;for(let oe=0,lt=pe.length;oe<lt;oe++){const ze=t[pe[oe]];_e+=pe[oe];for(let Qe=1;Qe<=ze;Qe++)_e+=(Qe>1?",":"")+ve[Xe++]}let qe,Be,Se,He;if(ve.length){qe=Be=1/0,Se=He=-1/0;for(let oe=0,lt=ve.length;oe<lt;oe+=2){let ze=ve[oe],Qe=ve[oe+1];ze<qe&&(qe=ze),Qe<Be&&(Be=Qe),ze>Se&&(Se=ze),Qe>He&&(He=Qe)}}else qe=Se=Be=He=0;ue=B[se]={index:se,advanceWidth:P.hmtx.aWidth[se],xMin:qe,yMin:Be,xMax:Se,yMax:He,path:_e}}Q.call(null,ue,ne+ie[ee*3]*re,ie[ee*3+1]*re,X),ne+=ie[ee*3+2]*re,H&&(ne+=H*te)}X+=W.codePointAt(X)>65535?2:1}),ne}};return j}return function(B){const I=new Uint8Array(B,0,4),z=n._bin.readASCII(I,0,4);if(z==="wOFF")B=e(B);else if(z==="wOF2")throw new Error("woff2 fonts not supported");return O(n.parse(B)[0])}}const mW=Ag({name:"Typr Font Parser",dependencies:[hW,dW,pW],init(n,e,t){const i=n(),r=e();return t(i,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function gW(){return(function(n){var e=function(){this.buckets=new Map};e.prototype.add=function(A){var w=A>>5;this.buckets.set(w,(this.buckets.get(w)||0)|1<<(31&A))},e.prototype.has=function(A){var w=this.buckets.get(A>>5);return w!==void 0&&(w&1<<(31&A))!=0},e.prototype.serialize=function(){var A=[];return this.buckets.forEach((function(w,D){A.push((+D).toString(36)+":"+w.toString(36))})),A.join(",")},e.prototype.deserialize=function(A){var w=this;this.buckets.clear(),A.split(",").forEach((function(D){var O=D.split(":");w.buckets.set(parseInt(O[0],36),parseInt(O[1],36))}))};var t=Math.pow(2,8),i=t-1,r=~i;function s(A){var w=(function(O){return O&r})(A).toString(16),D=(function(O){return(O&r)+t-1})(A).toString(16);return"codepoint-index/plane"+(A>>16)+"/"+w+"-"+D+".json"}function a(A,w){var D=A&i,O=w.codePointAt(D/6|0);return((O=(O||48)-48)&1<<D%6)!=0}function o(A,w){var D;(D=A,D.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(O){return O.split("-").map((function(P){return parseInt(P.trim(),16)}))}))).forEach((function(O){var P=O[0],B=O[1];B===void 0&&(B=P),w(P,B)}))}function c(A,w){o(A,(function(D,O){for(var P=D;P<=O;P++)w(P)}))}var u={},h={},p=new WeakMap,g="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function y(A){var w=p.get(A);return w||(w=new e,c(A.ranges,(function(D){return w.add(D)})),p.set(A,w)),w}var x,M=new Map;function b(A,w,D){return A[w]?w:A[D]?D:(function(O){for(var P in O)return P})(A)}function S(A,w){var D=w;if(!A.includes(D)){D=1/0;for(var O=0;O<A.length;O++)Math.abs(A[O]-w)<Math.abs(D-w)&&(D=A[O])}return D}function T(A){return x||(x=new Set,c("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(w){x.add(w)}))),x.has(A)}return n.CodePointSet=e,n.clearCache=function(){u={},h={}},n.getFontsForString=function(A,w){w===void 0&&(w={});var D,O=w.lang;O===void 0&&(O=new RegExp("\\p{Script=Hangul}","u").test(D=A)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(D)?"ja":"en");var P=w.category;P===void 0&&(P="sans-serif");var B=w.style;B===void 0&&(B="normal");var I=w.weight;I===void 0&&(I=400);var z=(w.dataUrl||g).replace(/\/$/g,""),k=new Map,V=new Uint8Array(A.length),j={},W={},te=new Array(A.length),H=new Map,Q=!1;function ne(X){var ie=M.get(X);return ie||(ie=fetch(z+"/"+X).then((function(se){if(!se.ok)throw new Error(se.statusText);return se.json().then((function(ee){if(!Array.isArray(ee)||ee[0]!==1)throw new Error("Incorrect schema version; need 1, got "+ee[0]);return ee[1]}))})).catch((function(se){if(z!==g)return Q||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+z+'", trying default CDN. '+se.message),Q=!0),z=g,M.delete(X),ne(X);throw se})),M.set(X,ie)),ie}for(var re=function(X){var ie=A.codePointAt(X),se=s(ie);te[X]=se,u[se]||H.has(se)||H.set(se,ne(se).then((function(ee){u[se]=ee}))),ie>65535&&(X++,G=X)},G=0;G<A.length;G++)re(G);return Promise.all(H.values()).then((function(){H.clear();for(var X=function(se){var ee=A.codePointAt(se),ue=null,pe=u[te[se]],ve=void 0;for(var _e in pe){var Xe=W[_e];if(Xe===void 0&&(Xe=W[_e]=new RegExp(_e).test(O||"en")),Xe){for(var qe in ve=_e,pe[_e])if(a(ee,pe[_e][qe])){ue=qe;break}break}}if(!ue){e:for(var Be in pe)if(Be!==ve){for(var Se in pe[Be])if(a(ee,pe[Be][Se])){ue=Se;break e}}}ue||(console.debug("No font coverage for U+"+ee.toString(16)),ue="latin"),te[se]=ue,h[ue]||H.has(ue)||H.set(ue,ne("font-meta/"+ue+".json").then((function(He){h[ue]=He}))),ee>65535&&(se++,ie=se)},ie=0;ie<A.length;ie++)X(ie);return Promise.all(H.values())})).then((function(){for(var X,ie=null,se=0;se<A.length;se++){var ee=A.codePointAt(se);if(ie&&(T(ee)||y(ie).has(ee)))V[se]=V[se-1];else{ie=h[te[se]];var ue=j[ie.id];if(!ue){var pe=ie.typeforms,ve=b(pe,P,"sans-serif"),_e=b(pe[ve],B,"normal"),Xe=S((X=pe[ve])===null||X===void 0?void 0:X[_e],I);ue=j[ie.id]=z+"/font-files/"+ie.id+"/"+ve+"."+_e+"."+Xe+".woff"}var qe=k.get(ue);qe==null&&(qe=k.size,k.set(ue,qe)),V[se]=qe}ee>65535&&(se++,V[se]=V[se-1])}return{fontUrls:Array.from(k.keys()),chars:V}}))},Object.defineProperty(n,"__esModule",{value:!0}),n})({})}function vW(n,e){const t=Object.create(null),i=Object.create(null);function r(a,o){const c=u=>{console.error(`Failure loading font ${a}`,u)};try{const u=new XMLHttpRequest;u.open("get",a,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status>=400)c(new Error(u.statusText));else if(u.status>0)try{const h=n(u.response);h.src=a,o(h)}catch(h){c(h)}},u.onerror=c,u.send()}catch(u){c(u)}}function s(a,o){let c=t[a];c?o(c):i[a]?i[a].push(o):(i[a]=[o],r(a,u=>{u.src=a,t[a]=u,i[a].forEach(h=>h(u)),delete i[a]}))}return function(a,o,{lang:c,fonts:u=[],style:h="normal",weight:p="normal",unicodeFontsURL:g}={}){const y=new Uint8Array(a.length),x=[];a.length||T();const M=new Map,b=[];if(h!=="italic"&&(h="normal"),typeof p!="number"&&(p=p==="bold"?700:400),u&&!Array.isArray(u)&&(u=[u]),u=u.slice().filter(w=>!w.lang||w.lang.test(c)).reverse(),u.length){let P=0;(function B(I=0){for(let z=I,k=a.length;z<k;z++){const V=a.codePointAt(z);if(P===1&&x[y[z-1]].supportsCodePoint(V)||z>0&&/\s/.test(a[z]))y[z]=y[z-1],P===2&&(b[b.length-1][1]=z);else for(let j=y[z],W=u.length;j<=W;j++)if(j===W){const te=P===2?b[b.length-1]:b[b.length]=[z,z];te[1]=z,P=2}else{y[z]=j;const{src:te,unicodeRange:H}=u[j];if(!H||A(V,H)){const Q=t[te];if(!Q){s(te,()=>{B(z)});return}if(Q.supportsCodePoint(V)){let ne=M.get(Q);typeof ne!="number"&&(ne=x.length,x.push(Q),M.set(Q,ne)),y[z]=ne,P=1;break}}}V>65535&&z+1<k&&(y[z+1]=y[z],z++,P===2&&(b[b.length-1][1]=z))}S()})()}else b.push([0,a.length-1]),S();function S(){if(b.length){const w=b.map(D=>a.substring(D[0],D[1]+1)).join(`
`);e.getFontsForString(w,{lang:c||void 0,style:h,weight:p,dataUrl:g}).then(({fontUrls:D,chars:O})=>{const P=x.length;let B=0;b.forEach(z=>{for(let k=0,V=z[1]-z[0];k<=V;k++)y[z[0]+k]=O[B++]+P;B++});let I=0;D.forEach((z,k)=>{s(z,V=>{x[k+P]=V,++I===D.length&&T()})})})}else T()}function T(){o({chars:y,fonts:x})}function A(w,D){for(let O=0;O<D.length;O++){const[P,B=P]=D[O];if(P<=w&&w<=B)return!0}return!1}}}const yW=Ag({name:"FontResolver",dependencies:[vW,mW,gW],init(n,e,t){return n(e,t())}});function _W(n,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",s=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:x,lang:M,fonts:b,style:S,weight:T,preResolvedFonts:A,unicodeFontsURL:w},D){const O=({chars:P,fonts:B})=>{let I,z;const k=[];for(let V=0;V<P.length;V++)P[V]!==z?(z=P[V],k.push(I={start:V,end:V,fontObj:B[P[V]]})):I.end=V;D(k)};A?O(A):n(x,O,{lang:M,fonts:b,style:S,weight:T,unicodeFontsURL:w})}function o({text:x="",font:M,lang:b,sdfGlyphSize:S=64,fontSize:T=400,fontWeight:A=1,fontStyle:w="normal",letterSpacing:D=0,lineHeight:O="normal",maxWidth:P=1/0,direction:B,textAlign:I="left",textIndent:z=0,whiteSpace:k="normal",overflowWrap:V="normal",anchorX:j=0,anchorY:W=0,metricsOnly:te=!1,unicodeFontsURL:H,preResolvedFonts:Q=null,includeCaretPositions:ne=!1,chunkedBoundsSize:re=8192,colorRanges:G=null},X){const ie=p(),se={fontLoad:0,typesetting:0};x.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),x=x.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),T=+T,D=+D,P=+P,O=O||"normal",z=+z,a({text:x,lang:b,style:w,weight:A,fonts:typeof M=="string"?[{src:M}]:M,unicodeFontsURL:H,preResolvedFonts:Q},ee=>{se.fontLoad=p()-ie;const ue=isFinite(P);let pe=null,ve=null,_e=null,Xe=null,qe=null,Be=null,Se=null,He=null,oe=0,lt=0,ze=k!=="nowrap";const Qe=new Map,De=p();let st=z,ke=0,$=new g;const Y=[$];ee.forEach(Fe=>{const{fontObj:et}=Fe,{ascender:tt,descender:Ot,unitsPerEm:at,lineGap:yt,capHeight:gt,xHeight:ht}=et;let nt=Qe.get(et);if(!nt){const Oe=T/at,Pe=O==="normal"?(tt-Ot+yt)*Oe:O*T,ct=(Pe-(tt-Ot)*Oe)/2,xt=Math.min(Pe,(tt-Ot)*Oe),je=(tt+Ot)/2*Oe+xt/2;nt={index:Qe.size,src:et.src,fontObj:et,fontSizeMult:Oe,unitsPerEm:at,ascender:tt*Oe,descender:Ot*Oe,capHeight:gt*Oe,xHeight:ht*Oe,lineHeight:Pe,baseline:-ct-tt*Oe,caretTop:je,caretBottom:je-xt},Qe.set(et,nt)}const{fontSizeMult:wt}=nt,St=x.slice(Fe.start,Fe.end+1);let Ht,Te;et.forEachGlyph(St,T,D,(Oe,Pe,ct,xt)=>{Pe+=ke,xt+=Fe.start,Ht=Pe,Te=Oe;const je=x.charAt(xt),Ct=Oe.advanceWidth*wt,zt=$.count;let Dt;if("isEmpty"in Oe||(Oe.isWhitespace=!!je&&new RegExp(r).test(je),Oe.canBreakAfter=!!je&&s.test(je),Oe.isEmpty=Oe.xMin===Oe.xMax||Oe.yMin===Oe.yMax||i.test(je)),!Oe.isWhitespace&&!Oe.isEmpty&&lt++,ze&&ue&&!Oe.isWhitespace&&Pe+Ct+st>P&&zt){if($.glyphAt(zt-1).glyphObj.canBreakAfter)Dt=new g,st=-Pe;else for(let tn=zt;tn--;)if(tn===0&&V==="break-word"){Dt=new g,st=-Pe;break}else if($.glyphAt(tn).glyphObj.canBreakAfter){Dt=$.splitAt(tn+1);const Jt=Dt.glyphAt(0).x;st-=Jt;for(let un=Dt.count;un--;)Dt.glyphAt(un).x-=Jt;break}Dt&&($.isSoftWrapped=!0,$=Dt,Y.push($),oe=P)}let Gt=$.glyphAt($.count);Gt.glyphObj=Oe,Gt.x=Pe+st,Gt.y=ct,Gt.width=Ct,Gt.charIndex=xt,Gt.fontData=nt,je===`
`&&($=new g,Y.push($),st=-(Pe+Ct+D*T)+z)}),ke=Ht+Te.advanceWidth*wt+D*T});let fe=0;Y.forEach(Fe=>{let et=!0;for(let tt=Fe.count;tt--;){const Ot=Fe.glyphAt(tt);et&&!Ot.glyphObj.isWhitespace&&(Fe.width=Ot.x+Ot.width,Fe.width>oe&&(oe=Fe.width),et=!1);let{lineHeight:at,capHeight:yt,xHeight:gt,baseline:ht}=Ot.fontData;at>Fe.lineHeight&&(Fe.lineHeight=at);const nt=ht-Fe.baseline;nt<0&&(Fe.baseline+=nt,Fe.cap+=nt,Fe.ex+=nt),Fe.cap=Math.max(Fe.cap,Fe.baseline+yt),Fe.ex=Math.max(Fe.ex,Fe.baseline+gt)}Fe.baseline-=fe,Fe.cap-=fe,Fe.ex-=fe,fe+=Fe.lineHeight});let Ee=0,Re=0;if(j&&(typeof j=="number"?Ee=-j:typeof j=="string"&&(Ee=-oe*(j==="left"?0:j==="center"?.5:j==="right"?1:u(j)))),W&&(typeof W=="number"?Re=-W:typeof W=="string"&&(Re=W==="top"?0:W==="top-baseline"?-Y[0].baseline:W==="top-cap"?-Y[0].cap:W==="top-ex"?-Y[0].ex:W==="middle"?fe/2:W==="bottom"?fe:W==="bottom-baseline"?-Y[Y.length-1].baseline:u(W)*fe)),!te){const Fe=e.getEmbeddingLevels(x,B);pe=new Uint16Array(lt),ve=new Uint8Array(lt),_e=new Float32Array(lt*2),Xe={},Se=[1/0,1/0,-1/0,-1/0],He=[],ne&&(Be=new Float32Array(x.length*4)),G&&(qe=new Uint8Array(lt*3));let et=0,tt=-1,Ot=-1,at,yt;if(Y.forEach((gt,ht)=>{let{count:nt,width:wt}=gt;if(nt>0){let St=0;for(let xt=nt;xt--&&gt.glyphAt(xt).glyphObj.isWhitespace;)St++;let Ht=0,Te=0;if(I==="center")Ht=(oe-wt)/2;else if(I==="right")Ht=oe-wt;else if(I==="justify"&&gt.isSoftWrapped){let xt=0;for(let je=nt-St;je--;)gt.glyphAt(je).glyphObj.isWhitespace&&xt++;Te=(oe-wt)/xt}if(Te||Ht){let xt=0;for(let je=0;je<nt;je++){let Ct=gt.glyphAt(je);const zt=Ct.glyphObj;Ct.x+=Ht+xt,Te!==0&&zt.isWhitespace&&je<nt-St&&(xt+=Te,Ct.width+=Te)}}const Oe=e.getReorderSegments(x,Fe,gt.glyphAt(0).charIndex,gt.glyphAt(gt.count-1).charIndex);for(let xt=0;xt<Oe.length;xt++){const[je,Ct]=Oe[xt];let zt=1/0,Dt=-1/0;for(let Gt=0;Gt<nt;Gt++)if(gt.glyphAt(Gt).charIndex>=je){let tn=Gt,Jt=Gt;for(;Jt<nt;Jt++){let un=gt.glyphAt(Jt);if(un.charIndex>Ct)break;Jt<nt-St&&(zt=Math.min(zt,un.x),Dt=Math.max(Dt,un.x+un.width))}for(let un=tn;un<Jt;un++){const mn=gt.glyphAt(un);mn.x=Dt-(mn.x+mn.width-zt)}break}}let Pe;const ct=xt=>Pe=xt;for(let xt=0;xt<nt;xt++){const je=gt.glyphAt(xt);Pe=je.glyphObj;const Ct=Pe.index,zt=Fe.levels[je.charIndex]&1;if(zt){const Dt=e.getMirroredCharacter(x[je.charIndex]);Dt&&je.fontData.fontObj.forEachGlyph(Dt,0,0,ct)}if(ne){const{charIndex:Dt,fontData:Gt}=je,tn=je.x+Ee,Jt=je.x+je.width+Ee;Be[Dt*4]=zt?Jt:tn,Be[Dt*4+1]=zt?tn:Jt,Be[Dt*4+2]=gt.baseline+Gt.caretBottom+Re,Be[Dt*4+3]=gt.baseline+Gt.caretTop+Re;const un=Dt-tt;un>1&&h(Be,tt,un),tt=Dt}if(G){const{charIndex:Dt}=je;for(;Dt>Ot;)Ot++,G.hasOwnProperty(Ot)&&(yt=G[Ot])}if(!Pe.isWhitespace&&!Pe.isEmpty){const Dt=et++,{fontSizeMult:Gt,src:tn,index:Jt}=je.fontData,un=Xe[tn]||(Xe[tn]={});un[Ct]||(un[Ct]={path:Pe.path,pathBounds:[Pe.xMin,Pe.yMin,Pe.xMax,Pe.yMax]});const mn=je.x+Ee,bn=je.y+gt.baseline+Re;_e[Dt*2]=mn,_e[Dt*2+1]=bn;const hi=mn+Pe.xMin*Gt,gi=bn+Pe.yMin*Gt,Mi=mn+Pe.xMax*Gt,Xt=bn+Pe.yMax*Gt;hi<Se[0]&&(Se[0]=hi),gi<Se[1]&&(Se[1]=gi),Mi>Se[2]&&(Se[2]=Mi),Xt>Se[3]&&(Se[3]=Xt),Dt%re===0&&(at={start:Dt,end:Dt,rect:[1/0,1/0,-1/0,-1/0]},He.push(at)),at.end++;const ri=at.rect;if(hi<ri[0]&&(ri[0]=hi),gi<ri[1]&&(ri[1]=gi),Mi>ri[2]&&(ri[2]=Mi),Xt>ri[3]&&(ri[3]=Xt),pe[Dt]=Ct,ve[Dt]=Jt,G){const In=Dt*3;qe[In]=yt>>16&255,qe[In+1]=yt>>8&255,qe[In+2]=yt&255}}}}}),Be){const gt=x.length-tt;gt>1&&h(Be,tt,gt)}}const Le=[];Qe.forEach(({index:Fe,src:et,unitsPerEm:tt,ascender:Ot,descender:at,lineHeight:yt,capHeight:gt,xHeight:ht})=>{Le[Fe]={src:et,unitsPerEm:tt,ascender:Ot,descender:at,lineHeight:yt,capHeight:gt,xHeight:ht}}),se.typesetting=p()-De,X({glyphIds:pe,glyphFontIndices:ve,glyphPositions:_e,glyphData:Xe,fontData:Le,caretPositions:Be,glyphColors:qe,chunkedBounds:He,fontSize:T,topBaseline:Re+Y[0].baseline,blockBounds:[Ee,Re-fe,Ee+oe,Re],visibleBounds:Se,timings:se})})}function c(x,M){o({...x,metricsOnly:!0},b=>{const[S,T,A,w]=b.blockBounds;M({width:A-S,height:w-T})})}function u(x){let M=x.match(/^([\d.]+)%$/),b=M?parseFloat(M[1]):NaN;return isNaN(b)?0:b/100}function h(x,M,b){const S=x[M*4],T=x[M*4+1],A=x[M*4+2],w=x[M*4+3],D=(T-S)/b;for(let O=0;O<b;O++){const P=(M+O)*4;x[P]=S+D*O,x[P+1]=S+D*(O+1),x[P+2]=A,x[P+3]=w}}function p(){return(self.performance||Date).now()}function g(){this.data=[]}const y=["glyphObj","x","y","width","charIndex","fontData"];return g.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/y.length)},glyphAt(x){let M=g.flyweight;return M.data=this.data,M.index=x,M},splitAt(x){let M=new g;return M.data=this.data.splice(x*y.length),M}},g.flyweight=y.reduce((x,M,b,S)=>(Object.defineProperty(x,M,{get(){return this.data[this.index*y.length+b]},set(T){this.data[this.index*y.length+b]=T}}),x),{data:null,index:0}),{typeset:o,measure:c}}const Hd=()=>(self.performance||Date).now(),oE=NN();let q4;function xW(n,e,t,i,r,s,a,o,c,u,h=!0){return h?SW(n,e,t,i,r,s,a,o,c,u).then(null,p=>(q4||(console.warn("WebGL SDF generation failed, falling back to JS",p),q4=!0),Z4(n,e,t,i,r,s,a,o,c,u))):Z4(n,e,t,i,r,s,a,o,c,u)}const $x=[],bW=5;let tA=0;function IN(){const n=Hd();for(;$x.length&&Hd()-n<bW;)$x.shift()();tA=$x.length?setTimeout(IN,0):0}const SW=(...n)=>new Promise((e,t)=>{$x.push(()=>{const i=Hd();try{oE.webgl.generateIntoCanvas(...n),e({timing:Hd()-i})}catch(r){t(r)}}),tA||(tA=setTimeout(IN,0))}),EW=4,MW=2e3,Y4={};let TW=0;function Z4(n,e,t,i,r,s,a,o,c,u){const h="TroikaTextSDFGenerator_JS_"+TW++%EW;let p=Y4[h];return p||(p=Y4[h]={workerModule:Ag({name:h,workerId:h,dependencies:[NN,Hd],init(g,y){const x=g().javascript.generate;return function(...M){const b=y();return{textureData:x(...M),timing:y()-b}}},getTransferables(g){return[g.textureData.buffer]}}),requests:0,idleTimer:null}),p.requests++,clearTimeout(p.idleTimer),p.workerModule(n,e,t,i,r,s).then(({textureData:g,timing:y})=>{const x=Hd(),M=new Uint8Array(g.length*4);for(let b=0;b<g.length;b++)M[b*4+u]=g[b];return oE.webglUtils.renderImageData(a,M,o,c,n,e,1<<3-u),y+=Hd()-x,--p.requests===0&&(p.idleTimer=setTimeout(()=>{nW(h)},MW)),{timing:y}})}function AW(n){n._warm||(oE.webgl.isSupported(n),n._warm=!0)}const wW=oE.webglUtils.resizeWebGLCanvasWithoutClearing,Cv={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},CW=new Rt;function Tm(){return(self.performance||Date).now()}const K4=Object.create(null);function BN(n,e){n=DW({},n);const t=Tm(),i=[];if(n.font&&i.push({label:"user",src:UW(n.font)}),n.font=i,n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||Cv.sdfGlyphSize,n.unicodeFontsURL=n.unicodeFontsURL||Cv.unicodeFontsURL,n.colorRanges!=null){let g={};for(let y in n.colorRanges)if(n.colorRanges.hasOwnProperty(y)){let x=n.colorRanges[y];typeof x!="number"&&(x=CW.set(x).getHex()),g[y]=x}n.colorRanges=g}Object.freeze(n);const{textureWidth:r,sdfExponent:s}=Cv,{sdfGlyphSize:a}=n,o=r/a*4;let c=K4[a];if(!c){const g=document.createElement("canvas");g.width=r,g.height=a*256/o,c=K4[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:g,sdfTexture:new mi(g,void 0,void 0,void 0,Zn,Zn),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,RW(c)}const{sdfTexture:u,sdfCanvas:h}=c;HN(n).then(g=>{const{glyphIds:y,glyphFontIndices:x,fontData:M,glyphPositions:b,fontSize:S,timings:T}=g,A=[],w=new Float32Array(y.length*4);let D=0,O=0;const P=Tm(),B=M.map(j=>{let W=c.glyphsByFont.get(j.src);return W||c.glyphsByFont.set(j.src,W=new Map),W});y.forEach((j,W)=>{const te=x[W],{src:H,unitsPerEm:Q}=M[te];let ne=B[te].get(j);if(!ne){const{path:se,pathBounds:ee}=g.glyphData[H][j],ue=Math.max(ee[2]-ee[0],ee[3]-ee[1])/a*(Cv.sdfMargin*a+.5),pe=c.glyphCount++,ve=[ee[0]-ue,ee[1]-ue,ee[2]+ue,ee[3]+ue];B[te].set(j,ne={path:se,atlasIndex:pe,sdfViewBox:ve}),A.push(ne)}const{sdfViewBox:re}=ne,G=b[O++],X=b[O++],ie=S/Q;w[D++]=G+re[0]*ie,w[D++]=X+re[1]*ie,w[D++]=G+re[2]*ie,w[D++]=X+re[3]*ie,y[W]=ne.atlasIndex}),T.quads=(T.quads||0)+(Tm()-P);const I=Tm();T.sdf={};const z=h.height,k=Math.ceil(c.glyphCount/o),V=Math.pow(2,Math.ceil(Math.log2(k*a)));V>z&&(console.info(`Increasing SDF texture size ${z}->${V}`),wW(h,r,V),u.dispose()),Promise.all(A.map(j=>zN(j,c,n.gpuAccelerateSDF).then(({timing:W})=>{T.sdf[j.atlasIndex]=W}))).then(()=>{A.length&&!c.contextLost&&(FN(c),u.needsUpdate=!0),T.sdfTotal=Tm()-I,T.total=Tm()-t,e(Object.freeze({parameters:n,sdfTexture:u,sdfGlyphSize:a,sdfExponent:s,glyphBounds:w,glyphAtlasIndices:y,glyphColors:g.glyphColors,caretPositions:g.caretPositions,chunkedBounds:g.chunkedBounds,ascender:g.ascender,descender:g.descender,lineHeight:g.lineHeight,capHeight:g.capHeight,xHeight:g.xHeight,topBaseline:g.topBaseline,blockBounds:g.blockBounds,visibleBounds:g.visibleBounds,timings:g.timings}))})}),Promise.resolve().then(()=>{c.contextLost||AW(h)})}function zN({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},a){if(s)return Promise.resolve({timing:-1});const{textureWidth:o,sdfExponent:c}=Cv,u=Math.max(t[2]-t[0],t[3]-t[1]),h=Math.floor(e/4),p=h%(o/i)*i,g=Math.floor(h/(o/i))*i,y=e%4;return xW(i,i,n,t,u,c,r,p,g,y,a)}function RW(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(zN(s,n,!0))})}),Promise.all(i).then(()=>{FN(n),n.sdfTexture.needsUpdate=!0})})}function OW({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;BN({font:n,sdfGlyphSize:t,text:r},i)}function DW(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let lx;function UW(n){return lx||(lx=typeof document>"u"?{}:document.createElement("a")),lx.href=n,lx.href}function FN(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,s=n.sdfCanvas.getContext("webgl");let a=t.image.data;(!a||a.length!==i*r*4)&&(a=new Uint8Array(i*r*4),t.image={width:i,height:r,data:a},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,a)}}const LW=Ag({name:"Typesetter",dependencies:[_W,yW,rW],init(n,e,t){return n(e,t())}}),HN=Ag({name:"Typesetter",dependencies:[LW],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[];for(let t in n)n[t]&&n[t].buffer&&e.push(n[t].buffer);return e}});HN.onMainThread;const $4={};function NW(n){let e=$4[n];return e||(e=$4[n]=new Xl(1,1,n,n).translate(.5,.5,0)),e}const PW="aTroikaGlyphBounds",Q4="aTroikaGlyphIndex",IW="aTroikaGlyphColor";class BW extends $S{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new gr,this.boundingBox=new Kn}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=NW(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,s){this.updateAttributeData(PW,e,4),this.updateAttributeData(Q4,t,1),this.updateAttributeData(IW,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:s,min:a,max:o,sin:c,cos:u}=Math,h=r/2,p=r*2,g=Math.abs(t),y=e[0]/g,x=e[2]/g,M=s((y+h)/p)!==s((x+h)/p)?-g:a(c(y)*g,c(x)*g),b=s((y-h)/p)!==s((x-h)/p)?g:o(c(y)*g,c(x)*g),S=s((y+r)/p)!==s((x+r)/p)?g*2:o(g-u(y)*g,g-u(x)*g);i.min.set(M,e[1],t<0?-S:0),i.max.set(b,e[3],t<0?0:S)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(Q4).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,i){const r=this.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(this.setAttribute(e,new ah(t,i)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(e)}}const zW=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,FW=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,HW=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,kW=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function GW(n){const e=eA(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new ft},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Ln(0,0,0,0)},uTroikaClipRect:{value:new Ln(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new ft},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Rt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Mn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:zW,vertexTransform:FW,fragmentDefs:HW,fragmentColorTransform:kW,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(PN,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const Kw=new pa({color:16777215,side:mr,transparent:!0}),J4=8421504,eO=new Ut,cx=new J,yM=new J,sv=[],VW=new J,_M="+x+y";function tO(n){return Array.isArray(n)?n[0]:n}let kN=()=>{const n=new fi(new Xl(1,1),Kw);return kN=()=>n,n},GN=()=>{const n=new fi(new Xl(1,1,32,1),Kw);return GN=()=>n,n};const jW={type:"syncstart"},WW={type:"synccomplete"},VN=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],XW=VN.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let jN=class extends fi{constructor(){const e=new BW;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=J4,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=_M,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(jW),BN({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(WW),e&&e()})))}onBeforeRender(e,t,i,r,s,a){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return GW(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Kw.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.hasOutline()){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return tO(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return tO(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:o,blockBounds:c}=r;i.uTroikaSDFTexture.value=o,i.uTroikaSDFTextureSize.value.set(o.image.width,o.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(c),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let u=0,h=0,p=0,g,y,x,M=0,b=0;if(t){let{outlineWidth:T,outlineOffsetX:A,outlineOffsetY:w,outlineBlur:D,outlineOpacity:O}=this;u=this._parsePercent(T)||0,h=Math.max(0,this._parsePercent(D)||0),g=O,M=this._parsePercent(A)||0,b=this._parsePercent(w)||0}else p=Math.max(0,this._parsePercent(this.strokeWidth)||0),p&&(x=this.strokeColor,i.uTroikaStrokeColor.value.set(x??J4),y=this.strokeOpacity,y==null&&(y=1)),g=this.fillOpacity;i.uTroikaEdgeOffset.value=u,i.uTroikaPositionOffset.value.set(M,b),i.uTroikaBlurRadius.value=h,i.uTroikaStrokeWidth.value=p,i.uTroikaStrokeOpacity.value=y,i.uTroikaFillOpacity.value=g??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let S=this.clipRect;if(S&&Array.isArray(S)&&S.length===4)i.uTroikaClipRect.value.fromArray(S);else{const T=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(c[0]-T,c[1]-T,c[2]+T,c[3]+T)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const o=e.hasOwnProperty("color")?e.color:e.color=new Rt;(s!==o._input||typeof s=="object")&&o.set(o._input=s)}let a=this.orientation||_M;if(a!==e._orientation){let o=i.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let c=a!==_M&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(c){let[,u,h,p,g]=c;cx.set(0,0,0)[h]=u==="-"?1:-1,yM.set(0,0,0)[g]=p==="-"?-1:1,eO.lookAt(VW,cx.cross(yM),yM),o.setFromMatrix4(eO)}else o.identity();e._orientation=a}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new ft){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new ft){return cx.copy(e),this.localPositionToTextCoords(this.worldToLocal(cx),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,a=r?GN():kN(),o=a.geometry,{position:c,uv:u}=o.attributes;for(let h=0;h<u.count;h++){let p=s[0]+u.getX(h)*(s[2]-s[0]);const g=s[1]+u.getY(h)*(s[3]-s[1]);let y=0;r&&(y=r-Math.cos(p/r)*r,p=Math.sin(p/r)*r),c.setXYZ(h,p,g,y)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,sv.length=0,a.raycast(e,sv);for(let h=0;h<sv.length;h++)sv[h].object=this,t.push(sv[h])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,XW.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};VN.forEach(n=>{const e="_private_"+n;Object.defineProperty(jN.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new Kn;new Rt;function qW(n,e,t,i){var r;return r=class extends ks{constructor(s){super({vertexShader:e,fragmentShader:t,...s});for(const a in n)this.uniforms[a]=new QS(n[a]),Object.defineProperty(this,a,{get(){return this.uniforms[a].value},set(o){this.uniforms[a].value=o}});this.uniforms=hg.clone(this.uniforms)}},r.key=np.generateUUID(),r}function WN(n,e,t){const i=on(y=>y.size),r=on(y=>y.viewport),s=typeof n=="number"?n:i.width*r.dpr,a=i.height*r.dpr,o=(typeof n=="number"?t:n)||{},{samples:c=0,depth:u,...h}=o,p=u??o.depthBuffer,g=L.useMemo(()=>{const y=new Wa(s,a,{minFilter:Zn,magFilter:Zn,type:Xr,...h});return p&&(y.depthTexture=new LS(s,a,Yi)),y.samples=c,y},[]);return L.useLayoutEffect(()=>{g.setSize(s,a),c&&(g.samples=c)},[c,g,s,a]),L.useEffect(()=>()=>g.dispose(),[]),g}const YW=n=>typeof n=="function",ZW=L.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,children:i,makeDefault:r,...s},a)=>{const o=on(({set:b})=>b),c=on(({camera:b})=>b),u=on(({size:b})=>b),h=L.useRef(null);L.useImperativeHandle(a,()=>h.current,[]);const p=L.useRef(null),g=WN(e);L.useLayoutEffect(()=>{s.manual||h.current.updateProjectionMatrix()},[u,s]),L.useLayoutEffect(()=>{h.current.updateProjectionMatrix()}),L.useLayoutEffect(()=>{if(r){const b=c;return o(()=>({camera:h.current})),()=>o(()=>({camera:b}))}},[h,r,o]);let y=0,x=null;const M=YW(i);return Yl(b=>{M&&(t===1/0||y<t)&&(p.current.visible=!1,b.gl.setRenderTarget(g),x=b.scene.background,n&&(b.scene.background=n),b.gl.render(b.scene,h.current),b.scene.background=x,b.gl.setRenderTarget(null),p.current.visible=!0,y++)}),L.createElement(L.Fragment,null,L.createElement("orthographicCamera",Gn({left:u.width/-2,right:u.width/2,top:u.height/2,bottom:u.height/-2,ref:h},s),!M&&i),L.createElement("group",{ref:p},M&&i(g.texture)))}),KW=n=>typeof n=="function",$W=L.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},a)=>{const o=on(({set:b})=>b),c=on(({camera:b})=>b),u=on(({size:b})=>b),h=L.useRef(null);L.useImperativeHandle(a,()=>h.current,[]);const p=L.useRef(null),g=WN(e);L.useLayoutEffect(()=>{s.manual||(h.current.aspect=u.width/u.height)},[u,s]),L.useLayoutEffect(()=>{h.current.updateProjectionMatrix()});let y=0,x=null;const M=KW(r);return Yl(b=>{M&&(t===1/0||y<t)&&(p.current.visible=!1,b.gl.setRenderTarget(g),x=b.scene.background,n&&(b.scene.background=n),b.gl.render(b.scene,h.current),b.scene.background=x,b.gl.setRenderTarget(null),p.current.visible=!0,y++)}),L.useLayoutEffect(()=>{if(i){const b=c;return o(()=>({camera:h.current})),()=>o(()=>({camera:b}))}},[h,i,o]),L.createElement(L.Fragment,null,L.createElement("perspectiveCamera",Gn({ref:h},s),!M&&r),L.createElement("group",{ref:p},M&&r(g.texture)))});/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const nr={LEFT:1,RIGHT:2,MIDDLE:4},Ke=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),Am={NONE:0,IN:1,OUT:-1};function vd(n){return n.isPerspectiveCamera}function Wf(n){return n.isOrthographicCamera}const Gf=Math.PI*2,nO=Math.PI/2,XN=1e-5,av=Math.PI/180;function zl(n,e,t){return Math.max(e,Math.min(t,n))}function Bi(n,e=XN){return Math.abs(n)<e}function yi(n,e,t=XN){return Bi(n-e,t)}function iO(n,e){return Math.round(n/e)*e}function ov(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function lv(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function ux(n,e,t,i,r=1/0,s){i=Math.max(1e-4,i);const a=2/i,o=a*s,c=1/(1+o+.48*o*o+.235*o*o*o);let u=n-e;const h=e,p=r*i;u=zl(u,-p,p),e=n-u;const g=(t.value+a*u)*s;t.value=(t.value-a*g)*c;let y=e+(u+g)*c;return h-n>0==y>h&&(y=h,t.value=(y-h)/s),y}function rO(n,e,t,i,r=1/0,s,a){i=Math.max(1e-4,i);const o=2/i,c=o*s,u=1/(1+c+.48*c*c+.235*c*c*c);let h=e.x,p=e.y,g=e.z,y=n.x-h,x=n.y-p,M=n.z-g;const b=h,S=p,T=g,A=r*i,w=A*A,D=y*y+x*x+M*M;if(D>w){const te=Math.sqrt(D);y=y/te*A,x=x/te*A,M=M/te*A}h=n.x-y,p=n.y-x,g=n.z-M;const O=(t.x+o*y)*s,P=(t.y+o*x)*s,B=(t.z+o*M)*s;t.x=(t.x-o*O)*u,t.y=(t.y-o*P)*u,t.z=(t.z-o*B)*u,a.x=h+(y+O)*u,a.y=p+(x+P)*u,a.z=g+(M+B)*u;const I=b-n.x,z=S-n.y,k=T-n.z,V=a.x-b,j=a.y-S,W=a.z-T;return I*V+z*j+k*W>0&&(a.x=b,a.y=S,a.z=T,t.x=(a.x-b)/s,t.y=(a.y-S)/s,t.z=(a.z-T)/s),a}function xM(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function bM(n,e){return Wf(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class QW{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e)}}}var SM;const JW="3.1.0",fx=1/8,eX=/Mac/.test((SM=globalThis?.navigator)===null||SM===void 0?void 0:SM.platform);let gn,sO,hx,EM,Ia,Pn,ui,wm,cv,Lc,Nc,yd,aO,oO,lo,Cm,Rm,lO,MM,cO,TM,AM,dx,tX=class nA extends QW{static install(e){gn=e.THREE,sO=Object.freeze(new gn.Vector3(0,0,0)),hx=Object.freeze(new gn.Vector3(0,1,0)),EM=Object.freeze(new gn.Vector3(0,0,1)),Ia=new gn.Vector2,Pn=new gn.Vector3,ui=new gn.Vector3,wm=new gn.Vector3,cv=new gn.Vector3,Lc=new gn.Vector3,Nc=new gn.Vector3,yd=new gn.Vector3,aO=new gn.Vector3,oO=new gn.Vector3,lo=new gn.Spherical,Cm=new gn.Spherical,Rm=new gn.Box3,lO=new gn.Box3,MM=new gn.Sphere,cO=new gn.Quaternion,TM=new gn.Quaternion,AM=new gn.Matrix4,dx=new gn.Raycaster}static get ACTION(){return Ke}set verticalDragToForward(e){console.warn("camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.")}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Ke.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Am.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new gn.Vector3,this._focalOffsetVelocity=new gn.Vector3,this._zoomVelocity={value:0},this._truckInternal=(S,T,A,w)=>{let D,O;if(vd(this._camera)){const P=Pn.copy(this._camera.position).sub(this._target),B=this._camera.getEffectiveFOV()*av,I=P.length()*Math.tan(B*.5);D=this.truckSpeed*S*I/this._elementRect.height,O=this.truckSpeed*T*I/this._elementRect.height}else if(Wf(this._camera)){const P=this._camera;D=this.truckSpeed*S*(P.right-P.left)/P.zoom/this._elementRect.width,O=this.truckSpeed*T*(P.top-P.bottom)/P.zoom/this._elementRect.height}else return;w?(A?this.setFocalOffset(this._focalOffsetEnd.x+D,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(D,0,!0),this.forward(-O,!0)):A?this.setFocalOffset(this._focalOffsetEnd.x+D,this._focalOffsetEnd.y+O,this._focalOffsetEnd.z,!0):this.truck(D,O,!0)},this._rotateInternal=(S,T)=>{const A=Gf*this.azimuthRotateSpeed*S/this._elementRect.height,w=Gf*this.polarRotateSpeed*T/this._elementRect.height;this.rotate(A,w,!0)},this._dollyInternal=(S,T,A)=>{const w=Math.pow(.95,-S*this.dollySpeed),D=this._sphericalEnd.radius,O=this._sphericalEnd.radius*w,P=zl(O,this.minDistance,this.maxDistance),B=P-O;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(O,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(B,!0),this._dollyToNoClamp(P,!0)):this._dollyToNoClamp(P,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?O:P)-D,this._dollyControlCoord.set(T,A)),this._lastDollyDirection=Math.sign(-S)},this._zoomInternal=(S,T,A)=>{const w=Math.pow(.95,S*this.dollySpeed),D=this._zoom,O=this._zoom*w;this.zoomTo(O,!0),this.dollyToCursor&&(this._changedZoom+=O-D,this._dollyControlCoord.set(T,A))},typeof gn>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new gn.Quaternion().setFromUnitVectors(this._camera.up,hx),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Ke.NONE,this._target=new gn.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new gn.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new gn.Spherical().setFromVector3(Pn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new gn.Vector3,new gn.Vector3,new gn.Vector3,new gn.Vector3],this._updateNearPlaneCorners(),this._boundary=new gn.Box3(new gn.Vector3(-1/0,-1/0,-1/0),new gn.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new gn.Vector2,this.mouseButtons={left:Ke.ROTATE,middle:Ke.DOLLY,right:Ke.TRUCK,wheel:vd(this._camera)?Ke.DOLLY:Wf(this._camera)?Ke.ZOOM:Ke.NONE},this.touches={one:Ke.TOUCH_ROTATE,two:vd(this._camera)?Ke.TOUCH_DOLLY_TRUCK:Wf(this._camera)?Ke.TOUCH_ZOOM_TRUCK:Ke.NONE,three:Ke.TOUCH_TRUCK};const i=new gn.Vector2,r=new gn.Vector2,s=new gn.Vector2,a=S=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const w=this._domElement.getBoundingClientRect(),D=S.clientX/w.width,O=S.clientY/w.height;if(D<this._interactiveArea.left||D>this._interactiveArea.right||O<this._interactiveArea.top||O>this._interactiveArea.bottom)return}const T=S.pointerType!=="mouse"?null:(S.buttons&nr.LEFT)===nr.LEFT?nr.LEFT:(S.buttons&nr.MIDDLE)===nr.MIDDLE?nr.MIDDLE:(S.buttons&nr.RIGHT)===nr.RIGHT?nr.RIGHT:null;if(T!==null){const w=this._findPointerByMouseButton(T);w&&this._disposePointer(w)}if((S.buttons&nr.LEFT)===nr.LEFT&&this._lockedPointer)return;const A={pointerId:S.pointerId,clientX:S.clientX,clientY:S.clientY,deltaX:0,deltaY:0,mouseButton:T};this._activePointers.push(A),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",c),this._isDragging=!0,g(S)},o=S=>{S.cancelable&&S.preventDefault();const T=S.pointerId,A=this._lockedPointer||this._findPointerById(T);if(A){if(A.clientX=S.clientX,A.clientY=S.clientY,A.deltaX=S.movementX,A.deltaY=S.movementY,this._state=0,S.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(S.buttons&nr.LEFT)===nr.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(S.buttons&nr.MIDDLE)===nr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(S.buttons&nr.RIGHT)===nr.RIGHT&&(this._state=this._state|this.mouseButtons.right);y()}},c=S=>{const T=this._findPointerById(S.pointerId);if(!(T&&T===this._lockedPointer)){if(T&&this._disposePointer(T),S.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Ke.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Ke.NONE;x()}};let u=-1;const h=S=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Ke.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const O=this._domElement.getBoundingClientRect(),P=S.clientX/O.width,B=S.clientY/O.height;if(P<this._interactiveArea.left||P>this._interactiveArea.right||B<this._interactiveArea.top||B>this._interactiveArea.bottom)return}if(S.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Ke.ROTATE||this.mouseButtons.wheel===Ke.TRUCK){const O=performance.now();u-O<1e3&&this._getClientRect(this._elementRect),u=O}const T=eX?-1:-3,A=S.deltaMode===1||S.ctrlKey?S.deltaY/T:S.deltaY/(T*10),w=this.dollyToCursor?(S.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,D=this.dollyToCursor?(S.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Ke.ROTATE:{this._rotateInternal(S.deltaX,S.deltaY),this._isUserControllingRotate=!0;break}case Ke.TRUCK:{this._truckInternal(S.deltaX,S.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case Ke.SCREEN_PAN:{this._truckInternal(S.deltaX,S.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case Ke.OFFSET:{this._truckInternal(S.deltaX,S.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case Ke.DOLLY:{this._dollyInternal(-A,w,D),this._isUserControllingDolly=!0;break}case Ke.ZOOM:{this._zoomInternal(-A,w,D),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},p=S=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===nA.ACTION.NONE){const T=S instanceof PointerEvent?S.pointerId:0,A=this._findPointerById(T);A&&this._disposePointer(A),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c);return}S.preventDefault()}},g=S=>{if(!this._enabled)return;if(xM(this._activePointers,Ia),this._getClientRect(this._elementRect),i.copy(Ia),r.copy(Ia),this._activePointers.length>=2){const A=Ia.x-this._activePointers[1].clientX,w=Ia.y-this._activePointers[1].clientY,D=Math.sqrt(A*A+w*w);s.set(0,D);const O=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,P=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(O,P)}if(this._state=0,!S)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in S&&S.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(S.buttons&nr.LEFT)===nr.LEFT&&(this._state=this._state|this.mouseButtons.left),(S.buttons&nr.MIDDLE)===nr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(S.buttons&nr.RIGHT)===nr.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&Ke.ROTATE)===Ke.ROTATE||(this._state&Ke.TOUCH_ROTATE)===Ke.TOUCH_ROTATE||(this._state&Ke.TOUCH_DOLLY_ROTATE)===Ke.TOUCH_DOLLY_ROTATE||(this._state&Ke.TOUCH_ZOOM_ROTATE)===Ke.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&Ke.TRUCK)===Ke.TRUCK||(this._state&Ke.SCREEN_PAN)===Ke.SCREEN_PAN||(this._state&Ke.TOUCH_TRUCK)===Ke.TOUCH_TRUCK||(this._state&Ke.TOUCH_SCREEN_PAN)===Ke.TOUCH_SCREEN_PAN||(this._state&Ke.TOUCH_DOLLY_TRUCK)===Ke.TOUCH_DOLLY_TRUCK||(this._state&Ke.TOUCH_DOLLY_SCREEN_PAN)===Ke.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ke.TOUCH_ZOOM_TRUCK)===Ke.TOUCH_ZOOM_TRUCK||(this._state&Ke.TOUCH_ZOOM_SCREEN_PAN)===Ke.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&Ke.DOLLY)===Ke.DOLLY||(this._state&Ke.TOUCH_DOLLY)===Ke.TOUCH_DOLLY||(this._state&Ke.TOUCH_DOLLY_TRUCK)===Ke.TOUCH_DOLLY_TRUCK||(this._state&Ke.TOUCH_DOLLY_SCREEN_PAN)===Ke.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ke.TOUCH_DOLLY_OFFSET)===Ke.TOUCH_DOLLY_OFFSET||(this._state&Ke.TOUCH_DOLLY_ROTATE)===Ke.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&Ke.ZOOM)===Ke.ZOOM||(this._state&Ke.TOUCH_ZOOM)===Ke.TOUCH_ZOOM||(this._state&Ke.TOUCH_ZOOM_TRUCK)===Ke.TOUCH_ZOOM_TRUCK||(this._state&Ke.TOUCH_ZOOM_SCREEN_PAN)===Ke.TOUCH_ZOOM_SCREEN_PAN||(this._state&Ke.TOUCH_ZOOM_OFFSET)===Ke.TOUCH_ZOOM_OFFSET||(this._state&Ke.TOUCH_ZOOM_ROTATE)===Ke.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&Ke.OFFSET)===Ke.OFFSET||(this._state&Ke.TOUCH_OFFSET)===Ke.TOUCH_OFFSET||(this._state&Ke.TOUCH_DOLLY_OFFSET)===Ke.TOUCH_DOLLY_OFFSET||(this._state&Ke.TOUCH_ZOOM_OFFSET)===Ke.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},y=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,xM(this._activePointers,Ia);const T=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,A=T?-T.deltaX:r.x-Ia.x,w=T?-T.deltaY:r.y-Ia.y;if(r.copy(Ia),((this._state&Ke.ROTATE)===Ke.ROTATE||(this._state&Ke.TOUCH_ROTATE)===Ke.TOUCH_ROTATE||(this._state&Ke.TOUCH_DOLLY_ROTATE)===Ke.TOUCH_DOLLY_ROTATE||(this._state&Ke.TOUCH_ZOOM_ROTATE)===Ke.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(A,w),this._isUserControllingRotate=!0),(this._state&Ke.DOLLY)===Ke.DOLLY||(this._state&Ke.ZOOM)===Ke.ZOOM){const D=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,O=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,P=this.dollyDragInverted?-1:1;(this._state&Ke.DOLLY)===Ke.DOLLY?(this._dollyInternal(P*w*fx,D,O),this._isUserControllingDolly=!0):(this._zoomInternal(P*w*fx,D,O),this._isUserControllingZoom=!0)}if((this._state&Ke.TOUCH_DOLLY)===Ke.TOUCH_DOLLY||(this._state&Ke.TOUCH_ZOOM)===Ke.TOUCH_ZOOM||(this._state&Ke.TOUCH_DOLLY_TRUCK)===Ke.TOUCH_DOLLY_TRUCK||(this._state&Ke.TOUCH_ZOOM_TRUCK)===Ke.TOUCH_ZOOM_TRUCK||(this._state&Ke.TOUCH_DOLLY_SCREEN_PAN)===Ke.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ke.TOUCH_ZOOM_SCREEN_PAN)===Ke.TOUCH_ZOOM_SCREEN_PAN||(this._state&Ke.TOUCH_DOLLY_OFFSET)===Ke.TOUCH_DOLLY_OFFSET||(this._state&Ke.TOUCH_ZOOM_OFFSET)===Ke.TOUCH_ZOOM_OFFSET||(this._state&Ke.TOUCH_DOLLY_ROTATE)===Ke.TOUCH_DOLLY_ROTATE||(this._state&Ke.TOUCH_ZOOM_ROTATE)===Ke.TOUCH_ZOOM_ROTATE){const D=Ia.x-this._activePointers[1].clientX,O=Ia.y-this._activePointers[1].clientY,P=Math.sqrt(D*D+O*O),B=s.y-P;s.set(0,P);const I=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,z=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Ke.TOUCH_DOLLY)===Ke.TOUCH_DOLLY||(this._state&Ke.TOUCH_DOLLY_ROTATE)===Ke.TOUCH_DOLLY_ROTATE||(this._state&Ke.TOUCH_DOLLY_TRUCK)===Ke.TOUCH_DOLLY_TRUCK||(this._state&Ke.TOUCH_DOLLY_SCREEN_PAN)===Ke.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ke.TOUCH_DOLLY_OFFSET)===Ke.TOUCH_DOLLY_OFFSET?(this._dollyInternal(B*fx,I,z),this._isUserControllingDolly=!0):(this._zoomInternal(B*fx,I,z),this._isUserControllingZoom=!0)}((this._state&Ke.TRUCK)===Ke.TRUCK||(this._state&Ke.TOUCH_TRUCK)===Ke.TOUCH_TRUCK||(this._state&Ke.TOUCH_DOLLY_TRUCK)===Ke.TOUCH_DOLLY_TRUCK||(this._state&Ke.TOUCH_ZOOM_TRUCK)===Ke.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(A,w,!1,!1),this._isUserControllingTruck=!0),((this._state&Ke.SCREEN_PAN)===Ke.SCREEN_PAN||(this._state&Ke.TOUCH_SCREEN_PAN)===Ke.TOUCH_SCREEN_PAN||(this._state&Ke.TOUCH_DOLLY_SCREEN_PAN)===Ke.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ke.TOUCH_ZOOM_SCREEN_PAN)===Ke.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(A,w,!1,!0),this._isUserControllingTruck=!0),((this._state&Ke.OFFSET)===Ke.OFFSET||(this._state&Ke.TOUCH_OFFSET)===Ke.TOUCH_OFFSET||(this._state&Ke.TOUCH_DOLLY_OFFSET)===Ke.TOUCH_DOLLY_OFFSET||(this._state&Ke.TOUCH_ZOOM_OFFSET)===Ke.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(A,w,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},x=()=>{xM(this._activePointers,Ia),r.copy(Ia),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",M),this._domElement.ownerDocument.addEventListener("pointerlockerror",b),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",c),g())},this.unlockPointer=()=>{var S,T,A;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(S=this._domElement)===null||S===void 0||S.ownerDocument.exitPointerLock(),(T=this._domElement)===null||T===void 0||T.ownerDocument.removeEventListener("pointerlockchange",M),(A=this._domElement)===null||A===void 0||A.ownerDocument.removeEventListener("pointerlockerror",b),this.cancel()};const M=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},b=()=>{this.unlockPointer()};this._addAllEventListeners=S=>{this._domElement=S,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",a),this._domElement.addEventListener("pointercancel",c),this._domElement.addEventListener("wheel",h,{passive:!1}),this._domElement.addEventListener("contextmenu",p)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",a),this._domElement.removeEventListener("pointercancel",c),this._domElement.removeEventListener("wheel",h,{passive:!1}),this._domElement.removeEventListener("contextmenu",p),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.removeEventListener("pointerlockchange",M),this._domElement.ownerDocument.removeEventListener("pointerlockerror",b))},this.cancel=()=>{this._state!==Ke.NONE&&(this._state=Ke.NONE,this._activePointers.length=0,x())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=zl(e.width,0,1),this._interactiveArea.height=zl(e.height,0,1),this._interactiveArea.x=zl(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=zl(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=zl(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=zl(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const a=!i||yi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&yi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(a)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Am.NONE,this._changedDolly=0,this._dollyToNoClamp(zl(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const a=this._collisionTest(),o=yi(a,this._spherical.radius);if(!(i>e)&&o)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,a)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||yi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(cv).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const i=!t||yi(this._target.x,this._targetEnd.x,this.restThreshold)&&yi(this._target.y,this._targetEnd.y,this.restThreshold)&&yi(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=zl(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||yi(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),Lc.setFromMatrixColumn(this._camera.matrix,0),Nc.setFromMatrixColumn(this._camera.matrix,1),Lc.multiplyScalar(e),Nc.multiplyScalar(-t);const r=Pn.copy(Lc).add(Nc),s=ui.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,t=!1){Pn.setFromMatrixColumn(this._camera.matrix,0),Pn.crossVectors(this._camera.up,Pn),Pn.multiplyScalar(e);const i=ui.copy(this._targetEnd).add(Pn);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return Pn.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Pn.x,this._targetEnd.y+Pn.y,this._targetEnd.z+Pn.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const s=Pn.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const a=!r||yi(this._target.x,this._targetEnd.x,this.restThreshold)&&yi(this._target.y,this._targetEnd.y,this.restThreshold)&&yi(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}lookInDirectionOf(e,t,i,r=!1){const o=Pn.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(o.x,o.y,o.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:a=0,paddingTop:o=0}={}){const c=[],u=e.isBox3?Rm.copy(e):Rm.setFromObject(e);u.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const h=iO(this._sphericalEnd.theta,nO),p=iO(this._sphericalEnd.phi,nO);c.push(this.rotateTo(h,p,t));const g=Pn.setFromSpherical(this._sphericalEnd).normalize(),y=cO.setFromUnitVectors(g,EM),x=yi(Math.abs(g.y),1);x&&y.multiply(TM.setFromAxisAngle(hx,h)),y.multiply(this._yAxisUpSpaceInverse);const M=lO.makeEmpty();ui.copy(u.min).applyQuaternion(y),M.expandByPoint(ui),ui.copy(u.min).setX(u.max.x).applyQuaternion(y),M.expandByPoint(ui),ui.copy(u.min).setY(u.max.y).applyQuaternion(y),M.expandByPoint(ui),ui.copy(u.max).setZ(u.min.z).applyQuaternion(y),M.expandByPoint(ui),ui.copy(u.min).setZ(u.max.z).applyQuaternion(y),M.expandByPoint(ui),ui.copy(u.max).setY(u.min.y).applyQuaternion(y),M.expandByPoint(ui),ui.copy(u.max).setX(u.min.x).applyQuaternion(y),M.expandByPoint(ui),ui.copy(u.max).applyQuaternion(y),M.expandByPoint(ui),M.min.x-=r,M.min.y-=a,M.max.x+=s,M.max.y+=o,y.setFromUnitVectors(EM,g),x&&y.premultiply(TM.invert()),y.premultiply(this._yAxisUpSpace);const b=M.getSize(Pn),S=M.getCenter(ui).applyQuaternion(y);if(vd(this._camera)){const T=this.getDistanceToFitBox(b.x,b.y,b.z,i);c.push(this.moveTo(S.x,S.y,S.z,t)),c.push(this.dollyTo(T,t)),c.push(this.setFocalOffset(0,0,0,t))}else if(Wf(this._camera)){const T=this._camera,A=T.right-T.left,w=T.top-T.bottom,D=i?Math.max(A/b.x,w/b.y):Math.min(A/b.x,w/b.y);c.push(this.moveTo(S.x,S.y,S.z,t)),c.push(this.zoomTo(D,t)),c.push(this.setFocalOffset(0,0,0,t))}return Promise.all(c)}fitToSphere(e,t){const i=[],s="isObject3D"in e?nA.createBoundingSphere(e,MM):MM.copy(e);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),vd(this._camera)){const a=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(a,t))}else if(Wf(this._camera)){const a=this._camera.right-this._camera.left,o=this._camera.top-this._camera.bottom,c=2*s.radius,u=Math.min(a/c,o/c);i.push(this.zoomTo(u,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,s,a,o=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Am.NONE,this._changedDolly=0;const c=ui.set(r,s,a),u=Pn.set(e,t,i);this._targetEnd.copy(c),this._sphericalEnd.setFromVector3(u.sub(c).applyQuaternion(this._yAxisUpSpace)),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const h=!o||yi(this._target.x,this._targetEnd.x,this.restThreshold)&&yi(this._target.y,this._targetEnd.y,this.restThreshold)&&yi(this._target.z,this._targetEnd.z,this.restThreshold)&&yi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&yi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&yi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(h)}lerp(e,t,i,r=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Am.NONE,this._changedDolly=0;const s=Pn.set(...e.target);if("spherical"in e)lo.set(...e.spherical);else{const p=ui.set(...e.position);lo.setFromVector3(p.sub(s).applyQuaternion(this._yAxisUpSpace))}const a=wm.set(...t.target);if("spherical"in t)Cm.set(...t.spherical);else{const p=ui.set(...t.position);Cm.setFromVector3(p.sub(a).applyQuaternion(this._yAxisUpSpace))}this._targetEnd.copy(s.lerp(a,i));const o=Cm.theta-lo.theta,c=Cm.phi-lo.phi,u=Cm.radius-lo.radius;this._sphericalEnd.set(lo.radius+u*i,lo.phi+c*i,lo.theta+o*i),this._needsUpdate=!0,r||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const h=!r||yi(this._target.x,this._targetEnd.x,this.restThreshold)&&yi(this._target.y,this._targetEnd.y,this.restThreshold)&&yi(this._target.z,this._targetEnd.z,this.restThreshold)&&yi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&yi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&yi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(h)}lerpLookAt(e,t,i,r,s,a,o,c,u,h,p,g,y,x=!1){return this.lerp({position:[e,t,i],target:[r,s,a]},{position:[o,c,u],target:[h,p,g]},y,x)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const s=this.getPosition(Pn),a=this.setLookAt(s.x,s.y,s.z,e,t,i,r);return this._sphericalEnd.phi=zl(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),a}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||yi(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&yi(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&yi(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),Lc.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Nc.setFromMatrixColumn(this._camera.matrixWorldInverse,1),yd.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=Pn.set(e,t,i),s=r.distanceTo(this._camera.position),a=r.sub(this._camera.position);Lc.multiplyScalar(a.x),Nc.multiplyScalar(a.y),yd.multiplyScalar(a.z),Pn.copy(Lc).add(Nc).add(yd),Pn.z=Pn.z+s,this.dollyTo(s,!1),this.setFocalOffset(-Pn.x,Pn.y,-Pn.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new gn.Vector4,typeof e=="number"?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if(bM(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,a=this._camera.getEffectiveFOV()*av,o=this._camera.aspect;return((r?s>o:s<o)?t:e/o)*.5/Math.tan(a*.5)+i*.5}getDistanceToFitSphere(e){if(bM(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*av,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new gn.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new gn.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new gn.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new gn.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){return this._sphericalEnd.theta=(this._sphericalEnd.theta%Gf+Gf)%Gf,this._sphericalEnd.theta>Math.PI&&(this._sphericalEnd.theta-=Gf),this._spherical.theta+=Gf*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Gf),this}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!yi(this._camera.up.x,this._cameraUp0.x)||!yi(this._camera.up.y,this._cameraUp0.y)||!yi(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(Pn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,hx),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Pn.subVectors(this._target,this._camera.position).normalize(),t=ui.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(Pn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=aO.subVectors(this._targetEnd,this._target),a=oO.subVectors(this._focalOffsetEnd,this._focalOffset),o=this._zoomEnd-this._zoom;if(Bi(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const p=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=ux(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,p,1/0,e),this._needsUpdate=!0}if(Bi(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const p=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=ux(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,p,1/0,e),this._needsUpdate=!0}if(Bi(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const p=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=ux(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,p,this.maxSpeed,e),this._needsUpdate=!0}if(Bi(s.x)&&Bi(s.y)&&Bi(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const p=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;rO(this._target,this._targetEnd,this._targetVelocity,p,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Bi(a.x)&&Bi(a.y)&&Bi(a.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const p=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;rO(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,p,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Bi(o))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const p=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=ux(this._zoom,this._zoomEnd,this._zoomVelocity,p,1/0,e)}if(this.dollyToCursor){if(vd(this._camera)&&this._changedDolly!==0){const p=this._spherical.radius-this._lastDistance,g=this._camera,y=this._getCameraDirection(cv),x=Pn.copy(y).cross(g.up).normalize();x.lengthSq()===0&&(x.x=1);const M=ui.crossVectors(x,y),b=this._sphericalEnd.radius*Math.tan(g.getEffectiveFOV()*av*.5),T=(this._sphericalEnd.radius-p-this._sphericalEnd.radius)/this._sphericalEnd.radius,A=wm.copy(this._targetEnd).add(x.multiplyScalar(this._dollyControlCoord.x*b*g.aspect)).add(M.multiplyScalar(this._dollyControlCoord.y*b)),w=Pn.copy(this._targetEnd).lerp(A,T),D=this._lastDollyDirection===Am.IN&&this._spherical.radius<=this.minDistance,O=this._lastDollyDirection===Am.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(D||O)){this._sphericalEnd.radius-=p,this._spherical.radius-=p;const B=ui.copy(y).multiplyScalar(-p);w.add(B)}this._boundary.clampPoint(w,w);const P=ui.subVectors(w,this._targetEnd);this._targetEnd.copy(w),this._target.add(P),this._changedDolly-=p,Bi(this._changedDolly)&&(this._changedDolly=0)}else if(Wf(this._camera)&&this._changedZoom!==0){const p=this._zoom-this._lastZoom,g=this._camera,y=Pn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(g.near+g.far)/(g.near-g.far)).unproject(g),x=ui.set(0,0,-1).applyQuaternion(g.quaternion),M=wm.copy(y).add(x.multiplyScalar(-y.dot(g.up))),S=-(this._zoom-p-this._zoom)/this._zoom,T=this._getCameraDirection(cv),A=this._targetEnd.dot(T),w=Pn.copy(this._targetEnd).lerp(M,S),D=w.dot(T),O=T.multiplyScalar(D-A);w.sub(O),this._boundary.clampPoint(w,w);const P=ui.subVectors(w,this._targetEnd);this._targetEnd.copy(w),this._target.add(P),this._changedZoom-=p,Bi(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const c=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,c),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Bi(this._focalOffset.x)||!Bi(this._focalOffset.y)||!Bi(this._focalOffset.z))&&(Lc.setFromMatrixColumn(this._camera.matrix,0),Nc.setFromMatrixColumn(this._camera.matrix,1),yd.setFromMatrixColumn(this._camera.matrix,2),Lc.multiplyScalar(this._focalOffset.x),Nc.multiplyScalar(-this._focalOffset.y),yd.multiplyScalar(this._focalOffset.z),Pn.copy(Lc).add(Nc).add(yd),this._camera.position.add(Pn),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Pn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const h=this._needsUpdate;return h&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):h?(this.dispatchEvent({type:"update"}),Bi(t,this.restThreshold)&&Bi(i,this.restThreshold)&&Bi(r,this.restThreshold)&&Bi(s.x,this.restThreshold)&&Bi(s.y,this.restThreshold)&&Bi(s.z,this.restThreshold)&&Bi(a.x,this.restThreshold)&&Bi(a.y,this.restThreshold)&&Bi(a.z,this.restThreshold)&&Bi(o,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!h&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=h,this._needsUpdate=!1,h}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:ov(this.maxDistance),minZoom:this.minZoom,maxZoom:ov(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:ov(this.maxPolarAngle),minAzimuthAngle:ov(this.minAzimuthAngle),maxAzimuthAngle:ov(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:Pn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=lv(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=lv(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=lv(i.maxPolarAngle),this.minAzimuthAngle=lv(i.minAzimuthAngle),this.maxAzimuthAngle=lv(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),lo.setFromVector3(Pn.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(lo.theta,lo.phi,t),this.dollyTo(lo.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",JW),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const s=ui.copy(t).add(e),o=this._boundary.clampPoint(s,wm).sub(s),c=o.lengthSq();if(c===0)return e.add(t);if(c===r)return e;if(i===0)return e.add(t).add(o);{const u=1+i*c/t.dot(o);return e.add(ui.copy(t).multiplyScalar(u)).add(o.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(vd(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*av,r=Math.tan(i*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(Wf(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,s=e.top*t,a=e.bottom*t;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,a,0),this._nearPlaneCorners[3].set(i,a,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||bM(this._camera,"_collisionTest"))return e;const i=this._getTargetDirection(cv);AM.lookAt(sO,i,this._camera.up);for(let r=0;r<4;r++){const s=ui.copy(this._nearPlaneCorners[r]);s.applyMatrix4(AM);const a=wm.addVectors(this._target,s);dx.set(a,i),dx.far=this._spherical.radius+1;const o=dx.intersectObjects(this.colliderMeshes);o.length!==0&&o[0].distance<e&&(e=o[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const i=()=>{this.removeEventListener("rest",i),t()};this.addEventListener("rest",i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new gn.Sphere){const i=t,r=i.center;Rm.makeEmpty(),e.traverseVisible(a=>{a.isMesh&&Rm.expandByObject(a)}),Rm.getCenter(r);let s=0;return e.traverseVisible(a=>{if(!a.isMesh)return;const o=a;if(!o.geometry)return;const c=o.geometry.clone();c.applyMatrix4(o.matrixWorld);const h=c.attributes.position;for(let p=0,g=h.count;p<g;p++)Pn.fromBufferAttribute(h,p),s=Math.max(s,r.distanceToSquared(Pn))}),i.radius=Math.sqrt(s),i}};const nX=L.forwardRef((n,e)=>{const{impl:t,camera:i,domElement:r,makeDefault:s,onControlStart:a,onControl:o,onControlEnd:c,onTransitionStart:u,onUpdate:h,onWake:p,onRest:g,onSleep:y,onStart:x,onEnd:M,onChange:b,regress:S,...T}=n,A=t??tX;L.useMemo(()=>{const te={Box3:Kn,MathUtils:{clamp:np.clamp},Matrix4:Ut,Quaternion:Ar,Raycaster:JS,Sphere:gr,Spherical:UL,Vector2:ft,Vector3:J,Vector4:Ln};A.install({THREE:te}),Ly({CameraControlsImpl:A})},[A]);const w=on(te=>te.camera),D=on(te=>te.gl),O=on(te=>te.invalidate),P=on(te=>te.events),B=on(te=>te.setEvents),I=on(te=>te.set),z=on(te=>te.get),k=on(te=>te.performance),V=i||w,j=r||P.connected||D.domElement,W=L.useMemo(()=>new A(V),[A,V]);return Yl((te,H)=>{W.update(H)},-1),L.useEffect(()=>(W.connect(j),()=>void W.disconnect()),[j,W]),L.useEffect(()=>{function te(){O(),S&&k.regress()}const H=ee=>{te(),a?.(ee),x?.(ee)},Q=ee=>{te(),o?.(ee),b?.(ee)},ne=ee=>{c?.(ee),M?.(ee)},re=ee=>{te(),u?.(ee),b?.(ee)},G=ee=>{te(),h?.(ee),b?.(ee)},X=ee=>{te(),p?.(ee),b?.(ee)},ie=ee=>{g?.(ee)},se=ee=>{y?.(ee)};return W.addEventListener("controlstart",H),W.addEventListener("control",Q),W.addEventListener("controlend",ne),W.addEventListener("transitionstart",re),W.addEventListener("update",G),W.addEventListener("wake",X),W.addEventListener("rest",ie),W.addEventListener("sleep",se),()=>{W.removeEventListener("controlstart",H),W.removeEventListener("control",Q),W.removeEventListener("controlend",ne),W.removeEventListener("transitionstart",re),W.removeEventListener("update",G),W.removeEventListener("wake",X),W.removeEventListener("rest",ie),W.removeEventListener("sleep",se)}},[W,O,B,S,k,a,o,c,u,h,p,g,y,b,x,M]),L.useEffect(()=>{if(s){const te=z().controls;return I({controls:W}),()=>I({controls:te})}},[s,W]),L.createElement("primitive",Gn({ref:e,object:W},T))});function iX({defaultScene:n,defaultCamera:e,renderPriority:t=1}){const{gl:i,scene:r,camera:s}=on();let a;return Yl(()=>{a=i.autoClear,t===1&&(i.autoClear=!0,i.render(n,e)),i.autoClear=!1,i.clearDepth(),i.render(r,s),i.autoClear=a},t),L.createElement("group",{onPointerOver:()=>null})}function rX({children:n,renderPriority:e=1}){const{scene:t,camera:i}=on(),[r]=L.useState(()=>new sh);return L.createElement(L.Fragment,null,oN(L.createElement(L.Fragment,null,n,L.createElement(iX,{defaultScene:t,defaultCamera:i,renderPriority:e})),r,{events:{priority:e+1}}))}const qN=L.createContext({}),sX=()=>L.useContext(qN),aX=2*Math.PI,wM=new Cn,uO=new Ut,[Om,CM]=[new Ar,new Ar],fO=new J,hO=new J,oX=n=>"minPolarAngle"in n,dO=n=>"getTarget"in n,lX=({alignment:n="bottom-right",margin:e=[80,80],renderPriority:t=1,onUpdate:i,onTarget:r,children:s})=>{const a=on(O=>O.size),o=on(O=>O.camera),c=on(O=>O.controls),u=on(O=>O.invalidate),h=L.useRef(null),p=L.useRef(null),g=L.useRef(!1),y=L.useRef(0),x=L.useRef(new J(0,0,0)),M=L.useRef(new J(0,0,0));L.useEffect(()=>{M.current.copy(o.up),wM.up.copy(o.up)},[o]);const b=L.useCallback(O=>{g.current=!0,(c||r)&&(x.current=r?.()||(dO(c)?c.getTarget(x.current):c?.target)),y.current=o.position.distanceTo(fO),Om.copy(o.quaternion),hO.copy(O).multiplyScalar(y.current).add(fO),wM.lookAt(hO),CM.copy(wM.quaternion),u()},[c,o,r,u]);Yl((O,P)=>{if(p.current&&h.current){var B;if(g.current)if(Om.angleTo(CM)<.01)g.current=!1,oX(c)&&o.up.copy(M.current);else{const I=P*aX;Om.rotateTowards(CM,I),o.position.set(0,0,1).applyQuaternion(Om).multiplyScalar(y.current).add(x.current),o.up.set(0,1,0).applyQuaternion(Om).normalize(),o.quaternion.copy(Om),dO(c)&&c.setPosition(o.position.x,o.position.y,o.position.z),i?i():c&&c.update(P),u()}uO.copy(o.matrix).invert(),(B=h.current)==null||B.quaternion.setFromRotationMatrix(uO)}});const S=L.useMemo(()=>({tweenCamera:b}),[b]),[T,A]=e,w=n.endsWith("-center")?0:n.endsWith("-left")?-a.width/2+T:a.width/2-T,D=n.startsWith("center-")?0:n.startsWith("top-")?a.height/2-A:-a.height/2+A;return L.createElement(rX,{renderPriority:t},L.createElement(qN.Provider,{value:S},L.createElement(ZW,{makeDefault:!0,ref:p,position:[0,0,200]}),L.createElement("group",{ref:h,position:[w,D,0]},s)))};function RM({scale:n=[.8,.05,.05],color:e,rotation:t}){return L.createElement("group",{rotation:t},L.createElement("mesh",{position:[.4,0,0]},L.createElement("boxGeometry",{args:n}),L.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function Dm({onClick:n,font:e,disabled:t,arcStyle:i,label:r,labelColor:s,axisHeadScale:a=1,...o}){const c=on(M=>M.gl),u=L.useMemo(()=>{const M=document.createElement("canvas");M.width=64,M.height=64;const b=M.getContext("2d");return b.beginPath(),b.arc(32,32,16,0,2*Math.PI),b.closePath(),b.fillStyle=i,b.fill(),r&&(b.font=e,b.textAlign="center",b.fillStyle=s,b.fillText(r,32,41)),new ZU(M)},[i,r,s,e]),[h,p]=L.useState(!1),g=(r?1:.75)*(h?1.2:1)*a,y=M=>{M.stopPropagation(),p(!0)},x=M=>{M.stopPropagation(),p(!1)};return L.createElement("sprite",Gn({scale:g,onPointerOver:t?void 0:y,onPointerOut:t?void 0:n||x},o),L.createElement("spriteMaterial",{map:u,"map-anisotropy":c.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:r?1:.75,toneMapped:!1}))}const cX=({hideNegativeAxes:n,hideAxisHeads:e,disabled:t,font:i="18px Inter var, Arial, sans-serif",axisColors:r=["#ff2060","#20df80","#2080ff"],axisHeadScale:s=1,axisScale:a,labels:o=["X","Y","Z"],labelColor:c="#000",onClick:u,...h})=>{const[p,g,y]=r,{tweenCamera:x}=sX(),M={font:i,disabled:t,labelColor:c,onClick:u,axisHeadScale:s,onPointerDown:t?void 0:b=>{x(b.object.position),b.stopPropagation()}};return L.createElement("group",Gn({scale:40},h),L.createElement(RM,{color:p,rotation:[0,0,0],scale:a}),L.createElement(RM,{color:g,rotation:[0,0,Math.PI/2],scale:a}),L.createElement(RM,{color:y,rotation:[0,-Math.PI/2,0],scale:a}),!e&&L.createElement(L.Fragment,null,L.createElement(Dm,Gn({arcStyle:p,position:[1,0,0],label:o[0]},M)),L.createElement(Dm,Gn({arcStyle:g,position:[0,1,0],label:o[1]},M)),L.createElement(Dm,Gn({arcStyle:y,position:[0,0,1],label:o[2]},M)),!n&&L.createElement(L.Fragment,null,L.createElement(Dm,Gn({arcStyle:p,position:[-1,0,0]},M)),L.createElement(Dm,Gn({arcStyle:g,position:[0,-1,0]},M)),L.createElement(Dm,Gn({arcStyle:y,position:[0,0,-1]},M)))))},YN=(n,e,t)=>{let i;switch(n){case ja:i=new Uint8ClampedArray(e*t*4);break;case Xr:i=new Uint16Array(e*t*4);break;case jc:i=new Uint32Array(e*t*4);break;case yS:i=new Int8Array(e*t*4);break;case _S:i=new Int16Array(e*t*4);break;case xy:i=new Int32Array(e*t*4);break;case Yi:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let px;const uX=(n,e,t,i)=>{if(px!==void 0)return px;const r=new Wa(1,1,i);e.setRenderTarget(r);const s=new fi(new Xl,new pa({color:16777215}));e.render(s,t),e.setRenderTarget(null);const a=YN(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,a),r.dispose(),s.geometry.dispose(),s.material.dispose(),px=a[0]!==0,px};class $w{constructor(e){var t,i,r,s,a,o,c,u,h,p,g,y,x,M,b,S;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(A){throw this._renderer.setRenderTarget(null),A}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const T={format:Tr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter:Zn,minFilter:((c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter)!==void 0?(u=e.renderTargetOptions)===null||u===void 0?void 0:u.minFilter:Zn,samples:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.samples:void 0,wrapS:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapS)!==void 0?(y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapS:Mr,wrapT:((x=e.renderTargetOptions)===null||x===void 0?void 0:x.wrapT)!==void 0?(M=e.renderTargetOptions)===null||M===void 0?void 0:M.wrapT:Mr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=$w.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new sh,this._camera=new ju,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!uX(this._type,this._renderer,this._camera,T)){let A;switch(this._type){case Xr:A=this._renderer.extensions.has("EXT_color_buffer_float")?Yi:void 0;break}A!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Yi}`),this._type=A):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new fi(new Xl,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Wa(this.width,this.height,T),this._renderTarget.texture.mapping=((b=e.renderTargetOptions)===null||b===void 0?void 0:b.mapping)!==void 0?(S=e.renderTargetOptions)===null||S===void 0?void 0:S.mapping:nh}static instantiateRenderer(){const e=new kw;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=YN(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Gl(this.toArray(),this.width,this.height,Tr,this._type,e?.mapping||nh,e?.wrapS||Mr,e?.wrapT||Mr,e?.magFilter||Zn,e?.minFilter||Zn,e?.anisotropy||1,Ir);return t.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof ks&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof mi&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof mi&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const fX=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,hX=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class dX extends ks{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:a,hdrCapacityMin:o,hdrCapacityMax:c,sdr:u,gainMap:h}){super({name:"GainMapDecoderMaterial",vertexShader:fX,fragmentShader:hX,uniforms:{sdr:{value:u},gainMap:{value:h},gamma:{value:new J(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new J().fromArray(t)},offsetSdr:{value:new J().fromArray(i)},gainMapMin:{value:new J().fromArray(r)},gainMapMax:{value:new J().fromArray(s)},weightFactor:{value:(Math.log2(a)-o)/(c-o)}},blending:Hc,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=o,this._hdrCapacityMax=c,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class ZN extends Error{}class KN extends Error{}const uv=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(a=>a.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},pX=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),r=e.slice(t,i+10);try{const s=uv(r,"hdrgm:GainMapMin","0"),a=uv(r,"hdrgm:GainMapMax"),o=uv(r,"hdrgm:Gamma","1"),c=uv(r,"hdrgm:OffsetSDR","0.015625"),u=uv(r,"hdrgm:OffsetHDR","0.015625"),h=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),p=h?h[1]:"0",g=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!g)throw new Error("Incomplete gainmap metadata");const y=g[1];return{gainMapMin:Array.isArray(s)?s.map(x=>parseFloat(x)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(a)?a.map(x=>parseFloat(x)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(o)?o.map(x=>parseFloat(x)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(c)?c.map(x=>parseFloat(x)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetHdr:Array.isArray(u)?u.map(x=>parseFloat(x)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(p),hdrCapacityMax:parseFloat(y)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class mX{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const a=s.byteLength;let o=2,c=0,u;for(;o<a;){if(++c>250){i(new Error(`Found no marker after ${c} loops `));return}if(s.getUint8(o)!==255){i(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${s.getUint8(o).toString(16)}`));return}if(u=s.getUint8(o+1),r&&console.log(`Marker: ${u.toString(16)}`),u===226){r&&console.log("Found APP2 marker (0xffe2)");const h=o+4;if(s.getUint32(h)===1297106432){const p=h+4;let g;if(s.getUint16(p)===18761)g=!1;else if(s.getUint16(p)===19789)g=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(p+2,!g)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const y=s.getUint32(p+4,!g);if(y<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const x=p+y,M=s.getUint16(x,!g),b=x+2;let S=0;for(let D=b;D<b+12*M;D+=12)s.getUint16(D,!g)===45057&&(S=s.getUint32(D+8,!g));const A=x+2+M*12+4,w=[];for(let D=A;D<A+S*16;D+=16){const O={MPType:s.getUint32(D,!g),size:s.getUint32(D+4,!g),dataOffset:s.getUint32(D+8,!g),dependantImages:s.getUint32(D+12,!g),start:-1,end:-1,isFII:!1};O.dataOffset?(O.start=p+O.dataOffset,O.isFII=!1):(O.start=0,O.isFII=!0),O.end=O.start+O.size,w.push(O)}if(this.options.extractNonFII&&w.length){const D=new Blob([s]),O=[];for(const P of w){if(P.isFII&&!this.options.extractFII)continue;const B=D.slice(P.start,P.end+1,"image/jpeg");O.push(B)}t(O)}}}o+=2+s.getUint16(o+2)}})}}const gX=async n=>{const e=pX(n);if(!e)throw new KN("Gain map XMP metadata not found");const i=await new mX({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new ZN("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},pO=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class $N extends Gs{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new ZS}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new dX({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new mi,sdr:new mi});return new $w({width:16,height:16,type:Xr,colorSpace:Ir,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,a=new Blob([i],{type:"image/jpeg"});let o,c,u=!1;if(typeof createImageBitmap>"u"){const g=await Promise.all([s?pO(s):Promise.resolve(void 0),pO(a)]);c=g[0],o=g[1],u=!0}else{const g=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);c=g[0],o=g[1]}const h=new mi(c||new ImageData(2,2),nh,Mr,Mr,Zn,UT,Tr,ja,1,Ir);h.flipY=u,h.needsUpdate=!0;const p=new mi(o,nh,Mr,Mr,Zn,UT,Tr,ja,1,pr);p.flipY=u,p.needsUpdate=!0,e.width=o.width,e.height=o.height,e.material.gainMap=h,e.material.sdr=p,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class vX extends $N{load([e,t,i],r,s,a){const o=this.prepareQuadRenderer();let c,u,h;const p=async()=>{if(c&&u&&h){try{await this.render(o,h,c,u)}catch(I){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof a=="function"&&a(I),o.disposeOnDemandRenderer();return}typeof r=="function"&&r(o),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),o.disposeOnDemandRenderer()}};let g=!0,y=0,x=0,M=!0,b=0,S=0,T=!0,A=0,w=0;const D=()=>{if(typeof s=="function"){const I=y+b+A,z=x+S+w,k=g&&M&&T;s(new ProgressEvent("progress",{lengthComputable:k,loaded:z,total:I}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const O=new ga(this._internalLoadingManager);O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(e,async I=>{if(typeof I=="string")throw new Error("Invalid sdr buffer");c=I,await p()},I=>{g=I.lengthComputable,x=I.loaded,y=I.total,D()},I=>{this.manager.itemError(e),typeof a=="function"&&a(I)});const P=new ga(this._internalLoadingManager);P.setResponseType("arraybuffer"),P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(t,async I=>{if(typeof I=="string")throw new Error("Invalid gainmap buffer");u=I,await p()},I=>{M=I.lengthComputable,S=I.loaded,b=I.total,D()},I=>{this.manager.itemError(t),typeof a=="function"&&a(I)});const B=new ga(this._internalLoadingManager);return B.setRequestHeader(this.requestHeader),B.setPath(this.path),B.setWithCredentials(this.withCredentials),B.load(i,async I=>{if(typeof I!="string")throw new Error("Invalid metadata string");h=JSON.parse(I),await p()},I=>{T=I.lengthComputable,w=I.loaded,A=I.total,D()},I=>{this.manager.itemError(i),typeof a=="function"&&a(I)}),o}}class yX extends $N{load(e,t,i,r){const s=this.prepareQuadRenderer(),a=new ga(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const c=new Uint8Array(o);let u,h,p;try{const g=await gX(c);u=g.sdr,h=g.gainMap,p=g.metadata}catch(g){if(g instanceof KN||g instanceof ZN)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),p={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=c;else throw g}try{await this.render(s,p,u,h)}catch(g){this.manager.itemError(e),typeof r=="function"&&r(g),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,o=>{this.manager.itemError(e),typeof r=="function"&&r(o)}),s}}const uy={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},QN="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",tg=n=>Array.isArray(n),Qw=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function lE({files:n=Qw,path:e="",preset:t=void 0,colorSpace:i=void 0,extensions:r}={}){t&&(Jw(t),n=uy[t],e=QN);const s=tg(n),{extension:a,isCubemap:o}=eC(n),c=tC(a);if(!c)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=on(y=>y.gl);L.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function y(){pg.clear(c,s?[n]:n)}u.domElement.addEventListener("webglcontextlost",y,{once:!0})},[n,u.domElement]);const h=pg(c,s?[n]:n,y=>{(a==="webp"||a==="jpg"||a==="jpeg")&&y.setRenderer(u),y.setPath==null||y.setPath(e),r&&r(y)});let p=s?h[0]:h;if(a==="jpg"||a==="jpeg"||a==="webp"){var g;p=(g=p.renderTarget)==null?void 0:g.texture}return p.mapping=o?Vc:rg,p.colorSpace=i??(o?"srgb":"srgb-linear"),p}const _X={files:Qw,path:"",preset:void 0,extensions:void 0};lE.preload=n=>{const e={..._X,...n};let{files:t,path:i=""}=e;const{preset:r,extensions:s}=e;r&&(Jw(r),t=uy[r],i=QN);const{extension:a}=eC(t);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=tC(a);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);pg.preload(o,tg(t)?[t]:t,c=>{c.setPath==null||c.setPath(i),s&&s(c)})};const xX={files:Qw,preset:void 0};lE.clear=n=>{const e={...xX,...n};let{files:t}=e;const{preset:i}=e;i&&(Jw(i),t=uy[i]);const{extension:r}=eC(t),s=tC(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);pg.clear(s,tg(t)?[t]:t)};function Jw(n){if(!(n in uy))throw new Error("Preset must be one of: "+Object.keys(uy).join(", "))}function eC(n){var e;const t=tg(n)&&n.length===6,i=tg(n)&&n.length===3&&n.some(a=>a.endsWith("json")),r=tg(n)?n[0]:n;return{extension:t?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function tC(n){return n==="cube"?_L:n==="hdr"?Vj:n==="exr"?jj:n==="jpg"||n==="jpeg"?yX:n==="webp"?vX:null}const bX=n=>n.current&&n.current.isScene,SX=n=>bX(n)?n.current:n;function nC(n,e,t,i,r={}){var s,a,o,c;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const u=SX(e||t),h=u.background,p=u.environment,g={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(s=(a=u.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(o=(c=u.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&o!==void 0?o:[0,0,0]};return n!=="only"&&(u.environment=i),n&&(u.background=i),Bc(u,r),()=>{n!=="only"&&(u.environment=p),n&&(u.background=h),Bc(u,g)}}function iC({scene:n,background:e=!1,map:t,...i}){const r=on(s=>s.scene);return L.useLayoutEffect(()=>{if(t)return nC(e,n,r,t,i)}),null}function JN({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:a,environmentRotation:o,...c}){const u=lE(c),h=on(p=>p.scene);return L.useLayoutEffect(()=>nC(n,e,h,u,{backgroundBlurriness:t??i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:a,environmentRotation:o})),L.useEffect(()=>()=>{u.dispose()},[u]),null}function EX({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:a=!1,blur:o,backgroundBlurriness:c,backgroundIntensity:u,backgroundRotation:h,environmentIntensity:p,environmentRotation:g,scene:y,files:x,path:M,preset:b=void 0,extensions:S}){const T=on(B=>B.gl),A=on(B=>B.scene),w=L.useRef(null),[D]=L.useState(()=>new sh),O=L.useMemo(()=>{const B=new mw(i);return B.texture.type=Xr,B},[i]);L.useEffect(()=>()=>{O.dispose()},[O]),L.useLayoutEffect(()=>{if(r===1){const B=T.autoClear;T.autoClear=!0,w.current.update(T,D),T.autoClear=B}return nC(a,y,A,O.texture,{backgroundBlurriness:o??c,backgroundIntensity:u,backgroundRotation:h,environmentIntensity:p,environmentRotation:g})},[n,D,O.texture,y,A,a,r,T]);let P=1;return Yl(()=>{if(r===1/0||P<r){const B=T.autoClear;T.autoClear=!0,w.current.update(T,D),T.autoClear=B,P++}}),L.createElement(L.Fragment,null,oN(L.createElement(L.Fragment,null,n,L.createElement("cubeCamera",{ref:w,args:[e,t,O]}),x||b?L.createElement(JN,{background:!0,files:x,preset:b,path:M,extensions:S}):s?L.createElement(iC,{background:!0,map:s,extensions:S}):null),D))}function MX(n){var e,t,i,r;const s=lE(n),a=n.map||s;L.useMemo(()=>Ly({GroundProjectedEnvImpl:Gj}),[]),L.useEffect(()=>()=>{s.dispose()},[s]);const o=L.useMemo(()=>[a],[a]),c=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,h=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return L.createElement(L.Fragment,null,L.createElement(iC,Gn({},n,{map:a})),L.createElement("groundProjectedEnvImpl",{args:o,scale:h,height:c,radius:u}))}function TX(n){return n.ground?L.createElement(MX,n):n.map?L.createElement(iC,n):n.children?L.createElement(EX,n):L.createElement(JN,n)}const Jf={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new Rt("#ff0000"),backfaceStroke:new Rt("#0000ff"),fill:new Rt("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},AX=qW(Jf.uniforms,Jf.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,Jf.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function wX(n,e){n.onBeforeCompile=t=>{t.uniforms={...t.uniforms,...e},t.vertexShader=t.vertexShader.replace("void main() {",`
		  ${Jf.vertex}
		  void main() {
			initWireframe();
		`),t.fragmentShader=t.fragmentShader.replace("void main() {",`
		  ${Jf.fragment}
		  void main() {
		`),t.fragmentShader=t.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},n.side=mr,n.transparent=!0}function CX(n,e){L.useEffect(()=>{var t;return void(n.fillOpacity.value=(t=e.fillOpacity)!==null&&t!==void 0?t:n.fillOpacity.value)},[e.fillOpacity]),L.useEffect(()=>{var t;return void(n.fillMix.value=(t=e.fillMix)!==null&&t!==void 0?t:n.fillMix.value)},[e.fillMix]),L.useEffect(()=>{var t;return void(n.strokeOpacity.value=(t=e.strokeOpacity)!==null&&t!==void 0?t:n.strokeOpacity.value)},[e.strokeOpacity]),L.useEffect(()=>{var t;return void(n.thickness.value=(t=e.thickness)!==null&&t!==void 0?t:n.thickness.value)},[e.thickness]),L.useEffect(()=>void(n.colorBackfaces.value=!!e.colorBackfaces),[e.colorBackfaces]),L.useEffect(()=>void(n.dash.value=!!e.dash),[e.dash]),L.useEffect(()=>void(n.dashInvert.value=!!e.dashInvert),[e.dashInvert]),L.useEffect(()=>{var t;return void(n.dashRepeats.value=(t=e.dashRepeats)!==null&&t!==void 0?t:n.dashRepeats.value)},[e.dashRepeats]),L.useEffect(()=>{var t;return void(n.dashLength.value=(t=e.dashLength)!==null&&t!==void 0?t:n.dashLength.value)},[e.dashLength]),L.useEffect(()=>void(n.squeeze.value=!!e.squeeze),[e.squeeze]),L.useEffect(()=>{var t;return void(n.squeezeMin.value=(t=e.squeezeMin)!==null&&t!==void 0?t:n.squeezeMin.value)},[e.squeezeMin]),L.useEffect(()=>{var t;return void(n.squeezeMax.value=(t=e.squeezeMax)!==null&&t!==void 0?t:n.squeezeMax.value)},[e.squeezeMax]),L.useEffect(()=>void(n.stroke.value=e.stroke?new Rt(e.stroke):n.stroke.value),[e.stroke]),L.useEffect(()=>void(n.fill.value=e.fill?new Rt(e.fill):n.fill.value),[e.fill]),L.useEffect(()=>void(n.backfaceStroke.value=e.backfaceStroke?new Rt(e.backfaceStroke):n.backfaceStroke.value),[e.backfaceStroke])}function RX(n){return!!(n!=null&&n.geometry)}function OX(n){return!!(n!=null&&n.isBufferGeometry)}function DX(n){return!!(n!=null&&n.current)}function mO(n){return n?.current!==void 0}function gO(n){return n.type==="WireframeGeometry"}function UX(){const n={};for(const e in Jf.uniforms)n[e]={value:Jf.uniforms[e]};return n}function LX(n,e){const i=n.getAttribute("position").count,r=[];for(let s=0;s<i;s++){const a=s%2===0,o=e?1:0;a?r.push(0,0,1,0,1,0,1,0,o):r.push(0,1,0,0,0,1,1,0,o)}return new Jn(Float32Array.from(r),3)}function eP(n){const e=DX(n)?n.current:n;if(OX(e))return e;{if(gO(e))throw new Error("Wireframe: WireframeGeometry is not supported.");const t=e.parent;if(RX(t)){if(gO(t.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return t.geometry}}}function tP(n,e){if(n.index){console.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const i=n.toNonIndexed();n.copy(i),n.setIndex(null)}const t=LX(n,e);n.setAttribute("barycentric",t)}function NX({geometry:n,simplify:e=!1,...t}){Ly({MeshWireframeMaterial:AX});const[i,r]=L.useState(null);L.useLayoutEffect(()=>{const a=eP(n);if(!a)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");tP(a,e),mO(n)&&r(a)},[e,n]);const s=mO(n)?i:n;return L.createElement(L.Fragment,null,s&&L.createElement("mesh",{geometry:s},L.createElement("meshWireframeMaterial",Gn({attach:"material",transparent:!0,side:mr,polygonOffset:!0,polygonOffsetFactor:-4},t,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function PX({simplify:n=!1,...e}){const t=L.useRef(null),i=L.useMemo(()=>UX(),[Jf.uniforms]);return CX(i,e),L.useLayoutEffect(()=>{const r=eP(t);if(!r)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const s=r.clone();return tP(r,n),()=>{r.copy(s),s.dispose()}},[n]),L.useLayoutEffect(()=>{const r=t.current.parent,s=r.material.clone();return wX(r.material,i),()=>{r.material.dispose(),r.material=s}},[]),L.createElement("object3D",{ref:t})}function IX({geometry:n,...e}){return n?L.createElement(NX,Gn({geometry:n},e)):L.createElement(PX,e)}const BX=L.createContext(null),zX=L.forwardRef((n,e)=>{L.useMemo(()=>Ly({SegmentObject:FX}),[]);const{limit:t=1e3,lineWidth:i=1,children:r,...s}=n,[a,o]=L.useState([]),[c]=L.useState(()=>new DN),[u]=L.useState(()=>new aE),[h]=L.useState(()=>new sE),[p]=L.useState(()=>new ft(512,512)),[g]=L.useState(()=>Array(t*6).fill(0)),[y]=L.useState(()=>Array(t*6).fill(0)),x=L.useMemo(()=>({subscribe:M=>(o(b=>[...b,M]),()=>o(b=>b.filter(S=>S.current!==M.current)))}),[]);return Yl(()=>{for(let b=0;b<t;b++){var M;const S=(M=a[b])==null?void 0:M.current;S&&(g[b*6+0]=S.start.x,g[b*6+1]=S.start.y,g[b*6+2]=S.start.z,g[b*6+3]=S.end.x,g[b*6+4]=S.end.y,g[b*6+5]=S.end.z,y[b*6+0]=S.color.r,y[b*6+1]=S.color.g,y[b*6+2]=S.color.b,y[b*6+3]=S.color.r,y[b*6+4]=S.color.g,y[b*6+5]=S.color.b)}h.setColors(y),h.setPositions(g),c.computeLineDistances()}),L.createElement("primitive",{object:c,ref:e},L.createElement("primitive",{object:h,attach:"geometry"}),L.createElement("primitive",Gn({object:u,attach:"material",vertexColors:!0,resolution:p,linewidth:i},s)),L.createElement(BX.Provider,{value:x},r))});class FX{constructor(){this.color=new Rt("white"),this.start=new J(0,0,0),this.end=new J(0,0,0)}}function HX({pixelated:n}){const e=on(a=>a.gl),t=on(a=>a.internal.active),i=on(a=>a.performance.current),r=on(a=>a.viewport.initialDpr),s=on(a=>a.setDpr);return L.useEffect(()=>{const a=e.domElement;return()=>{t&&s(r),n&&a&&(a.style.imageRendering="auto")}},[]),L.useEffect(()=>{s(i*r),n&&e.domElement&&(e.domElement.style.imageRendering=i===1?"auto":"pixelated")},[i]),null}function kX(){const n=on(i=>i.get),e=on(i=>i.setEvents),t=on(i=>i.performance.current);return L.useEffect(()=>{const i=n().events.enabled;return()=>e({enabled:i})},[]),L.useEffect(()=>e({enabled:t===1}),[t]),null}const GX={},vO=n=>{let e;const t=new Set,i=(h,p)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const y=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(x=>x(e,y))}},r=()=>e,c={setState:i,getState:r,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h)),destroy:()=>{(GX?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(i,r,c);return c},VX=n=>n?vO(n):vO,zy=L.createContext(null),mx=new J,yO=new J,jX=(n,e,t,i)=>{const r=e.dot(e),s=e.dot(n)-e.dot(t),a=e.dot(i);return a===0?-s/r:(mx.copy(i).multiplyScalar(r/a).sub(e),yO.copy(i).multiplyScalar(s/a).add(t).sub(n),-mx.dot(yO)/mx.dot(mx))},WX=new J(0,1,0),_O=new Ut,OM=({direction:n,axis:e})=>{const{translation:t,translationLimits:i,annotations:r,annotationsClass:s,depthTest:a,scale:o,lineWidth:c,fixed:u,axisColors:h,hoveredColor:p,opacity:g,renderOrder:y,onDragStart:x,onDrag:M,onDragEnd:b,userData:S}=L.useContext(zy),T=on(ne=>ne.controls),A=L.useRef(null),w=L.useRef(null),D=L.useRef(null),O=L.useRef(0),[P,B]=L.useState(!1),I=L.useCallback(ne=>{r&&(A.current.innerText=`${t.current[e].toFixed(2)}`,A.current.style.display="block"),ne.stopPropagation();const re=new Ut().extractRotation(w.current.matrixWorld),G=ne.point.clone(),X=new J().setFromMatrixPosition(w.current.matrixWorld),ie=n.clone().applyMatrix4(re).normalize();D.current={clickPoint:G,dir:ie},O.current=t.current[e],x({component:"Arrow",axis:e,origin:X,directions:[ie]}),T&&(T.enabled=!1),ne.target.setPointerCapture(ne.pointerId)},[r,n,T,x,t,e]),z=L.useCallback(ne=>{if(ne.stopPropagation(),P||B(!0),D.current){const{clickPoint:re,dir:G}=D.current,[X,ie]=i?.[e]||[void 0,void 0];let se=jX(re,G,ne.ray.origin,ne.ray.direction);X!==void 0&&(se=Math.max(se,X-O.current)),ie!==void 0&&(se=Math.min(se,ie-O.current)),t.current[e]=O.current+se,r&&(A.current.innerText=`${t.current[e].toFixed(2)}`),_O.makeTranslation(G.x*se,G.y*se,G.z*se),M(_O)}},[r,M,P,t,i,e]),k=L.useCallback(ne=>{r&&(A.current.style.display="none"),ne.stopPropagation(),D.current=null,b(),T&&(T.enabled=!0),ne.target.releasePointerCapture(ne.pointerId)},[r,T,b]),V=L.useCallback(ne=>{ne.stopPropagation(),B(!1)},[]),{cylinderLength:j,coneWidth:W,coneLength:te,matrixL:H}=L.useMemo(()=>{const ne=u?c/o*1.6:o/20,re=u?.2:o/5,G=u?1-re:o-re,X=new Ar().setFromUnitVectors(WX,n.clone().normalize()),ie=new Ut().makeRotationFromQuaternion(X);return{cylinderLength:G,coneWidth:ne,coneLength:re,matrixL:ie}},[n,o,c,u]),Q=P?p:h[e];return L.createElement("group",{ref:w},L.createElement("group",{matrix:H,matrixAutoUpdate:!1,onPointerDown:I,onPointerMove:z,onPointerUp:k,onPointerOut:V},r&&L.createElement(nE,{position:[0,-te,0]},L.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:A})),L.createElement("mesh",{visible:!1,position:[0,(j+te)/2,0],userData:S},L.createElement("cylinderGeometry",{args:[W*1.4,W*1.4,j+te,8,1]})),L.createElement(Wb,{transparent:!0,raycast:()=>null,depthTest:a,points:[0,0,0,0,j,0],lineWidth:c,side:mr,color:Q,opacity:g,polygonOffset:!0,renderOrder:y,polygonOffsetFactor:-10,fog:!1}),L.createElement("mesh",{raycast:()=>null,position:[0,j+te/2,0],renderOrder:y},L.createElement("coneGeometry",{args:[W,te,24,1]}),L.createElement("meshBasicMaterial",{transparent:!0,depthTest:a,color:Q,opacity:g,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},DM=new J,UM=new J,LM=n=>n*180/Math.PI,XX=n=>n*Math.PI/180,qX=(n,e,t,i,r)=>{DM.copy(n).sub(t),UM.copy(e).sub(t);const s=i.dot(i),a=r.dot(r),o=DM.dot(i)/s,c=DM.dot(r)/a,u=UM.dot(i)/s,h=UM.dot(r)/a,p=Math.atan2(c,o);return Math.atan2(h,u)-p},YX=(n,e)=>{let t=Math.floor(n/e);return t=t<0?t+1:t,n-t*e},xO=n=>{let e=YX(n,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},gx=new Ut,bO=new J,vx=new dh,NM=new J,PM=({dir1:n,dir2:e,axis:t})=>{const{rotationLimits:i,annotations:r,annotationsClass:s,depthTest:a,scale:o,lineWidth:c,fixed:u,axisColors:h,hoveredColor:p,renderOrder:g,opacity:y,onDragStart:x,onDrag:M,onDragEnd:b,userData:S}=L.useContext(zy),T=on(Q=>Q.controls),A=L.useRef(null),w=L.useRef(null),D=L.useRef(0),O=L.useRef(0),P=L.useRef(null),[B,I]=L.useState(!1),z=L.useCallback(Q=>{r&&(A.current.innerText=`${LM(O.current).toFixed(0)}`,A.current.style.display="block"),Q.stopPropagation();const ne=Q.point.clone(),re=new J().setFromMatrixPosition(w.current.matrixWorld),G=new J().setFromMatrixColumn(w.current.matrixWorld,0).normalize(),X=new J().setFromMatrixColumn(w.current.matrixWorld,1).normalize(),ie=new J().setFromMatrixColumn(w.current.matrixWorld,2).normalize(),se=new Fo().setFromNormalAndCoplanarPoint(ie,re);P.current={clickPoint:ne,origin:re,e1:G,e2:X,normal:ie,plane:se},x({component:"Rotator",axis:t,origin:re,directions:[G,X,ie]}),T&&(T.enabled=!1),Q.target.setPointerCapture(Q.pointerId)},[r,T,x,t]),k=L.useCallback(Q=>{if(Q.stopPropagation(),B||I(!0),P.current){const{clickPoint:ne,origin:re,e1:G,e2:X,normal:ie,plane:se}=P.current,[ee,ue]=i?.[t]||[void 0,void 0];vx.copy(Q.ray),vx.intersectPlane(se,NM),vx.direction.negate(),vx.intersectPlane(se,NM);let pe=qX(ne,NM,re,G,X),ve=LM(pe);Q.shiftKey&&(ve=Math.round(ve/10)*10,pe=XX(ve)),ee!==void 0&&ue!==void 0&&ue-ee<2*Math.PI?(pe=xO(pe),pe=pe>Math.PI?pe-2*Math.PI:pe,pe=np.clamp(pe,ee-D.current,ue-D.current),O.current=D.current+pe):(O.current=xO(D.current+pe),O.current=O.current>Math.PI?O.current-2*Math.PI:O.current),r&&(ve=LM(O.current),A.current.innerText=`${ve.toFixed(0)}`),gx.makeRotationAxis(ie,pe),bO.copy(re).applyMatrix4(gx).sub(re).negate(),gx.setPosition(bO),M(gx)}},[r,M,B,i,t]),V=L.useCallback(Q=>{r&&(A.current.style.display="none"),Q.stopPropagation(),D.current=O.current,P.current=null,b(),T&&(T.enabled=!0),Q.target.releasePointerCapture(Q.pointerId)},[r,T,b]),j=L.useCallback(Q=>{Q.stopPropagation(),I(!1)},[]),W=L.useMemo(()=>{const Q=n.clone().normalize(),ne=e.clone().normalize();return new Ut().makeBasis(Q,ne,Q.clone().cross(ne))},[n,e]),te=u?.65:o*.65,H=L.useMemo(()=>{const ne=[];for(let re=0;re<=32;re++){const G=re*(Math.PI/2)/32;ne.push(new J(Math.cos(G)*te,Math.sin(G)*te,0))}return ne},[te]);return L.createElement("group",{ref:w,onPointerDown:z,onPointerMove:k,onPointerUp:V,onPointerOut:j,matrix:W,matrixAutoUpdate:!1},r&&L.createElement(nE,{position:[te,te,0]},L.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:A})),L.createElement(Wb,{points:H,lineWidth:c*4,visible:!1,userData:S}),L.createElement(Wb,{transparent:!0,raycast:()=>null,depthTest:a,points:H,lineWidth:c,side:mr,color:B?p:h[t],opacity:y,polygonOffset:!0,polygonOffsetFactor:-10,renderOrder:g,fog:!1}))},ZX=(n,e,t)=>{const i=Math.abs(n.x)>=Math.abs(n.y)&&Math.abs(n.x)>=Math.abs(n.z)?0:Math.abs(n.y)>=Math.abs(n.x)&&Math.abs(n.y)>=Math.abs(n.z)?1:2,r=[0,1,2].sort((x,M)=>Math.abs(e.getComponent(M))-Math.abs(e.getComponent(x))),s=i===r[0]?r[1]:r[0],a=n.getComponent(i),o=n.getComponent(s),c=e.getComponent(i),u=e.getComponent(s),h=t.getComponent(i),g=(t.getComponent(s)-h*(o/a))/(u-c*(o/a));return[(h-g*c)/a,g]},yx=new dh,_x=new J,SO=new Ut,IM=({dir1:n,dir2:e,axis:t})=>{const{translation:i,translationLimits:r,annotations:s,annotationsClass:a,depthTest:o,scale:c,lineWidth:u,fixed:h,axisColors:p,hoveredColor:g,opacity:y,renderOrder:x,onDragStart:M,onDrag:b,onDragEnd:S,userData:T}=L.useContext(zy),A=on(G=>G.controls),w=L.useRef(null),D=L.useRef(null),O=L.useRef(null),P=L.useRef(0),B=L.useRef(0),[I,z]=L.useState(!1),k=L.useCallback(G=>{s&&(w.current.innerText=`${i.current[(t+1)%3].toFixed(2)}, ${i.current[(t+2)%3].toFixed(2)}`,w.current.style.display="block"),G.stopPropagation();const X=G.point.clone(),ie=new J().setFromMatrixPosition(D.current.matrixWorld),se=new J().setFromMatrixColumn(D.current.matrixWorld,0).normalize(),ee=new J().setFromMatrixColumn(D.current.matrixWorld,1).normalize(),ue=new J().setFromMatrixColumn(D.current.matrixWorld,2).normalize(),pe=new Fo().setFromNormalAndCoplanarPoint(ue,ie);O.current={clickPoint:X,e1:se,e2:ee,plane:pe},P.current=i.current[(t+1)%3],B.current=i.current[(t+2)%3],M({component:"Slider",axis:t,origin:ie,directions:[se,ee,ue]}),A&&(A.enabled=!1),G.target.setPointerCapture(G.pointerId)},[s,A,M,t]),V=L.useCallback(G=>{if(G.stopPropagation(),I||z(!0),O.current){const{clickPoint:X,e1:ie,e2:se,plane:ee}=O.current,[ue,pe]=r?.[(t+1)%3]||[void 0,void 0],[ve,_e]=r?.[(t+2)%3]||[void 0,void 0];yx.copy(G.ray),yx.intersectPlane(ee,_x),yx.direction.negate(),yx.intersectPlane(ee,_x),_x.sub(X);let[Xe,qe]=ZX(ie,se,_x);ue!==void 0&&(Xe=Math.max(Xe,ue-P.current)),pe!==void 0&&(Xe=Math.min(Xe,pe-P.current)),ve!==void 0&&(qe=Math.max(qe,ve-B.current)),_e!==void 0&&(qe=Math.min(qe,_e-B.current)),i.current[(t+1)%3]=P.current+Xe,i.current[(t+2)%3]=B.current+qe,s&&(w.current.innerText=`${i.current[(t+1)%3].toFixed(2)}, ${i.current[(t+2)%3].toFixed(2)}`),SO.makeTranslation(Xe*ie.x+qe*se.x,Xe*ie.y+qe*se.y,Xe*ie.z+qe*se.z),b(SO)}},[s,b,I,i,r,t]),j=L.useCallback(G=>{s&&(w.current.style.display="none"),G.stopPropagation(),O.current=null,S(),A&&(A.enabled=!0),G.target.releasePointerCapture(G.pointerId)},[s,A,S]),W=L.useCallback(G=>{G.stopPropagation(),z(!1)},[]),te=L.useMemo(()=>{const G=n.clone().normalize(),X=e.clone().normalize();return new Ut().makeBasis(G,X,G.clone().cross(X))},[n,e]),H=h?1/7:c/7,Q=h?.225:c*.225,ne=I?g:p[t],re=L.useMemo(()=>[new J(0,0,0),new J(0,Q,0),new J(Q,Q,0),new J(Q,0,0),new J(0,0,0)],[Q]);return L.createElement("group",{ref:D,matrix:te,matrixAutoUpdate:!1},s&&L.createElement(nE,{position:[0,0,0]},L.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:a,ref:w})),L.createElement("group",{position:[H*1.7,H*1.7,0]},L.createElement("mesh",{visible:!0,onPointerDown:k,onPointerMove:V,onPointerUp:j,onPointerOut:W,scale:Q,userData:T,renderOrder:x},L.createElement("planeGeometry",null),L.createElement("meshBasicMaterial",{transparent:!0,depthTest:o,color:ne,polygonOffset:!0,polygonOffsetFactor:-10,side:mr,fog:!1})),L.createElement(Wb,{position:[-Q/2,-Q/2,0],transparent:!0,depthTest:o,points:re,lineWidth:u,color:ne,opacity:y,polygonOffset:!0,polygonOffsetFactor:-10,userData:T,fog:!1,renderOrder:x})))},Rv=new J,EO=new J,KX=(n,e,t,i)=>{const r=e.dot(e),s=e.dot(n)-e.dot(t),a=e.dot(i);return a===0?-s/r:(Rv.copy(i).multiplyScalar(r/a).sub(e),EO.copy(i).multiplyScalar(s/a).add(t).sub(n),-Rv.dot(EO)/Rv.dot(Rv))},$X=new J(0,1,0),fv=new J,MO=new Ut,BM=({direction:n,axis:e})=>{const{scaleLimits:t,annotations:i,annotationsClass:r,depthTest:s,scale:a,lineWidth:o,fixed:c,axisColors:u,hoveredColor:h,opacity:p,renderOrder:g,onDragStart:y,onDrag:x,onDragEnd:M,userData:b}=L.useContext(zy),S=on(re=>re.size),T=on(re=>re.controls),A=L.useRef(null),w=L.useRef(null),D=L.useRef(null),O=L.useRef(1),P=L.useRef(1),B=L.useRef(null),[I,z]=L.useState(!1),k=c?1.2:1.2*a,V=L.useCallback(re=>{i&&(A.current.innerText=`${P.current.toFixed(2)}`,A.current.style.display="block"),re.stopPropagation();const G=new Ut().extractRotation(w.current.matrixWorld),X=re.point.clone(),ie=new J().setFromMatrixPosition(w.current.matrixWorld),se=n.clone().applyMatrix4(G).normalize(),ee=w.current.matrixWorld.clone(),ue=ee.clone().invert(),pe=c?1/UN(w.current.getWorldPosition(Rv),a,re.camera,S):1;B.current={clickPoint:X,dir:se,mPLG:ee,mPLGInv:ue,offsetMultiplier:pe},y({component:"Sphere",axis:e,origin:ie,directions:[se]}),T&&(T.enabled=!1),re.target.setPointerCapture(re.pointerId)},[i,T,n,y,e,c,a,S]),j=L.useCallback(re=>{if(re.stopPropagation(),I||z(!0),B.current){const{clickPoint:G,dir:X,mPLG:ie,mPLGInv:se,offsetMultiplier:ee}=B.current,[ue,pe]=t?.[e]||[1e-5,void 0],_e=KX(G,X,re.ray.origin,re.ray.direction)*ee,Xe=c?_e:_e/a;let qe=Math.pow(2,Xe*.2);re.shiftKey&&(qe=Math.round(qe*10)/10),qe=Math.max(qe,ue/O.current),pe!==void 0&&(qe=Math.min(qe,pe/O.current)),P.current=O.current*qe,D.current.position.set(0,k+_e,0),i&&(A.current.innerText=`${P.current.toFixed(2)}`),fv.set(1,1,1),fv.setComponent(e,qe),MO.makeScale(fv.x,fv.y,fv.z).premultiply(ie).multiply(se),x(MO)}},[i,k,x,I,t,e]),W=L.useCallback(re=>{i&&(A.current.style.display="none"),re.stopPropagation(),O.current=P.current,B.current=null,D.current.position.set(0,k,0),M(),T&&(T.enabled=!0),re.target.releasePointerCapture(re.pointerId)},[i,T,M,k]),te=L.useCallback(re=>{re.stopPropagation(),z(!1)},[]),{radius:H,matrixL:Q}=L.useMemo(()=>{const re=c?o/a*1.8:a/22.5,G=new Ar().setFromUnitVectors($X,n.clone().normalize()),X=new Ut().makeRotationFromQuaternion(G);return{radius:re,matrixL:X}},[n,a,o,c]),ne=I?h:u[e];return L.createElement("group",{ref:w},L.createElement("group",{matrix:Q,matrixAutoUpdate:!1,onPointerDown:V,onPointerMove:j,onPointerUp:W,onPointerOut:te},i&&L.createElement(nE,{position:[0,k/2,0]},L.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:r,ref:A})),L.createElement("mesh",{ref:D,position:[0,k,0],renderOrder:g,userData:b},L.createElement("sphereGeometry",{args:[H,12,12]}),L.createElement("meshBasicMaterial",{transparent:!0,depthTest:s,color:ne,opacity:p,polygonOffset:!0,polygonOffsetFactor:-10}))))},TO=new Ut,AO=new Ut,wO=new Ut,xx=new Ut,zM=new Ut,Um=new Ut,CO=new Ut,RO=new Ut,OO=new Ut,Lm=new Kn,FM=new Kn,DO=new J,UO=new J,LO=new J,NO=new J,hv=new J,Nm=new J(1,0,0),Pm=new J(0,1,0),Im=new J(0,0,1),QX=L.forwardRef(({enabled:n=!0,matrix:e,onDragStart:t,onDrag:i,onDragEnd:r,autoTransform:s=!0,anchor:a,disableAxes:o=!1,disableSliders:c=!1,disableRotations:u=!1,disableScaling:h=!1,activeAxes:p=[!0,!0,!0],offset:g=[0,0,0],rotation:y=[0,0,0],scale:x=1,lineWidth:M=4,fixed:b=!1,translationLimits:S,rotationLimits:T,scaleLimits:A,depthTest:w=!0,renderOrder:D=500,axisColors:O=["#ff2060","#20df80","#2080ff"],hoveredColor:P="#ffff40",annotations:B=!1,annotationsClass:I,opacity:z=1,visible:k=!0,userData:V,children:j,...W},te)=>{const H=on(pe=>pe.invalidate),Q=L.useRef(null),ne=L.useRef(null),re=L.useRef(null),G=L.useRef(null),X=L.useRef([0,0,0]),ie=L.useRef(new J(1,1,1)),se=L.useRef(new J(1,1,1));L.useLayoutEffect(()=>{a&&(G.current.updateWorldMatrix(!0,!0),xx.copy(G.current.matrixWorld).invert(),Lm.makeEmpty(),G.current.traverse(pe=>{pe.geometry&&(pe.geometry.boundingBox||pe.geometry.computeBoundingBox(),Um.copy(pe.matrixWorld).premultiply(xx),FM.copy(pe.geometry.boundingBox),FM.applyMatrix4(Um),Lm.union(FM))}),DO.copy(Lm.max).add(Lm.min).multiplyScalar(.5),UO.copy(Lm.max).sub(Lm.min).multiplyScalar(.5),LO.copy(UO).multiply(new J(...a)).add(DO),NO.set(...g).add(LO),re.current.position.copy(NO),H())});const ee=L.useMemo(()=>({onDragStart:pe=>{TO.copy(ne.current.matrix),AO.copy(ne.current.matrixWorld),t&&t(pe),H()},onDrag:pe=>{wO.copy(Q.current.matrixWorld),xx.copy(wO).invert(),zM.copy(AO).premultiply(pe),Um.copy(zM).premultiply(xx),CO.copy(TO).invert(),RO.copy(Um).multiply(CO),s&&ne.current.matrix.copy(Um),i&&i(Um,RO,zM,pe),H()},onDragEnd:()=>{r&&r(),H()},translation:X,translationLimits:S,rotationLimits:T,axisColors:O,hoveredColor:P,opacity:z,scale:x,lineWidth:M,fixed:b,depthTest:w,renderOrder:D,userData:V,annotations:B,annotationsClass:I}),[t,i,r,X,S,T,A,w,x,M,b,...O,P,z,V,s,B,I]),ue=new J;return Yl(pe=>{if(b){const ve=UN(re.current.getWorldPosition(ue),x,pe.camera,pe.size);ie.current.setScalar(ve)}e&&e instanceof Ut&&(ne.current.matrix=e),ne.current.updateWorldMatrix(!0,!0),OO.makeRotationFromEuler(re.current.rotation).setPosition(re.current.position).premultiply(ne.current.matrixWorld),se.current.setFromMatrixScale(OO),hv.copy(ie.current).divide(se.current),(Math.abs(re.current.scale.x-hv.x)>1e-4||Math.abs(re.current.scale.y-hv.y)>1e-4||Math.abs(re.current.scale.z-hv.z)>1e-4)&&(re.current.scale.copy(hv),pe.invalidate())}),L.useImperativeHandle(te,()=>ne.current,[]),L.createElement(zy.Provider,{value:ee},L.createElement("group",{ref:Q},L.createElement("group",Gn({ref:ne,matrix:e,matrixAutoUpdate:!1},W),L.createElement("group",{visible:k,ref:re,position:g,rotation:y},n&&L.createElement(L.Fragment,null,!o&&p[0]&&L.createElement(OM,{axis:0,direction:Nm}),!o&&p[1]&&L.createElement(OM,{axis:1,direction:Pm}),!o&&p[2]&&L.createElement(OM,{axis:2,direction:Im}),!c&&p[0]&&p[1]&&L.createElement(IM,{axis:2,dir1:Nm,dir2:Pm}),!c&&p[0]&&p[2]&&L.createElement(IM,{axis:1,dir1:Im,dir2:Nm}),!c&&p[2]&&p[1]&&L.createElement(IM,{axis:0,dir1:Pm,dir2:Im}),!u&&p[0]&&p[1]&&L.createElement(PM,{axis:2,dir1:Nm,dir2:Pm}),!u&&p[0]&&p[2]&&L.createElement(PM,{axis:1,dir1:Im,dir2:Nm}),!u&&p[2]&&p[1]&&L.createElement(PM,{axis:0,dir1:Pm,dir2:Im}),!h&&p[0]&&L.createElement(BM,{axis:0,direction:Nm}),!h&&p[1]&&L.createElement(BM,{axis:1,direction:Pm}),!h&&p[2]&&L.createElement(BM,{axis:2,direction:Im}))),L.createElement("group",{ref:G},j))))}),gg={};function nP(n,e){return n.unstable_is?n.unstable_is(e):e===n}function iP(n){return"init"in n}function iA(n){return!!n.write}function PO(n){return"v"in n||"e"in n}function Xb(n){if("e"in n)throw n.e;if((gg?"production":void 0)!=="production"&&!("v"in n))throw new Error("[Bug] atom state is not initialized");return n.v}const qb=new WeakMap;function rP(n){var e;return Yb(n)&&!!((e=qb.get(n))!=null&&e[0])}function JX(n){const e=qb.get(n);e?.[0]&&(e[0]=!1,e[1].forEach(t=>t()))}function rA(n,e){let t=qb.get(n);if(!t){t=[!0,new Set],qb.set(n,t);const i=()=>{t[0]=!1};n.then(i,i)}t[1].add(e)}function Yb(n){return typeof n?.then=="function"}function sP(n,e,t){if(!t.p.has(n)){t.p.add(n);const i=()=>t.p.delete(n);e.then(i,i)}}function aP(n,e,t){var i;const r=new Set;for(const s of((i=t.get(n))==null?void 0:i.t)||[])t.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r}const eq=(n,e,...t)=>e.read(...t),tq=(n,e,...t)=>e.write(...t),nq=(n,e)=>{var t;return(t=e.unstable_onInit)==null?void 0:t.call(e,n)},iq=(n,e,t)=>{var i;return(i=e.onMount)==null?void 0:i.call(e,t)},rq=(n,e)=>{const t=Hs(n),i=t[0],r=t[9];if((gg?"production":void 0)!=="production"&&!e)throw new Error("Atom is undefined or null");let s=i.get(e);return s||(s={d:new Map,p:new Set,n:0},i.set(e,s),r?.(n,e)),s},sq=n=>{const e=Hs(n),t=e[1],i=e[3],r=e[4],s=e[5],a=e[6],o=e[13],c=[],u=h=>{try{h()}catch(p){c.push(p)}};do{a.f&&u(a.f);const h=new Set,p=h.add.bind(h);i.forEach(g=>{var y;return(y=t.get(g))==null?void 0:y.l.forEach(p)}),i.clear(),s.forEach(p),s.clear(),r.forEach(p),r.clear(),h.forEach(u),i.size&&o(n)}while(i.size||s.size||r.size);if(c.length)throw new AggregateError(c)},aq=n=>{const e=Hs(n),t=e[1],i=e[2],r=e[3],s=e[11],a=e[14],o=e[17],c=[],u=new WeakSet,h=new WeakSet,p=Array.from(r);for(;p.length;){const g=p[p.length-1],y=s(n,g);if(h.has(g)){p.pop();continue}if(u.has(g)){if(i.get(g)===y.n)c.push([g,y]);else if((gg?"production":void 0)!=="production"&&i.has(g))throw new Error("[Bug] invalidated atom exists");h.add(g),p.pop();continue}u.add(g);for(const x of aP(g,y,t))u.has(x)||p.push(x)}for(let g=c.length-1;g>=0;--g){const[y,x]=c[g];let M=!1;for(const b of x.d.keys())if(b!==y&&r.has(b)){M=!0;break}M&&(a(n,y),o(n,y)),i.delete(y)}},oq=(n,e)=>{var t;const i=Hs(n),r=i[1],s=i[2],a=i[3],o=i[6],c=i[7],u=i[11],h=i[12],p=i[13],g=i[14],y=i[16],x=i[17],M=u(n,e);if(PO(M)&&(r.has(e)&&s.get(e)!==M.n||Array.from(M.d).every(([P,B])=>g(n,P).n===B)))return M;M.d.clear();let b=!0;function S(){r.has(e)&&(x(n,e),p(n),h(n))}function T(P){var B;if(nP(e,P)){const z=u(n,P);if(!PO(z))if(iP(P))Zb(n,P,P.init);else throw new Error("no atom init");return Xb(z)}const I=g(n,P);try{return Xb(I)}finally{M.d.set(P,I.n),rP(M.v)&&sP(e,M.v,I),(B=r.get(P))==null||B.t.add(e),b||S()}}let A,w;const D={get signal(){return A||(A=new AbortController),A.signal},get setSelf(){return(gg?"production":void 0)!=="production"&&!iA(e)&&console.warn("setSelf function cannot be used with read-only atom"),!w&&iA(e)&&(w=(...P)=>{if((gg?"production":void 0)!=="production"&&b&&console.warn("setSelf function cannot be called in sync"),!b)try{return y(n,e,...P)}finally{p(n),h(n)}}),w}},O=M.n;try{const P=c(n,e,T,D);return Zb(n,e,P),Yb(P)&&(rA(P,()=>A?.abort()),P.then(S,S)),M}catch(P){return delete M.v,M.e=P,++M.n,M}finally{b=!1,O!==M.n&&s.get(e)===O&&(s.set(e,M.n),a.add(e),(t=o.c)==null||t.call(o,e))}},lq=(n,e)=>{const t=Hs(n),i=t[1],r=t[2],s=t[11],a=[e];for(;a.length;){const o=a.pop(),c=s(n,o);for(const u of aP(o,c,i)){const h=s(n,u);r.set(u,h.n),a.push(u)}}},oP=(n,e,...t)=>{const i=Hs(n),r=i[3],s=i[6],a=i[8],o=i[11],c=i[12],u=i[13],h=i[14],p=i[15],g=i[17];let y=!0;const x=b=>Xb(h(n,b)),M=(b,...S)=>{var T;const A=o(n,b);try{if(nP(e,b)){if(!iP(b))throw new Error("atom not writable");const w=A.n,D=S[0];Zb(n,b,D),g(n,b),w!==A.n&&(r.add(b),(T=s.c)==null||T.call(s,b),p(n,b));return}else return oP(n,b,...S)}finally{y||(u(n),c(n))}};try{return a(n,e,x,M,...t)}finally{y=!1}},cq=(n,e)=>{var t;const i=Hs(n),r=i[1],s=i[3],a=i[6],o=i[11],c=i[15],u=i[18],h=i[19],p=o(n,e),g=r.get(e);if(g&&!rP(p.v)){for(const[y,x]of p.d)if(!g.d.has(y)){const M=o(n,y);u(n,y).t.add(e),g.d.add(y),x!==M.n&&(s.add(y),(t=a.c)==null||t.call(a,y),c(n,y))}for(const y of g.d||[])if(!p.d.has(y)){g.d.delete(y);const x=h(n,y);x?.t.delete(e)}}},lP=(n,e)=>{var t;const i=Hs(n),r=i[1],s=i[4],a=i[6],o=i[10],c=i[11],u=i[12],h=i[13],p=i[14],g=i[16],y=c(n,e);let x=r.get(e);if(!x){p(n,e);for(const M of y.d.keys())lP(n,M).t.add(e);if(x={l:new Set,d:new Set(y.d.keys()),t:new Set},r.set(e,x),(t=a.m)==null||t.call(a,e),iA(e)){const M=()=>{let b=!0;const S=(...T)=>{try{return g(n,e,...T)}finally{b||(h(n),u(n))}};try{const T=o(n,e,S);T&&(x.u=()=>{b=!0;try{T()}finally{b=!1}})}finally{b=!1}};s.add(M)}}return x},uq=(n,e)=>{var t;const i=Hs(n),r=i[1],s=i[5],a=i[6],o=i[11],c=i[19],u=o(n,e);let h=r.get(e);if(h&&!h.l.size&&!Array.from(h.t).some(p=>{var g;return(g=r.get(p))==null?void 0:g.d.has(e)})){h.u&&s.add(h.u),h=void 0,r.delete(e),(t=a.u)==null||t.call(a,e);for(const p of u.d.keys()){const g=c(n,p);g?.t.delete(e)}return}return h},Zb=(n,e,t)=>{const i=Hs(n)[11],r=i(n,e),s="v"in r,a=r.v;if(Yb(t))for(const o of r.d.keys())sP(e,t,i(n,o));r.v=t,delete r.e,(!s||!Object.is(a,r.v))&&(++r.n,Yb(a)&&JX(a))},fq=(n,e)=>{const t=Hs(n)[14];return Xb(t(n,e))},hq=(n,e,...t)=>{const i=Hs(n),r=i[12],s=i[13],a=i[16];try{return a(n,e,...t)}finally{s(n),r(n)}},dq=(n,e,t)=>{const i=Hs(n),r=i[12],s=i[18],a=i[19],c=s(n,e).l;return c.add(t),r(n),()=>{c.delete(t),a(n,e),r(n)}},cP=new WeakMap;function Hs(n){const e=cP.get(n);if((gg?"production":void 0)!=="production"&&!e)throw new Error("Store must be created by buildStore to read its building blocks");return e}function pq(...n){const e={get(i){const r=Hs(e)[21];return r(e,i)},set(i,...r){const s=Hs(e)[22];return s(e,i,...r)},sub(i,r){const s=Hs(e)[23];return s(e,i,r)}},t=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},eq,tq,nq,iq,rq,sq,aq,oq,lq,oP,cq,lP,uq,Zb,fq,hq,dq].map((i,r)=>n[r]||i);return cP.set(e,Object.freeze(t)),e}const uP={};let mq=0;function Fy(n,e){const t=`atom${++mq}`,i={toString(){return(uP?"production":void 0)!=="production"&&this.debugLabel?t+":"+this.debugLabel:t}};return typeof n=="function"?i.read=n:(i.init=n,i.read=gq,i.write=vq),i}function gq(n){return n(this)}function vq(n,e,t){return e(this,typeof t=="function"?t(n(this)):t)}function yq(){return pq()}let dv;function _q(){return dv||(dv=yq(),(uP?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=dv),globalThis.__JOTAI_DEFAULT_STORE__!==dv&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),dv}const xq={},bq=L.createContext(void 0);function fP(n){return L.useContext(bq)||_q()}const sA=n=>typeof n?.then=="function",aA=n=>{n.status||(n.status="pending",n.then(e=>{n.status="fulfilled",n.value=e},e=>{n.status="rejected",n.reason=e}))},Sq=de.use||(n=>{if(n.status==="pending")throw n;if(n.status==="fulfilled")return n.value;throw n.status==="rejected"?n.reason:(aA(n),n)}),HM=new WeakMap,IO=(n,e)=>{let t=HM.get(n);return t||(t=new Promise((i,r)=>{let s=n;const a=u=>h=>{s===u&&i(h)},o=u=>h=>{s===u&&r(h)},c=()=>{try{const u=e();sA(u)?(HM.set(u,t),s=u,u.then(a(u),o(u)),rA(u,c)):i(u)}catch(u){r(u)}};n.then(a(n),o(n)),rA(n,c)}),HM.set(n,t)),t};function $d(n,e){const{delay:t,unstable_promiseStatus:i=!de.use}={},r=fP(),[[s,a,o],c]=L.useReducer(h=>{const p=r.get(n);return Object.is(h[0],p)&&h[1]===r&&h[2]===n?h:[p,r,n]},void 0,()=>[r.get(n),r,n]);let u=s;if((a!==r||o!==n)&&(c(),u=r.get(n)),L.useEffect(()=>{const h=r.sub(n,()=>{if(i)try{const p=r.get(n);sA(p)&&aA(IO(p,()=>r.get(n)))}catch{}if(typeof t=="number"){setTimeout(c,t);return}c()});return c(),h},[r,n,t,i]),L.useDebugValue(u),sA(u)){const h=IO(u,()=>r.get(n));return i&&aA(h),Sq(h)}return u}function Kb(n,e){const t=fP();return L.useCallback((...r)=>{if((xq?"production":void 0)!=="production"&&!("write"in n))throw new Error("not writable atom");return t.set(n,...r)},[t,n])}function BO(n,e){return[$d(n),Kb(n)]}var cE=Y5();const hP=fh(cE);function Eq(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function dP(...n){return e=>n.forEach(t=>Eq(t,e))}function wg(...n){return L.useCallback(dP(...n),n)}const pP=L.forwardRef((n,e)=>{const{children:t,...i}=n,r=L.Children.toArray(t),s=r.find(Mq);if(s){const a=s.props.children,o=r.map(c=>c===s?L.Children.count(a)>1?L.Children.only(null):L.isValidElement(a)?a.props.children:null:c);return L.createElement(oA,Gn({},i,{ref:e}),L.isValidElement(a)?L.cloneElement(a,void 0,o):null)}return L.createElement(oA,Gn({},i,{ref:e}),t)});pP.displayName="Slot";const oA=L.forwardRef((n,e)=>{const{children:t,...i}=n;return L.isValidElement(t)?L.cloneElement(t,{...Tq(i,t.props),ref:dP(e,t.ref)}):L.Children.count(t)>1?L.Children.only(null):null});oA.displayName="SlotClone";const mP=({children:n})=>L.createElement(L.Fragment,null,n);function Mq(n){return L.isValidElement(n)&&n.type===mP}function Tq(n,e){const t={...e};for(const i in e){const r=n[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?t[i]=(...o)=>{s(...o),r(...o)}:r&&(t[i]=r):i==="style"?t[i]={...r,...s}:i==="className"&&(t[i]=[r,s].filter(Boolean).join(" "))}return{...n,...t}}const Aq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],oh=Aq.reduce((n,e)=>{const t=L.forwardRef((i,r)=>{const{asChild:s,...a}=i,o=s?pP:e;return L.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),L.createElement(o,Gn({},a,{ref:r}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function wq(n,e){n&&cE.flushSync(()=>n.dispatchEvent(e))}const Cq=L.forwardRef((n,e)=>{var t;const{container:i=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...r}=n;return i?hP.createPortal(L.createElement(oh.div,Gn({},r,{ref:e})),i):null}),Rq=Cq;var zO=Object.prototype.hasOwnProperty;function fy(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&fy(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(zO.call(n,t)&&++i&&!zO.call(e,t)||!(t in e)||!fy(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function uE(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}var fE=function(e,t,i,r){this.name=e,this.fn=t,this.args=i,this.modifiers=r};fE.prototype._test=function(e){var t=this.fn;try{ng(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return ng(this.modifiers.slice(),t,this)(e)}catch{return!1}};fE.prototype._check=function(e){try{ng(this.modifiers.slice(),this.fn,this)(e)}catch{if(ng(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!ng(this.modifiers.slice(),this.fn,this)(e))throw null};fE.prototype._testAsync=function(e){var t=this;return new Promise(function(i,r){vP(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?i(e):r(null)}).catch(function(s){return r(s)})})};function gP(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function ng(n,e,t){if(n.length){var i=n.shift(),r=ng(n,e,t);return i.perform(r,t)}else return gP(e)}function vP(n,e,t){if(n.length){var i=n.shift(),r=vP(n,e,t);return i.performAsync(r,t)}else return function(s){return Promise.resolve(gP(e,"async")(s))}}var Oq=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},rC=(function(n){function e(t,i,r,s){for(var a=[],o=arguments.length-4;o-- >0;)a[o]=arguments[o+4];n.call(this,a),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=i,this.cause=r,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e})(Error),Wc=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Wc.prototype._applyRule=function(e,t){var i=this;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return i.chain.push(new fE(t,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}};Wc.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new Oq(t,e.simple,e.async)),this};Wc.prototype._clone=function(){return new Wc(this.chain.slice(),this.nextRuleModifiers.slice())};Wc.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};Wc.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){t.push(new rC(i,e,r))}}),t};Wc.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new rC(t,e,i)}})};Wc.prototype.testAsync=function(e){var t=this;return new Promise(function(i,r){yP(e,t.chain.slice(),i,r)})};function yP(n,e,t,i){if(e.length){var r=e.shift();r._testAsync(n).then(function(){yP(n,e,t,i)},function(s){i(new rC(r,n,s))})}else t(n)}var FO=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function Dq(n,e){return e===void 0&&(e=!1),{simple:function(t){return FO(t,e)||n.check(t)===void 0},async:function(t){return FO(t,e)||n.testAsync(t)}}}function Va(){return typeof Proxy<"u"?_P(new Wc):lA(new Wc)}var hy={};Va.extend=function(n){Object.assign(hy,n)};Va.clearCustomRules=function(){hy={}};function _P(n){return new Proxy(n,{get:function(t,i){if(i in t)return t[i];var r=_P(n._clone());if(i in $b)return r._applyModifier($b[i],i);if(i in hy)return r._applyRule(hy[i],i);if(i in cA)return r._applyRule(cA[i],i)}})}function lA(n){var e=function(r,s){return Object.keys(r).forEach(function(a){s[a]=function(){for(var o=[],c=arguments.length;c--;)o[c]=arguments[c];var u=lA(s._clone()),h=u._applyRule(r[a],a).apply(void 0,o);return h}}),s},t=e(cA,n),i=e(hy,t);return Object.keys($b).forEach(function(r){Object.defineProperty(i,r,{get:function(){var s=lA(i._clone());return s._applyModifier($b[r],r)}})}),i}var $b={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return bx(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(bx(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&bx(e).every(n)}},async:function(n){return function(e){return Promise.all(bx(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return HO(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(i){return HO(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i:i}).catch(function(){return!1})}}}};function HO(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function bx(n){return typeof n=="string"?n.split(""):n}var cA={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||Uq;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return Bm("string")},boolean:function(){return Bm("boolean")},undefined:function(){return Bm("undefined")},null:function(){return Bm("null")},array:function(){return Bm("array")},object:function(){return Bm("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return Lq(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(i){return i.test(t)})}},optional:Dq};function Bm(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function Uq(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function Lq(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(i){var r=n[i];try{r.check((e||{})[i])}catch(s){s.target=i,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],i=Object.keys(n).map(function(r){var s=n[r];return s.testAsync((e||{})[r]).catch(function(a){a.target=r,t.push(a)})});return Promise.all(i).then(function(){if(t.length>0)throw t;return!0})}}}var Oi="colors",la="sizes",jt="space",Nq={gap:jt,gridGap:jt,columnGap:jt,gridColumnGap:jt,rowGap:jt,gridRowGap:jt,inset:jt,insetBlock:jt,insetBlockEnd:jt,insetBlockStart:jt,insetInline:jt,insetInlineEnd:jt,insetInlineStart:jt,margin:jt,marginTop:jt,marginRight:jt,marginBottom:jt,marginLeft:jt,marginBlock:jt,marginBlockEnd:jt,marginBlockStart:jt,marginInline:jt,marginInlineEnd:jt,marginInlineStart:jt,padding:jt,paddingTop:jt,paddingRight:jt,paddingBottom:jt,paddingLeft:jt,paddingBlock:jt,paddingBlockEnd:jt,paddingBlockStart:jt,paddingInline:jt,paddingInlineEnd:jt,paddingInlineStart:jt,top:jt,right:jt,bottom:jt,left:jt,scrollMargin:jt,scrollMarginTop:jt,scrollMarginRight:jt,scrollMarginBottom:jt,scrollMarginLeft:jt,scrollMarginX:jt,scrollMarginY:jt,scrollMarginBlock:jt,scrollMarginBlockEnd:jt,scrollMarginBlockStart:jt,scrollMarginInline:jt,scrollMarginInlineEnd:jt,scrollMarginInlineStart:jt,scrollPadding:jt,scrollPaddingTop:jt,scrollPaddingRight:jt,scrollPaddingBottom:jt,scrollPaddingLeft:jt,scrollPaddingX:jt,scrollPaddingY:jt,scrollPaddingBlock:jt,scrollPaddingBlockEnd:jt,scrollPaddingBlockStart:jt,scrollPaddingInline:jt,scrollPaddingInlineEnd:jt,scrollPaddingInlineStart:jt,fontSize:"fontSizes",background:Oi,backgroundColor:Oi,backgroundImage:Oi,borderImage:Oi,border:Oi,borderBlock:Oi,borderBlockEnd:Oi,borderBlockStart:Oi,borderBottom:Oi,borderBottomColor:Oi,borderColor:Oi,borderInline:Oi,borderInlineEnd:Oi,borderInlineStart:Oi,borderLeft:Oi,borderLeftColor:Oi,borderRight:Oi,borderRightColor:Oi,borderTop:Oi,borderTopColor:Oi,caretColor:Oi,color:Oi,columnRuleColor:Oi,fill:Oi,outline:Oi,outlineColor:Oi,stroke:Oi,textDecorationColor:Oi,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:la,minBlockSize:la,maxBlockSize:la,inlineSize:la,minInlineSize:la,maxInlineSize:la,width:la,minWidth:la,maxWidth:la,height:la,minHeight:la,maxHeight:la,flexBasis:la,gridTemplateColumns:la,gridTemplateRows:la,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},Pq=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Cg=()=>{const n=Object.create(null);return(e,t,...i)=>{const r=(s=>JSON.stringify(s,Pq))(e);return r in n?n[r]:n[r]=t(e,...i)}},kd=Symbol.for("sxs.internal"),sC=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),kO=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:Iq}=Object.prototype,uA=n=>n.includes("-")?n:n.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),Bq=/\s+(?![^()]*\))/,zm=n=>e=>n(...typeof e=="string"?String(e).split(Bq):[e]),GO={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:zm(((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n}))),marginInline:zm(((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n}))),maxSize:zm(((n,e)=>({maxBlockSize:n,maxInlineSize:e||n}))),minSize:zm(((n,e)=>({minBlockSize:n,minInlineSize:e||n}))),paddingBlock:zm(((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n}))),paddingInline:zm(((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n})))},kM=/([\d.]+)([^]*)/,zq=(n,e)=>n.length?n.reduce(((t,i)=>(t.push(...e.map((r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r))),t)),[]):e,Fq=(n,e)=>n in Hq&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,((t,i,r,s)=>i+(r==="stretch"?`-moz-available${s};${uA(n)}:${i}-webkit-fill-available`:`-moz-fit-content${s};${uA(n)}:${i}fit-content`)+s)):String(e),Hq={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Gu=n=>n?n+"-":"",xP=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,((i,r,s,a,o)=>a=="$"==!!s?i:(r||a=="--"?"calc(":"")+"var(--"+(a==="$"?Gu(e)+(o.includes("$")?"":Gu(t))+o.replace(/\$/g,"-"):o)+")"+(r||a=="--"?"*"+(r||"")+(s||"1")+")":""))),kq=/\s*,\s*(?![^()]*\))/,Gq=Object.prototype.toString,Km=(n,e,t,i,r)=>{let s,a,o;const c=(u,h,p)=>{let g,y;const x=M=>{for(g in M){const T=g.charCodeAt(0)===64,A=T&&Array.isArray(M[g])?M[g]:[M[g]];for(y of A){const w=/[A-Z]/.test(S=g)?S:S.replace(/-[^]/g,(O=>O[1].toUpperCase())),D=typeof y=="object"&&y&&y.toString===Gq&&(!i.utils[w]||!h.length);if(w in i.utils&&!D){const O=i.utils[w];if(O!==a){a=O,x(O(y)),a=null;continue}}else if(w in GO){const O=GO[w];if(O!==o){o=O,x(O(y)),o=null;continue}}if(T&&(b=g.slice(1)in i.media?"@media "+i.media[g.slice(1)]:g,g=b.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,((O,P,B,I,z,k)=>{const V=kM.test(P),j=.0625*(V?-1:1),[W,te]=V?[I,P]:[P,I];return"("+(B[0]==="="?"":B[0]===">"===V?"max-":"min-")+W+":"+(B[0]!=="="&&B.length===1?te.replace(kM,((H,Q,ne)=>Number(Q)+j*(B===">"?1:-1)+ne)):te)+(z?") and ("+(z[0]===">"?"min-":"max-")+W+":"+(z.length===1?k.replace(kM,((H,Q,ne)=>Number(Q)+j*(z===">"?-1:1)+ne)):k):"")+")"}))),D){const O=T?p.concat(g):[...p],P=T?[...h]:zq(h,g.split(kq));s!==void 0&&r(VO(...s)),s=void 0,c(y,P,O)}else s===void 0&&(s=[[],h,p]),g=T||g.charCodeAt(0)!==36?g:`--${Gu(i.prefix)}${g.slice(1).replace(/\$/g,"-")}`,y=D?y:typeof y=="number"?y&&w in Vq?String(y)+"px":String(y):xP(Fq(w,y??""),i.prefix,i.themeMap[w]),s[0].push(`${T?`${g} `:`${uA(g)}:`}${y}`)}}var b,S};x(u),s!==void 0&&r(VO(...s)),s=void 0};c(n,e,t)},VO=(n,e,t)=>`${t.map((i=>`${i}{`)).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,Vq={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},jO=n=>String.fromCharCode(n+(n>25?39:97)),Gd=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=jO(t%52)+i;return jO(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),Ov=["themed","global","styled","onevar","resonevar","allvar","inline"],jq=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},Wq=n=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,((s,a)=>{const{cssText:o}=s;let c="";if(o.startsWith("--sxs"))return"";if(r[a-1]&&(c=r[a-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===s)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${o}`;return s.cssRules.length?`${c}${o}`:""}return o})).join("")},i=()=>{if(e){const{rules:o,sheet:c}=e;if(!c.deleteRule){for(;Object(Object(c.cssRules)[0]).type===3;)c.cssRules.splice(0,1);c.cssRules=[]}for(const u in o)delete o[u]}const r=Object(n).styleSheets||[];for(const o of r)if(jq(o)){for(let c=0,u=o.cssRules;u[c];++c){const h=Object(u[c]);if(h.type!==1)continue;const p=Object(u[c+1]);if(p.type!==4)continue;++c;const{cssText:g}=h;if(!g.startsWith("--sxs"))continue;const y=g.slice(14,-3).trim().split(/\s+/),x=Ov[y[0]];x&&(e||(e={sheet:o,reset:i,rules:{},toString:t}),e.rules[x]={group:p,index:c,cache:new Set(y)})}if(e)break}if(!e){const o=(c,u)=>({type:u,cssRules:[],insertRule(h,p){this.cssRules.splice(p,0,o(h,{import:3,undefined:1}[(h.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return c==="@media{}"?`@media{${[].map.call(this.cssRules,(h=>h.cssText)).join("")}}`:c}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:o("","text/css"),rules:{},reset:i,toString:t}}const{sheet:s,rules:a}=e;for(let o=Ov.length-1;o>=0;--o){const c=Ov[o];if(!a[c]){const u=Ov[o+1],h=a[u]?a[u].index:s.cssRules.length;s.insertRule("@media{}",h),s.insertRule(`--sxs{--sxs:${o}}`,h),a[c]={group:s.cssRules[h+1],index:h,cache:new Set([o])}}Xq(a[c])}};return i(),e},Xq=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},pv=Symbol(),qq=Cg(),WO=(n,e)=>qq(n,(()=>(...t)=>{let i={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[kd]){i.type==null&&(i.type=r[kd].type);for(const s of r[kd].composers)i.composers.add(s)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(Yq(r,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),Zq(n,i,e)})),Yq=({variants:n,compoundVariants:e,defaultVariants:t,...i},r)=>{const s=`${Gu(r.prefix)}c-${Gd(i)}`,a=[],o=[],c=Object.create(null),u=[];for(const g in t)c[g]=String(t[g]);if(typeof n=="object"&&n)for(const g in n){h=c,p=g,Iq.call(h,p)||(c[g]="undefined");const y=n[g];for(const x in y){const M={[g]:String(x)};String(x)==="undefined"&&u.push(g);const b=y[x],S=[M,b,!kO(b)];a.push(S)}}var h,p;if(typeof e=="object"&&e)for(const g of e){let{css:y,...x}=g;y=typeof y=="object"&&y||{};for(const b in x)x[b]=String(x[b]);const M=[x,y,!kO(y)];o.push(M)}return[s,i,a,o,c,u]},Zq=(n,e,t)=>{const[i,r,s,a]=Kq(e.composers),o=typeof e.type=="function"||e.type.$$typeof?(p=>{function g(){for(let y=0;y<g[pv].length;y++){const[x,M]=g[pv][y];p.rules[x].apply(M)}return g[pv]=[],null}return g[pv]=[],g.rules={},Ov.forEach((y=>g.rules[y]={apply:x=>g[pv].push([y,x])})),g})(t):null,c=(o||t).rules,u=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,h=p=>{p=typeof p=="object"&&p||$q;const{css:g,...y}=p,x={};for(const S in s)if(delete y[S],S in p){let T=p[S];typeof T=="object"&&T?x[S]={"@initial":s[S],...T}:(T=String(T),x[S]=T!=="undefined"||a.has(S)?T:s[S])}else x[S]=s[S];const M=new Set([...r]);for(const[S,T,A,w]of e.composers){t.rules.styled.cache.has(S)||(t.rules.styled.cache.add(S),Km(T,[`.${S}`],[],n,(P=>{c.styled.apply(P)})));const D=XO(A,x,n.media),O=XO(w,x,n.media,!0);for(const P of D)if(P!==void 0)for(const[B,I,z]of P){const k=`${S}-${Gd(I)}-${B}`;M.add(k);const V=(z?t.rules.resonevar:t.rules.onevar).cache,j=z?c.resonevar:c.onevar;V.has(k)||(V.add(k),Km(I,[`.${k}`],[],n,(W=>{j.apply(W)})))}for(const P of O)if(P!==void 0)for(const[B,I]of P){const z=`${S}-${Gd(I)}-${B}`;M.add(z),t.rules.allvar.cache.has(z)||(t.rules.allvar.cache.add(z),Km(I,[`.${z}`],[],n,(k=>{c.allvar.apply(k)})))}}if(typeof g=="object"&&g){const S=`${i}-i${Gd(g)}-css`;M.add(S),t.rules.inline.cache.has(S)||(t.rules.inline.cache.add(S),Km(g,[`.${S}`],[],n,(T=>{c.inline.apply(T)})))}for(const S of String(p.className||"").trim().split(/\s+/))S&&M.add(S);const b=y.className=[...M].join(" ");return{type:e.type,className:b,selector:u,props:y,toString:()=>b,deferredInjector:o}};return sC(h,{className:i,selector:u,[kd]:e,toString:()=>(t.rules.styled.cache.has(i)||h(),i)})},Kq=n=>{let e="";const t=[],i={},r=[];for(const[s,,,,a,o]of n){e===""&&(e=s),t.push(s),r.push(...o);for(const c in a){const u=a[c];(i[c]===void 0||u!=="undefined"||o.includes(u))&&(i[c]=u)}}return[e,t,i,new Set(r)]},XO=(n,e,t,i)=>{const r=[];e:for(let[s,a,o]of n){if(o)continue;let c,u=0,h=!1;for(c in s){const p=s[c];let g=e[c];if(g!==p){if(typeof g!="object"||!g)continue e;{let y,x,M=0;for(const b in g){if(p===String(g[b])){if(b!=="@initial"){const S=b.slice(1);(x=x||[]).push(S in t?t[S]:b.replace(/^@media ?/,"")),h=!0}u+=M,y=!0}++M}if(x&&x.length&&(a={["@media "+x.join(", ")]:a}),!y)continue e}}}(r[u]=r[u]||[]).push([i?"cv":`${c}-${s[c]}`,a,h])}return r},$q={},Qq=Cg(),Jq=(n,e)=>Qq(n,(()=>(...t)=>{const i=()=>{for(let r of t){r=typeof r=="object"&&r||{};let s=Gd(r);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in r){let a=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let o of[].concat(r["@import"]))o=o.includes('"')||o.includes("'")?o:`"${o}"`,e.sheet.insertRule(`@import ${o};`,a++);delete r["@import"]}Km(r,[],[],n,(a=>{e.rules.global.apply(a)}))}}return""};return sC(i,{toString:i})})),eY=Cg(),tY=(n,e)=>eY(n,(()=>t=>{const i=`${Gu(n.prefix)}k-${Gd(t)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const s=[];Km(t,[],[],n,(o=>s.push(o)));const a=`@keyframes ${i}{${s.join("")}}`;e.rules.global.apply(a)}return i};return sC(r,{get name(){return r()},toString:r})})),nY=class{constructor(n,e,t,i){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Gu(this.prefix)+Gu(this.scale)+this.token}toString(){return this.computedValue}},iY=Cg(),rY=(n,e)=>iY(n,(()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const r=`.${t=(t=typeof t=="string"?t:"")||`${Gu(n.prefix)}t-${Gd(i)}`}`,s={},a=[];for(const c in i){s[c]={};for(const u in i[c]){const h=`--${Gu(n.prefix)}${c}-${u}`,p=xP(String(i[c][u]),n.prefix,c);s[c][u]=new nY(u,p,c,n.prefix),a.push(`${h}:${p}`)}}const o=()=>{if(a.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const c=`${i===n.theme?":root,":""}.${t}{${a.join(";")}}`;e.rules.themed.apply(c)}return t};return{...s,get className(){return o()},selector:r,toString:o}})),sY=Cg(),qO,aY=Cg(),bP=n=>{const e=(t=>{let i=!1;const r=sY(t,(s=>{i=!0;const a="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",o=typeof s.media=="object"&&s.media||{},c=typeof s.root=="object"?s.root||null:globalThis.document||null,u=typeof s.theme=="object"&&s.theme||{},h={prefix:a,media:o,theme:u,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...Nq},utils:typeof s.utils=="object"&&s.utils||{}},p=Wq(c),g={css:WO(h,p),globalCss:Jq(h,p),keyframes:tY(h,p),createTheme:rY(h,p),reset(){p.reset(),g.theme.toString()},theme:{},sheet:p,config:h,prefix:a,getCssText:p.toString,toString:p.toString};return String(g.theme=g.createTheme(u)),g}));return i||r.reset(),r})(n);return e.styled=(({config:t,sheet:i})=>aY(t,(()=>{const r=WO(t,i);return(...s)=>{const a=r(...s),o=a[kd].type,c=de.forwardRef(((u,h)=>{const p=u&&u.as||o,{props:g,deferredInjector:y}=a(u);return delete g.as,g.ref=h,y?de.createElement(de.Fragment,null,de.createElement(p,g),de.createElement(y,null)):de.createElement(p,g)}));return c.className=a.className,c.displayName=`Styled.${o.displayName||o.name||o}`,c.selector=a.selector,c.toString=()=>a.selector,c[kd]=a[kd],c}})))(e),e},oY=()=>qO||(qO=bP()),$r=(...n)=>oY().styled(...n);function Ou(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n?.(r),t===!1||!r.defaultPrevented)return e?.(r)}}function SP(n,e=[]){let t=[];function i(s,a){const o=L.createContext(a),c=t.length;t=[...t,a];function u(p){const{scope:g,children:y,...x}=p,M=g?.[n][c]||o,b=L.useMemo(()=>x,Object.values(x));return L.createElement(M.Provider,{value:b},y)}function h(p,g){const y=g?.[n][c]||o,x=L.useContext(y);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,h]}const r=()=>{const s=t.map(a=>L.createContext(a));return function(o){const c=o?.[n]||s;return L.useMemo(()=>({[`__scope${n}`]:{...o,[n]:c}}),[o,c])}};return r.scopeName=n,[i,lY(r,...e)]}function lY(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const a=i.reduce((o,{useScope:c,scopeName:u})=>{const p=c(s)[`__scope${u}`];return{...o,...p}},{});return L.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function Rg(n){const e=L.useRef(n);return L.useEffect(()=>{e.current=n}),L.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])}function cY(n,e=globalThis?.document){const t=Rg(n);L.useEffect(()=>{const i=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[t,e])}const fA="dismissableLayer.update",uY="dismissableLayer.pointerDownOutside",fY="dismissableLayer.focusOutside";let YO;const hY=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dY=L.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:c,...u}=n,h=L.useContext(hY),[p,g]=L.useState(null),y=(t=p?.ownerDocument)!==null&&t!==void 0?t:globalThis?.document,[,x]=L.useState({}),M=wg(e,B=>g(B)),b=Array.from(h.layers),[S]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),T=b.indexOf(S),A=p?b.indexOf(p):-1,w=h.layersWithOutsidePointerEventsDisabled.size>0,D=A>=T,O=pY(B=>{const I=B.target,z=[...h.branches].some(k=>k.contains(I));!D||z||(s?.(B),o?.(B),B.defaultPrevented||c?.())},y),P=mY(B=>{const I=B.target;[...h.branches].some(k=>k.contains(I))||(a?.(B),o?.(B),B.defaultPrevented||c?.())},y);return cY(B=>{A===h.layers.size-1&&(r?.(B),!B.defaultPrevented&&c&&(B.preventDefault(),c()))},y),L.useEffect(()=>{if(p)return i&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(YO=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),ZO(),()=>{i&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=YO)}},[p,y,i,h]),L.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),ZO())},[p,h]),L.useEffect(()=>{const B=()=>x({});return document.addEventListener(fA,B),()=>document.removeEventListener(fA,B)},[]),L.createElement(oh.div,Gn({},u,{ref:M,style:{pointerEvents:w?D?"auto":"none":void 0,...n.style},onFocusCapture:Ou(n.onFocusCapture,P.onFocusCapture),onBlurCapture:Ou(n.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Ou(n.onPointerDownCapture,O.onPointerDownCapture)}))});function pY(n,e=globalThis?.document){const t=Rg(n),i=L.useRef(!1),r=L.useRef(()=>{});return L.useEffect(()=>{const s=o=>{if(o.target&&!i.current){let h=function(){EP(uY,t,u,{discrete:!0})};var c=h;const u={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=h,e.addEventListener("click",r.current,{once:!0})):h()}i.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function mY(n,e=globalThis?.document){const t=Rg(n),i=L.useRef(!1);return L.useEffect(()=>{const r=s=>{s.target&&!i.current&&EP(fY,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function ZO(){const n=new CustomEvent(fA);document.dispatchEvent(n)}function EP(n,e,t,{discrete:i}){const r=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?wq(r,s):r.dispatchEvent(s)}const Kf=globalThis?.document?L.useLayoutEffect:()=>{},gY=m8.useId||(()=>{});let vY=0;function yY(n){const[e,t]=L.useState(gY());return Kf(()=>{t(i=>i??String(vY++))},[n]),e?`radix-${e}`:""}function ap(n){return n.split("-")[0]}function Hy(n){return n.split("-")[1]}function Og(n){return["top","bottom"].includes(ap(n))?"x":"y"}function aC(n){return n==="y"?"height":"width"}function KO(n,e,t){let{reference:i,floating:r}=n;const s=i.x+i.width/2-r.width/2,a=i.y+i.height/2-r.height/2,o=Og(e),c=aC(o),u=i[c]/2-r[c]/2,h=o==="x";let p;switch(ap(e)){case"top":p={x:s,y:i.y-r.height};break;case"bottom":p={x:s,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:a};break;case"left":p={x:i.x-r.width,y:a};break;default:p={x:i.x,y:i.y}}switch(Hy(e)){case"start":p[o]-=u*(t&&h?-1:1);break;case"end":p[o]+=u*(t&&h?-1:1)}return p}const _Y=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:a}=t,o=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:n,floating:e,strategy:r}),{x:u,y:h}=KO(c,i,o),p=i,g={},y=0;for(let x=0;x<s.length;x++){const{name:M,fn:b}=s[x],{x:S,y:T,data:A,reset:w}=await b({x:u,y:h,initialPlacement:i,placement:p,strategy:r,middlewareData:g,rects:c,platform:a,elements:{reference:n,floating:e}});u=S??u,h=T??h,g={...g,[M]:{...g[M],...A}},w&&y<=50&&(y++,typeof w=="object"&&(w.placement&&(p=w.placement),w.rects&&(c=w.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:r}):w.rects),{x:u,y:h}=KO(c,p,o)),x=-1)}return{x:u,y:h,placement:p,strategy:r,middlewareData:g}};function MP(n){return typeof n!="number"?(function(e){return{top:0,right:0,bottom:0,left:0,...e}})(n):{top:n,right:n,bottom:n,left:n}}function Qb(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}async function dy(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:a,elements:o,strategy:c}=n,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:g=!1,padding:y=0}=e,x=MP(y),M=o[g?p==="floating"?"reference":"floating":p],b=Qb(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(M)))==null||t?M:M.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:u,rootBoundary:h,strategy:c})),S=Qb(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:p==="floating"?{...a.floating,x:i,y:r}:a.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),strategy:c}):a[p]);return{top:b.top-S.top+x.top,bottom:S.bottom-b.bottom+x.bottom,left:b.left-S.left+x.left,right:S.right-b.right+x.right}}const xY=Math.min,Td=Math.max;function hA(n,e,t){return Td(n,xY(e,t))}const $O=n=>({name:"arrow",options:n,async fn(e){const{element:t,padding:i=0}=n??{},{x:r,y:s,placement:a,rects:o,platform:c}=e;if(t==null)return{};const u=MP(i),h={x:r,y:s},p=Og(a),g=Hy(a),y=aC(p),x=await c.getDimensions(t),M=p==="y"?"top":"left",b=p==="y"?"bottom":"right",S=o.reference[y]+o.reference[p]-h[p]-o.floating[y],T=h[p]-o.reference[p],A=await(c.getOffsetParent==null?void 0:c.getOffsetParent(t));let w=A?p==="y"?A.clientHeight||0:A.clientWidth||0:0;w===0&&(w=o.floating[y]);const D=S/2-T/2,O=u[M],P=w-x[y]-u[b],B=w/2-x[y]/2+D,I=hA(O,B,P),z=(g==="start"?u[M]:u[b])>0&&B!==I&&o.reference[y]<=o.floating[y];return{[p]:h[p]-(z?B<O?O-B:P-B:0),data:{[p]:I,centerOffset:B-I}}}}),bY={left:"right",right:"left",bottom:"top",top:"bottom"};function Jb(n){return n.replace(/left|right|bottom|top/g,(e=>bY[e]))}function SY(n,e,t){t===void 0&&(t=!1);const i=Hy(n),r=Og(n),s=aC(r);let a=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=Jb(a)),{main:a,cross:Jb(a)}}const EY={start:"end",end:"start"};function QO(n){return n.replace(/start|end/g,(e=>EY[e]))}const TP=["top","right","bottom","left"];TP.reduce(((n,e)=>n.concat(e,e+"-start",e+"-end")),[]);const MY=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:i,middlewareData:r,rects:s,initialPlacement:a,platform:o,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",flipAlignment:y=!0,...x}=n,M=ap(i),b=p||(M===a||!y?[Jb(a)]:(function(B){const I=Jb(B);return[QO(B),I,QO(I)]})(a)),S=[a,...b],T=await dy(e,x),A=[];let w=((t=r.flip)==null?void 0:t.overflows)||[];if(u&&A.push(T[M]),h){const{main:B,cross:I}=SY(i,s,await(o.isRTL==null?void 0:o.isRTL(c.floating)));A.push(T[B],T[I])}if(w=[...w,{placement:i,overflows:A}],!A.every((B=>B<=0))){var D,O;const B=((D=(O=r.flip)==null?void 0:O.index)!=null?D:0)+1,I=S[B];if(I)return{data:{index:B,overflows:w},reset:{placement:I}};let z="bottom";switch(g){case"bestFit":{var P;const k=(P=w.map((V=>[V,V.overflows.filter((j=>j>0)).reduce(((j,W)=>j+W),0)])).sort(((V,j)=>V[1]-j[1]))[0])==null?void 0:P[0].placement;k&&(z=k);break}case"initialPlacement":z=a}if(i!==z)return{reset:{placement:z}}}return{}}}};function JO(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function eD(n){return TP.some((e=>n[e]>=0))}const TY=function(n){let{strategy:e="referenceHidden",...t}=n===void 0?{}:n;return{name:"hide",async fn(i){const{rects:r}=i;switch(e){case"referenceHidden":{const s=JO(await dy(i,{...t,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:eD(s)}}}case"escaped":{const s=JO(await dy(i,{...t,altBoundary:!0}),r.floating);return{data:{escapedOffsets:s,escaped:eD(s)}}}default:return{}}}}},AY=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:i}=e,r=await(async function(s,a){const{placement:o,platform:c,elements:u}=s,h=await(c.isRTL==null?void 0:c.isRTL(u.floating)),p=ap(o),g=Hy(o),y=Og(o)==="x",x=["left","top"].includes(p)?-1:1,M=h&&y?-1:1,b=typeof a=="function"?a(s):a;let{mainAxis:S,crossAxis:T,alignmentAxis:A}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...b};return g&&typeof A=="number"&&(T=g==="end"?-1*A:A),y?{x:T*M,y:S*x}:{x:S*x,y:T*M}})(e,n);return{x:t+r.x,y:i+r.y,data:r}}}};function AP(n){return n==="x"?"y":"x"}const wY=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:b=>{let{x:S,y:T}=b;return{x:S,y:T}}},...c}=n,u={x:t,y:i},h=await dy(e,c),p=Og(ap(r)),g=AP(p);let y=u[p],x=u[g];if(s){const b=p==="y"?"bottom":"right";y=hA(y+h[p==="y"?"top":"left"],y,y-h[b])}if(a){const b=g==="y"?"bottom":"right";x=hA(x+h[g==="y"?"top":"left"],x,x-h[b])}const M=o.fn({...e,[p]:y,[g]:x});return{...M,data:{x:M.x-t,y:M.y-i}}}}},CY=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:s,middlewareData:a}=e,{offset:o=0,mainAxis:c=!0,crossAxis:u=!0}=n,h={x:t,y:i},p=Og(r),g=AP(p);let y=h[p],x=h[g];const M=typeof o=="function"?o({...s,placement:r}):o,b=typeof M=="number"?{mainAxis:M,crossAxis:0}:{mainAxis:0,crossAxis:0,...M};if(c){const D=p==="y"?"height":"width",O=s.reference[p]-s.floating[D]+b.mainAxis,P=s.reference[p]+s.reference[D]-b.mainAxis;y<O?y=O:y>P&&(y=P)}if(u){var S,T,A,w;const D=p==="y"?"width":"height",O=["top","left"].includes(ap(r)),P=s.reference[g]-s.floating[D]+(O&&(S=(T=a.offset)==null?void 0:T[g])!=null?S:0)+(O?0:b.crossAxis),B=s.reference[g]+s.reference[D]+(O?0:(A=(w=a.offset)==null?void 0:w[g])!=null?A:0)-(O?b.crossAxis:0);x<P?x=P:x>B&&(x=B)}return{[p]:y,[g]:x}}}},RY=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:i,platform:r,elements:s}=e,{apply:a,...o}=n,c=await dy(e,o),u=ap(t),h=Hy(t);let p,g;u==="top"||u==="bottom"?(p=u,g=h===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(g=u,p=h==="end"?"top":"bottom");const y=Td(c.left,0),x=Td(c.right,0),M=Td(c.top,0),b=Td(c.bottom,0),S={availableHeight:i.floating.height-(["left","right"].includes(t)?2*(M!==0||b!==0?M+b:Td(c.top,c.bottom)):c[p]),availableWidth:i.floating.width-(["top","bottom"].includes(t)?2*(y!==0||x!==0?y+x:Td(c.left,c.right)):c[g])},T=await r.getDimensions(s.floating);a?.({...e,...S});const A=await r.getDimensions(s.floating);return T.width!==A.width||T.height!==A.height?{reset:{rects:!0}}:{}}}};function wP(n){return n&&n.document&&n.location&&n.alert&&n.setInterval}function Wu(n){if(n==null)return window;if(!wP(n)){const e=n.ownerDocument;return e&&e.defaultView||window}return n}function ky(n){return Wu(n).getComputedStyle(n)}function zu(n){return wP(n)?"":n?(n.nodeName||"").toLowerCase():""}function CP(){const n=navigator.userAgentData;return n!=null&&n.brands?n.brands.map((e=>e.brand+"/"+e.version)).join(" "):navigator.userAgent}function Xc(n){return n instanceof Wu(n).HTMLElement}function lh(n){return n instanceof Wu(n).Element}function oC(n){return typeof ShadowRoot>"u"?!1:n instanceof Wu(n).ShadowRoot||n instanceof ShadowRoot}function hE(n){const{overflow:e,overflowX:t,overflowY:i}=ky(n);return/auto|scroll|overlay|hidden/.test(e+i+t)}function OY(n){return["table","td","th"].includes(zu(n))}function tD(n){const e=/firefox/i.test(CP()),t=ky(n);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"}function RP(){return!/^((?!chrome|android).)*safari/i.test(CP())}const nD=Math.min,Xv=Math.max,eS=Math.round;function Fu(n,e,t){var i,r,s,a;e===void 0&&(e=!1),t===void 0&&(t=!1);const o=n.getBoundingClientRect();let c=1,u=1;e&&Xc(n)&&(c=n.offsetWidth>0&&eS(o.width)/n.offsetWidth||1,u=n.offsetHeight>0&&eS(o.height)/n.offsetHeight||1);const h=lh(n)?Wu(n):window,p=!RP()&&t,g=(o.left+(p&&(i=(r=h.visualViewport)==null?void 0:r.offsetLeft)!=null?i:0))/c,y=(o.top+(p&&(s=(a=h.visualViewport)==null?void 0:a.offsetTop)!=null?s:0))/u,x=o.width/c,M=o.height/u;return{width:x,height:M,top:y,right:g+x,bottom:y+M,left:g,x:g,y}}function eh(n){return(e=n,(e instanceof Wu(e).Node?n.ownerDocument:n.document)||window.document).documentElement;var e}function dE(n){return lh(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function OP(n){return Fu(eh(n)).left+dE(n).scrollLeft}function DY(n,e,t){const i=Xc(e),r=eh(e),s=Fu(n,i&&(function(c){const u=Fu(c);return eS(u.width)!==c.offsetWidth||eS(u.height)!==c.offsetHeight})(e),t==="fixed");let a={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if(i||!i&&t!=="fixed")if((zu(e)!=="body"||hE(r))&&(a=dE(e)),Xc(e)){const c=Fu(e,!0);o.x=c.x+e.clientLeft,o.y=c.y+e.clientTop}else r&&(o.x=OP(r));return{x:s.left+a.scrollLeft-o.x,y:s.top+a.scrollTop-o.y,width:s.width,height:s.height}}function DP(n){return zu(n)==="html"?n:n.assignedSlot||n.parentNode||(oC(n)?n.host:null)||eh(n)}function iD(n){return Xc(n)&&getComputedStyle(n).position!=="fixed"?n.offsetParent:null}function dA(n){const e=Wu(n);let t=iD(n);for(;t&&OY(t)&&getComputedStyle(t).position==="static";)t=iD(t);return t&&(zu(t)==="html"||zu(t)==="body"&&getComputedStyle(t).position==="static"&&!tD(t))?e:t||(function(i){let r=DP(i);for(oC(r)&&(r=r.host);Xc(r)&&!["html","body"].includes(zu(r));){if(tD(r))return r;r=r.parentNode}return null})(n)||e}function rD(n){if(Xc(n))return{width:n.offsetWidth,height:n.offsetHeight};const e=Fu(n);return{width:e.width,height:e.height}}function UP(n){const e=DP(n);return["html","body","#document"].includes(zu(e))?n.ownerDocument.body:Xc(e)&&hE(e)?e:UP(e)}function tS(n,e){var t;e===void 0&&(e=[]);const i=UP(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=Wu(i),a=r?[s].concat(s.visualViewport||[],hE(i)?i:[]):i,o=e.concat(a);return r?o:o.concat(tS(a))}function sD(n,e,t){return e==="viewport"?Qb((function(i,r){const s=Wu(i),a=eh(i),o=s.visualViewport;let c=a.clientWidth,u=a.clientHeight,h=0,p=0;if(o){c=o.width,u=o.height;const g=RP();(g||!g&&r==="fixed")&&(h=o.offsetLeft,p=o.offsetTop)}return{width:c,height:u,x:h,y:p}})(n,t)):lh(e)?(function(i,r){const s=Fu(i,!1,r==="fixed"),a=s.top+i.clientTop,o=s.left+i.clientLeft;return{top:a,left:o,x:o,y:a,right:o+i.clientWidth,bottom:a+i.clientHeight,width:i.clientWidth,height:i.clientHeight}})(e,t):Qb((function(i){var r;const s=eh(i),a=dE(i),o=(r=i.ownerDocument)==null?void 0:r.body,c=Xv(s.scrollWidth,s.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),u=Xv(s.scrollHeight,s.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0);let h=-a.scrollLeft+OP(i);const p=-a.scrollTop;return ky(o||s).direction==="rtl"&&(h+=Xv(s.clientWidth,o?o.clientWidth:0)-c),{width:c,height:u,x:h,y:p}})(eh(n)))}function UY(n){const e=tS(n),t=["absolute","fixed"].includes(ky(n).position)&&Xc(n)?dA(n):n;return lh(t)?e.filter((i=>lh(i)&&(function(r,s){const a=s.getRootNode==null?void 0:s.getRootNode();if(r.contains(s))return!0;if(a&&oC(a)){let o=s;do{if(o&&r===o)return!0;o=o.parentNode||o.host}while(o)}return!1})(i,t)&&zu(i)!=="body")):[]}const LY={getClippingRect:function(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const s=[...t==="clippingAncestors"?UY(e):[].concat(t),i],a=s[0],o=s.reduce(((c,u)=>{const h=sD(e,u,r);return c.top=Xv(h.top,c.top),c.right=nD(h.right,c.right),c.bottom=nD(h.bottom,c.bottom),c.left=Xv(h.left,c.left),c}),sD(e,a,r));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(n){let{rect:e,offsetParent:t,strategy:i}=n;const r=Xc(t),s=eh(t);if(t===s)return e;let a={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if((r||!r&&i!=="fixed")&&((zu(t)!=="body"||hE(s))&&(a=dE(t)),Xc(t))){const c=Fu(t,!0);o.x=c.x+t.clientLeft,o.y=c.y+t.clientTop}return{...e,x:e.x-a.scrollLeft+o.x,y:e.y-a.scrollTop+o.y}},isElement:lh,getDimensions:rD,getOffsetParent:dA,getDocumentElement:eh,getElementRects:n=>{let{reference:e,floating:t,strategy:i}=n;return{reference:DY(e,dA(t),i),floating:{...rD(t),x:0,y:0}}},getClientRects:n=>Array.from(n.getClientRects()),isRTL:n=>ky(n).direction==="rtl"};function NY(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=!0,animationFrame:o=!1}=i,c=r&&!o,u=s&&!o,h=c||u?[...lh(n)?tS(n):[],...tS(e)]:[];h.forEach((x=>{c&&x.addEventListener("scroll",t,{passive:!0}),u&&x.addEventListener("resize",t)}));let p,g=null;if(a){let x=!0;g=new ResizeObserver((()=>{x||t(),x=!1})),lh(n)&&!o&&g.observe(n),g.observe(e)}let y=o?Fu(n):null;return o&&(function x(){const M=Fu(n);!y||M.x===y.x&&M.y===y.y&&M.width===y.width&&M.height===y.height||t(),y=M,p=requestAnimationFrame(x)})(),t(),()=>{var x;h.forEach((M=>{c&&M.removeEventListener("scroll",t),u&&M.removeEventListener("resize",t)})),(x=g)==null||x.disconnect(),g=null,o&&cancelAnimationFrame(p)}}const PY=(n,e,t)=>_Y(n,e,{platform:LY,...t});var pA=typeof document<"u"?L.useLayoutEffect:L.useEffect;function mA(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(!mA(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const s=r[i];if(!(s==="_owner"&&n.$$typeof)&&!mA(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function IY(n){const e=L.useRef(n);return pA(()=>{e.current=n}),e}function BY(n){let{middleware:e,placement:t="bottom",strategy:i="absolute",whileElementsMounted:r}=n===void 0?{}:n;const s=L.useRef(null),a=L.useRef(null),o=IY(r),c=L.useRef(null),[u,h]=L.useState({x:null,y:null,strategy:i,placement:t,middlewareData:{}}),[p,g]=L.useState(e);mA(p?.map(A=>{let{options:w}=A;return w}),e?.map(A=>{let{options:w}=A;return w}))||g(e);const y=L.useCallback(()=>{!s.current||!a.current||PY(s.current,a.current,{middleware:p,placement:t,strategy:i}).then(A=>{x.current&&cE.flushSync(()=>{h(A)})})},[p,t,i]);pA(()=>{x.current&&y()},[y]);const x=L.useRef(!1);pA(()=>(x.current=!0,()=>{x.current=!1}),[]);const M=L.useCallback(()=>{if(typeof c.current=="function"&&(c.current(),c.current=null),s.current&&a.current)if(o.current){const A=o.current(s.current,a.current,y);c.current=A}else y()},[y,o]),b=L.useCallback(A=>{s.current=A,M()},[M]),S=L.useCallback(A=>{a.current=A,M()},[M]),T=L.useMemo(()=>({reference:s,floating:a}),[]);return L.useMemo(()=>({...u,update:y,refs:T,reference:b,floating:S}),[u,y,T,b,S])}const zY=n=>{const{element:e,padding:t}=n;function i(r){return Object.prototype.hasOwnProperty.call(r,"current")}return{name:"arrow",options:n,fn(r){return i(e)?e.current!=null?$O({element:e.current,padding:t}).fn(r):{}:e?$O({element:e,padding:t}).fn(r):{}}}},FY=L.forwardRef((n,e)=>{const{children:t,width:i=10,height:r=5,...s}=n;return L.createElement(oh.svg,Gn({},s,{ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:L.createElement("polygon",{points:"0,0 30,0 15,10"}))}),HY=FY;function kY(n){const[e,t]=L.useState(void 0);return Kf(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let a,o;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,o=u.blockSize}else a=n.offsetWidth,o=n.offsetHeight;t({width:a,height:o})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}const LP="Popper",[lC,NP]=SP(LP),[GY,PP]=lC(LP),VY=n=>{const{__scopePopper:e,children:t}=n,[i,r]=L.useState(null);return L.createElement(GY,{scope:e,anchor:i,onAnchorChange:r},t)},jY="PopperAnchor",WY=L.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...r}=n,s=PP(jY,t),a=L.useRef(null),o=wg(e,a);return L.useEffect(()=>{s.onAnchorChange(i?.current||a.current)}),i?null:L.createElement(oh.div,Gn({},r,{ref:o}))}),nS="PopperContent",[XY,qY]=lC(nS),[YY,ZY]=lC(nS,{hasParent:!1,positionUpdateFns:new Set}),KY=L.forwardRef((n,e)=>{var t,i,r,s,a,o,c,u;const{__scopePopper:h,side:p="bottom",sideOffset:g=0,align:y="center",alignOffset:x=0,arrowPadding:M=0,collisionBoundary:b=[],collisionPadding:S=0,sticky:T="partial",hideWhenDetached:A=!1,avoidCollisions:w=!0,onPlaced:D,...O}=n,P=PP(nS,h),[B,I]=L.useState(null),z=wg(e,Y=>I(Y)),[k,V]=L.useState(null),j=kY(k),W=(t=j?.width)!==null&&t!==void 0?t:0,te=(i=j?.height)!==null&&i!==void 0?i:0,H=p+(y!=="center"?"-"+y:""),Q=typeof S=="number"?S:{top:0,right:0,bottom:0,left:0,...S},ne=Array.isArray(b)?b:[b],re=ne.length>0,G={padding:Q,boundary:ne.filter(tZ),altBoundary:re},{reference:X,floating:ie,strategy:se,x:ee,y:ue,placement:pe,middlewareData:ve,update:_e}=BY({strategy:"fixed",placement:H,whileElementsMounted:NY,middleware:[nZ(),AY({mainAxis:g+te,alignmentAxis:x}),w?wY({mainAxis:!0,crossAxis:!1,limiter:T==="partial"?CY():void 0,...G}):void 0,k?zY({element:k,padding:M}):void 0,w?MY({...G}):void 0,RY({...G,apply:({elements:Y,availableWidth:fe,availableHeight:Ee})=>{Y.floating.style.setProperty("--radix-popper-available-width",`${fe}px`),Y.floating.style.setProperty("--radix-popper-available-height",`${Ee}px`)}}),iZ({arrowWidth:W,arrowHeight:te}),A?TY({strategy:"referenceHidden"}):void 0].filter(eZ)});Kf(()=>{X(P.anchor)},[X,P.anchor]);const Xe=ee!==null&&ue!==null,[qe,Be]=IP(pe),Se=Rg(D);Kf(()=>{Xe&&Se?.()},[Xe,Se]);const He=(r=ve.arrow)===null||r===void 0?void 0:r.x,oe=(s=ve.arrow)===null||s===void 0?void 0:s.y,lt=((a=ve.arrow)===null||a===void 0?void 0:a.centerOffset)!==0,[ze,Qe]=L.useState();Kf(()=>{B&&Qe(window.getComputedStyle(B).zIndex)},[B]);const{hasParent:De,positionUpdateFns:st}=ZY(nS,h),ke=!De;L.useLayoutEffect(()=>{if(!ke)return st.add(_e),()=>{st.delete(_e)}},[ke,st,_e]),Kf(()=>{ke&&Xe&&Array.from(st).reverse().forEach(Y=>requestAnimationFrame(Y))},[ke,Xe,st]);const $={"data-side":qe,"data-align":Be,...O,ref:z,style:{...O.style,animation:Xe?void 0:"none",opacity:(o=ve.hide)!==null&&o!==void 0&&o.referenceHidden?0:void 0}};return L.createElement("div",{ref:ie,"data-radix-popper-content-wrapper":"",style:{position:se,left:0,top:0,transform:Xe?`translate3d(${Math.round(ee)}px, ${Math.round(ue)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:ze,"--radix-popper-transform-origin":[(c=ve.transformOrigin)===null||c===void 0?void 0:c.x,(u=ve.transformOrigin)===null||u===void 0?void 0:u.y].join(" ")},dir:n.dir},L.createElement(XY,{scope:h,placedSide:qe,onArrowChange:V,arrowX:He,arrowY:oe,shouldHideArrow:lt},ke?L.createElement(YY,{scope:h,hasParent:!0,positionUpdateFns:st},L.createElement(oh.div,$)):L.createElement(oh.div,$)))}),$Y="PopperArrow",QY={top:"bottom",right:"left",bottom:"top",left:"right"},JY=L.forwardRef(function(e,t){const{__scopePopper:i,...r}=e,s=qY($Y,i),a=QY[s.placedSide];return L.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},L.createElement(HY,Gn({},r,{ref:t,style:{...r.style,display:"block"}})))});function eZ(n){return n!==void 0}function tZ(n){return n!==null}const nZ=()=>({name:"anchorCssProperties",fn(n){const{rects:e,elements:t}=n,{width:i,height:r}=e.reference;return t.floating.style.setProperty("--radix-popper-anchor-width",`${i}px`),t.floating.style.setProperty("--radix-popper-anchor-height",`${r}px`),{}}}),iZ=n=>({name:"transformOrigin",options:n,fn(e){var t,i,r,s,a;const{placement:o,rects:c,middlewareData:u}=e,p=((t=u.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,g=p?0:n.arrowWidth,y=p?0:n.arrowHeight,[x,M]=IP(o),b={start:"0%",center:"50%",end:"100%"}[M],S=((i=(r=u.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+g/2,T=((s=(a=u.arrow)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0)+y/2;let A="",w="";return x==="bottom"?(A=p?b:`${S}px`,w=`${-y}px`):x==="top"?(A=p?b:`${S}px`,w=`${c.floating.height+y}px`):x==="right"?(A=`${-y}px`,w=p?b:`${T}px`):x==="left"&&(A=`${c.floating.width+y}px`,w=p?b:`${T}px`),{data:{x:A,y:w}}}});function IP(n){const[e,t="center"]=n.split("-");return[e,t]}const rZ=VY,sZ=WY,aZ=KY,oZ=JY;function lZ(n,e){return L.useReducer((t,i)=>{const r=e[t][i];return r??t},n)}const BP=n=>{const{present:e,children:t}=n,i=cZ(e),r=typeof t=="function"?t({present:i.isPresent}):L.Children.only(t),s=wg(i.ref,r.ref);return typeof t=="function"||i.isPresent?L.cloneElement(r,{ref:s}):null};BP.displayName="Presence";function cZ(n){const[e,t]=L.useState(),i=L.useRef({}),r=L.useRef(n),s=L.useRef("none"),a=n?"mounted":"unmounted",[o,c]=lZ(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const u=Sx(i.current);s.current=o==="mounted"?u:"none"},[o]),Kf(()=>{const u=i.current,h=r.current;if(h!==n){const g=s.current,y=Sx(u);n?c("MOUNT"):y==="none"||u?.display==="none"?c("UNMOUNT"):c(h&&g!==y?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,c]),Kf(()=>{if(e){const u=p=>{const y=Sx(i.current).includes(p.animationName);p.target===e&&y&&cE.flushSync(()=>c("ANIMATION_END"))},h=p=>{p.target===e&&(s.current=Sx(i.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:L.useCallback(u=>{u&&(i.current=getComputedStyle(u)),t(u)},[])}}function Sx(n){return n?.animationName||"none"}function uZ({prop:n,defaultProp:e,onChange:t=()=>{}}){const[i,r]=fZ({defaultProp:e,onChange:t}),s=n!==void 0,a=s?n:i,o=Rg(t),c=L.useCallback(u=>{if(s){const p=typeof u=="function"?u(n):u;p!==n&&o(p)}else r(u)},[s,n,r,o]);return[a,c]}function fZ({defaultProp:n,onChange:e}){const t=L.useState(n),[i]=t,r=L.useRef(i),s=Rg(e);return L.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),t}const hZ=L.forwardRef((n,e)=>L.createElement(oh.span,Gn({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),dZ=hZ,[pE]=SP("Tooltip",[NP]),mE=NP(),pZ="TooltipProvider",gA="tooltip.open",[jse,cC]=pE(pZ),uC="Tooltip",[mZ,gE]=pE(uC),gZ=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:r=!1,onOpenChange:s,disableHoverableContent:a,delayDuration:o}=n,c=cC(uC,n.__scopeTooltip),u=mE(e),[h,p]=L.useState(null),g=yY(),y=L.useRef(0),x=a??c.disableHoverableContent,M=o??c.delayDuration,b=L.useRef(!1),[S=!1,T]=uZ({prop:i,defaultProp:r,onChange:P=>{P?(c.onOpen(),document.dispatchEvent(new CustomEvent(gA))):c.onClose(),s?.(P)}}),A=L.useMemo(()=>S?b.current?"delayed-open":"instant-open":"closed",[S]),w=L.useCallback(()=>{window.clearTimeout(y.current),b.current=!1,T(!0)},[T]),D=L.useCallback(()=>{window.clearTimeout(y.current),T(!1)},[T]),O=L.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{b.current=!0,T(!0)},M)},[M,T]);return L.useEffect(()=>()=>window.clearTimeout(y.current),[]),L.createElement(rZ,u,L.createElement(mZ,{scope:e,contentId:g,open:S,stateAttribute:A,trigger:h,onTriggerChange:p,onTriggerEnter:L.useCallback(()=>{c.isOpenDelayed?O():w()},[c.isOpenDelayed,O,w]),onTriggerLeave:L.useCallback(()=>{x?D():window.clearTimeout(y.current)},[D,x]),onOpen:w,onClose:D,disableHoverableContent:x},t))},aD="TooltipTrigger",vZ=L.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=gE(aD,t),s=cC(aD,t),a=mE(t),o=L.useRef(null),c=wg(e,o,r.onTriggerChange),u=L.useRef(!1),h=L.useRef(!1),p=L.useCallback(()=>u.current=!1,[]);return L.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),L.createElement(sZ,Gn({asChild:!0},a),L.createElement(oh.button,Gn({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},i,{ref:c,onPointerMove:Ou(n.onPointerMove,g=>{g.pointerType!=="touch"&&!h.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:Ou(n.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:Ou(n.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:Ou(n.onFocus,()=>{u.current||r.onOpen()}),onBlur:Ou(n.onBlur,r.onClose),onClick:Ou(n.onClick,r.onClose)})))}),yZ="TooltipPortal",[Wse,_Z]=pE(yZ,{forceMount:void 0}),py="TooltipContent",xZ=L.forwardRef((n,e)=>{const t=_Z(py,n.__scopeTooltip),{forceMount:i=t.forceMount,side:r="top",...s}=n,a=gE(py,n.__scopeTooltip);return L.createElement(BP,{present:i||a.open},a.disableHoverableContent?L.createElement(zP,Gn({side:r},s,{ref:e})):L.createElement(bZ,Gn({side:r},s,{ref:e})))}),bZ=L.forwardRef((n,e)=>{const t=gE(py,n.__scopeTooltip),i=cC(py,n.__scopeTooltip),r=L.useRef(null),s=wg(e,r),[a,o]=L.useState(null),{trigger:c,onClose:u}=t,h=r.current,{onPointerInTransitChange:p}=i,g=L.useCallback(()=>{o(null),p(!1)},[p]),y=L.useCallback((x,M)=>{const b=x.currentTarget,S={x:x.clientX,y:x.clientY},T=AZ(S,b.getBoundingClientRect()),A=T==="right"||T==="bottom"?-5:5,D=T==="right"||T==="left"?{x:x.clientX+A,y:x.clientY}:{x:x.clientX,y:x.clientY+A},O=wZ(M.getBoundingClientRect()),P=RZ([D,...O]);o(P),p(!0)},[p]);return L.useEffect(()=>()=>g(),[g]),L.useEffect(()=>{if(c&&h){const x=b=>y(b,h),M=b=>y(b,c);return c.addEventListener("pointerleave",x),h.addEventListener("pointerleave",M),()=>{c.removeEventListener("pointerleave",x),h.removeEventListener("pointerleave",M)}}},[c,h,y,g]),L.useEffect(()=>{if(a){const x=M=>{const b=M.target,S={x:M.clientX,y:M.clientY},T=c?.contains(b)||h?.contains(b),A=!CZ(S,a);T?g():A&&(g(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,h,a,u,g]),L.createElement(zP,Gn({},n,{ref:s}))}),[SZ,EZ]=pE(uC,{isInside:!1}),zP=L.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=n,c=gE(py,t),u=mE(t),{onClose:h}=c;return L.useEffect(()=>(document.addEventListener(gA,h),()=>document.removeEventListener(gA,h)),[h]),L.useEffect(()=>{if(c.trigger){const p=g=>{const y=g.target;y!=null&&y.contains(c.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[c.trigger,h]),L.createElement(dY,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:p=>p.preventDefault(),onDismiss:h},L.createElement(aZ,Gn({"data-state":c.stateAttribute},u,o,{ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),L.createElement(mP,null,i),L.createElement(SZ,{scope:t,isInside:!0},L.createElement(dZ,{id:c.contentId,role:"tooltip"},r||i))))}),MZ="TooltipArrow",TZ=L.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=mE(t);return EZ(MZ,t).isInside?null:L.createElement(oZ,Gn({},r,i,{ref:e}))});function AZ(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,i,r,s)){case s:return"left";case r:return"right";case t:return"top";case i:return"bottom";default:return null}}function wZ(n){const{top:e,right:t,bottom:i,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:i},{x:r,y:i}]}function CZ(n,e){const{x:t,y:i}=n;let r=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const o=e[s].x,c=e[s].y,u=e[a].x,h=e[a].y;c>i!=h>i&&t<(u-o)*(i-c)/(h-c)+o&&(r=!r)}return r}function RZ(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),OZ(e)}function OZ(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const r=n[i];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(r.y-a.y)>=(s.y-a.y)*(r.x-a.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const r=n[i];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(r.y-a.y)>=(s.y-a.y)*(r.x-a.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const DZ=gZ,UZ=vZ,LZ=xZ,NZ=TZ;function PZ(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Di(n,e){if(n==null)return{};var t=PZ(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}let rr;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(rr||(rr={}));const IZ={[rr.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[rr.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[rr.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[rr.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[rr.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[rr.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[rr.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[rr.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[rr.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[rr.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[rr.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function FP(n,e,...t){const[i,...r]=IZ[e](...t);console[n]("LEVA: "+i,...r)}const Lu=FP.bind(null,"warn"),BZ=FP.bind(null,"log"),zZ=["value"],FZ=["schema"],HZ=["value"],HP=[],Qd={};function oD(n){let{value:e}=n,t=Di(n,zZ);for(let i of HP){const r=i(e,t);if(r)return r}}function Xu(n,e){let{schema:t}=e,i=Di(e,FZ);if(n in Qd){Lu(rr.ALREADY_REGISTERED_TYPE,n);return}HP.push((r,s)=>t(r,s)&&n),Qd[n]=i}function GM(n,e,t,i){const{normalize:r}=Qd[n];if(r)return r(e,t,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,a=Di(e,HZ);return{value:s,settings:a}}function kZ(n,e,t,i,r,s){const{sanitize:a}=Qd[n];return a?a(e,t,i,r,s):e}function lD(n,e,t){const{format:i}=Qd[n];return i?i(e,t):e}function GZ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function an(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cD(Object(t),!0).forEach(function(i){GZ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const ch=(n,e,t)=>n>t?t:n<e?e:n,VZ=n=>{if(n===""||typeof n=="number")return n;try{const e=Xf(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},jZ=Math.log(10);function uD(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/jZ)+1,i=Math.floor(Math.log10(Math.abs(n))),r=Math.pow(10,i-t);return Math.max(r,.001)}const iS=(n,e,t)=>t===e?0:(ch(n,e,t)-e)/(t-e),rS=(n,e,t)=>n*(t-e)+e,WZ=()=>"_"+Math.random().toString(36).substr(2,9),fD=/\(([0-9+\-*/^ .]+)\)/,hD=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,dD=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,pD=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,mD=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,gD=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Xf(n){if(isNaN(Number(n)))if(fD.test(n)){const e=n.replace(fD,(t,i)=>String(Xf(i)));return Xf(e)}else if(hD.test(n)){const e=n.replace(hD,(t,i,r)=>String(Math.pow(Number(i),Number(r))));return Xf(e)}else if(dD.test(n)){const e=n.replace(dD,(t,i,r)=>String(Number(i)*Number(r)));return Xf(e)}else if(pD.test(n)){const e=n.replace(pD,(t,i,r)=>{if(r!=0)return String(Number(i)/Number(r));throw new Error("Division by zero")});return Xf(e)}else if(mD.test(n)){const e=n.replace(mD,(t,i,r)=>String(Number(i)+Number(r)));return Xf(e)}else if(gD.test(n)){const e=n.replace(gD,(t,i,r)=>String(Number(i)-Number(r)));return Xf(e)}else return Number(n);return Number(n)}function XZ(n,e){return e.reduce((t,i)=>(n&&n.hasOwnProperty(i)&&(t[i]=n[i]),t),{})}function qZ(n,e){const t=an({},n);return e.forEach(i=>i in n&&delete t[i]),t}function YZ(n,e){return n.reduce((t,i,r)=>Object.assign(t,{[e[r]]:i}),{})}function kP(n){return Object.prototype.toString.call(n)==="[object Object]"}const ZZ=n=>kP(n)&&Object.keys(n).length===0;let Ko;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(Ko||(Ko={}));let Vl;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Vl||(Vl={}));const KZ=["type","__customInput"],$Z=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],QZ=["type"];function GP(n,e,t={},i){var r,s;if(typeof n!="object"||Array.isArray(n))return{type:i,input:n,options:an({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:D,__customInput:O}=n,P=Di(n,KZ);return GP(O,e,P,D)}const{render:a,label:o,optional:c,order:u=0,disabled:h,hint:p,onChange:g,onEditStart:y,onEditEnd:x,transient:M}=n,b=Di(n,$Z),S=an({render:a,key:e,label:o??e,hint:p,transient:M??!!g,onEditStart:y,onEditEnd:x,disabled:h,optional:c,order:u},t);let{type:T}=b,A=Di(b,QZ);if(T=i??T,T in Ko)return{type:T,input:A,options:S};let w;return i&&kP(A)&&"value"in A?w=A.value:w=ZZ(A)?void 0:A,{type:T,input:w,options:an(an({},S),{},{onChange:g,optional:(r=S.optional)!==null&&r!==void 0?r:!1,disabled:(s=S.disabled)!==null&&s!==void 0?s:!1})}}function JZ(n,e,t,i){const r=GP(n,e),{type:s,input:a,options:o}=r;if(s)return s in Ko?r:{type:s,input:GM(s,a,t,i),options:o};let c=oD(a);return c?{type:c,input:GM(c,a,t,i),options:o}:(c=oD({value:a}),c?{type:c,input:GM(c,{value:a},t,i),options:o}:!1)}function vD(n,e,t,i,r){const{value:s,type:a,settings:o}=n;n.value=VP({type:a,value:s,settings:o},e,t,i),n.fromPanel=r}const eK=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function VP({type:n,value:e,settings:t},i,r,s){const a=n!=="SELECT"&&typeof i=="function"?i(e):i;let o;try{o=kZ(n,a,t,e,r,s)}catch(c){throw new eK(`The value \`${i}\` did not result in a correct value.`,e,c)}return fy(o,e)?e:o}const jP=(n,e,t=!1)=>{let i=0;return function(){const r=arguments,s=t&&!i,a=()=>n.apply(this,r);window.clearTimeout(i),i=window.setTimeout(a,e),s&&a()}},WP=n=>n.shiftKey?5:n.altKey?1/5:1,tK=["value"],nK=["min","max"],iK=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},XP=(n,{min:e=-1/0,max:t=1/0,suffix:i})=>{const r=parseFloat(n);if(n===""||isNaN(r))throw Error("Invalid number");const s=ch(r,e,t);return i?s+i:s},rK=(n,{pad:e=0,suffix:t})=>{const i=parseFloat(n).toFixed(e);return t?i+t:i},qP=n=>{let{value:e}=n,t=Di(n,tK);const{min:i=-1/0,max:r=1/0}=t,s=Di(t,nK);let a=parseFloat(e);const o=typeof e=="string"?e.substring((""+a).length):void 0;a=ch(a,i,r);let c=t.step;c||(Number.isFinite(i)?Number.isFinite(r)?c=+(Math.abs(r-i)/100).toPrecision(1):c=+(Math.abs(a-i)/100).toPrecision(1):Number.isFinite(r)&&(c=+(Math.abs(r-a)/100).toPrecision(1)));const u=c?uD(c)*10:uD(a);c=c||u/10;const h=Math.round(ch(Math.log10(1/u),0,2));return{value:o?a+o:a,settings:an({initialValue:a,step:c,pad:h,min:i,max:r,suffix:o},s)}},YP=(n,{step:e,initialValue:t})=>{const i=Math.round((n-t)/e);return t+i*e};var ZP=Object.freeze({__proto__:null,schema:iK,sanitize:XP,format:rK,normalize:qP,sanitizeStep:YP});function vr(){return vr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},vr.apply(this,arguments)}const KP=L.createContext({});function Vs(){return L.useContext(KP)}const fC=L.createContext(null),$P=L.createContext(null),QP=L.createContext(null);function Gy(){return L.useContext($P)}function sK(){return L.useContext(QP)}const JP=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Ex(n,e){const[t,i]=n.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),i&&(r.backgroundColor=i),r}const mv={$inputStyle:()=>n=>Ex(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>Ex(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>Ex(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>Ex(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:rn,css:Xse,createTheme:aK,globalCss:oK,keyframes:qse}=bP({prefix:"leva",theme:JP(),utils:an(an({},mv),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":mv.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":mv.$focusStyle()(n)}),$hover:n=>({"&:hover":mv.$hoverStyle()(n)}),$active:n=>({"&:active":mv.$activeStyle()(n)})})}),lK=oK({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function cK(n){const e=JP();if(!n)return{theme:e,className:""};Object.keys(n).forEach(i=>{Object.assign(e[i],n[i])});const t=aK(e);return{theme:e,className:t.className}}function Hu(n,e){const{theme:t}=L.useContext(fC);if(!(n in t)||!(e in t[n]))return Lu(rr.THEME_ERROR,n,e),"";let i=e;for(;;){let r=t[n][i];if(typeof r=="string"&&r.charAt(0)==="$")i=r.substr(1);else return r}}const e6=rn("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),t6=rn("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${e6}`]:{paddingLeft:0}}),uK=rn(t6,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),fK=rn("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),hK=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],dK=["onUpdate"];function hC(n){let{innerLabel:e,value:t,onUpdate:i,onChange:r,onKeyDown:s,type:a,id:o,inputType:c="text",rows:u=0}=n,h=Di(n,hK);const{id:p,emitOnEditStart:g,emitOnEditEnd:y,disabled:x}=Vs(),M=o||p,b=L.useRef(null),S=u>0,T=S?"textarea":"input",A=L.useCallback(O=>P=>{const B=P.currentTarget.value;O(B)},[]);de.useEffect(()=>{const O=b.current,P=A(B=>{i(B),y()});return O?.addEventListener("blur",P),()=>O?.removeEventListener("blur",P)},[A,i,y]);const w=L.useCallback(O=>{O.key==="Enter"&&A(i)(O)},[A,i]),D=Object.assign({as:T},S?{rows:u}:{},h);return de.createElement(fK,{textArea:S},e&&typeof e=="string"?de.createElement(t6,null,e):e,de.createElement(e6,vr({levaType:a,ref:b,id:M,type:c,autoComplete:"off",spellCheck:"false",value:t,onChange:A(r),onFocus:()=>g(),onKeyPress:w,onKeyDown:s,disabled:x},D)))}function pK(n){let{onUpdate:e}=n,t=Di(n,dK);const i=L.useCallback(s=>e(VZ(s)),[e]),r=L.useCallback(s=>{const a=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(a){s.preventDefault();const o=s.altKey?.1:s.shiftKey?10:1;e(c=>parseFloat(c)+a*o)}},[e]);return de.createElement(hC,vr({},t,{onUpdate:i,onKeyDown:r,type:"number"}))}const sS=rn("div",{}),vA=rn("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),mK=rn("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${vA}::after`]:{opacity:.6},[`${sS}:hover > & + ${vA}::after`]:{opacity:.6},[`${sS}:hover > & > svg`]:{opacity:1}}),n6=rn("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${sS}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),i6=rn("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${n6} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),r6=rn(i6,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),gK=rn("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),vK=rn("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),yA=rn("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),yK=rn("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${yA}`]:{pointerEvents:"auto"}}}}}),s6=rn("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),_K=rn("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),xK=rn(NZ,{fill:"$toolTipBackground"});function dC({children:n}){const{className:e}=L.useContext(fC);return de.createElement(Rq,{className:e},n)}const bK=["align"];function SK(){const{id:n,disable:e,disabled:t}=Vs();return de.createElement(de.Fragment,null,de.createElement(vK,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),de.createElement("label",{htmlFor:n+"__disable"}))}function EK(n){const{id:e,optional:t,hint:i}=Vs(),r=n.htmlFor||(e?{htmlFor:e}:null),s=!i&&typeof n.children=="string"?{title:n.children}:null;return de.createElement(de.Fragment,null,t&&de.createElement(SK,null),i!==void 0?de.createElement(DZ,null,de.createElement(UZ,{asChild:!0},de.createElement(yA,vr({},r,n))),de.createElement(LZ,{side:"top",sideOffset:2},de.createElement(_K,null,i,de.createElement(xK,null)))):de.createElement(yA,vr({},r,s,n)))}function Zl(n){let{align:e}=n,t=Di(n,bK);const{value:i,label:r,key:s,disabled:a}=Vs(),{hideCopyButton:o}=sK(),c=!o&&s!==void 0,[u,h]=L.useState(!1),p=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:i??""})),h(!0)}catch{Lu(rr.CLIPBOARD_ERROR,{[s]:i})}};return de.createElement(gK,{align:e,onPointerLeave:()=>h(!1)},de.createElement(EK,t),c&&!a&&de.createElement("div",{title:`Click to copy ${typeof r=="string"?r:s} value`},u?de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},de.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),de.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):de.createElement("svg",{onClick:p,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},de.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),de.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const MK=["toggled"],TK=rn("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function pC(n){let{toggled:e}=n,t=Di(n,MK);return de.createElement(TK,vr({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),de.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const AK=["input"];function tl(n){let{input:e}=n,t=Di(n,AK);return e?de.createElement(r6,t):de.createElement(i6,t)}function a6({value:n,type:e,settings:t,setValue:i}){const[r,s]=L.useState(lD(e,n,t)),a=L.useRef(n),o=L.useRef(t);o.current=t;const c=L.useCallback(h=>s(lD(e,h,o.current)),[e]),u=L.useCallback(h=>{try{i(h)}catch(p){const{type:g,previousValue:y}=p;if(g!=="LEVA_ERROR")throw p;c(y)}},[c,i]);return L.useEffect(()=>{fy(n,a.current)||c(n),a.current=n},[n,c]),{displayValue:r,onChange:s,onUpdate:u}}function Vy(n,e){const{emitOnEditStart:t,emitOnEditEnd:i}=Vs();return wj(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t?.());const s=n(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),i?.()),s},e)}function wK(n){const e=L.useRef(null),t=L.useRef(null),i=L.useRef(!1);return L.useEffect(()=>{const r=jP(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",r),i.current||(r(),i.current=!0),()=>window.removeEventListener("resize",r)},[n]),L.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function o6(){const n=L.useRef(null),e=L.useRef({x:0,y:0}),t=L.useCallback(i=>{Object.assign(e.current,i),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const CK=["__refCount"],VM=(n,e)=>{if(!n[e])return null;const t=n[e];return Di(t,CK)};function RK(n){const e=Gy(),[t,i]=L.useState(VM(e.getData(),n)),r=L.useCallback(u=>e.setValueAtPath(n,u,!0),[n,e]),s=L.useCallback(u=>e.setSettingsAtPath(n,u),[n,e]),a=L.useCallback(u=>e.disableInputAtPath(n,u),[n,e]),o=L.useCallback(()=>e.emitOnEditStart(n),[n,e]),c=L.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return L.useEffect(()=>{i(VM(e.getData(),n));const u=e.useStore.subscribe(h=>VM(h.data,n),i,{equalityFn:uE});return()=>u()},[e,n]),[t,{set:r,setSettings:s,disable:a,storeId:e.storeId,emitOnEditStart:o,emitOnEditEnd:c}]}const OK=rn("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),l6=rn("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),_A=rn("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),c6=rn("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),u6=rn("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function DK({value:n,min:e,max:t,onDrag:i,step:r,initialValue:s}){const a=L.useRef(null),o=L.useRef(null),c=L.useRef(0),u=Hu("sizes","scrubberWidth"),h=Vy(({event:g,first:y,xy:[x],movement:[M],memo:b})=>{if(y){const{width:T,left:A}=a.current.getBoundingClientRect();c.current=T-parseFloat(u),b=g?.target===o.current?n:rS((x-A)/T,e,t)}const S=b+rS(M/c.current,0,t-e);return i(YP(S,{step:r,initialValue:s})),b}),p=iS(n,e,t);return de.createElement(c6,vr({ref:a},h()),de.createElement(l6,null,de.createElement(u6,{style:{left:0,right:`${(1-p)*100}%`}})),de.createElement(_A,{ref:o,style:{left:`calc(${p} * (100% - ${u}))`}}))}const UK=de.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:i})=>{const[r,s]=L.useState(!1),a=Vy(({active:o,delta:[c],event:u,memo:h=0,first:p,last:g,target:y})=>(p&&y.requestPointerLock(),g&&document.exitPointerLock(),s(o),h+=c/2,Math.abs(h)>=1&&(e(x=>parseFloat(x)+Math.floor(h)*t*WP(u)),h=0),h));return de.createElement(uK,vr({dragging:r,title:n.length>1?n:""},a()),n.slice(0,i))});function f6({label:n,id:e,displayValue:t,onUpdate:i,onChange:r,settings:s,innerLabelTrim:a=1}){const o=a>0&&de.createElement(UK,{label:n,step:s.step,onUpdate:i,innerLabelTrim:a});return de.createElement(pK,{id:e,value:String(t),onUpdate:i,onChange:r,innerLabel:o})}function LK(){const n=Vs(),{label:e,value:t,onUpdate:i,settings:r,id:s}=n,{min:a,max:o}=r,c=o!==1/0&&a!==-1/0;return de.createElement(tl,{input:!0},de.createElement(Zl,null,e),de.createElement(OK,{hasRange:c},c&&de.createElement(DK,vr({value:parseFloat(t),onDrag:i},r)),de.createElement(f6,vr({},n,{id:s,label:"value",innerLabelTrim:c?0:1}))))}const{sanitizeStep:NK}=ZP,PK=Di(ZP,["sanitizeStep"]);var IK=an({component:LK},PK);const BK=(n,e)=>Va().schema({options:Va().passesAnyOf(Va().object(),Va().array())}).test(e),zK=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},FK=(n,{values:e})=>e.indexOf(n),HK=n=>{let{value:e,options:t}=n,i,r;return Array.isArray(t)?(r=t,i=t.map(s=>String(s))):(r=Object.values(t),i=Object.keys(t)),"value"in n?r.includes(e)||(i.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:i,values:r}}};var kK=Object.freeze({__proto__:null,schema:BK,sanitize:zK,format:FK,normalize:HK});const GK=rn("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),xA=rn("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),VK=rn("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${xA}:focus + &`]:{$focusStyle:""},[`${xA}:hover + &`]:{$hoverStyle:""}});function jK({displayValue:n,value:e,onUpdate:t,id:i,settings:r,disabled:s}){const{keys:a,values:o}=r,c=L.useRef();return e===o[n]&&(c.current=a[n]),de.createElement(GK,null,de.createElement(xA,{id:i,value:n,onChange:u=>t(o[Number(u.currentTarget.value)]),disabled:s},a.map((u,h)=>de.createElement("option",{key:u,value:h},u))),de.createElement(VK,null,c.current),de.createElement(pC,{toggled:!0}))}function WK(){const{label:n,value:e,displayValue:t,onUpdate:i,id:r,disabled:s,settings:a}=Vs();return de.createElement(tl,{input:!0},de.createElement(Zl,null,n),de.createElement(jK,{id:r,value:e,displayValue:t,onUpdate:i,settings:a,disabled:s}))}var XK=an({component:WK},kK);const qK=n=>Va().string().test(n),YK=n=>{if(typeof n!="string")throw Error("Invalid string");return n},ZK=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var KK=Object.freeze({__proto__:null,schema:qK,sanitize:YK,normalize:ZK});const $K=["displayValue","onUpdate","onChange","editable"],QK=rn("div",{whiteSpace:"pre-wrap"});function JK(n){let{displayValue:e,onUpdate:t,onChange:i,editable:r=!0}=n,s=Di(n,$K);return r?de.createElement(hC,vr({value:e,onUpdate:t,onChange:i},s)):de.createElement(QK,null,e)}function e$(){const{label:n,settings:e,displayValue:t,onUpdate:i,onChange:r}=Vs();return de.createElement(tl,{input:!0},de.createElement(Zl,null,n),de.createElement(JK,vr({displayValue:t,onUpdate:i,onChange:r},e)))}var t$=an({component:e$},KK);const n$=n=>Va().boolean().test(n),i$=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var r$=Object.freeze({__proto__:null,schema:n$,sanitize:i$});const s$=rn("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function a$({value:n,onUpdate:e,id:t,disabled:i}){return de.createElement(s$,null,de.createElement("input",{id:t,type:"checkbox",checked:n,onChange:r=>e(r.currentTarget.checked),disabled:i}),de.createElement("label",{htmlFor:t},de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},de.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function o$(){const{label:n,value:e,onUpdate:t,disabled:i,id:r}=Vs();return de.createElement(tl,{input:!0},de.createElement(Zl,null,n),de.createElement(a$,{value:e,onUpdate:t,id:r,disabled:i}))}var l$=an({component:o$},r$);const c$=["locked"];function u$({value:n,id:e,valueKey:t,settings:i,onUpdate:r,innerLabelTrim:s}){const a=L.useRef(n[t]);a.current=n[t];const o=L.useCallback(u=>r({[t]:VP({type:"NUMBER",value:a.current,settings:i},u)}),[r,i,t]),c=a6({type:"NUMBER",value:n[t],settings:i,setValue:o});return de.createElement(f6,{id:e,label:t,value:n[t],displayValue:c.displayValue,onUpdate:c.onUpdate,onChange:c.onChange,settings:i,innerLabelTrim:s})}const f$=rn("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function h$(n){let{locked:e}=n,t=Di(n,c$);return de.createElement("svg",vr({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?de.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):de.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function mC({value:n,onUpdate:e,settings:t,innerLabelTrim:i}){const{id:r,setSettings:s}=Vs(),{lock:a,locked:o}=t;return de.createElement(f$,{withLock:a},a&&de.createElement(h$,{locked:o,onClick:()=>s({locked:!o})}),Object.keys(n).map((c,u)=>de.createElement(u$,{id:u===0?r:`${r}.${c}`,key:c,valueKey:c,value:n,settings:t[c],onUpdate:e,innerLabelTrim:i})))}const h6=(n,e)=>{const t={};let i=0,r=1/0;Object.entries(n).forEach(([s,a])=>{t[s]=qP(an({value:a},e[s])).settings,i=Math.max(i,t[s].step),r=Math.min(r,t[s].pad)});for(let s in t){const{step:a,min:o,max:c}=e[s]||{};!isFinite(a)&&(!isFinite(o)||!isFinite(c))&&(t[s].step=i,t[s].pad=r)}return t},d$=["lock"],p$=["value"];function m$(n){const e=Va().array().length(n).every.number(),t=i=>{if(!i||typeof i!="object")return!1;const r=Object.values(i);return r.length===n&&r.every(s=>isFinite(s))};return i=>e.test(i)||t(i)}function g$(n){return Array.isArray(n)?"array":"object"}function qv(n,e,t){return g$(n)===e?n:e==="array"?Object.values(n):YZ(n,t)}const v$=(n,e,t)=>{const i=qv(n,"object",e.keys);for(let a in i)i[a]=XP(i[a],e[a]);const r=Object.keys(i);let s={};if(r.length===e.keys.length)s=i;else{const a=qv(t,"object",e.keys);if(r.length===1&&e.locked){const o=r[0],c=i[o],u=a[o],h=u!==0?c/u:1;for(let p in a)p===o?s[o]=c:s[p]=a[p]*h}else s=an(an({},a),i)}return qv(s,e.format,e.keys)},y$=(n,e)=>qv(n,"object",e.keys),_$=n=>!!n&&("step"in n||"min"in n||"max"in n);function x$(n,e,t=[]){const{lock:i=!1}=e,r=Di(e,d$),s=Array.isArray(n)?"array":"object",a=s==="object"?Object.keys(n):t,o=qv(n,"object",a),c=_$(r)?a.reduce((h,p)=>Object.assign(h,{[p]:r}),{}):r,u=h6(o,c);return{value:s==="array"?n:o,settings:an(an({},u),{},{format:s,keys:a,lock:i,locked:!1})}}function d6(n){return{schema:m$(n.length),normalize:e=>{let{value:t}=e,i=Di(e,p$);return x$(t,i,n)},format:(e,t)=>y$(e,t),sanitize:(e,t,i)=>v$(e,t,i)}}var b$={grad:.9,turn:360,rad:360/(2*Math.PI)},wu=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},ss=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Vo=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},p6=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},yD=function(n){return{r:Vo(n.r,0,255),g:Vo(n.g,0,255),b:Vo(n.b,0,255),a:Vo(n.a)}},jM=function(n){return{r:ss(n.r),g:ss(n.g),b:ss(n.b),a:ss(n.a,3)}},S$=/^#([0-9a-f]{3,8})$/i,Mx=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},m6=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),a=s-Math.min(e,t,i),o=a?s===e?(t-i)/a:s===t?2+(i-e)/a:4+(e-t)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:r}},g6=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),a=i*(1-t),o=i*(1-(e-s)*t),c=i*(1-(1-e+s)*t),u=s%6;return{r:255*[i,o,a,a,c,i][u],g:255*[c,i,i,o,a,a][u],b:255*[a,a,c,i,i,o][u],a:r}},_D=function(n){return{h:p6(n.h),s:Vo(n.s,0,100),l:Vo(n.l,0,100),a:Vo(n.a)}},xD=function(n){return{h:ss(n.h),s:ss(n.s),l:ss(n.l),a:ss(n.a,3)}},bD=function(n){return g6((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},Yv=function(n){return{h:(e=m6(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},E$=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,M$=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,T$=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,A$=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bA={string:[[function(n){var e=S$.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?ss(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?ss(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=T$.exec(n)||A$.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:yD({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=E$.exec(n)||M$.exec(n);if(!e)return null;var t,i,r=_D({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(b$[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return bD(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return wu(e)&&wu(t)&&wu(i)?yD({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!wu(e)||!wu(t)||!wu(i))return null;var a=_D({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return bD(a)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!wu(e)||!wu(t)||!wu(i))return null;var a=(function(o){return{h:p6(o.h),s:Vo(o.s,0,100),v:Vo(o.v,0,100),a:Vo(o.a)}})({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return g6(a)},"hsv"]]},SD=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},v6=function(n){return typeof n=="string"?SD(n.trim(),bA.string):typeof n=="object"&&n!==null?SD(n,bA.object):[null,void 0]},w$=function(n){return v6(n)[1]},WM=function(n,e){var t=Yv(n);return{h:t.h,s:Vo(t.s+100*e,0,100),l:t.l,a:t.a}},XM=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},ED=function(n,e){var t=Yv(n);return{h:t.h,s:t.s,l:Vo(t.l+100*e,0,100),a:t.a}},SA=(function(){function n(e){this.parsed=v6(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return ss(XM(this.rgba),2)},n.prototype.isDark=function(){return XM(this.rgba)<.5},n.prototype.isLight=function(){return XM(this.rgba)>=.5},n.prototype.toHex=function(){return e=jM(this.rgba),t=e.r,i=e.g,r=e.b,a=(s=e.a)<1?Mx(ss(255*s)):"","#"+Mx(t)+Mx(i)+Mx(r)+a;var e,t,i,r,s,a},n.prototype.toRgb=function(){return jM(this.rgba)},n.prototype.toRgbString=function(){return e=jM(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},n.prototype.toHsl=function(){return xD(Yv(this.rgba))},n.prototype.toHslString=function(){return e=xD(Yv(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},n.prototype.toHsv=function(){return e=m6(this.rgba),{h:ss(e.h),s:ss(e.s),v:ss(e.v),a:ss(e.a,3)};var e},n.prototype.invert=function(){return ua({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),ua(WM(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),ua(WM(this.rgba,-e))},n.prototype.grayscale=function(){return ua(WM(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),ua(ED(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),ua(ED(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?ua({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):ss(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=Yv(this.rgba);return typeof e=="number"?ua({h:e,s:t.s,l:t.l,a:t.a}):ss(t.h)},n.prototype.isEqual=function(e){return this.toHex()===ua(e).toHex()},n})(),ua=function(n){return n instanceof SA?n:new SA(n)},MD=[],C$=function(n){n.forEach(function(e){MD.indexOf(e)<0&&(e(SA,bA),MD.push(e))})};function R$(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var s={};n.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,c,u=i[this.toHex()];if(u)return u;if(a?.closest){var h=this.toRgb(),p=1/0,g="black";if(!s.length)for(var y in t)s[y]=new n(t[y]).toRgb();for(var x in t){var M=(o=h,c=s[x],Math.pow(o.r-c.r,2)+Math.pow(o.g-c.g,2)+Math.pow(o.b-c.b,2));M<p&&(p=M,g=x)}return g}},e.string.push([function(a){var o=a.toLowerCase(),c=o==="transparent"?"#0000":t[o];return c?new n(c).toRgb():null},"name"])}function Dg(){return(Dg=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function gC(n,e){if(n==null)return{};var t,i,r={},s=Object.keys(n);for(i=0;i<s.length;i++)e.indexOf(t=s[i])>=0||(r[t]=n[t]);return r}function EA(n){var e=L.useRef(n),t=L.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var vg=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Zv=function(n){return"touches"in n},MA=function(n){return n&&n.ownerDocument.defaultView||self},TD=function(n,e,t){var i=n.getBoundingClientRect(),r=Zv(e)?(function(s,a){for(var o=0;o<s.length;o++)if(s[o].identifier===a)return s[o];return s[0]})(e.touches,t):e;return{left:vg((r.pageX-(i.left+MA(n).pageXOffset))/i.width),top:vg((r.pageY-(i.top+MA(n).pageYOffset))/i.height)}},AD=function(n){!Zv(n)&&n.preventDefault()},vC=de.memo(function(n){var e=n.onMove,t=n.onKey,i=gC(n,["onMove","onKey"]),r=L.useRef(null),s=EA(e),a=EA(t),o=L.useRef(null),c=L.useRef(!1),u=L.useMemo(function(){var y=function(b){AD(b),(Zv(b)?b.touches.length>0:b.buttons>0)&&r.current?s(TD(r.current,b,o.current)):M(!1)},x=function(){return M(!1)};function M(b){var S=c.current,T=MA(r.current),A=b?T.addEventListener:T.removeEventListener;A(S?"touchmove":"mousemove",y),A(S?"touchend":"mouseup",x)}return[function(b){var S=b.nativeEvent,T=r.current;if(T&&(AD(S),!(function(w,D){return D&&!Zv(w)})(S,c.current)&&T)){if(Zv(S)){c.current=!0;var A=S.changedTouches||[];A.length&&(o.current=A[0].identifier)}T.focus(),s(TD(T,S,o.current)),M(!0)}},function(b){var S=b.which||b.keyCode;S<37||S>40||(b.preventDefault(),a({left:S===39?.05:S===37?-.05:0,top:S===40?.05:S===38?-.05:0}))},M]},[a,s]),h=u[0],p=u[1],g=u[2];return L.useEffect(function(){return g},[g]),de.createElement("div",Dg({},i,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:r,onKeyDown:p,tabIndex:0,role:"slider"}))}),jy=function(n){return n.filter(Boolean).join(" ")},yC=function(n){var e=n.color,t=n.left,i=n.top,r=i===void 0?.5:i,s=jy(["react-colorful__pointer",n.className]);return de.createElement("div",{className:s,style:{top:100*r+"%",left:100*t+"%"}},de.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},ma=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},y6=function(n){var e=n.s,t=n.v,i=n.a,r=(200-e)*t/100;return{h:ma(n.h),s:ma(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:ma(r/2),a:ma(i,2)}},TA=function(n){var e=y6(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},qM=function(n){var e=y6(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},_6=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),a=i*(1-t),o=i*(1-(e-s)*t),c=i*(1-(1-e+s)*t),u=s%6;return{r:ma(255*[i,o,a,a,c,i][u]),g:ma(255*[c,i,i,o,a,a][u]),b:ma(255*[a,a,c,i,i,o][u]),a:ma(r,2)}},x6=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),a=s-Math.min(e,t,i),o=a?s===e?(t-i)/a:s===t?2+(i-e)/a:4+(e-t)/a:0;return{h:ma(60*(o<0?o+6:o)),s:ma(s?a/s*100:0),v:ma(s/255*100),a:r}},b6=de.memo(function(n){var e=n.hue,t=n.onChange,i=jy(["react-colorful__hue",n.className]);return de.createElement("div",{className:i},de.createElement(vC,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:vg(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":ma(e),"aria-valuemax":"360","aria-valuemin":"0"},de.createElement(yC,{className:"react-colorful__hue-pointer",left:e/360,color:TA({h:e,s:100,v:100,a:1})})))}),S6=de.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:TA({h:e.h,s:100,v:100,a:1})};return de.createElement("div",{className:"react-colorful__saturation",style:i},de.createElement(vC,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:vg(e.s+100*r.left,0,100),v:vg(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ma(e.s)+"%, Brightness "+ma(e.v)+"%"},de.createElement(yC,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:TA(e)})))}),_C=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function E6(n,e,t){var i=EA(t),r=L.useState(function(){return n.toHsva(e)}),s=r[0],a=r[1],o=L.useRef({color:e,hsva:s});L.useEffect(function(){if(!n.equal(e,o.current.color)){var u=n.toHsva(e);o.current={hsva:u,color:e},a(u)}},[e,n]),L.useEffect(function(){var u;_C(s,o.current.hsva)||n.equal(u=n.fromHsva(s),o.current.color)||(o.current={hsva:s,color:u},i(u))},[s,n,i]);var c=L.useCallback(function(u){a(function(h){return Object.assign({},h,u)})},[]);return[s,c]}var O$=typeof window<"u"?L.useLayoutEffect:L.useEffect,D$=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},wD=new Map,M6=function(n){O$(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!wD.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,wD.set(e,t);var i=D$();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},U$=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,a=gC(n,["className","colorModel","color","onChange"]),o=L.useRef(null);M6(o);var c=E6(t,r,s),u=c[0],h=c[1],p=jy(["react-colorful",e]);return de.createElement("div",Dg({},a,{ref:o,className:p}),de.createElement(S6,{hsva:u,onChange:h}),de.createElement(b6,{hue:u.h,onChange:h,className:"react-colorful__last-control"}))},L$=function(n){var e=n.className,t=n.hsva,i=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+qM(Object.assign({},t,{a:0}))+", "+qM(Object.assign({},t,{a:1}))+")"},s=jy(["react-colorful__alpha",e]),a=ma(100*t.a);return de.createElement("div",{className:s},de.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),de.createElement(vC,{onMove:function(o){i({a:o.left})},onKey:function(o){i({a:vg(t.a+o.left)})},"aria-label":"Alpha","aria-valuetext":a+"%","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"},de.createElement(yC,{className:"react-colorful__alpha-pointer",left:t.a,color:qM(t)})))},N$=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,a=gC(n,["className","colorModel","color","onChange"]),o=L.useRef(null);M6(o);var c=E6(t,r,s),u=c[0],h=c[1],p=jy(["react-colorful",e]);return de.createElement("div",Dg({},a,{ref:o,className:p}),de.createElement(S6,{hsva:u,onChange:h}),de.createElement(b6,{hue:u.h,onChange:h}),de.createElement(L$,{hsva:u,onChange:h,className:"react-colorful__last-control"}))},P$={defaultColor:{r:0,g:0,b:0,a:1},toHsva:x6,fromHsva:_6,equal:_C},I$=function(n){return de.createElement(N$,Dg({},n,{colorModel:P$}))},B$={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return x6({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=_6(n)).r,g:e.g,b:e.b};var e},equal:_C},z$=function(n){return de.createElement(U$,Dg({},n,{colorModel:B$}))},YM={exports:{}},ZM,CD;function F$(){if(CD)return ZM;CD=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ZM=n,ZM}var KM,RD;function H$(){if(RD)return KM;RD=1;var n=F$();function e(){}function t(){}return t.resetWarningCache=e,KM=function(){function i(a,o,c,u,h,p){if(p!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},KM}var OD;function k$(){return OD||(OD=1,YM.exports=H$()()),YM.exports}var G$=k$();const Ii=fh(G$);function Ug(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(h){try{u(i.next(h))}catch(p){a(p)}}function c(h){try{u(i.throw(h))}catch(p){a(p)}}function u(h){h.done?s(h.value):r(h.value).then(o,c)}u((i=i.apply(n,e||[])).next())})}function Lg(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(h){return c([u,h])}}function c(u){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(i=1,r&&(s=u[0]&2?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,r=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(h){u=[6,h],r=0}finally{i=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function V$(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],a;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return s}function j$(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(V$(arguments[e]));return n}var W$=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Wy(n,e){var t=X$(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function X$(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),r=W$.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var q$=[".DS_Store","Thumbs.db"];function Y$(n){return Ug(this,void 0,void 0,function(){return Lg(this,function(e){return aS(n)&&Z$(n)?[2,J$(n.dataTransfer,n.type)]:K$(n)?[2,$$(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Q$(n)]:[2,[]]})})}function Z$(n){return aS(n.dataTransfer)}function K$(n){return aS(n)&&aS(n.target)}function aS(n){return typeof n=="object"&&n!==null}function $$(n){return AA(n.target.files).map(function(e){return Wy(e)})}function Q$(n){return Ug(this,void 0,void 0,function(){var e;return Lg(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return Wy(i)})]}})})}function J$(n,e){return Ug(this,void 0,void 0,function(){var t,i;return Lg(this,function(r){switch(r.label){case 0:return n===null?[2,[]]:n.items?(t=AA(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(eQ))]):[3,2];case 1:return i=r.sent(),[2,DD(T6(i))];case 2:return[2,DD(AA(n.files).map(function(s){return Wy(s)}))]}})})}function DD(n){return n.filter(function(e){return q$.indexOf(e.name)===-1})}function AA(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function eQ(n){if(typeof n.webkitGetAsEntry!="function")return UD(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?A6(e):UD(n)}function T6(n){return n.reduce(function(e,t){return j$(e,Array.isArray(t)?T6(t):[t])},[])}function UD(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=Wy(e);return Promise.resolve(t)}function tQ(n){return Ug(this,void 0,void 0,function(){return Lg(this,function(e){return[2,n.isDirectory?A6(n):nQ(n)]})})}function A6(n){var e=n.createReader();return new Promise(function(t,i){var r=[];function s(){var a=this;e.readEntries(function(o){return Ug(a,void 0,void 0,function(){var c,u,h;return Lg(this,function(p){switch(p.label){case 0:if(o.length)return[3,5];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return c=p.sent(),t(c),[3,4];case 3:return u=p.sent(),i(u),[3,4];case 4:return[3,6];case 5:h=Promise.all(o.map(tQ)),r.push(h),s(),p.label=6;case 6:return[2]}})})},function(o){i(o)})}s()})}function nQ(n){return Ug(this,void 0,void 0,function(){return Lg(this,function(e){return[2,new Promise(function(t,i){n.file(function(r){var s=Wy(r,n.fullPath);t(s)},function(r){i(r)})})]})})}var Tx={},LD;function iQ(){return LD||(LD=1,Tx.__esModule=!0,Tx.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",r=(n.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return t.some(function(a){var o=a.trim().toLowerCase();return o.charAt(0)==="."?i.toLowerCase().endsWith(o):o.endsWith("/*")?s===o.replace(/\/.*$/,""):r===o})}return!0}),Tx}var rQ=iQ();const sQ=fh(rQ);function ND(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function PD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ND(Object(t),!0).forEach(function(i){w6(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ND(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function w6(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ID(n,e){return cQ(n)||lQ(n,e)||oQ(n,e)||aQ()}function aQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oQ(n,e){if(n){if(typeof n=="string")return BD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return BD(n,e)}}function BD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function lQ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,o;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(c){s=!0,o=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw o}}return i}}function cQ(n){if(Array.isArray(n))return n}var uQ="file-invalid-type",fQ="file-too-large",hQ="file-too-small",dQ="too-many-files",pQ=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:uQ,message:"File type must be ".concat(t)}},zD=function(e){return{code:fQ,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},FD=function(e){return{code:hQ,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},mQ={code:dQ,message:"Too many files"};function C6(n,e){var t=n.type==="application/x-moz-file"||sQ(n,e);return[t,t?null:pQ(e)]}function R6(n,e,t){if(gv(n.size))if(gv(e)&&gv(t)){if(n.size>t)return[!1,zD(t)];if(n.size<e)return[!1,FD(e)]}else{if(gv(e)&&n.size<e)return[!1,FD(e)];if(gv(t)&&n.size>t)return[!1,zD(t)]}return[!0,null]}function gv(n){return n!=null}function gQ(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,s=n.multiple,a=n.maxFiles;return!s&&e.length>1||s&&a>=1&&e.length>a?!1:e.every(function(o){var c=C6(o,t),u=ID(c,1),h=u[0],p=R6(o,i,r),g=ID(p,1),y=g[0];return h&&y})}function oS(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function Ax(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function HD(n){n.preventDefault()}function vQ(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function yQ(n){return n.indexOf("Edge/")!==-1}function _Q(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return vQ(n)||yQ(n)}function Pc(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return e.some(function(o){return!oS(i)&&o&&o.apply(void 0,[i].concat(s)),oS(i)})}}function xQ(){return"showOpenFilePicker"in window}function bQ(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return PD(PD({},e),{},w6({},t,[]))},{}):{}}]}function SQ(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function EQ(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var MQ=["children"],TQ=["open"],AQ=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],wQ=["refKey","onChange","onClick"];function CQ(n){return DQ(n)||OQ(n)||O6(n)||RQ()}function RQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OQ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function DQ(n){if(Array.isArray(n))return wA(n)}function $M(n,e){return NQ(n)||LQ(n,e)||O6(n,e)||UQ()}function UQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O6(n,e){if(n){if(typeof n=="string")return wA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wA(n,e)}}function wA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function LQ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,o;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(c){s=!0,o=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw o}}return i}}function NQ(n){if(Array.isArray(n))return n}function kD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ir(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kD(Object(t),!0).forEach(function(i){CA(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function CA(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lS(n,e){if(n==null)return{};var t=PQ(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function PQ(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var xC=L.forwardRef(function(n,e){var t=n.children,i=lS(n,MQ),r=U6(i),s=r.open,a=lS(r,TQ);return L.useImperativeHandle(e,function(){return{open:s}},[s]),de.createElement(L.Fragment,null,t(ir(ir({},a),{},{open:s})))});xC.displayName="Dropzone";var D6={disabled:!1,getFilesFromEvent:Y$,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};xC.defaultProps=D6;xC.propTypes={children:Ii.func,accept:Ii.oneOfType([Ii.string,Ii.arrayOf(Ii.string)]),multiple:Ii.bool,preventDropOnDocument:Ii.bool,noClick:Ii.bool,noKeyboard:Ii.bool,noDrag:Ii.bool,noDragEventsBubbling:Ii.bool,minSize:Ii.number,maxSize:Ii.number,maxFiles:Ii.number,disabled:Ii.bool,getFilesFromEvent:Ii.func,onFileDialogCancel:Ii.func,onFileDialogOpen:Ii.func,useFsAccessApi:Ii.bool,onDragEnter:Ii.func,onDragLeave:Ii.func,onDragOver:Ii.func,onDrop:Ii.func,onDropAccepted:Ii.func,onDropRejected:Ii.func,validator:Ii.func};var RA={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function U6(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ir(ir({},D6),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,s=e.maxSize,a=e.minSize,o=e.multiple,c=e.maxFiles,u=e.onDragEnter,h=e.onDragLeave,p=e.onDragOver,g=e.onDrop,y=e.onDropAccepted,x=e.onDropRejected,M=e.onFileDialogCancel,b=e.onFileDialogOpen,S=e.useFsAccessApi,T=e.preventDropOnDocument,A=e.noClick,w=e.noKeyboard,D=e.noDrag,O=e.noDragEventsBubbling,P=e.validator,B=L.useMemo(function(){return typeof b=="function"?b:GD},[b]),I=L.useMemo(function(){return typeof M=="function"?M:GD},[M]),z=L.useRef(null),k=L.useRef(null),V=L.useReducer(IQ,RA),j=$M(V,2),W=j[0],te=j[1],H=W.isFocused,Q=W.isFileDialogActive,ne=W.draggedFiles,re=L.useRef(typeof window<"u"&&window.isSecureContext&&S&&xQ()),G=function(){!re.current&&Q&&setTimeout(function(){if(k.current){var Ee=k.current.files;Ee.length||(te({type:"closeDialog"}),I())}},300)};L.useEffect(function(){return window.addEventListener("focus",G,!1),function(){window.removeEventListener("focus",G,!1)}},[k,Q,I,re]);var X=L.useRef([]),ie=function(Ee){z.current&&z.current.contains(Ee.target)||(Ee.preventDefault(),X.current=[])};L.useEffect(function(){return T&&(document.addEventListener("dragover",HD,!1),document.addEventListener("drop",ie,!1)),function(){T&&(document.removeEventListener("dragover",HD),document.removeEventListener("drop",ie))}},[z,T]);var se=L.useCallback(function(fe){fe.preventDefault(),fe.persist(),ze(fe),X.current=[].concat(CQ(X.current),[fe.target]),Ax(fe)&&Promise.resolve(r(fe)).then(function(Ee){oS(fe)&&!O||(te({draggedFiles:Ee,isDragActive:!0,type:"setDraggedFiles"}),u&&u(fe))})},[r,u,O]),ee=L.useCallback(function(fe){fe.preventDefault(),fe.persist(),ze(fe);var Ee=Ax(fe);if(Ee&&fe.dataTransfer)try{fe.dataTransfer.dropEffect="copy"}catch{}return Ee&&p&&p(fe),!1},[p,O]),ue=L.useCallback(function(fe){fe.preventDefault(),fe.persist(),ze(fe);var Ee=X.current.filter(function(Le){return z.current&&z.current.contains(Le)}),Re=Ee.indexOf(fe.target);Re!==-1&&Ee.splice(Re,1),X.current=Ee,!(Ee.length>0)&&(te({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Ax(fe)&&h&&h(fe))},[z,h,O]),pe=L.useCallback(function(fe,Ee){var Re=[],Le=[];fe.forEach(function(Fe){var et=C6(Fe,t),tt=$M(et,2),Ot=tt[0],at=tt[1],yt=R6(Fe,a,s),gt=$M(yt,2),ht=gt[0],nt=gt[1],wt=P?P(Fe):null;if(Ot&&ht&&!wt)Re.push(Fe);else{var St=[at,nt];wt&&(St=St.concat(wt)),Le.push({file:Fe,errors:St.filter(function(Ht){return Ht})})}}),(!o&&Re.length>1||o&&c>=1&&Re.length>c)&&(Re.forEach(function(Fe){Le.push({file:Fe,errors:[mQ]})}),Re.splice(0)),te({acceptedFiles:Re,fileRejections:Le,type:"setFiles"}),g&&g(Re,Le,Ee),Le.length>0&&x&&x(Le,Ee),Re.length>0&&y&&y(Re,Ee)},[te,o,t,a,s,c,g,y,x,P]),ve=L.useCallback(function(fe){fe.preventDefault(),fe.persist(),ze(fe),X.current=[],Ax(fe)&&Promise.resolve(r(fe)).then(function(Ee){oS(fe)&&!O||pe(Ee,fe)}),te({type:"reset"})},[r,pe,O]),_e=L.useCallback(function(){if(re.current){te({type:"openDialog"}),B();var fe={multiple:o,types:bQ(t)};window.showOpenFilePicker(fe).then(function(Ee){return r(Ee)}).then(function(Ee){pe(Ee,null),te({type:"closeDialog"})}).catch(function(Ee){SQ(Ee)?(I(Ee),te({type:"closeDialog"})):EQ(Ee)&&(re.current=!1,k.current&&(k.current.value=null,k.current.click()))});return}k.current&&(te({type:"openDialog"}),B(),k.current.value=null,k.current.click())},[te,B,I,S,pe,t,o]),Xe=L.useCallback(function(fe){!z.current||!z.current.isEqualNode(fe.target)||(fe.key===" "||fe.key==="Enter"||fe.keyCode===32||fe.keyCode===13)&&(fe.preventDefault(),_e())},[z,_e]),qe=L.useCallback(function(){te({type:"focus"})},[]),Be=L.useCallback(function(){te({type:"blur"})},[]),Se=L.useCallback(function(){A||(_Q()?setTimeout(_e,0):_e())},[A,_e]),He=function(Ee){return i?null:Ee},oe=function(Ee){return w?null:He(Ee)},lt=function(Ee){return D?null:He(Ee)},ze=function(Ee){O&&Ee.stopPropagation()},Qe=L.useMemo(function(){return function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ee=fe.refKey,Re=Ee===void 0?"ref":Ee,Le=fe.role,Fe=fe.onKeyDown,et=fe.onFocus,tt=fe.onBlur,Ot=fe.onClick,at=fe.onDragEnter,yt=fe.onDragOver,gt=fe.onDragLeave,ht=fe.onDrop,nt=lS(fe,AQ);return ir(ir(CA({onKeyDown:oe(Pc(Fe,Xe)),onFocus:oe(Pc(et,qe)),onBlur:oe(Pc(tt,Be)),onClick:He(Pc(Ot,Se)),onDragEnter:lt(Pc(at,se)),onDragOver:lt(Pc(yt,ee)),onDragLeave:lt(Pc(gt,ue)),onDrop:lt(Pc(ht,ve)),role:typeof Le=="string"&&Le!==""?Le:"button"},Re,z),!i&&!w?{tabIndex:0}:{}),nt)}},[z,Xe,qe,Be,Se,se,ee,ue,ve,w,D,i]),De=L.useCallback(function(fe){fe.stopPropagation()},[]),st=L.useMemo(function(){return function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ee=fe.refKey,Re=Ee===void 0?"ref":Ee,Le=fe.onChange,Fe=fe.onClick,et=lS(fe,wQ),tt=CA({accept:t,multiple:o,type:"file",style:{display:"none"},onChange:He(Pc(Le,ve)),onClick:He(Pc(Fe,De)),tabIndex:-1},Re,k);return ir(ir({},tt),et)}},[k,t,o,ve,i]),ke=ne.length,$=ke>0&&gQ({files:ne,accept:t,minSize:a,maxSize:s,multiple:o,maxFiles:c}),Y=ke>0&&!$;return ir(ir({},W),{},{isDragAccept:$,isDragReject:Y,isFocused:H&&!i,getRootProps:Qe,getInputProps:st,rootRef:z,inputRef:k,open:He(_e)})}function IQ(n,e){switch(e.type){case"focus":return ir(ir({},n),{},{isFocused:!0});case"blur":return ir(ir({},n),{},{isFocused:!1});case"openDialog":return ir(ir({},RA),{},{isFileDialogActive:!0});case"closeDialog":return ir(ir({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,i=e.draggedFiles;return ir(ir({},n),{},{draggedFiles:i,isDragActive:t});case"setFiles":return ir(ir({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return ir({},RA);default:return n}}function GD(){}function BQ(n){let e;const t=new Set,i=(u,h)=>{const p=typeof u=="function"?u(e):u;if(p!==e){const g=e;e=h?p:Object.assign({},e,p),t.forEach(y=>y(e,g))}},r=()=>e,s=(u,h=r,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(e);function y(){const x=h(e);if(!p(g,x)){const M=g;u(g=x,M)}}return t.add(y),()=>t.delete(y)},c={setState:i,getState:r,subscribe:(u,h,p)=>h||p?s(u,h,p):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,c),c}const zQ=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),VD=zQ?L.useEffect:L.useLayoutEffect;function FQ(n){const e=typeof n=="function"?BQ(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=L.useReducer(b=>b+1,0),a=e.getState(),o=L.useRef(a),c=L.useRef(i),u=L.useRef(r),h=L.useRef(!1),p=L.useRef();p.current===void 0&&(p.current=i(a));let g,y=!1;(o.current!==a||c.current!==i||u.current!==r||h.current)&&(g=i(a),y=!r(p.current,g)),VD(()=>{y&&(p.current=g),o.current=a,c.current=i,u.current=r,h.current=!1});const x=L.useRef(a);VD(()=>{const b=()=>{try{const T=e.getState(),A=c.current(T);u.current(p.current,A)||(o.current=T,p.current=A,s())}catch{h.current=!0,s()}},S=e.subscribe(b);return e.getState()!==x.current&&b(),S},[]);const M=y?g:p.current;return L.useDebugValue(M),M};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const HQ=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(a,o,c)=>{let u=a;if(o){const h=c?.equalityFn||Object.is;let p=a(i.getState());u=g=>{const y=a(g);if(!h(p,y)){const x=p;o(p=y,x)}},c?.fireImmediately&&o(p,p)}return r(u)},n(e,t,i)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var QM,jD;function kQ(){return jD||(jD=1,QM=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),QM}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var JM,WD;function L6(){if(WD)return JM;WD=1;var n=kQ();function e(t){return n(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return JM=function(i){var r,s;return!(e(i)===!1||(r=i.constructor,typeof r!="function")||(s=r.prototype,e(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)},JM}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var eT,XD;function bC(){if(XD)return eT;XD=1;var n=L6();return eT=function(t){return n(t)||typeof t=="function"||Array.isArray(t)},eT}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var tT,qD;function GQ(){return qD||(qD=1,tT=function(e,t,i){for(var r in e)if(t.call(i,e[r],r,e)===!1)break}),tT}var nT,YD;function VQ(){if(YD)return nT;YD=1;var n=bC(),e=GQ();function t(a,o){for(var c=arguments.length,u=0;++u<c;){var h=arguments[u];r(h)&&e(h,i,a)}return a}function i(a,o){if(s(o)){var c=this[o];r(a)&&r(c)?t(c,a):this[o]=a}}function r(a){return n(a)&&!Array.isArray(a)}function s(a){return a!=="__proto__"&&a!=="constructor"&&a!=="prototype"}return nT=t,nT}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var iT,ZD;function jQ(){if(ZD)return iT;ZD=1,iT=function(t,i,r,s,a){if(!n(t)||!i)return t;if(i=e(i),r&&(i+="."+e(r)),s&&(i+="."+e(s)),a&&(i+="."+e(a)),i in t)return t[i];for(var o=i.split("."),c=o.length,u=-1;t&&++u<c;){for(var h=o[u];h[h.length-1]==="\\";)h=h.slice(0,-1)+"."+o[++u];t=t[h]}return t};function n(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return iT}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var rT,KD;function WQ(){return KD||(KD=1,rT=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,i=Object(n),r=arguments.length,s=0;++s<r;)for(var a=Object(arguments[s]),o=Object.getOwnPropertySymbols(a),c=0;c<o.length;c++){var u=o[c];t.call(a,u)&&(i[u]=a[u])}return i}),rT}var sT,$D;function XQ(){if($D)return sT;$D=1;var n=bC(),e=WQ();sT=Object.assign||function(o){if(o===null||typeof o>"u")throw new TypeError("Cannot convert undefined or null to object");s(o)||(o={});for(var c=1;c<arguments.length;c++){var u=arguments[c];i(u)&&(u=r(u)),s(u)&&(t(o,u),e(o,u))}return o};function t(o,c){for(var u in c)a(c,u)&&(o[u]=c[u])}function i(o){return o&&typeof o=="string"}function r(o){var c={};for(var u in o)c[u]=o[u];return c}function s(o){return o&&typeof o=="object"||n(o)}function a(o,c){return Object.prototype.hasOwnProperty.call(o,c)}return sT}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var aT,QD;function qQ(){if(QD)return aT;QD=1;var n=XQ();aT=function(r,s,a){if(typeof r!="string")throw new TypeError("expected a string");typeof s=="function"&&(a=s,s=null),typeof s=="string"&&(s={sep:s});var o=n({sep:"."},s),c=o.quotes||['"',"'","`"],u;o.brackets===!0?u={"<":">","(":")","[":"]","{":"}"}:o.brackets&&(u=o.brackets);var h=[],p=[],g=[""],y=o.sep,x=r.length,M=-1,b;function S(){if(u&&p.length)return u[p[p.length-1]]}for(;++M<x;){var T=r[M],A=r[M+1],w={val:T,idx:M,arr:g,str:r};if(h.push(w),T==="\\"){w.val=i(o,r,M)===!0?T+A:A,w.escaped=!0,typeof a=="function"&&a(w),g[g.length-1]+=w.val,M++;continue}if(u&&u[T]){p.push(T);var D=S(),O=M+1;if(r.indexOf(D,O+1)!==-1)for(;p.length&&O<x;){var P=r[++O];if(P==="\\"){P++;continue}if(c.indexOf(P)!==-1){O=e(r,P,O+1);continue}if(D=S(),p.length&&r.indexOf(D,O+1)===-1)break;if(u[P]){p.push(P);continue}D===P&&p.pop()}if(b=O,b===-1){g[g.length-1]+=T;continue}T=r.slice(M,b+1),w.val=T,w.idx=M=b}if(c.indexOf(T)!==-1){if(b=e(r,T,M+1),b===-1){g[g.length-1]+=T;continue}t(T,o)===!0?T=r.slice(M,b+1):T=r.slice(M+1,b),w.val=T,w.idx=M=b}if(typeof a=="function"&&(a(w,h),T=w.val,M=w.idx),w.val===y&&w.split!==!1){g.push("");continue}g[g.length-1]+=w.val}return g};function e(r,s,a,o){var c=r.indexOf(s,a);return r.charAt(c-1)==="\\"?e(r,s,c+1):c}function t(r,s){return s.keepDoubleQuotes===!0&&r==='"'||s.keepSingleQuotes===!0&&r==="'"?!0:s.keepQuotes}function i(r,s,a){return typeof r.keepEscaping=="function"?r.keepEscaping(s,a):r.keepEscaping===!0||s[a+1]==="\\"}return aT}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var oT,JD;function N6(){return JD||(JD=1,oT=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),oT}var lT,e5;function YQ(){if(e5)return lT;e5=1;var n=N6();lT=function(r){n(r)||(r={});for(var s=arguments.length,a=1;a<s;a++){var o=arguments[a];n(o)&&e(r,o)}return r};function e(i,r){for(var s in r)t(r,s)&&(i[s]=r[s])}function t(i,r){return Object.prototype.hasOwnProperty.call(i,r)}return lT}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var cT,t5;function ZQ(){if(t5)return cT;t5=1;var n=qQ(),e=YQ(),t=L6(),i=N6();cT=function(s,a,o){if(!i(s)||(Array.isArray(a)&&(a=[].concat.apply([],a).join(".")),typeof a!="string"))return s;for(var c=n(a,{sep:".",brackets:!0}).filter(r),u=c.length,h=-1,p=s;++h<u;){var g=c[h];if(h!==u-1){i(p[g])||(p[g]={}),p=p[g];continue}t(p[g])&&t(o)?p[g]=e({},p[g],o):p[g]=o}return s};function r(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return cT}var uT,n5;function KQ(){if(n5)return uT;n5=1;var n=bC(),e=VQ(),t=jQ(),i=ZQ();return uT=function(s,a,o){if(!n(s))throw new TypeError("expected an object");if(typeof a!="string"||o==null)return e.apply(null,arguments);if(typeof o=="string")return i(s,a,o),s;var c=t(s,a);return n(o)&&n(c)&&(o=e({},c,o)),i(s,a,o),s},uT}var $Q=KQ();const QQ=fh($Q),SC=(...n)=>n.filter(Boolean).join(".");function JQ(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function eJ(n,e){return Object.entries(XZ(n,e)).reduce((t,[,{value:i,disabled:r,key:s}])=>(t[s]=r?void 0:i,t),{})}function tJ(n,e){const t=L.useRef();return fy(n,t.current)||(t.current=n),t.current}function P6(n,e){return L.useMemo(n,tJ(e))}function nJ(n){const e=L.useRef(null),t=L.useRef(null),i=L.useRef(!0);return L.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),L.useEffect(()=>{if(i.current){i.current=!1;return}let r;const s=e.current,a=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",a,{once:!0});const{height:o}=t.current.getBoundingClientRect();return s.style.height=o+"px",n||(s.style.overflow="hidden",r=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",a),clearTimeout(r)}},[n]),{wrapperRef:e,contentRef:t}}const iJ=n=>{const[e,t]=L.useState(n.getVisiblePaths());return L.useEffect(()=>{t(n.getVisiblePaths());const i=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:uE});return()=>i()},[n]),e};function rJ(n,e,t){return n.useStore(r=>{const s=an(an({},t),r.data);return eJ(s,e)},uE)}function I6(n=3){const e=L.useRef(null),t=L.useRef(null),[i,r]=L.useState(!1),s=L.useCallback(()=>r(!0),[]),a=L.useCallback(()=>r(!1),[]);return L.useLayoutEffect(()=>{if(i){const{bottom:o,top:c,left:u}=e.current.getBoundingClientRect(),{height:h}=t.current.getBoundingClientRect(),p=o+h>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",p==="down"?t.current.style.top=o+n+"px":t.current.style.bottom=window.innerHeight-c+n+"px"}},[n,i]),{popinRef:e,wrapperRef:t,shown:i,show:s,hide:a}}C$([R$]);const sJ={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Va.extend({color:()=>n=>ua(n).isValid()});const aJ=n=>Va().color().test(n);function B6(n,{format:e,hasAlpha:t,isString:i}){const r=sJ[e]+(i&&e!=="hex"?"String":""),s=n[r]();return typeof s=="object"&&!t?qZ(s,["a"]):s}const z6=(n,e)=>{const t=ua(n);if(!t.isValid())throw Error("Invalid color");return B6(t,e)},oJ=(n,e)=>B6(ua(n),an(an({},e),{},{isString:!0,format:"hex"})),lJ=({value:n})=>{const e=w$(n),t=e==="name"?"hex":e,i=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),r={format:t,hasAlpha:i,isString:typeof n=="string"};return{value:z6(n,r),settings:r}};var cJ=Object.freeze({__proto__:null,schema:aJ,sanitize:z6,format:oJ,normalize:lJ});const uJ=rn("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),fJ=rn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),hJ=rn("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function i5(n,e){return e!=="rgb"?ua(n).toRgb():n}function dJ({value:n,displayValue:e,settings:t,onUpdate:i}){const{emitOnEditStart:r,emitOnEditEnd:s}=Vs(),{format:a,hasAlpha:o}=t,{popinRef:c,wrapperRef:u,shown:h,show:p,hide:g}=I6(),y=L.useRef(0),[x,M]=L.useState(()=>i5(n,a)),b=o?I$:z$,S=()=>{M(i5(n,a)),p(),r()},T=()=>{g(),s(),window.clearTimeout(y.current)},A=()=>{y.current=window.setTimeout(T,500)};return L.useEffect(()=>()=>window.clearTimeout(y.current),[]),de.createElement(de.Fragment,null,de.createElement(uJ,{ref:c,active:h,onClick:()=>S(),style:{color:e}}),h&&de.createElement(dC,null,de.createElement(s6,{onPointerUp:T}),de.createElement(hJ,{ref:u,onMouseEnter:()=>window.clearTimeout(y.current),onMouseLeave:w=>w.buttons===0&&A()},de.createElement(b,{color:x,onChange:i}))))}function pJ(){const{value:n,displayValue:e,label:t,onChange:i,onUpdate:r,settings:s}=Vs();return de.createElement(tl,{input:!0},de.createElement(Zl,null,t),de.createElement(fJ,null,de.createElement(dJ,{value:n,displayValue:e,onChange:i,onUpdate:r,settings:s}),de.createElement(hC,{value:e,onChange:i,onUpdate:r})))}var mJ=an({component:pJ},cJ);function gJ(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Vs();return de.createElement(tl,{input:!0},de.createElement(Zl,null,n),de.createElement(mC,{value:e,settings:i,onUpdate:t}))}var vJ=an({component:gJ},d6(["x","y","z"]));const yJ=rn("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),_J=rn("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function xJ({value:n,settings:e,onUpdate:t}){const i=L.useRef(),r=L.useRef(0),s=L.useRef(0),a=L.useRef(1),[o,c]=L.useState(!1),[u,h]=L.useState(!1),[p,g]=o6(),y=L.useRef(null),x=L.useRef(null);L.useLayoutEffect(()=>{if(o){const{top:V,left:j,width:W,height:te}=y.current.getBoundingClientRect();x.current.style.left=j+W/2+"px",x.current.style.top=V+te/2+"px"}},[o]);const{keys:[M,b],joystick:S}=e,T=S==="invertY"?1:-1,{[M]:{step:A},[b]:{step:w}}=e,D=Hu("sizes","joystickWidth"),O=Hu("sizes","joystickHeight"),P=parseFloat(D)*.8/2,B=parseFloat(O)*.8/2,I=L.useCallback(()=>{i.current||(h(!0),r.current&&g({x:r.current*P}),s.current&&g({y:s.current*-B}),i.current=window.setInterval(()=>{t(V=>{const j=A*r.current*a.current,W=T*w*s.current*a.current;return Array.isArray(V)?{[M]:V[0]+j,[b]:V[1]+W}:{[M]:V[M]+j,[b]:V[b]+W}})},16))},[P,B,t,g,A,w,M,b,T]),z=L.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,h(!1)},[]);L.useEffect(()=>{function V(j){a.current=WP(j)}return window.addEventListener("keydown",V),window.addEventListener("keyup",V),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",V),window.removeEventListener("keyup",V)}},[]);const k=Vy(({first:V,active:j,delta:[W,te],movement:[H,Q]})=>{V&&c(!0);const ne=ch(H,-P,P),re=ch(Q,-B,B);r.current=Math.abs(H)>Math.abs(ne)?Math.sign(H-ne):0,s.current=Math.abs(Q)>Math.abs(re)?Math.sign(re-Q):0;let G=n[M],X=n[b];j?(r.current||(G+=W*A*a.current,g({x:ne})),s.current||(X-=T*te*w*a.current,g({y:re})),r.current||s.current?I():z(),t({[M]:G,[b]:X})):(c(!1),r.current=0,s.current=0,g({x:0,y:0}),z())});return de.createElement(yJ,vr({ref:y},k()),o&&de.createElement(dC,null,de.createElement(_J,{ref:x,isOutOfBounds:u},de.createElement("div",null),de.createElement("span",{ref:p}))))}const bJ=rn("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function SJ(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Vs();return de.createElement(tl,{input:!0},de.createElement(Zl,null,n),de.createElement(bJ,{withJoystick:!!i.joystick},i.joystick&&de.createElement(xJ,{value:e,settings:i,onUpdate:t}),de.createElement(mC,{value:e,settings:i,onUpdate:t})))}const EJ=["joystick"],F6=d6(["x","y"]),MJ=n=>{let{joystick:e=!0}=n,t=Di(n,EJ);const{value:i,settings:r}=F6.normalize(t);return{value:i,settings:an(an({},r),{},{joystick:e})}};var TJ=an(an({component:SJ},F6),{},{normalize:MJ});const AJ=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},wJ=(n,e)=>typeof e=="object"&&"image"in e,CJ=({image:n})=>({value:n});var RJ=Object.freeze({__proto__:null,sanitize:AJ,schema:wJ,normalize:CJ});const OJ=rn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),DJ=rn("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),UJ=rn("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),LJ=rn("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),NJ=rn("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),PJ=rn("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function IJ(){const{label:n,value:e,onUpdate:t,disabled:i}=Vs(),{popinRef:r,wrapperRef:s,shown:a,show:o,hide:c}=I6(),u=L.useCallback(x=>{x.length&&t(x[0])},[t]),h=L.useCallback(x=>{x.stopPropagation(),t(void 0)},[t]),{getRootProps:p,getInputProps:g,isDragAccept:y}=U6({maxFiles:1,accept:"image/*",onDrop:u,disabled:i});return de.createElement(tl,{input:!0},de.createElement(Zl,null,n),de.createElement(OJ,null,de.createElement(UJ,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&o(),onPointerUp:c,style:{backgroundImage:e?`url(${e})`:"none"}}),a&&!!e&&de.createElement(dC,null,de.createElement(s6,{onPointerUp:c,style:{cursor:"pointer"}}),de.createElement(LJ,{ref:s,style:{backgroundImage:`url(${e})`}})),de.createElement(DJ,p({isDragAccept:y}),de.createElement("input",g()),de.createElement(NJ,null,y?"drop image":"click or drop")),de.createElement(PJ,{onClick:h,disabled:!e})))}var BJ=an({component:IJ},RJ);const r5=Va().number(),zJ=(n,e)=>Va().array().length(2).every.number().test(n)&&Va().schema({min:r5,max:r5}).test(e),cS=n=>({min:n[0],max:n[1]}),H6=(n,{bounds:[e,t]},i)=>{const r=Array.isArray(n)?cS(n):n,s={min:i[0],max:i[1]},{min:a,max:o}=an(an({},s),r);return[ch(Number(a),e,Math.max(e,o)),ch(Number(o),Math.min(t,a),t)]},FJ=({value:n,min:e,max:t})=>{const i={min:e,max:t},r=h6(cS(n),{min:i,max:i}),s=[e,t],a=an(an({},r),{},{bounds:s});return{value:H6(cS(n),a,n),settings:a}};var HJ=Object.freeze({__proto__:null,schema:zJ,format:cS,sanitize:H6,normalize:FJ});const kJ=["value","bounds","onDrag"],GJ=["bounds"],VJ=rn("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function jJ(n){let{value:e,bounds:[t,i],onDrag:r}=n,s=Di(n,kJ);const a=L.useRef(null),o=L.useRef(null),c=L.useRef(null),u=L.useRef(0),h=Hu("sizes","scrubberWidth"),p=Vy(({event:x,first:M,xy:[b],movement:[S],memo:T={}})=>{if(M){const{width:w,left:D}=a.current.getBoundingClientRect();u.current=w-parseFloat(h);const O=x?.target===o.current||x?.target===c.current;T.pos=rS((b-D)/w,t,i);const P=Math.abs(T.pos-e.min)-Math.abs(T.pos-e.max);T.key=P<0||P===0&&T.pos<=e.min?"min":"max",O&&(T.pos=e[T.key])}const A=T.pos+rS(S/u.current,0,i-t);return r({[T.key]:NK(A,s[T.key])}),T}),g=`calc(${iS(e.min,t,i)} * (100% - ${h} - 8px) + 4px)`,y=`calc(${1-iS(e.max,t,i)} * (100% - ${h} - 8px) + 4px)`;return de.createElement(c6,vr({ref:a},p()),de.createElement(l6,null,de.createElement(u6,{style:{left:g,right:y}})),de.createElement(_A,{position:"left",ref:o,style:{left:g}}),de.createElement(_A,{position:"right",ref:c,style:{right:y}}))}function WJ(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Vs(),r=Di(i,GJ);return de.createElement(de.Fragment,null,de.createElement(tl,{input:!0},de.createElement(Zl,null,n),de.createElement(VJ,null,de.createElement(jJ,vr({value:e},i,{onDrag:t})),de.createElement(mC,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var XJ=an({component:WJ},HJ);const qJ=()=>{const n=new Map;return{on:(e,t)=>{let i=n.get(e);i===void 0&&(i=new Set,n.set(e,i)),i.add(t)},off:(e,t)=>{const i=n.get(e);i!==void 0&&(i.delete(t),i.size===0&&n.delete(e))},emit:(e,...t)=>{const i=n.get(e);if(i!==void 0)for(const r of i)r(...t)}}},YJ=["type","value"],ZJ=["onChange","transient","onEditStart","onEditEnd"],KJ=function(){const e=FQ(HQ(()=>({data:{}}))),t=qJ();this.storeId=WZ(),this.useStore=e;const i={},r=new Set;this.getVisiblePaths=()=>{const a=this.getData(),o=Object.keys(a),c=[];Object.entries(i).forEach(([h,p])=>{p.render&&o.some(g=>g.indexOf(h)===0)&&!p.render(this.get)&&c.push(h+".")});const u=[];return r.forEach(h=>{h in a&&a[h].__refCount>0&&c.every(p=>h.indexOf(p)===-1)&&(!a[h].render||a[h].render(this.get))&&u.push(h)}),u},this.setOrderedPaths=a=>{a.forEach(o=>r.add(o))},this.orderPaths=a=>(this.setOrderedPaths(a),a),this.disposePaths=a=>{e.setState(o=>{const c=o.data;return a.forEach(u=>{if(u in c){const h=c[u];h.__refCount--,h.__refCount===0&&h.type in Ko&&delete c[u]}}),{data:c}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=a=>i[a]||{},this.getData=()=>e.getState().data,this.addData=(a,o)=>{e.setState(c=>{const u=c.data;return Object.entries(a).forEach(([h,p])=>{let g=u[h];if(g){const{type:y,value:x}=p,M=Di(p,YJ);y!==g.type?Lu(rr.INPUT_TYPE_OVERRIDE,y):((g.__refCount===0||o)&&Object.assign(g,M),g.__refCount++)}else u[h]=an(an({},p),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(a,o,c)=>{e.setState(u=>{const h=u.data;return vD(h[a],o,a,this,c),{data:h}})},this.setSettingsAtPath=(a,o)=>{e.setState(c=>{const u=c.data;return u[a].settings=an(an({},u[a].settings),o),{data:u}})},this.disableInputAtPath=(a,o)=>{e.setState(c=>{const u=c.data;return u[a].disabled=o,{data:u}})},this.set=(a,o)=>{e.setState(c=>{const u=c.data;return Object.entries(a).forEach(([h,p])=>{try{vD(u[h],p,void 0,void 0,o)}catch{}}),{data:u}})},this.getInput=a=>{try{return this.getData()[a]}catch{Lu(rr.PATH_DOESNT_EXIST,a)}},this.get=a=>{var o;return(o=this.getInput(a))===null||o===void 0?void 0:o.value},this.emitOnEditStart=a=>{t.emit(`onEditStart:${a}`,this.get(a),a,an(an({},this.getInput(a)),{},{get:this.get}))},this.emitOnEditEnd=a=>{t.emit(`onEditEnd:${a}`,this.get(a),a,an(an({},this.getInput(a)),{},{get:this.get}))},this.subscribeToEditStart=(a,o)=>{const c=`onEditStart:${a}`;return t.on(c,o),()=>t.off(c,o)},this.subscribeToEditEnd=(a,o)=>{const c=`onEditEnd:${a}`;return t.on(c,o),()=>t.off(c,o)};const s=(a,o,c)=>{const u={};return Object.entries(a).forEach(([h,p])=>{if(h==="")return Lu(rr.EMPTY_KEY);let g=SC(o,h);if(p.type===Ko.FOLDER){const y=s(p.schema,g,c);Object.assign(u,y),g in i||(i[g]=p.settings)}else if(h in c)Lu(rr.DUPLICATE_KEYS,h,g,c[h].path);else{const y=JZ(p,h,g,u);if(y){const{type:x,options:M,input:b}=y,{onChange:S,transient:T,onEditStart:A,onEditEnd:w}=M,D=Di(M,ZJ);u[g]=an(an(an({type:x},D),b),{},{fromPanel:!0}),c[h]={path:g,onChange:S,transient:T,onEditStart:A,onEditEnd:w}}else Lu(rr.UNKNOWN_INPUT,g,p)}}),u};this.getDataFromSchema=a=>{const o={};return[s(a,"",o),o]}},k6=new KJ,$J={collapsed:!1};function QJ(n,e){return{type:Ko.FOLDER,schema:n,settings:an(an({},$J),e)}}const JJ={disabled:!1};function OA(n,e){return{type:Ko.BUTTON,onClick:n,settings:an(an({},JJ),e)}}const s5=n=>"__levaInput"in n,eee=(n,e)=>{const t={},i=e?e.toLowerCase():null;return n.forEach(r=>{const[s,a]=JQ(r);(!i||s.toLowerCase().indexOf(i)>-1)&&QQ(t,a,{[s]:{__levaInput:!0,path:r}})}),t},tee=["type","label","path","valueKey","value","settings","setValue","disabled"];function nee(n){let{type:e,label:t,path:i,valueKey:r,value:s,settings:a,setValue:o,disabled:c}=n,u=Di(n,tee);const{displayValue:h,onChange:p,onUpdate:g}=a6({type:e,value:s,settings:a,setValue:o}),y=Qd[e].component;return y?de.createElement(KP.Provider,{value:an({key:r,path:i,id:""+i,label:t,displayValue:h,value:s,onChange:p,onUpdate:g,settings:a,setValue:o,disabled:c},u)},de.createElement(yK,{disabled:c},de.createElement(y,null))):(Lu(rr.NO_COMPONENT_FOR_TYPE,e,i),null)}const iee=rn("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function ree({onClick:n,settings:e,label:t}){const i=Gy();return de.createElement(tl,null,de.createElement(iee,{disabled:e.disabled,onClick:()=>n(i.get)},t))}const see=rn("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),aee=rn("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),oee=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(t=e.label),i=e.opts),{label:t,opts:i}};function lee(n){const{label:e,opts:t}=oee(n),i=Gy();return de.createElement(tl,{input:!!e},e&&de.createElement(Zl,null,e),de.createElement(see,null,Object.entries(t).map(([r,s])=>de.createElement(aee,{key:r,onClick:()=>s(i.get)},r))))}const cee=rn("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),G6=100;function uee(n,e){n.push(e),n.length>G6&&n.shift()}const fee=L.forwardRef(function({initialValue:n},e){const t=Hu("colors","highlight3"),i=Hu("colors","elevation2"),r=Hu("colors","highlight1"),[s,a]=L.useMemo(()=>[ua(r).alpha(.4).toRgbString(),ua(r).alpha(.1).toRgbString()],[r]),o=L.useRef([n]),c=L.useRef(n),u=L.useRef(n),h=L.useRef(),p=L.useCallback((x,M)=>{if(!x)return;const{width:b,height:S}=x,T=new Path2D,A=b/G6,w=S*.05;for(let P=0;P<o.current.length;P++){const B=iS(o.current[P],c.current,u.current),I=A*P,z=S-B*(S-w*2)-w;T.lineTo(I,z)}M.clearRect(0,0,b,S);const D=new Path2D(T);D.lineTo(A*(o.current.length+1),S),D.lineTo(0,S),D.lineTo(0,0);const O=M.createLinearGradient(0,0,0,S);O.addColorStop(0,s),O.addColorStop(1,a),M.fillStyle=O,M.fill(D),M.strokeStyle=i,M.lineJoin="round",M.lineWidth=14,M.stroke(T),M.strokeStyle=t,M.lineWidth=2,M.stroke(T)},[t,i,s,a]),[g,y]=wK(p);return L.useImperativeHandle(e,()=>({frame:x=>{(c.current===void 0||x<c.current)&&(c.current=x),(u.current===void 0||x>u.current)&&(u.current=x),uee(o.current,x),h.current=requestAnimationFrame(()=>p(g.current,y.current))}}),[g,y,p]),L.useEffect(()=>()=>cancelAnimationFrame(h.current),[]),de.createElement(cee,{ref:g})}),a5=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),hee=L.forwardRef(function({initialValue:n},e){const[t,i]=L.useState(a5(n));return L.useImperativeHandle(e,()=>({frame:r=>i(a5(r))}),[]),de.createElement("div",null,t)});function o5(n){return typeof n=="function"?n():n.current}function dee({label:n,objectOrFn:e,settings:t}){const i=L.useRef(),r=L.useRef(o5(e));return L.useEffect(()=>{const s=window.setInterval(()=>{var a;document.hidden||(a=i.current)===null||a===void 0||a.frame(o5(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),de.createElement(tl,{input:!0},de.createElement(Zl,{align:"top"},n),t.graph?de.createElement(fee,{ref:i,initialValue:r.current}):de.createElement(hee,{ref:i,initialValue:r.current}))}const pee=["type","label","key"],mee={[Ko.BUTTON]:ree,[Ko.BUTTON_GROUP]:lee,[Ko.MONITOR]:dee},gee=de.memo(({path:n})=>{const[e,{set:t,setSettings:i,disable:r,storeId:s,emitOnEditStart:a,emitOnEditEnd:o}]=RK(n);if(!e)return null;const{type:c,label:u,key:h}=e,p=Di(e,pee);if(c in Ko){const g=mee[c];return de.createElement(g,vr({label:u,path:n},p))}return c in Qd?de.createElement(nee,vr({key:s+n,type:c,label:u,storeId:s,path:n,valueKey:h,setValue:t,setSettings:i,disable:r,emitOnEditStart:a,emitOnEditEnd:o},p)):(BZ(rr.UNSUPPORTED_INPUT,c,n),null)});function vee({toggle:n,toggled:e,name:t}){return de.createElement(mK,{onClick:()=>n()},de.createElement(pC,{toggled:e}),de.createElement("div",null,t))}const yee=({name:n,path:e,tree:t})=>{const i=Gy(),r=SC(e,n),{collapsed:s,color:a}=i.getFolderSettings(r),[o,c]=L.useState(!s),u=L.useRef(null),h=Hu("colors","folderWidgetColor"),p=Hu("colors","folderTextColor");return L.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",a||h),u.current.style.setProperty("--leva-colors-folderTextColor",a||p)},[a,h,p]),de.createElement(sS,{ref:u},de.createElement(vee,{name:n,toggled:o,toggle:()=>c(g=>!g)}),de.createElement(V6,{parent:r,tree:t,toggled:o}))},V6=de.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:i,tree:r,toggled:s})=>{const{wrapperRef:a,contentRef:o}=nJ(s),c=Gy(),u=([p,g])=>{var y;return(s5(g)?(y=c.getInput(g.path))===null||y===void 0?void 0:y.order:c.getFolderSettings(SC(i,p)).order)||0},h=Object.entries(r).sort((p,g)=>u(p)-u(g));return de.createElement(vA,{ref:a,isRoot:n,fill:e,flat:t},de.createElement(n6,{ref:o,isRoot:n,toggled:s},h.map(([p,g])=>s5(g)?de.createElement(gee,{key:g.path,valueKey:g.valueKey,path:g.path}):de.createElement(yee,{key:p,name:p,path:i,tree:g}))))}),_ee=rn("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${r6}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),j6=40,uS=rn("i",{$flexCenter:"",width:j6,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),xee=rn("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),bee=rn("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${uS}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),See=rn("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),Eee=rn("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:j6}}}}),Mee=de.forwardRef(({setFilter:n,toggle:e},t)=>{const[i,r]=L.useState(""),s=L.useMemo(()=>jP(n,250),[n]),a=()=>{n(""),r("")},o=c=>{const u=c.currentTarget.value;e(!0),r(u)};return L.useEffect(()=>{s(i)},[i,s]),de.createElement(de.Fragment,null,de.createElement(See,{ref:t,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:c=>c.stopPropagation(),onChange:o}),de.createElement(uS,{onClick:()=>a(),style:{visibility:i?"visible":"hidden"}},de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function Tee({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:i,toggle:r,toggled:s,title:a,drag:o,filterEnabled:c,from:u}){const[h,p]=L.useState(!1),g=L.useRef(null);L.useEffect(()=>{var x,M;h?(x=g.current)===null||x===void 0||x.focus():(M=g.current)===null||M===void 0||M.blur()},[h]);const y=Vy(({offset:[x,M],first:b,last:S})=>{e({x,y:M}),b&&t({x,y:M}),S&&i({x,y:M})},{filterTaps:!0,from:({offset:[x,M]})=>[u?.x||x,u?.y||M]});return L.useEffect(()=>{const x=M=>{M.key==="L"&&M.shiftKey&&M.metaKey&&p(b=>!b)};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[]),de.createElement(de.Fragment,null,de.createElement(xee,{mode:o?"drag":void 0},de.createElement(uS,{active:!s,onClick:()=>r()},de.createElement(pC,{toggled:s,width:12,height:8})),de.createElement(Eee,vr({},o?y():{},{drag:o,filterEnabled:c}),a===void 0&&o?de.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},de.createElement("circle",{cx:"2",cy:"2",r:"2"}),de.createElement("circle",{cx:"14",cy:"2",r:"2"}),de.createElement("circle",{cx:"26",cy:"2",r:"2"}),de.createElement("circle",{cx:"2",cy:"12",r:"2"}),de.createElement("circle",{cx:"14",cy:"12",r:"2"}),de.createElement("circle",{cx:"26",cy:"12",r:"2"})):a),c&&de.createElement(uS,{active:h,onClick:()=>p(x=>!x)},de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},de.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),de.createElement(bee,{toggled:h},de.createElement(Mee,{ref:g,setFilter:n,toggle:r})))}const Aee=["store","hidden","theme","collapsed"];function wee(n){let{store:e,hidden:t=!1,theme:i,collapsed:r=!1}=n,s=Di(n,Aee);const a=P6(()=>cK(i),[i]),[o,c]=L.useState(!r),u=typeof r=="object"?!r.collapsed:o,h=L.useMemo(()=>typeof r=="object"?p=>{typeof p=="function"?r.onChange(!p(!r.collapsed)):r.onChange(!p)}:c,[r]);return!e||t?null:de.createElement(fC.Provider,{value:a},de.createElement(Cee,vr({store:e},s,{toggled:u,setToggle:h,rootClass:a.className})))}const Cee=de.memo(({store:n,rootClass:e,fill:t=!1,flat:i=!1,neverHide:r=!1,oneLineLabels:s=!1,titleBar:a={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:o=!1,toggled:c,setToggle:u})=>{var h,p;const g=iJ(n),[y,x]=L.useState(""),M=L.useMemo(()=>eee(g,y),[g,y]),[b,S]=o6(),T=r||g.length>0,A=typeof a=="object"&&a.title||void 0,w=typeof a=="object"&&(h=a.drag)!==null&&h!==void 0?h:!0,D=typeof a=="object"&&(p=a.filter)!==null&&p!==void 0?p:!0,O=typeof a=="object"&&a.position||void 0,P=typeof a=="object"&&a.onDrag||void 0,B=typeof a=="object"&&a.onDragStart||void 0,I=typeof a=="object"&&a.onDragEnd||void 0;return de.useEffect(()=>{S({x:O?.x,y:O?.y})},[O,S]),lK(),de.createElement(QP.Provider,{value:{hideCopyButton:o}},de.createElement(_ee,{ref:b,className:e,fill:t,flat:i,oneLineLabels:s,hideTitleBar:!a,style:{display:T?"block":"none"}},a&&de.createElement(Tee,{onDrag:z=>{S(z),P?.(z)},onDragStart:z=>B?.(z),onDragEnd:z=>I?.(z),setFilter:x,toggle:z=>u(k=>z??!k),toggled:c,title:A,drag:w,filterEnabled:D,from:O}),T&&de.createElement($P.Provider,{value:n},de.createElement(V6,{isRoot:!0,fill:t,flat:i,tree:M,toggled:c}))))}),Ree=["isRoot"];let fS=!1,Nd=null;function W6(n){let{isRoot:e=!1}=n,t=Di(n,Ree);return L.useEffect(()=>(fS=!0,!e&&Nd&&(Nd.remove(),Nd=null),()=>{e||(fS=!1)}),[e]),de.createElement(wee,vr({store:k6},t))}function Oee(n){L.useEffect(()=>{n&&!fS&&(Nd||(Nd=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Nd),mS.createRoot(Nd).render(de.createElement(W6,{isRoot:!0})))),fS=!0)},[n])}function Dee(n,e,t,i,r){let s,a,o,c,u;return typeof n=="string"?(a=n,s=e,Array.isArray(t)&&(u=t)):(s=n,Array.isArray(e)?u=e:(c=e,u=t)),{schema:s,folderName:a,folderSettings:o,hookSettings:c,deps:u||[]}}function X6(n,e,t,i,r){const{folderName:s,schema:a,folderSettings:o,hookSettings:c,deps:u}=Dee(n,e,t),h=typeof a=="function",p=L.useRef(!1),g=L.useRef(!0),y=P6(()=>{p.current=!0;const k=typeof a=="function"?a():a;return s?{[s]:QJ(k,o)}:k},u),x=!(c!=null&&c.store);Oee(x);const[M]=L.useState(()=>c?.store||k6),[b,S]=L.useMemo(()=>M.getDataFromSchema(y),[M,y]),[T,A,w,D,O]=L.useMemo(()=>{const k=[],V=[],j={},W={},te={};return Object.values(S).forEach(({path:H,onChange:Q,onEditStart:ne,onEditEnd:re,transient:G})=>{k.push(H),Q?(j[H]=Q,G||V.push(H)):V.push(H),ne&&(W[H]=ne),re&&(te[H]=re)}),[k,V,j,W,te]},[S]),P=L.useMemo(()=>M.orderPaths(T),[T,M]),B=rJ(M,A,b),I=L.useCallback(k=>{const V=Object.entries(k).reduce((j,[W,te])=>Object.assign(j,{[S[W].path]:te}),{});M.set(V,!1)},[M,S]),z=L.useCallback(k=>M.get(S[k].path),[M,S]);return L.useEffect(()=>{const k=!g.current&&p.current;return M.addData(b,k),g.current=!1,p.current=!1,()=>M.disposePaths(P)},[M,P,b]),L.useEffect(()=>{const k=[];return Object.entries(w).forEach(([V,j])=>{j(M.get(V),V,an({initial:!0,get:M.get},M.getInput(V)));const W=M.useStore.subscribe(te=>{const H=te.data[V];return[H.disabled?void 0:H.value,H]},([te,H])=>j(te,V,an({initial:!1,get:M.get},H)),{equalityFn:uE});k.push(W)}),()=>k.forEach(V=>V())},[M,w]),L.useEffect(()=>{const k=[];return Object.entries(D).forEach(([V,j])=>k.push(M.subscribeToEditStart(V,j))),Object.entries(O).forEach(([V,j])=>k.push(M.subscribeToEditEnd(V,j))),()=>k.forEach(V=>V())},[D,O,M]),h?[B,I,z]:B}Xu(Vl.SELECT,XK);Xu(Vl.IMAGE,BJ);Xu(Vl.NUMBER,IK);Xu(Vl.COLOR,mJ);Xu(Vl.STRING,t$);Xu(Vl.BOOLEAN,l$);Xu(Vl.INTERVAL,XJ);Xu(Vl.VECTOR3D,vJ);Xu(Vl.VECTOR2D,TJ);const EC=Fy(null),q6=Fy(null),Y6=Fy(0),Z6=Fy(0),K6=Fy(1e-6),Uee=()=>{const n=$d(EC),{controls:e}=on(),t=()=>{e&&n&&e.fitToBox(new Kn().setFromObject(n),!0)},{showModel:i}=X6({showModel:{label:"",value:!0},:OA(()=>t())},[t]);return L.useEffect(()=>{t()},[n]),ge.jsx(ge.Fragment,{children:n&&i&&ge.jsx("primitive",{object:n})})};var Ng=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Lee={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},Nee=class{#e=Lee;#t=!1;setTimeoutProvider(n){this.#e=n}setTimeout(n,e){return this.#e.setTimeout(n,e)}clearTimeout(n){this.#e.clearTimeout(n)}setInterval(n,e){return this.#e.setInterval(n,e)}clearInterval(n){this.#e.clearInterval(n)}},Pd=new Nee;function Pee(n){setTimeout(n,0)}var Jd=typeof window>"u"||"Deno"in globalThis;function ha(){}function Iee(n,e){return typeof n=="function"?n(e):n}function DA(n){return typeof n=="number"&&n>=0&&n!==1/0}function $6(n,e){return Math.max(n+(e||0)-Date.now(),0)}function th(n,e){return typeof n=="function"?n(e):n}function zo(n,e){return typeof n=="function"?n(e):n}function l5(n,e){const{type:t="all",exact:i,fetchStatus:r,predicate:s,queryKey:a,stale:o}=n;if(a){if(i){if(e.queryHash!==MC(a,e.options))return!1}else if(!my(e.queryKey,a))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||r&&r!==e.state.fetchStatus||s&&!s(e))}function c5(n,e){const{exact:t,status:i,predicate:r,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(ep(e.options.mutationKey)!==ep(s))return!1}else if(!my(e.options.mutationKey,s))return!1}return!(i&&e.state.status!==i||r&&!r(e))}function MC(n,e){return(e?.queryKeyHashFn||ep)(n)}function ep(n){return JSON.stringify(n,(e,t)=>UA(t)?Object.keys(t).sort().reduce((i,r)=>(i[r]=t[r],i),{}):t)}function my(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>my(n[t],e[t])):!1}var Bee=Object.prototype.hasOwnProperty;function Q6(n,e){if(n===e)return n;const t=u5(n)&&u5(e);if(!t&&!(UA(n)&&UA(e)))return e;const r=(t?n:Object.keys(n)).length,s=t?e:Object.keys(e),a=s.length,o=t?new Array(a):{};let c=0;for(let u=0;u<a;u++){const h=t?u:s[u],p=n[h],g=e[h];if(p===g){o[h]=p,(t?u<r:Bee.call(n,h))&&c++;continue}if(p===null||g===null||typeof p!="object"||typeof g!="object"){o[h]=g;continue}const y=Q6(p,g);o[h]=y,y===p&&c++}return r===a&&c===r?n:o}function hS(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function u5(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function UA(n){if(!f5(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!f5(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function f5(n){return Object.prototype.toString.call(n)==="[object Object]"}function zee(n){return new Promise(e=>{Pd.setTimeout(e,n)})}function LA(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Q6(n,e):e}function Fee(n,e,t=0){const i=[...n,e];return t&&i.length>t?i.slice(1):i}function Hee(n,e,t=0){const i=[e,...n];return t&&i.length>t?i.slice(0,-1):i}var TC=Symbol();function J6(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===TC?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function eI(n,e){return typeof n=="function"?n(...e):!!n}var kee=class extends Ng{#e;#t;#n;constructor(){super(),this.#n=n=>{if(!Jd&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},AC=new kee;function NA(){let n,e;const t=new Promise((r,s)=>{n=r,e=s});t.status="pending",t.catch(()=>{});function i(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{i({status:"fulfilled",value:r}),n(r)},t.reject=r=>{i({status:"rejected",reason:r}),e(r)},t}var Gee=Pee;function Vee(){let n=[],e=0,t=o=>{o()},i=o=>{o()},r=Gee;const s=o=>{e?n.push(o):r(()=>{t(o)})},a=()=>{const o=n;n=[],o.length&&r(()=>{i(()=>{o.forEach(c=>{t(c)})})})};return{batch:o=>{let c;e++;try{c=o()}finally{e--,e||a()}return c},batchCalls:o=>(...c)=>{s(()=>{o(...c)})},schedule:s,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{i=o},setScheduler:o=>{r=o}}}var Wr=Vee(),jee=class extends Ng{#e=!0;#t;#n;constructor(){super(),this.#n=n=>{if(!Jd&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},dS=new jee;function Wee(n){return Math.min(1e3*2**n,3e4)}function tI(n){return(n??"online")==="online"?dS.isOnline():!0}var PA=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function nI(n){let e=!1,t=0,i;const r=NA(),s=()=>r.status!=="pending",a=M=>{if(!s()){const b=new PA(M);g(b),n.onCancel?.(b)}},o=()=>{e=!0},c=()=>{e=!1},u=()=>AC.isFocused()&&(n.networkMode==="always"||dS.isOnline())&&n.canRun(),h=()=>tI(n.networkMode)&&n.canRun(),p=M=>{s()||(i?.(),r.resolve(M))},g=M=>{s()||(i?.(),r.reject(M))},y=()=>new Promise(M=>{i=b=>{(s()||u())&&M(b)},n.onPause?.()}).then(()=>{i=void 0,s()||n.onContinue?.()}),x=()=>{if(s())return;let M;const b=t===0?n.initialPromise:void 0;try{M=b??n.fn()}catch(S){M=Promise.reject(S)}Promise.resolve(M).then(p).catch(S=>{if(s())return;const T=n.retry??(Jd?0:3),A=n.retryDelay??Wee,w=typeof A=="function"?A(t,S):A,D=T===!0||typeof T=="number"&&t<T||typeof T=="function"&&T(t,S);if(e||!D){g(S);return}t++,n.onFail?.(t,S),zee(w).then(()=>u()?void 0:y()).then(()=>{e?g(S):x()})})};return{promise:r,status:()=>r.status,cancel:a,continue:()=>(i?.(),r),cancelRetry:o,continueRetry:c,canStart:h,start:()=>(h()?x():y().then(x),r)}}var iI=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),DA(this.gcTime)&&(this.#e=Pd.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Jd?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Pd.clearTimeout(this.#e),this.#e=void 0)}},Xee=class extends iI{#e;#t;#n;#r;#i;#a;#o;constructor(n){super(),this.#o=!1,this.#a=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#r=n.client,this.#n=this.#r.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#e=h5(this.options),this.state=n.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(n){if(this.options={...this.#a,...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=h5(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(n,e){const t=LA(this.state.data,n,this.options);return this.#s({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(n,e){this.#s({type:"setState",state:n,setStateOptions:e})}cancel(n){const e=this.#i?.promise;return this.#i?.cancel(n),e?e.then(ha).catch(ha):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(n=>zo(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===TC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>th(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!$6(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(e=>e!==n),this.observers.length||(this.#i&&(this.#o?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(n,e){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(n&&this.setOptions(n),!this.options.queryFn){const o=this.observers.find(c=>c.options.queryFn);o&&this.setOptions(o.options)}const t=new AbortController,i=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#o=!0,t.signal)})},r=()=>{const o=J6(this.options,e),u=(()=>{const h={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(h),h})();return this.#o=!1,this.options.persister?this.options.persister(o,u,this):o(u)},a=(()=>{const o={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return i(o),o})();this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta}),this.#i=nI({initialPromise:e?.initialPromise,fn:a.fetchFn,onCancel:o=>{o instanceof PA&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),t.abort()},onFail:(o,c)=>{this.#s({type:"failed",failureCount:o,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const o=await this.#i.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#n.config.onSuccess?.(o,this),this.#n.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof PA){if(o.silent)return this.#i.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#s({type:"error",error:o}),this.#n.config.onError?.(o,this),this.#n.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#s(n){const e=t=>{switch(n.type){case"failed":return{...t,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...rI(t.data,this.options),fetchMeta:n.meta??null};case"success":const i={...t,data:n.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=n.manual?i:void 0,i;case"error":const r=n.error;return{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...n.state}}};this.state=e(this.state),Wr.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:n})})}};function rI(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:tI(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function h5(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,i=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var qee=class extends Ng{constructor(n,e){super(),this.options=e,this.#e=n,this.#s=null,this.#o=NA(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#a;#o;#s;#m;#h;#d;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),d5(this.#t,this.options)?this.#f():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return IA(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return IA(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#b(),this.#t.removeObserver(this)}setOptions(n){const e=this.options,t=this.#t;if(this.options=this.#e.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zo(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),e._defaulted&&!hS(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&p5(this.#t,t,this.options,e)&&this.#f(),this.updateResult(),i&&(this.#t!==t||zo(this.options.enabled,this.#t)!==zo(e.enabled,this.#t)||th(this.options.staleTime,this.#t)!==th(e.staleTime,this.#t))&&this.#g();const r=this.#v();i&&(this.#t!==t||zo(this.options.enabled,this.#t)!==zo(e.enabled,this.#t)||r!==this.#l)&&this.#y(r)}getOptimisticResult(n){const e=this.#e.getQueryCache().build(this.#e,n),t=this.createResult(e,n);return Zee(this,t)&&(this.#r=t,this.#a=this.options,this.#i=this.#t.state),t}getCurrentResult(){return this.#r}trackResult(n,e){return new Proxy(n,{get:(t,i)=>(this.trackProp(i),e?.(i),i==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(t,i))})}trackProp(n){this.#p.add(n)}getCurrentQuery(){return this.#t}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const e=this.#e.defaultQueryOptions(n),t=this.#e.getQueryCache().build(this.#e,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(n){return this.#f({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#f(n){this.#S();let e=this.#t.fetch(this.options,n);return n?.throwOnError||(e=e.catch(ha)),e}#g(){this.#x();const n=th(this.options.staleTime,this.#t);if(Jd||this.#r.isStale||!DA(n))return;const t=$6(this.#r.dataUpdatedAt,n)+1;this.#c=Pd.setTimeout(()=>{this.#r.isStale||this.updateResult()},t)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(n){this.#b(),this.#l=n,!(Jd||zo(this.options.enabled,this.#t)===!1||!DA(this.#l)||this.#l===0)&&(this.#u=Pd.setInterval(()=>{(this.options.refetchIntervalInBackground||AC.isFocused())&&this.#f()},this.#l))}#_(){this.#g(),this.#y(this.#v())}#x(){this.#c&&(Pd.clearTimeout(this.#c),this.#c=void 0)}#b(){this.#u&&(Pd.clearInterval(this.#u),this.#u=void 0)}createResult(n,e){const t=this.#t,i=this.options,r=this.#r,s=this.#i,a=this.#a,c=n!==t?n.state:this.#n,{state:u}=n;let h={...u},p=!1,g;if(e._optimisticResults){const B=this.hasListeners(),I=!B&&d5(n,e),z=B&&p5(n,t,e,i);(I||z)&&(h={...h,...rI(u.data,n.options)}),e._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:y,errorUpdatedAt:x,status:M}=h;g=h.data;let b=!1;if(e.placeholderData!==void 0&&g===void 0&&M==="pending"){let B;r?.isPlaceholderData&&e.placeholderData===a?.placeholderData?(B=r.data,b=!0):B=typeof e.placeholderData=="function"?e.placeholderData(this.#d?.state.data,this.#d):e.placeholderData,B!==void 0&&(M="success",g=LA(r?.data,B,e),p=!0)}if(e.select&&g!==void 0&&!b)if(r&&g===s?.data&&e.select===this.#m)g=this.#h;else try{this.#m=e.select,g=e.select(g),g=LA(r?.data,g,e),this.#h=g,this.#s=null}catch(B){this.#s=B}this.#s&&(y=this.#s,g=this.#h,x=Date.now(),M="error");const S=h.fetchStatus==="fetching",T=M==="pending",A=M==="error",w=T&&S,D=g!==void 0,P={status:M,fetchStatus:h.fetchStatus,isPending:T,isSuccess:M==="success",isError:A,isInitialLoading:w,isLoading:w,data:g,dataUpdatedAt:h.dataUpdatedAt,error:y,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:S,isRefetching:S&&!T,isLoadingError:A&&!D,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:A&&D,isStale:wC(n,e),refetch:this.refetch,promise:this.#o,isEnabled:zo(e.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const B=k=>{P.status==="error"?k.reject(P.error):P.data!==void 0&&k.resolve(P.data)},I=()=>{const k=this.#o=P.promise=NA();B(k)},z=this.#o;switch(z.status){case"pending":n.queryHash===t.queryHash&&B(z);break;case"fulfilled":(P.status==="error"||P.data!==z.value)&&I();break;case"rejected":(P.status!=="error"||P.error!==z.reason)&&I();break}}return P}updateResult(){const n=this.#r,e=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#a=this.options,this.#i.data!==void 0&&(this.#d=this.#t),hS(e,n))return;this.#r=e;const t=()=>{if(!n)return!0;const{notifyOnChangeProps:i}=this.options,r=typeof i=="function"?i():i;if(r==="all"||!r&&!this.#p.size)return!0;const s=new Set(r??this.#p);return this.options.throwOnError&&s.add("error"),Object.keys(this.#r).some(a=>{const o=a;return this.#r[o]!==n[o]&&s.has(o)})};this.#E({listeners:t()})}#S(){const n=this.#e.getQueryCache().build(this.#e,this.options);if(n===this.#t)return;const e=this.#t;this.#t=n,this.#n=n.state,this.hasListeners()&&(e?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#E(n){Wr.batch(()=>{n.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Yee(n,e){return zo(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function d5(n,e){return Yee(n,e)||n.state.data!==void 0&&IA(n,e,e.refetchOnMount)}function IA(n,e,t){if(zo(e.enabled,n)!==!1&&th(e.staleTime,n)!=="static"){const i=typeof t=="function"?t(n):t;return i==="always"||i!==!1&&wC(n,e)}return!1}function p5(n,e,t,i){return(n!==e||zo(i.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&wC(n,t)}function wC(n,e){return zo(e.enabled,n)!==!1&&n.isStaleByTime(th(e.staleTime,n))}function Zee(n,e){return!hS(n.getCurrentResult(),e)}function m5(n){return{onFetch:(e,t)=>{const i=e.options,r=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let o={pages:[],pageParams:[]},c=0;const u=async()=>{let h=!1;const p=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?h=!0:e.signal.addEventListener("abort",()=>{h=!0}),e.signal)})},g=J6(e.options,e.fetchOptions),y=async(x,M,b)=>{if(h)return Promise.reject();if(M==null&&x.pages.length)return Promise.resolve(x);const T=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:M,direction:b?"backward":"forward",meta:e.options.meta};return p(O),O})(),A=await g(T),{maxPages:w}=e.options,D=b?Hee:Fee;return{pages:D(x.pages,A,w),pageParams:D(x.pageParams,M,w)}};if(r&&s.length){const x=r==="backward",M=x?Kee:g5,b={pages:s,pageParams:a},S=M(i,b);o=await y(b,S,x)}else{const x=n??s.length;do{const M=c===0?a[0]??i.initialPageParam:g5(i,o);if(c>0&&M==null)break;o=await y(o,M),c++}while(c<x)}return o};e.options.persister?e.fetchFn=()=>e.options.persister?.(u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=u}}}function g5(n,{pages:e,pageParams:t}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,t[i],t):void 0}function Kee(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var $ee=class extends iI{#e;#t;#n;#r;constructor(n){super(),this.#e=n.client,this.mutationId=n.mutationId,this.#n=n.mutationCache,this.#t=[],this.state=n.state||sI(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#t.includes(n)||(this.#t.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#t=this.#t.filter(e=>e!==n),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(n){const e=()=>{this.#i({type:"continue"})},t={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=nI({fn:()=>this.options.mutationFn?this.options.mutationFn(n,t):Promise.reject(new Error("No mutationFn found")),onFail:(s,a)=>{this.#i({type:"failed",failureCount:s,error:a})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",r=!this.#r.canStart();try{if(i)e();else{this.#i({type:"pending",variables:n,isPaused:r}),await this.#n.config.onMutate?.(n,this,t);const a=await this.options.onMutate?.(n,t);a!==this.state.context&&this.#i({type:"pending",context:a,variables:n,isPaused:r})}const s=await this.#r.start();return await this.#n.config.onSuccess?.(s,n,this.state.context,this,t),await this.options.onSuccess?.(s,n,this.state.context,t),await this.#n.config.onSettled?.(s,null,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(s,null,n,this.state.context,t),this.#i({type:"success",data:s}),s}catch(s){try{throw await this.#n.config.onError?.(s,n,this.state.context,this,t),await this.options.onError?.(s,n,this.state.context,t),await this.#n.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(void 0,s,n,this.state.context,t),s}finally{this.#i({type:"error",error:s})}}finally{this.#n.runNext(this)}}#i(n){const e=t=>{switch(n.type){case"failed":return{...t,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...t,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:n.error,failureCount:t.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Wr.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(n)}),this.#n.notify({mutation:this,type:"updated",action:n})})}};function sI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qee=class extends Ng{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(n,e,t){const i=new $ee({client:n,mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(e),state:t});return this.add(i),i}add(n){this.#e.add(n);const e=wx(n);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(n):this.#t.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const e=wx(n);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const i=t.indexOf(n);i!==-1&&t.splice(i,1)}else t[0]===n&&this.#t.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=wx(n);if(typeof e=="string"){const i=this.#t.get(e)?.find(r=>r.state.status==="pending");return!i||i===n}else return!0}runNext(n){const e=wx(n);return typeof e=="string"?this.#t.get(e)?.find(i=>i!==n&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Wr.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>c5(e,t))}findAll(n={}){return this.getAll().filter(e=>c5(n,e))}notify(n){Wr.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return Wr.batch(()=>Promise.all(n.map(e=>e.continue().catch(ha))))}};function wx(n){return n.options.scope?.id}var Jee=class extends Ng{#e;#t=void 0;#n;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#e.defaultMutationOptions(e),hS(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&ep(t.mutationKey)!==ep(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#a()}mutate(e,t){return this.#r=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??sI();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){Wr.batch(()=>{if(this.#r&&this.hasListeners()){const t=this.#t.variables,i=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#r.onSuccess?.(e.data,t,i,r),this.#r.onSettled?.(e.data,null,t,i,r)):e?.type==="error"&&(this.#r.onError?.(e.error,t,i,r),this.#r.onSettled?.(void 0,e.error,t,i,r))}this.listeners.forEach(t=>{t(this.#t)})})}},ete=class extends Ng{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const i=e.queryKey,r=e.queryHash??MC(i,e);let s=this.get(r);return s||(s=new Xee({client:n,queryKey:i,queryHash:r,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(i)}),this.add(s)),s}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){Wr.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>l5(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>l5(n,t)):e}notify(n){Wr.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){Wr.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){Wr.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},tte=class{#e;#t;#n;#r;#i;#a;#o;#s;constructor(n={}){this.#e=n.queryCache||new ete,this.#t=n.mutationCache||new Qee,this.#n=n.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=AC.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=dS.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#e.build(this,e),i=t.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(th(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const i=t.data;return[e,i]})}setQueryData(n,e,t){const i=this.defaultQueryOptions({queryKey:n}),s=this.#e.get(i.queryHash)?.state.data,a=Iee(e,s);if(a!==void 0)return this.#e.build(this,i).setData(a,{...t,manual:!0})}setQueriesData(n,e,t){return Wr.batch(()=>this.#e.findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;Wr.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e;return Wr.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},i=Wr.batch(()=>this.#e.findAll(n).map(r=>r.cancel(t)));return Promise.all(i).then(ha).catch(ha)}invalidateQueries(n,e={}){return Wr.batch(()=>(this.#e.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},i=Wr.batch(()=>this.#e.findAll(n).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let s=r.fetch(void 0,t);return t.throwOnError||(s=s.catch(ha)),r.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(i).then(ha)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(th(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(ha).catch(ha)}fetchInfiniteQuery(n){return n.behavior=m5(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(ha).catch(ha)}ensureInfiniteQueryData(n){return n.behavior=m5(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return dS.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#r.set(ep(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(i=>{my(n,i.queryKey)&&Object.assign(t,i.defaultOptions)}),t}setMutationDefaults(n,e){this.#i.set(ep(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#i.values()],t={};return e.forEach(i=>{my(n,i.mutationKey)&&Object.assign(t,i.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=MC(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===TC&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},aI=L.createContext(void 0),oI=n=>{const e=L.useContext(aI);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},nte=({client:n,children:e})=>(L.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),ge.jsx(aI.Provider,{value:n,children:e})),lI=L.createContext(!1),ite=()=>L.useContext(lI);lI.Provider;function rte(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var ste=L.createContext(rte()),ate=()=>L.useContext(ste),ote=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},lte=n=>{L.useEffect(()=>{n.clearReset()},[n])},cte=({result:n,errorResetBoundary:e,throwOnError:t,query:i,suspense:r})=>n.isError&&!e.isReset()&&!n.isFetching&&i&&(r&&n.data===void 0||eI(t,[n.error,i])),ute=n=>{if(n.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),i=n.staleTime;n.staleTime=typeof i=="function"?(...r)=>t(i(...r)):t(i),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},fte=(n,e)=>n.isLoading&&n.isFetching&&!e,hte=(n,e)=>n?.suspense&&e.isPending,v5=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function dte(n,e,t){const i=ite(),r=ate(),s=oI(),a=s.defaultQueryOptions(n);s.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=i?"isRestoring":"optimistic",ute(a),ote(a,r),lte(r);const o=!s.getQueryCache().get(a.queryHash),[c]=L.useState(()=>new e(s,a)),u=c.getOptimisticResult(a),h=!i&&n.subscribed!==!1;if(L.useSyncExternalStore(L.useCallback(p=>{const g=h?c.subscribe(Wr.batchCalls(p)):ha;return c.updateResult(),g},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),L.useEffect(()=>{c.setOptions(a)},[a,c]),hte(a,u))throw v5(a,c,r);if(cte({result:u,errorResetBoundary:r,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(a,u),a.experimental_prefetchInRender&&!Jd&&fte(u,i)&&(o?v5(a,c,r):s.getQueryCache().get(a.queryHash)?.promise)?.catch(ha).finally(()=>{c.updateResult()}),a.notifyOnChangeProps?u:c.trackResult(u)}function pte(n,e){return dte(n,qee)}function mte(n,e){const t=oI(),[i]=L.useState(()=>new Jee(t,n));L.useEffect(()=>{i.setOptions(n)},[i,n]);const r=L.useSyncExternalStore(L.useCallback(a=>i.subscribe(Wr.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),s=L.useCallback((a,o)=>{i.mutate(a,o).catch(ha)},[i]);if(r.error&&eI(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:s,mutateAsync:r.mutate}}function gte(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const vte=n=>{switch(n){case"success":return xte;case"info":return Ste;case"warning":return bte;case"error":return Ete;default:return null}},yte=Array(12).fill(0),_te=({visible:n,className:e})=>de.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},de.createElement("div",{className:"sonner-spinner"},yte.map((t,i)=>de.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),xte=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),bte=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ste=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ete=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Mte=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},de.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),de.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Tte=()=>{const[n,e]=de.useState(document.hidden);return de.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let BA=1;class Ate{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:i,...r}=e,s=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:BA++,a=this.toasts.find(c=>c.id===s),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:i}),{...c,...e,id:s,dismissible:o,title:i}):c):this.addToast({title:i,...r,dismissible:o,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(i=>i({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let i;t.loading!==void 0&&(i=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let s=i!==void 0,a;const o=r.then(async u=>{if(a=["resolve",u],de.isValidElement(u))s=!1,this.create({id:i,type:"default",message:u});else if(Cte(u)&&!u.ok){s=!1;const p=typeof t.error=="function"?await t.error(`HTTP error! status: ${u.status}`):t.error,g=typeof t.description=="function"?await t.description(`HTTP error! status: ${u.status}`):t.description,x=typeof p=="object"&&!de.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:g,...x})}else if(u instanceof Error){s=!1;const p=typeof t.error=="function"?await t.error(u):t.error,g=typeof t.description=="function"?await t.description(u):t.description,x=typeof p=="object"&&!de.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:g,...x})}else if(t.success!==void 0){s=!1;const p=typeof t.success=="function"?await t.success(u):t.success,g=typeof t.description=="function"?await t.description(u):t.description,x=typeof p=="object"&&!de.isValidElement(p)?p:{message:p};this.create({id:i,type:"success",description:g,...x})}}).catch(async u=>{if(a=["reject",u],t.error!==void 0){s=!1;const h=typeof t.error=="function"?await t.error(u):t.error,p=typeof t.description=="function"?await t.description(u):t.description,y=typeof h=="object"&&!de.isValidElement(h)?h:{message:h};this.create({id:i,type:"error",description:p,...y})}}).finally(()=>{s&&(this.dismiss(i),i=void 0),t.finally==null||t.finally.call(t)}),c=()=>new Promise((u,h)=>o.then(()=>a[0]==="reject"?h(a[1]):u(a[1])).catch(h));return typeof i!="string"&&typeof i!="number"?{unwrap:c}:Object.assign(i,{unwrap:c})},this.custom=(e,t)=>{const i=t?.id||BA++;return this.create({jsx:e(i),id:i,...t}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Fa=new Ate,wte=(n,e)=>{const t=e?.id||BA++;return Fa.addToast({title:n,...e,id:t}),t},Cte=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",Rte=wte,Ote=()=>Fa.toasts,Dte=()=>Fa.getActiveToasts(),zA=Object.assign(Rte,{success:Fa.success,info:Fa.info,warning:Fa.warning,error:Fa.error,custom:Fa.custom,message:Fa.message,promise:Fa.promise,dismiss:Fa.dismiss,loading:Fa.loading},{getHistory:Ote,getToasts:Dte});gte("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Cx(n){return n.label!==void 0}const Ute=3,Lte="24px",Nte="16px",y5=4e3,Pte=356,Ite=14,Bte=45,zte=200;function Ic(...n){return n.filter(Boolean).join(" ")}function Fte(n){const[e,t]=n.split("-"),i=[];return e&&i.push(e),t&&i.push(t),i}const Hte=n=>{var e,t,i,r,s,a,o,c,u;const{invert:h,toast:p,unstyled:g,interacting:y,setHeights:x,visibleToasts:M,heights:b,index:S,toasts:T,expanded:A,removeToast:w,defaultRichColors:D,closeButton:O,style:P,cancelButtonStyle:B,actionButtonStyle:I,className:z="",descriptionClassName:k="",duration:V,position:j,gap:W,expandByDefault:te,classNames:H,icons:Q,closeButtonAriaLabel:ne="Close toast"}=n,[re,G]=de.useState(null),[X,ie]=de.useState(null),[se,ee]=de.useState(!1),[ue,pe]=de.useState(!1),[ve,_e]=de.useState(!1),[Xe,qe]=de.useState(!1),[Be,Se]=de.useState(!1),[He,oe]=de.useState(0),[lt,ze]=de.useState(0),Qe=de.useRef(p.duration||V||y5),De=de.useRef(null),st=de.useRef(null),ke=S===0,$=S+1<=M,Y=p.type,fe=p.dismissible!==!1,Ee=p.className||"",Re=p.descriptionClassName||"",Le=de.useMemo(()=>b.findIndex(je=>je.toastId===p.id)||0,[b,p.id]),Fe=de.useMemo(()=>{var je;return(je=p.closeButton)!=null?je:O},[p.closeButton,O]),et=de.useMemo(()=>p.duration||V||y5,[p.duration,V]),tt=de.useRef(0),Ot=de.useRef(0),at=de.useRef(0),yt=de.useRef(null),[gt,ht]=j.split("-"),nt=de.useMemo(()=>b.reduce((je,Ct,zt)=>zt>=Le?je:je+Ct.height,0),[b,Le]),wt=Tte(),St=p.invert||h,Ht=Y==="loading";Ot.current=de.useMemo(()=>Le*W+nt,[Le,nt]),de.useEffect(()=>{Qe.current=et},[et]),de.useEffect(()=>{ee(!0)},[]),de.useEffect(()=>{const je=st.current;if(je){const Ct=je.getBoundingClientRect().height;return ze(Ct),x(zt=>[{toastId:p.id,height:Ct,position:p.position},...zt]),()=>x(zt=>zt.filter(Dt=>Dt.toastId!==p.id))}},[x,p.id]),de.useLayoutEffect(()=>{if(!se)return;const je=st.current,Ct=je.style.height;je.style.height="auto";const zt=je.getBoundingClientRect().height;je.style.height=Ct,ze(zt),x(Dt=>Dt.find(tn=>tn.toastId===p.id)?Dt.map(tn=>tn.toastId===p.id?{...tn,height:zt}:tn):[{toastId:p.id,height:zt,position:p.position},...Dt])},[se,p.title,p.description,x,p.id,p.jsx,p.action,p.cancel]);const Te=de.useCallback(()=>{pe(!0),oe(Ot.current),x(je=>je.filter(Ct=>Ct.toastId!==p.id)),setTimeout(()=>{w(p)},zte)},[p,w,x,Ot]);de.useEffect(()=>{if(p.promise&&Y==="loading"||p.duration===1/0||p.type==="loading")return;let je;return A||y||wt?(()=>{if(at.current<tt.current){const Dt=new Date().getTime()-tt.current;Qe.current=Qe.current-Dt}at.current=new Date().getTime()})():(()=>{Qe.current!==1/0&&(tt.current=new Date().getTime(),je=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),Te()},Qe.current))})(),()=>clearTimeout(je)},[A,y,p,Y,wt,Te]),de.useEffect(()=>{p.delete&&(Te(),p.onDismiss==null||p.onDismiss.call(p,p))},[Te,p.delete]);function Oe(){var je;if(Q?.loading){var Ct;return de.createElement("div",{className:Ic(H?.loader,p==null||(Ct=p.classNames)==null?void 0:Ct.loader,"sonner-loader"),"data-visible":Y==="loading"},Q.loading)}return de.createElement(_te,{className:Ic(H?.loader,p==null||(je=p.classNames)==null?void 0:je.loader),visible:Y==="loading"})}const Pe=p.icon||Q?.[Y]||vte(Y);var ct,xt;return de.createElement("li",{tabIndex:0,ref:st,className:Ic(z,Ee,H?.toast,p==null||(e=p.classNames)==null?void 0:e.toast,H?.default,H?.[Y],p==null||(t=p.classNames)==null?void 0:t[Y]),"data-sonner-toast":"","data-rich-colors":(ct=p.richColors)!=null?ct:D,"data-styled":!(p.jsx||p.unstyled||g),"data-mounted":se,"data-promise":!!p.promise,"data-swiped":Be,"data-removed":ue,"data-visible":$,"data-y-position":gt,"data-x-position":ht,"data-index":S,"data-front":ke,"data-swiping":ve,"data-dismissible":fe,"data-type":Y,"data-invert":St,"data-swipe-out":Xe,"data-swipe-direction":X,"data-expanded":!!(A||te&&se),"data-testid":p.testId,style:{"--index":S,"--toasts-before":S,"--z-index":T.length-S,"--offset":`${ue?He:Ot.current}px`,"--initial-height":te?"auto":`${lt}px`,...P,...p.style},onDragEnd:()=>{_e(!1),G(null),yt.current=null},onPointerDown:je=>{je.button!==2&&(Ht||!fe||(De.current=new Date,oe(Ot.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(_e(!0),yt.current={x:je.clientX,y:je.clientY})))},onPointerUp:()=>{var je,Ct,zt;if(Xe||!fe)return;yt.current=null;const Dt=Number(((je=st.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Gt=Number(((Ct=st.current)==null?void 0:Ct.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),tn=new Date().getTime()-((zt=De.current)==null?void 0:zt.getTime()),Jt=re==="x"?Dt:Gt,un=Math.abs(Jt)/tn;if(Math.abs(Jt)>=Bte||un>.11){oe(Ot.current),p.onDismiss==null||p.onDismiss.call(p,p),ie(re==="x"?Dt>0?"right":"left":Gt>0?"down":"up"),Te(),qe(!0);return}else{var mn,bn;(mn=st.current)==null||mn.style.setProperty("--swipe-amount-x","0px"),(bn=st.current)==null||bn.style.setProperty("--swipe-amount-y","0px")}Se(!1),_e(!1),G(null)},onPointerMove:je=>{var Ct,zt,Dt;if(!yt.current||!fe||((Ct=window.getSelection())==null?void 0:Ct.toString().length)>0)return;const tn=je.clientY-yt.current.y,Jt=je.clientX-yt.current.x;var un;const mn=(un=n.swipeDirections)!=null?un:Fte(j);!re&&(Math.abs(Jt)>1||Math.abs(tn)>1)&&G(Math.abs(Jt)>Math.abs(tn)?"x":"y");let bn={x:0,y:0};const hi=gi=>1/(1.5+Math.abs(gi)/20);if(re==="y"){if(mn.includes("top")||mn.includes("bottom"))if(mn.includes("top")&&tn<0||mn.includes("bottom")&&tn>0)bn.y=tn;else{const gi=tn*hi(tn);bn.y=Math.abs(gi)<Math.abs(tn)?gi:tn}}else if(re==="x"&&(mn.includes("left")||mn.includes("right")))if(mn.includes("left")&&Jt<0||mn.includes("right")&&Jt>0)bn.x=Jt;else{const gi=Jt*hi(Jt);bn.x=Math.abs(gi)<Math.abs(Jt)?gi:Jt}(Math.abs(bn.x)>0||Math.abs(bn.y)>0)&&Se(!0),(zt=st.current)==null||zt.style.setProperty("--swipe-amount-x",`${bn.x}px`),(Dt=st.current)==null||Dt.style.setProperty("--swipe-amount-y",`${bn.y}px`)}},Fe&&!p.jsx&&Y!=="loading"?de.createElement("button",{"aria-label":ne,"data-disabled":Ht,"data-close-button":!0,onClick:Ht||!fe?()=>{}:()=>{Te(),p.onDismiss==null||p.onDismiss.call(p,p)},className:Ic(H?.closeButton,p==null||(i=p.classNames)==null?void 0:i.closeButton)},(xt=Q?.close)!=null?xt:Mte):null,(Y||p.icon||p.promise)&&p.icon!==null&&(Q?.[Y]!==null||p.icon)?de.createElement("div",{"data-icon":"",className:Ic(H?.icon,p==null||(r=p.classNames)==null?void 0:r.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Oe():null,p.type!=="loading"?Pe:null):null,de.createElement("div",{"data-content":"",className:Ic(H?.content,p==null||(s=p.classNames)==null?void 0:s.content)},de.createElement("div",{"data-title":"",className:Ic(H?.title,p==null||(a=p.classNames)==null?void 0:a.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?de.createElement("div",{"data-description":"",className:Ic(k,Re,H?.description,p==null||(o=p.classNames)==null?void 0:o.description)},typeof p.description=="function"?p.description():p.description):null),de.isValidElement(p.cancel)?p.cancel:p.cancel&&Cx(p.cancel)?de.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||B,onClick:je=>{Cx(p.cancel)&&fe&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,je),Te())},className:Ic(H?.cancelButton,p==null||(c=p.classNames)==null?void 0:c.cancelButton)},p.cancel.label):null,de.isValidElement(p.action)?p.action:p.action&&Cx(p.action)?de.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||I,onClick:je=>{Cx(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,je),!je.defaultPrevented&&Te())},className:Ic(H?.actionButton,p==null||(u=p.classNames)==null?void 0:u.actionButton)},p.action.label):null)};function _5(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function kte(n,e){const t={};return[n,e].forEach((i,r)=>{const s=r===1,a=s?"--mobile-offset":"--offset",o=s?Nte:Lte;function c(u){["top","right","bottom","left"].forEach(h=>{t[`${a}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof i=="number"||typeof i=="string"?c(i):typeof i=="object"?["top","right","bottom","left"].forEach(u=>{i[u]===void 0?t[`${a}-${u}`]=o:t[`${a}-${u}`]=typeof i[u]=="number"?`${i[u]}px`:i[u]}):c(o)}),t}const Gte=de.forwardRef(function(e,t){const{id:i,invert:r,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:o,closeButton:c,className:u,offset:h,mobileOffset:p,theme:g="light",richColors:y,duration:x,style:M,visibleToasts:b=Ute,toastOptions:S,dir:T=_5(),gap:A=Ite,icons:w,containerAriaLabel:D="Notifications"}=e,[O,P]=de.useState([]),B=de.useMemo(()=>i?O.filter(se=>se.toasterId===i):O.filter(se=>!se.toasterId),[O,i]),I=de.useMemo(()=>Array.from(new Set([s].concat(B.filter(se=>se.position).map(se=>se.position)))),[B,s]),[z,k]=de.useState([]),[V,j]=de.useState(!1),[W,te]=de.useState(!1),[H,Q]=de.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ne=de.useRef(null),re=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),G=de.useRef(null),X=de.useRef(!1),ie=de.useCallback(se=>{P(ee=>{var ue;return(ue=ee.find(pe=>pe.id===se.id))!=null&&ue.delete||Fa.dismiss(se.id),ee.filter(({id:pe})=>pe!==se.id)})},[]);return de.useEffect(()=>Fa.subscribe(se=>{if(se.dismiss){requestAnimationFrame(()=>{P(ee=>ee.map(ue=>ue.id===se.id?{...ue,delete:!0}:ue))});return}setTimeout(()=>{hP.flushSync(()=>{P(ee=>{const ue=ee.findIndex(pe=>pe.id===se.id);return ue!==-1?[...ee.slice(0,ue),{...ee[ue],...se},...ee.slice(ue+1)]:[se,...ee]})})})}),[O]),de.useEffect(()=>{if(g!=="system"){Q(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q("dark"):Q("light")),typeof window>"u")return;const se=window.matchMedia("(prefers-color-scheme: dark)");try{se.addEventListener("change",({matches:ee})=>{Q(ee?"dark":"light")})}catch{se.addListener(({matches:ue})=>{try{Q(ue?"dark":"light")}catch(pe){console.error(pe)}})}},[g]),de.useEffect(()=>{O.length<=1&&j(!1)},[O]),de.useEffect(()=>{const se=ee=>{var ue;if(a.every(_e=>ee[_e]||ee.code===_e)){var ve;j(!0),(ve=ne.current)==null||ve.focus()}ee.code==="Escape"&&(document.activeElement===ne.current||(ue=ne.current)!=null&&ue.contains(document.activeElement))&&j(!1)};return document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se)},[a]),de.useEffect(()=>{if(ne.current)return()=>{G.current&&(G.current.focus({preventScroll:!0}),G.current=null,X.current=!1)}},[ne.current]),de.createElement("section",{ref:t,"aria-label":`${D} ${re}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((se,ee)=>{var ue;const[pe,ve]=se.split("-");return B.length?de.createElement("ol",{key:se,dir:T==="auto"?_5():T,tabIndex:-1,ref:ne,className:u,"data-sonner-toaster":!0,"data-sonner-theme":H,"data-y-position":pe,"data-x-position":ve,style:{"--front-toast-height":`${((ue=z[0])==null?void 0:ue.height)||0}px`,"--width":`${Pte}px`,"--gap":`${A}px`,...M,...kte(h,p)},onBlur:_e=>{X.current&&!_e.currentTarget.contains(_e.relatedTarget)&&(X.current=!1,G.current&&(G.current.focus({preventScroll:!0}),G.current=null))},onFocus:_e=>{_e.target instanceof HTMLElement&&_e.target.dataset.dismissible==="false"||X.current||(X.current=!0,G.current=_e.relatedTarget)},onMouseEnter:()=>j(!0),onMouseMove:()=>j(!0),onMouseLeave:()=>{W||j(!1)},onDragEnd:()=>j(!1),onPointerDown:_e=>{_e.target instanceof HTMLElement&&_e.target.dataset.dismissible==="false"||te(!0)},onPointerUp:()=>te(!1)},B.filter(_e=>!_e.position&&ee===0||_e.position===se).map((_e,Xe)=>{var qe,Be;return de.createElement(Hte,{key:_e.id,icons:w,index:Xe,toast:_e,defaultRichColors:y,duration:(qe=S?.duration)!=null?qe:x,className:S?.className,descriptionClassName:S?.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Be=S?.closeButton)!=null?Be:c,interacting:W,position:se,style:S?.style,unstyled:S?.unstyled,classNames:S?.classNames,cancelButtonStyle:S?.cancelButtonStyle,actionButtonStyle:S?.actionButtonStyle,closeButtonAriaLabel:S?.closeButtonAriaLabel,removeToast:ie,toasts:B.filter(Se=>Se.position==_e.position),heights:z.filter(Se=>Se.position==_e.position),setHeights:k,expandByDefault:o,gap:A,expanded:V,swipeDirections:e.swipeDirections})})):null}))});function x5(n,e){if(e===CU)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Nb||e===lw){let t=n.getIndex();if(t===null){const a=[],o=n.getAttribute("position");if(o!==void 0){for(let c=0;c<o.count;c++)a.push(c);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===Nb)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class Vte extends Gs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Yte(t)}),this.register(function(t){return new Zte(t)}),this.register(function(t){return new rne(t)}),this.register(function(t){return new sne(t)}),this.register(function(t){return new ane(t)}),this.register(function(t){return new $te(t)}),this.register(function(t){return new Qte(t)}),this.register(function(t){return new Jte(t)}),this.register(function(t){return new ene(t)}),this.register(function(t){return new qte(t)}),this.register(function(t){return new tne(t)}),this.register(function(t){return new Kte(t)}),this.register(function(t){return new ine(t)}),this.register(function(t){return new nne(t)}),this.register(function(t){return new Wte(t)}),this.register(function(t){return new one(t)}),this.register(function(t){return new lne(t)})}load(e,t,i,r){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const u=Qf.extractUrlBase(e);a=Qf.resolveURL(u,this.path)}else a=Qf.extractUrlBase(e);this.manager.itemStart(e);const o=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},c=new ga(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(u){try{s.parse(u,a,function(h){t(h),s.manager.itemEnd(e)},o)}catch(h){o(h)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const a={},o={},c=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===cI){try{a[qn.KHR_BINARY_GLTF]=new cne(e)}catch(p){r&&r(p);return}s=JSON.parse(a[qn.KHR_BINARY_GLTF].content)}else s=JSON.parse(c.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new Sne(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const p=this.pluginCallbacks[h](u);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[p.name]=p,a[p.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const p=s.extensionsUsed[h],g=s.extensionsRequired||[];switch(p){case qn.KHR_MATERIALS_UNLIT:a[p]=new Xte;break;case qn.KHR_DRACO_MESH_COMPRESSION:a[p]=new une(s,this.dracoLoader);break;case qn.KHR_TEXTURE_TRANSFORM:a[p]=new fne;break;case qn.KHR_MESH_QUANTIZATION:a[p]=new hne;break;default:g.indexOf(p)>=0&&o[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}u.setExtensions(a),u.setPlugins(o),u.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function jte(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const qn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Wte{constructor(e){this.parser=e,this.name=qn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const h=new Rt(16777215);c.color!==void 0&&h.setRGB(c.color[0],c.color[1],c.color[2],Ir);const p=c.range!==void 0?c.range:0;switch(c.type){case"directional":u=new Nw(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Lw(h),u.distance=p;break;case"spot":u=new Uw(h),u.distance=p,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,u.angle=c.spot.outerConeAngle,u.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return u.position.set(0,0,0),u.decay=2,Ru(u,c),c.intensity!==void 0&&(u.intensity=c.intensity),u.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(c){return i._getNodeRef(t.cache,o,c)})}}class Xte{constructor(){this.name=qn.KHR_MATERIALS_UNLIT}getMaterialType(){return pa}extendParams(e,t,i){const r=[];e.color=new Rt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],Ir),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,pr))}return Promise.all(r)}}class qte{constructor(e){this.parser=e,this.name=qn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Yte{constructor(e){this.parser=e,this.name=qn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:el}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ft(o,o)}return Promise.all(s)}}class Zte{constructor(e){this.parser=e,this.name=qn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:el}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class Kte{constructor(e){this.parser=e,this.name=qn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:el}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class $te{constructor(e){this.parser=e,this.name=qn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:el}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Rt(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],Ir)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,pr)),a.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class Qte{constructor(e){this.parser=e,this.name=qn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:el}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class Jte{constructor(e){this.parser=e,this.name=qn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:el}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new Rt().setRGB(o[0],o[1],o[2],Ir),Promise.all(s)}}class ene{constructor(e){this.parser=e,this.name=qn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:el}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class tne{constructor(e){this.parser=e,this.name=qn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:el}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new Rt().setRGB(o[0],o[1],o[2],Ir),a.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,pr)),Promise.all(s)}}class nne{constructor(e){this.parser=e,this.name=qn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:el}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(s)}}class ine{constructor(e){this.parser=e,this.name=qn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:el}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class rne{constructor(e){this.parser=e,this.name=qn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class sne{constructor(e){this.parser=e,this.name=qn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let c=i.textureLoader;if(o.uri){const u=i.options.manager.getHandler(o.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,a.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class ane{constructor(e){this.parser=e,this.name=qn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let c=i.textureLoader;if(o.uri){const u=i.options.manager.getHandler(o.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,a.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class one{constructor(e){this.name=qn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const c=r.byteOffset||0,u=r.byteLength||0,h=r.count,p=r.byteStride,g=new Uint8Array(o,c,u);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(h,p,g,r.mode,r.filter).then(function(y){return y.buffer}):a.ready.then(function(){const y=new ArrayBuffer(h*p);return a.decodeGltfBuffer(new Uint8Array(y),h,p,g,r.mode,r.filter),y})})}else return null}}class lne{constructor(e){this.name=qn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const u of r.primitives)if(u.mode!==Bo.TRIANGLES&&u.mode!==Bo.TRIANGLE_STRIP&&u.mode!==Bo.TRIANGLE_FAN&&u.mode!==void 0)return null;const a=i.extensions[this.name].attributes,o=[],c={};for(const u in a)o.push(this.parser.getDependency("accessor",a[u]).then(h=>(c[u]=h,c[u])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(u=>{const h=u.pop(),p=h.isGroup?h.children:[h],g=u[0].count,y=[];for(const x of p){const M=new Ut,b=new J,S=new Ar,T=new J(1,1,1),A=new yw(x.geometry,x.material,g);for(let w=0;w<g;w++)c.TRANSLATION&&b.fromBufferAttribute(c.TRANSLATION,w),c.ROTATION&&S.fromBufferAttribute(c.ROTATION,w),c.SCALE&&T.fromBufferAttribute(c.SCALE,w),A.setMatrixAt(w,M.compose(b,S,T));for(const w in c)if(w==="_COLOR_0"){const D=c[w];A.instanceColor=new ah(D.array,D.itemSize,D.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&x.geometry.setAttribute(w,c[w]);Cn.prototype.copy.call(A,x),this.parser.assignFinalMaterial(A),y.push(A)}return h.isGroup?(h.clear(),h.add(...y),h):y[0]}))}}const cI="glTF",vv=12,b5={JSON:1313821514,BIN:5130562};class cne{constructor(e){this.name=qn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,vv),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==cI)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-vv,s=new DataView(e,vv);let a=0;for(;a<r;){const o=s.getUint32(a,!0);a+=4;const c=s.getUint32(a,!0);if(a+=4,c===b5.JSON){const u=new Uint8Array(e,vv+a,o);this.content=i.decode(u)}else if(c===b5.BIN){const u=vv+a;this.body=e.slice(u,u+o)}a+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class une{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=qn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},c={},u={};for(const h in a){const p=FA[h]||h.toLowerCase();o[p]=a[h]}for(const h in e.attributes){const p=FA[h]||h.toLowerCase();if(a[h]!==void 0){const g=i.accessors[e.attributes[h]],y=ig[g.componentType];u[p]=y.name,c[p]=g.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(p,g){r.decodeDracoFile(h,function(y){for(const x in y.attributes){const M=y.attributes[x],b=c[x];b!==void 0&&(M.normalized=b)}p(y)},o,u,Ir,g)})})}}class fne{constructor(){this.name=qn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class hne{constructor(){this.name=qn.KHR_MESH_QUANTIZATION}}class uI extends Eg{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[s+a];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=o*2,u=o*3,h=r-t,p=(i-t)/h,g=p*p,y=g*p,x=e*u,M=x-u,b=-2*y+3*g,S=y-g,T=1-b,A=S-g+p;for(let w=0;w!==o;w++){const D=a[M+w+o],O=a[M+w+c]*h,P=a[x+w+o],B=a[x+w]*h;s[w]=T*D+A*O+b*P+S*B}return s}}const dne=new Ar;class pne extends uI{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return dne.fromArray(s).normalize().toArray(s),s}}const Bo={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ig={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},S5={9728:qr,9729:Zn,9984:vS,9985:Jm,9986:wd,9987:Go},E5={33071:Mr,33648:sg,10497:rh},fT={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},FA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Vf={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},mne={CUBICSPLINE:void 0,LINEAR:lg,STEP:og},hT={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function gne(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Dy({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:$o})),n.DefaultMaterial}function _d(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Ru(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function vne(n,e,t){let i=!1,r=!1,s=!1;for(let u=0,h=e.length;u<h;u++){const p=e[u];if(p.POSITION!==void 0&&(i=!0),p.NORMAL!==void 0&&(r=!0),p.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const a=[],o=[],c=[];for(let u=0,h=e.length;u<h;u++){const p=e[u];if(i){const g=p.POSITION!==void 0?t.getDependency("accessor",p.POSITION):n.attributes.position;a.push(g)}if(r){const g=p.NORMAL!==void 0?t.getDependency("accessor",p.NORMAL):n.attributes.normal;o.push(g)}if(s){const g=p.COLOR_0!==void 0?t.getDependency("accessor",p.COLOR_0):n.attributes.color;c.push(g)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(c)]).then(function(u){const h=u[0],p=u[1],g=u[2];return i&&(n.morphAttributes.position=h),r&&(n.morphAttributes.normal=p),s&&(n.morphAttributes.color=g),n.morphTargetsRelative=!0,n})}function yne(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function _ne(n){let e;const t=n.extensions&&n.extensions[qn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+dT(t.attributes):e=n.indices+":"+dT(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+dT(n.targets[i]);return e}function dT(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function HA(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function xne(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const bne=new Ut;class Sne{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new jte,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,a=-1;if(typeof navigator<"u"){const o=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(o)===!0;const c=o.match(/Version\/(\d+)/);r=i&&c?parseInt(c[1],10):-1,s=o.indexOf("Firefox")>-1,a=s?o.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||s&&a<98?this.textureLoader=new xL(this.options.manager):this.textureLoader=new wL(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ga(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};return _d(s,o,r),Ru(o,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(o)})).then(function(){for(const c of o.scenes)c.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let o=0,c=a.length;o<c;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(a,o)=>{const c=this.associations.get(a);c!=null&&this.associations.set(o,c);for(const[u,h]of a.children.entries())s(h,o.children[u])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[qn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(Qf.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const a=fT[r.type],o=ig[r.componentType],c=r.normalized===!0,u=new o(r.count*a);return Promise.resolve(new Jn(u,a,c))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],c=fT[r.type],u=ig[r.componentType],h=u.BYTES_PER_ELEMENT,p=h*c,g=r.byteOffset||0,y=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,x=r.normalized===!0;let M,b;if(y&&y!==p){const S=Math.floor(g/y),T="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+S+":"+r.count;let A=t.cache.get(T);A||(M=new u(o,S*y,r.count*y/h),A=new My(M,y/h),t.cache.add(T,A)),b=new Ga(A,c,g%y/h,x)}else o===null?M=new u(r.count*c):M=new u(o,g,r.count*c),b=new Jn(M,c,x);if(r.sparse!==void 0){const S=fT.SCALAR,T=ig[r.sparse.indices.componentType],A=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,D=new T(a[1],A,r.sparse.count*S),O=new u(a[2],w,r.sparse.count*c);o!==null&&(b=new Jn(b.array.slice(),b.itemSize,b.normalized)),b.normalized=!1;for(let P=0,B=D.length;P<B;P++){const I=D[P];if(b.setX(I,O[P*c]),c>=2&&b.setY(I,O[P*c+1]),c>=3&&b.setZ(I,O[P*c+2]),c>=4&&b.setW(I,O[P*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}b.normalized=x}return b})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const c=i.manager.getHandler(a.uri);c!==null&&(o=c)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,i){const r=this,s=this.json,a=s.textures[e],o=s.images[t],c=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[c])return this.textureCache[c];const u=this.loadImageSource(t,i).then(function(h){h.flipY=!1,h.name=a.name||o.name||"",h.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(h.name=o.uri);const g=(s.samplers||{})[a.sampler]||{};return h.magFilter=S5[g.magFilter]||Zn,h.minFilter=S5[g.minFilter]||Go,h.wrapS=E5[g.wrapS]||rh,h.wrapT=E5[g.wrapT]||rh,h.generateMipmaps=!h.isCompressedTexture&&h.minFilter!==qr&&h.minFilter!==Zn,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[c]=u,u}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=>p.clone());const a=r.images[e],o=self.URL||self.webkitURL;let c=a.uri||"",u=!1;if(a.bufferView!==void 0)c=i.getDependency("bufferView",a.bufferView).then(function(p){u=!0;const g=new Blob([p],{type:a.mimeType});return c=o.createObjectURL(g),c});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(c).then(function(p){return new Promise(function(g,y){let x=g;t.isImageBitmapLoader===!0&&(x=function(M){const b=new mi(M);b.needsUpdate=!0,g(b)}),t.load(Qf.resolveURL(p,s.path),x,void 0,y)})}).then(function(p){return u===!0&&o.revokeObjectURL(c),Ru(p,a),p.userData.mimeType=a.mimeType||xne(a.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),p});return this.sourceCache[e]=h,h}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(a){if(!a)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(a=a.clone(),a.channel=i.texCoord),s.extensions[qn.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[qn.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const c=s.associations.get(a);a=s.extensions[qn.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,c)}}return r!==void 0&&(a.colorSpace=r),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let c=this.cache.get(o);c||(c=new OS,Yr.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(o,c)),i=c}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let c=this.cache.get(o);c||(c=new xs,Yr.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(o,c)),i=c}if(r||s||a){let o="ClonedMaterial:"+i.uuid+":";r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let c=this.cache.get(o);c||(c=i.clone(),s&&(c.vertexColors=!0),a&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(o,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return Dy}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let a;const o={},c=s.extensions||{},u=[];if(c[qn.KHR_MATERIALS_UNLIT]){const p=r[qn.KHR_MATERIALS_UNLIT];a=p.getMaterialType(),u.push(p.extendParams(o,s,t))}else{const p=s.pbrMetallicRoughness||{};if(o.color=new Rt(1,1,1),o.opacity=1,Array.isArray(p.baseColorFactor)){const g=p.baseColorFactor;o.color.setRGB(g[0],g[1],g[2],Ir),o.opacity=g[3]}p.baseColorTexture!==void 0&&u.push(t.assignTexture(o,"map",p.baseColorTexture,pr)),o.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,o.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(o,"metalnessMap",p.metallicRoughnessTexture)),u.push(t.assignTexture(o,"roughnessMap",p.metallicRoughnessTexture))),a=this._invokeOne(function(g){return g.getMaterialType&&g.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(g){return g.extendMaterialParams&&g.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=mr);const h=s.alphaMode||hT.OPAQUE;if(h===hT.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,h===hT.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==pa&&(u.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new ft(1,1),s.normalTexture.scale!==void 0)){const p=s.normalTexture.scale;o.normalScale.set(p,p)}if(s.occlusionTexture!==void 0&&a!==pa&&(u.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==pa){const p=s.emissiveFactor;o.emissive=new Rt().setRGB(p[0],p[1],p[2],Ir)}return s.emissiveTexture!==void 0&&a!==pa&&u.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,pr)),Promise.all(u).then(function(){const p=new a(o);return s.name&&(p.name=s.name),Ru(p,s),t.associations.set(p,{materials:e}),s.extensions&&_d(r,p,s),p})}createUniqueName(e){const t=ni.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(o){return i[qn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(c){return M5(c,o,t)})}const a=[];for(let o=0,c=e.length;o<c;o++){const u=e[o],h=_ne(u),p=r[h];if(p)a.push(p.promise);else{let g;u.extensions&&u.extensions[qn.KHR_DRACO_MESH_COMPRESSION]?g=s(u):g=M5(new An,u,t),r[h]={primitive:u,promise:g},a.push(g)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],a=s.primitives,o=[];for(let c=0,u=a.length;c<u;c++){const h=a[c].material===void 0?gne(this.cache):this.getDependency("material",a[c].material);o.push(h)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(c){const u=c.slice(0,c.length-1),h=c[c.length-1],p=[];for(let y=0,x=h.length;y<x;y++){const M=h[y],b=a[y];let S;const T=u[y];if(b.mode===Bo.TRIANGLES||b.mode===Bo.TRIANGLE_STRIP||b.mode===Bo.TRIANGLE_FAN||b.mode===void 0)S=s.isSkinnedMesh===!0?new vw(M,T):new fi(M,T),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),b.mode===Bo.TRIANGLE_STRIP?S.geometry=x5(S.geometry,lw):b.mode===Bo.TRIANGLE_FAN&&(S.geometry=x5(S.geometry,Nb));else if(b.mode===Bo.LINES)S=new Jo(M,T);else if(b.mode===Bo.LINE_STRIP)S=new ku(M,T);else if(b.mode===Bo.LINE_LOOP)S=new _w(M,T);else if(b.mode===Bo.POINTS)S=new DS(M,T);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(S.geometry.morphAttributes).length>0&&yne(S,s),S.name=t.createUniqueName(s.name||"mesh_"+e),Ru(S,s),b.extensions&&_d(r,S,b),t.assignFinalMaterial(S),p.push(S)}for(let y=0,x=p.length;y<x;y++)t.associations.set(p[y],{meshes:e,primitives:y});if(p.length===1)return s.extensions&&_d(r,p[0],s),p[0];const g=new Nu;s.extensions&&_d(r,g,s),t.associations.set(g,{meshes:e});for(let y=0,x=p.length;y<x;y++)g.add(p[y]);return g})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Er(np.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new ju(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Ru(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),a=r,o=[],c=[];for(let u=0,h=a.length;u<h;u++){const p=a[u];if(p){o.push(p);const g=new Ut;s!==null&&g.fromArray(s.array,u*16),c.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Ty(o,c)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,a=[],o=[],c=[],u=[],h=[];for(let p=0,g=r.channels.length;p<g;p++){const y=r.channels[p],x=r.samplers[y.sampler],M=y.target,b=M.node,S=r.parameters!==void 0?r.parameters[x.input]:x.input,T=r.parameters!==void 0?r.parameters[x.output]:x.output;M.node!==void 0&&(a.push(this.getDependency("node",b)),o.push(this.getDependency("accessor",S)),c.push(this.getDependency("accessor",T)),u.push(x),h.push(M))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(c),Promise.all(u),Promise.all(h)]).then(function(p){const g=p[0],y=p[1],x=p[2],M=p[3],b=p[4],S=[];for(let T=0,A=g.length;T<A;T++){const w=g[T],D=y[T],O=x[T],P=M[T],B=b[T];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const I=i._createAnimationTracks(w,D,O,P,B);if(I)for(let z=0;z<I.length;z++)S.push(I[z])}return new dg(s,void 0,S)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let c=0,u=r.weights.length;c<u;c++)o.morphTargetInfluences[c]=r.weights[c]}),a})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),a=[],o=r.children||[];for(let u=0,h=o.length;u<h;u++)a.push(i.getDependency("node",o[u]));const c=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),c]).then(function(u){const h=u[0],p=u[1],g=u[2];g!==null&&h.traverse(function(y){y.isSkinnedMesh&&y.bind(g,bne)});for(let y=0,x=p.length;y<x;y++)h.add(p[y]);return h})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"",o=[],c=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return c&&o.push(c),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){o.push(u)}),this.nodeCache[e]=Promise.all(o).then(function(u){let h;if(s.isBone===!0?h=new RS:u.length>1?h=new Nu:u.length===1?h=u[0]:h=new Cn,h!==u[0])for(let p=0,g=u.length;p<g;p++)h.add(u[p]);if(s.name&&(h.userData.name=s.name,h.name=a),Ru(h,s),s.extensions&&_d(i,h,s),s.matrix!==void 0){const p=new Ut;p.fromArray(s.matrix),h.applyMatrix4(p)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Nu;i.name&&(s.name=r.createUniqueName(i.name)),Ru(s,i),i.extensions&&_d(t,s,i);const a=i.nodes||[],o=[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));return Promise.all(o).then(function(c){for(let h=0,p=c.length;h<p;h++)s.add(c[h]);const u=h=>{const p=new Map;for(const[g,y]of r.associations)(g instanceof Yr||g instanceof mi)&&p.set(g,y);return h.traverse(g=>{const y=r.associations.get(g);y!=null&&p.set(g,y)}),p};return r.associations=u(s),s})}_createAnimationTracks(e,t,i,r,s){const a=[],o=e.name?e.name:e.uuid,c=[];Vf[s.path]===Vf.weights?e.traverse(function(g){g.morphTargetInfluences&&c.push(g.name?g.name:g.uuid)}):c.push(o);let u;switch(Vf[s.path]){case Vf.weights:u=qd;break;case Vf.rotation:u=Yd;break;case Vf.position:case Vf.scale:u=Zd;break;default:switch(i.itemSize){case 1:u=qd;break;case 2:case 3:default:u=Zd;break}break}const h=r.interpolation!==void 0?mne[r.interpolation]:lg,p=this._getArrayFromAccessor(i);for(let g=0,y=c.length;g<y;g++){const x=new u(c[g]+"."+Vf[s.path],t.array,p,h);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(x),a.push(x)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=HA(t.constructor),r=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof Yd?pne:uI;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Ene(n,e,t){const i=e.attributes,r=new Kn;if(i.POSITION!==void 0){const o=t.json.accessors[i.POSITION],c=o.min,u=o.max;if(c!==void 0&&u!==void 0){if(r.set(new J(c[0],c[1],c[2]),new J(u[0],u[1],u[2])),o.normalized){const h=HA(ig[o.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new J,c=new J;for(let u=0,h=s.length;u<h;u++){const p=s[u];if(p.POSITION!==void 0){const g=t.json.accessors[p.POSITION],y=g.min,x=g.max;if(y!==void 0&&x!==void 0){if(c.setX(Math.max(Math.abs(y[0]),Math.abs(x[0]))),c.setY(Math.max(Math.abs(y[1]),Math.abs(x[1]))),c.setZ(Math.max(Math.abs(y[2]),Math.abs(x[2]))),g.normalized){const M=HA(ig[g.componentType]);c.multiplyScalar(M)}o.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}n.boundingBox=r;const a=new gr;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=a}function M5(n,e,t){const i=e.attributes,r=[];function s(a,o){return t.getDependency("accessor",a).then(function(c){n.setAttribute(o,c)})}for(const a in i){const o=FA[a]||a.toLowerCase();o in n.attributes||r.push(s(i[a],o))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});r.push(a)}return Xn.workingColorSpace!==Ir&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Xn.workingColorSpace}" not supported.`),Ru(n,e),Ene(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?vne(n,e.targets,t):n})}const Mne=()=>{const[n,e]=BO(q6),t=Kb(EC),i=Kb(Y6),r=new Vte,{mutateAsync:s}=mte({mutationFn:async u=>{const h=await r.parseAsync(u.fileBuffer,""),p=new Kn().setFromObject(h.scene),g=p.getCenter(new J);h.scene.traverse(x=>{x instanceof fi&&(x.position.sub(g),x.userData={canClip:!0})});const y=p.max.distanceTo(p.min);return{fileName:u.fileName,gltf:h,edgeLength:y}},onSuccess:({fileName:u,gltf:h,edgeLength:p})=>{e(u),t(h.scene),i(p)},onError:u=>{console.error(u),zA.error(u.message)}}),a=async u=>{try{const h=u.target.value,g=await(await fetch(`https://raw.githubusercontent.com/Zbom/Web3D-CS/refs/heads/main/models/${h}`)).arrayBuffer();s({fileName:h,fileBuffer:g})}catch(h){console.error(h),zA.error("")}},[o,c]=BO(K6);return ge.jsxs("div",{className:"flex gap-4",children:[ge.jsxs("div",{className:"flex flex-col gap-4",children:[ge.jsx("input",{type:"file",className:"file-input",accept:".glb,.gltf",onChange:async u=>{const h=u.target.files?.[0];if(h){const p=await h.arrayBuffer();s({fileName:h.name,fileBuffer:p})}u.target.value=""}}),ge.jsxs("select",{defaultValue:"",className:"select",onChange:a,children:[ge.jsx("option",{disabled:!0,children:""}),ge.jsx("option",{value:"37861.glb",children:"37861"}),ge.jsx("option",{value:"39124.glb",children:"39124"}),ge.jsx("option",{value:"293454.glb",children:"293454"}),ge.jsx("option",{value:"372112.glb",children:"372112"}),ge.jsx("option",{value:"441708.glb",children:"441708"}),ge.jsx("option",{value:"demo.glb",children:"demo"})]}),ge.jsxs("div",{role:"alert",className:"alert alert-warning",children:[ge.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:ge.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),ge.jsx("span",{children:"100M"})]}),ge.jsxs("div",{className:"flex items-center gap-4",children:[ge.jsx("span",{className:"badge whitespace-nowrap",children:":"}),ge.jsx("input",{className:"input flex-1",type:"number",value:o,placeholder:"",step:1e-6,onChange:u=>{c(+u.target.value)}})]})]}),n&&ge.jsxs("span",{className:"badge whitespace-nowrap",children:["",n]})]})},Tne=()=>{const n=$d(q6),e=$d(EC),{isPending:t,isError:i,error:r,data:s}=pte({enabled:!!e,queryKey:["legends",n],queryFn:async()=>{const a=[];return e?.traverse(o=>{o instanceof fi&&a.push({uuid:o.uuid,name:o.name,color:o.material.color.getHexString()})}),a}});return t?ge.jsx(ge.Fragment,{}):i?(console.error(r),zA.error(r.message),ge.jsx(ge.Fragment,{})):ge.jsx(ge.Fragment,{children:s.length&&ge.jsx("div",{className:"grid grid-cols-2 gap-2 w-72 max-h-96 overflow-y-auto pb-16",children:s.map(a=>ge.jsxs("div",{className:"badge flex items-center gap-2 tooltip tooltip-bottom w-full","data-tip":a.name,children:[ge.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:`#${a.color}`}}),ge.jsx("span",{className:"w-full flex-1 line-clamp-1 font-mono",children:a.name})]},a.uuid))})})},CC=0,Ane=1,wne=2,T5=2,pT=1.25,A5=1,Kv=32,vE=65535,Cne=Math.pow(2,-24),mT=Symbol("SKIP_GENERATION");function Rne(n){return n.index?n.index.count:n.attributes.position.count}function Pg(n){return Rne(n)/3}function One(n,e=ArrayBuffer){return n>65535?new Uint32Array(new e(4*n)):new Uint16Array(new e(2*n))}function Dne(n,e){if(!n.index){const t=n.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=One(t,i);n.setIndex(new Jn(r,1));for(let s=0;s<t;s++)r[s]=s}}function fI(n,e){const t=Pg(n),i=e||n.drawRange,r=i.start/3,s=(i.start+i.count)/3,a=Math.max(0,r),o=Math.min(t,s)-a;return[{offset:Math.floor(a),count:Math.floor(o)}]}function hI(n,e){if(!n.groups||!n.groups.length)return fI(n,e);const t=[],i=new Set,r=e||n.drawRange,s=r.start/3,a=(r.start+r.count)/3;for(const c of n.groups){const u=c.start/3,h=(c.start+c.count)/3;i.add(Math.max(s,u)),i.add(Math.min(a,h))}const o=Array.from(i.values()).sort((c,u)=>c-u);for(let c=0;c<o.length-1;c++){const u=o[c],h=o[c+1];t.push({offset:Math.floor(u),count:Math.floor(h-u)})}return t}function Une(n,e){const t=Pg(n),i=hI(n,e).sort((a,o)=>a.offset-o.offset),r=i[i.length-1];r.count=Math.min(t-r.offset,r.count);let s=0;return i.forEach(({count:a})=>s+=a),t!==s}function gT(n,e,t,i,r){let s=1/0,a=1/0,o=1/0,c=-1/0,u=-1/0,h=-1/0,p=1/0,g=1/0,y=1/0,x=-1/0,M=-1/0,b=-1/0;for(let S=e*6,T=(e+t)*6;S<T;S+=6){const A=n[S+0],w=n[S+1],D=A-w,O=A+w;D<s&&(s=D),O>c&&(c=O),A<p&&(p=A),A>x&&(x=A);const P=n[S+2],B=n[S+3],I=P-B,z=P+B;I<a&&(a=I),z>u&&(u=z),P<g&&(g=P),P>M&&(M=P);const k=n[S+4],V=n[S+5],j=k-V,W=k+V;j<o&&(o=j),W>h&&(h=W),k<y&&(y=k),k>b&&(b=k)}i[0]=s,i[1]=a,i[2]=o,i[3]=c,i[4]=u,i[5]=h,r[0]=p,r[1]=g,r[2]=y,r[3]=x,r[4]=M,r[5]=b}function Lne(n,e=null,t=null,i=null){const r=n.attributes.position,s=n.index?n.index.array:null,a=Pg(n),o=r.normalized;let c;e===null?(c=new Float32Array(a*6),t=0,i=a):(c=e,t=t||0,i=i||a);const u=r.array,h=r.offset||0;let p=3;r.isInterleavedBufferAttribute&&(p=r.data.stride);const g=["getX","getY","getZ"];for(let y=t;y<t+i;y++){const x=y*3,M=y*6;let b=x+0,S=x+1,T=x+2;s&&(b=s[b],S=s[S],T=s[T]),o||(b=b*p+h,S=S*p+h,T=T*p+h);for(let A=0;A<3;A++){let w,D,O;o?(w=r[g[A]](b),D=r[g[A]](S),O=r[g[A]](T)):(w=u[b+A],D=u[S+A],O=u[T+A]);let P=w;D<P&&(P=D),O<P&&(P=O);let B=w;D>B&&(B=D),O>B&&(B=O);const I=(B-P)/2,z=A*2;c[M+z+0]=P+I,c[M+z+1]=I+(Math.abs(P)+I)*Cne}}return c}function dr(n,e,t){return t.min.x=e[n],t.min.y=e[n+1],t.min.z=e[n+2],t.max.x=e[n+3],t.max.y=e[n+4],t.max.z=e[n+5],t}function w5(n){let e=-1,t=-1/0;for(let i=0;i<3;i++){const r=n[i+3]-n[i];r>t&&(t=r,e=i)}return e}function C5(n,e){e.set(n)}function R5(n,e,t){let i,r;for(let s=0;s<3;s++){const a=s+3;i=n[s],r=e[s],t[s]=i<r?i:r,i=n[a],r=e[a],t[a]=i>r?i:r}}function Rx(n,e,t){for(let i=0;i<3;i++){const r=e[n+2*i],s=e[n+2*i+1],a=r-s,o=r+s;a<t[i]&&(t[i]=a),o>t[i+3]&&(t[i+3]=o)}}function yv(n){const e=n[3]-n[0],t=n[4]-n[1],i=n[5]-n[2];return 2*(e*t+t*i+i*e)}const Cu=32,Nne=(n,e)=>n.candidate-e.candidate,jf=new Array(Cu).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Ox=new Float32Array(6);function Pne(n,e,t,i,r,s){let a=-1,o=0;if(s===CC)a=w5(e),a!==-1&&(o=(e[a]+e[a+3])/2);else if(s===Ane)a=w5(n),a!==-1&&(o=Ine(t,i,r,a));else if(s===wne){const c=yv(n);let u=pT*r;const h=i*6,p=(i+r)*6;for(let g=0;g<3;g++){const y=e[g],b=(e[g+3]-y)/Cu;if(r<Cu/4){const S=[...jf];S.length=r;let T=0;for(let w=h;w<p;w+=6,T++){const D=S[T];D.candidate=t[w+2*g],D.count=0;const{bounds:O,leftCacheBounds:P,rightCacheBounds:B}=D;for(let I=0;I<3;I++)B[I]=1/0,B[I+3]=-1/0,P[I]=1/0,P[I+3]=-1/0,O[I]=1/0,O[I+3]=-1/0;Rx(w,t,O)}S.sort(Nne);let A=r;for(let w=0;w<A;w++){const D=S[w];for(;w+1<A&&S[w+1].candidate===D.candidate;)S.splice(w+1,1),A--}for(let w=h;w<p;w+=6){const D=t[w+2*g];for(let O=0;O<A;O++){const P=S[O];D>=P.candidate?Rx(w,t,P.rightCacheBounds):(Rx(w,t,P.leftCacheBounds),P.count++)}}for(let w=0;w<A;w++){const D=S[w],O=D.count,P=r-D.count,B=D.leftCacheBounds,I=D.rightCacheBounds;let z=0;O!==0&&(z=yv(B)/c);let k=0;P!==0&&(k=yv(I)/c);const V=A5+pT*(z*O+k*P);V<u&&(a=g,u=V,o=D.candidate)}}else{for(let A=0;A<Cu;A++){const w=jf[A];w.count=0,w.candidate=y+b+A*b;const D=w.bounds;for(let O=0;O<3;O++)D[O]=1/0,D[O+3]=-1/0}for(let A=h;A<p;A+=6){let O=~~((t[A+2*g]-y)/b);O>=Cu&&(O=Cu-1);const P=jf[O];P.count++,Rx(A,t,P.bounds)}const S=jf[Cu-1];C5(S.bounds,S.rightCacheBounds);for(let A=Cu-2;A>=0;A--){const w=jf[A],D=jf[A+1];R5(w.bounds,D.rightCacheBounds,w.rightCacheBounds)}let T=0;for(let A=0;A<Cu-1;A++){const w=jf[A],D=w.count,O=w.bounds,B=jf[A+1].rightCacheBounds;D!==0&&(T===0?C5(O,Ox):R5(O,Ox,Ox)),T+=D;let I=0,z=0;T!==0&&(I=yv(Ox)/c);const k=r-T;k!==0&&(z=yv(B)/c);const V=A5+pT*(I*T+z*k);V<u&&(a=g,u=V,o=w.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:a,pos:o}}function Ine(n,e,t,i){let r=0;for(let s=e,a=e+t;s<a;s++)r+=n[s*6+i*2];return r/t}class vT{constructor(){this.boundingData=new Float32Array(6)}}function Bne(n,e,t,i,r,s){let a=i,o=i+r-1;const c=s.pos,u=s.axis*2;for(;;){for(;a<=o&&t[a*6+u]<c;)a++;for(;a<=o&&t[o*6+u]>=c;)o--;if(a<o){for(let h=0;h<3;h++){let p=e[a*3+h];e[a*3+h]=e[o*3+h],e[o*3+h]=p}for(let h=0;h<6;h++){let p=t[a*6+h];t[a*6+h]=t[o*6+h],t[o*6+h]=p}a++,o--}else return a}}function zne(n,e,t,i,r,s){let a=i,o=i+r-1;const c=s.pos,u=s.axis*2;for(;;){for(;a<=o&&t[a*6+u]<c;)a++;for(;a<=o&&t[o*6+u]>=c;)o--;if(a<o){let h=n[a];n[a]=n[o],n[o]=h;for(let p=0;p<6;p++){let g=t[a*6+p];t[a*6+p]=t[o*6+p],t[o*6+p]=g}a++,o--}else return a}}function ka(n,e){return e[n+15]===65535}function uo(n,e){return e[n+6]}function jo(n,e){return e[n+14]}function Wo(n){return n+8}function Xo(n,e){return e[n+6]}function dI(n,e){return e[n+7]}let pI,Dv,Qx,mI;const Fne=Math.pow(2,32);function kA(n){return"count"in n?1:1+kA(n.left)+kA(n.right)}function Hne(n,e,t){return pI=new Float32Array(t),Dv=new Uint32Array(t),Qx=new Uint16Array(t),mI=new Uint8Array(t),GA(n,e)}function GA(n,e){const t=n/4,i=n/2,r="count"in e,s=e.boundingData;for(let a=0;a<6;a++)pI[t+a]=s[a];if(r)if(e.buffer){const a=e.buffer;mI.set(new Uint8Array(a),n);for(let o=n,c=n+a.byteLength;o<c;o+=Kv){const u=o/2;ka(u,Qx)||(Dv[o/4+6]+=t)}return n+a.byteLength}else{const a=e.offset,o=e.count;return Dv[t+6]=a,Qx[i+14]=o,Qx[i+15]=vE,n+Kv}else{const a=e.left,o=e.right,c=e.splitAxis;let u;if(u=GA(n+Kv,a),u/4>Fne)throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return Dv[t+6]=u/4,u=GA(u,o),Dv[t+7]=c,u}}function kne(n,e){const t=(n.index?n.index.count:n.attributes.position.count)/3,i=t>2**16,r=i?4:2,s=e?new SharedArrayBuffer(t*r):new ArrayBuffer(t*r),a=i?new Uint32Array(s):new Uint16Array(s);for(let o=0,c=a.length;o<c;o++)a[o]=o;return a}function Gne(n,e,t,i,r){const{maxDepth:s,verbose:a,maxLeafTris:o,strategy:c,onProgress:u,indirect:h}=r,p=n._indirectBuffer,g=n.geometry,y=g.index?g.index.array:null,x=h?zne:Bne,M=Pg(g),b=new Float32Array(6);let S=!1;const T=new vT;return gT(e,t,i,T.boundingData,b),w(T,t,i,b),T;function A(D){u&&u(D/M)}function w(D,O,P,B=null,I=0){if(!S&&I>=s&&(S=!0,a&&(console.warn(`MeshBVH: Max depth of ${s} reached when generating BVH. Consider increasing maxDepth.`),console.warn(g))),P<=o||I>=s)return A(O+P),D.offset=O,D.count=P,D;const z=Pne(D.boundingData,B,e,O,P,c);if(z.axis===-1)return A(O+P),D.offset=O,D.count=P,D;const k=x(p,y,e,O,P,z);if(k===O||k===O+P)A(O+P),D.offset=O,D.count=P;else{D.splitAxis=z.axis;const V=new vT,j=O,W=k-O;D.left=V,gT(e,j,W,V.boundingData,b),w(V,j,W,b,I+1);const te=new vT,H=k,Q=P-W;D.right=te,gT(e,H,Q,te.boundingData,b),w(te,H,Q,b,I+1)}return D}}function Vne(n,e){const t=n.geometry;e.indirect&&(n._indirectBuffer=kne(t,e.useSharedArrayBuffer),Une(t,e.range)&&!e.verbose&&console.warn('MeshBVH: Provided geometry contains groups or a range that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),n._indirectBuffer||Dne(t,e);const i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=Lne(t),s=e.indirect?fI(t,e.range):hI(t,e.range);n._roots=s.map(a=>{const o=Gne(n,r,a.offset,a.count,e),c=kA(o),u=new i(Kv*c);return Hne(0,o,u),u})}class Vu{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let i=1/0,r=-1/0;for(let s=0,a=e.length;s<a;s++){const c=e[s][t];i=c<i?c:i,r=c>r?c:r}this.min=i,this.max=r}setFromPoints(e,t){let i=1/0,r=-1/0;for(let s=0,a=t.length;s<a;s++){const o=t[s],c=e.dot(o);i=c<i?c:i,r=c>r?c:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}Vu.prototype.setFromBox=(function(){const n=new J;return function(t,i){const r=i.min,s=i.max;let a=1/0,o=-1/0;for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)for(let h=0;h<=1;h++){n.x=r.x*c+s.x*(1-c),n.y=r.y*u+s.y*(1-u),n.z=r.z*h+s.z*(1-h);const p=t.dot(n);a=Math.min(p,a),o=Math.max(p,o)}this.min=a,this.max=o}})();const jne=(function(){const n=new J,e=new J,t=new J;return function(r,s,a){const o=r.start,c=n,u=s.start,h=e;t.subVectors(o,u),n.subVectors(r.end,r.start),e.subVectors(s.end,s.start);const p=t.dot(h),g=h.dot(c),y=h.dot(h),x=t.dot(c),b=c.dot(c)*y-g*g;let S,T;b!==0?S=(p*g-x*y)/b:S=0,T=(p+S*g)/y,a.x=S,a.y=T}})(),RC=(function(){const n=new ft,e=new J,t=new J;return function(r,s,a,o){jne(r,s,n);let c=n.x,u=n.y;if(c>=0&&c<=1&&u>=0&&u<=1){r.at(c,a),s.at(u,o);return}else if(c>=0&&c<=1){u<0?s.at(0,o):s.at(1,o),r.closestPointToPoint(o,!0,a);return}else if(u>=0&&u<=1){c<0?r.at(0,a):r.at(1,a),s.closestPointToPoint(a,!0,o);return}else{let h;c<0?h=r.start:h=r.end;let p;u<0?p=s.start:p=s.end;const g=e,y=t;if(r.closestPointToPoint(p,!0,e),s.closestPointToPoint(h,!0,t),g.distanceToSquared(p)<=y.distanceToSquared(h)){a.copy(g),o.copy(p);return}else{a.copy(h),o.copy(y);return}}}})(),Wne=(function(){const n=new J,e=new J,t=new Fo,i=new Zo;return function(s,a){const{radius:o,center:c}=s,{a:u,b:h,c:p}=a;if(i.start=u,i.end=h,i.closestPointToPoint(c,!0,n).distanceTo(c)<=o||(i.start=u,i.end=p,i.closestPointToPoint(c,!0,n).distanceTo(c)<=o)||(i.start=h,i.end=p,i.closestPointToPoint(c,!0,n).distanceTo(c)<=o))return!0;const M=a.getPlane(t);if(Math.abs(M.distanceToPoint(c))<=o){const S=M.projectPoint(c,e);if(a.containsPoint(S))return!0}return!1}})(),Xne=1e-15;function yT(n){return Math.abs(n)<Xne}class jl extends Nr{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new J),this.satBounds=new Array(4).fill().map(()=>new Vu),this.points=[this.a,this.b,this.c],this.sphere=new gr,this.plane=new Fo,this.needsUpdate=!0}intersectsSphere(e){return Wne(e,this)}update(){const e=this.a,t=this.b,i=this.c,r=this.points,s=this.satAxes,a=this.satBounds,o=s[0],c=a[0];this.getNormal(o),c.setFromPoints(o,r);const u=s[1],h=a[1];u.subVectors(e,t),h.setFromPoints(u,r);const p=s[2],g=a[2];p.subVectors(t,i),g.setFromPoints(p,r);const y=s[3],x=a[3];y.subVectors(i,e),x.setFromPoints(y,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,e),this.needsUpdate=!1}}jl.prototype.closestPointToSegment=(function(){const n=new J,e=new J,t=new Zo;return function(r,s=null,a=null){const{start:o,end:c}=r,u=this.points;let h,p=1/0;for(let g=0;g<3;g++){const y=(g+1)%3;t.start.copy(u[g]),t.end.copy(u[y]),RC(t,r,n,e),h=n.distanceToSquared(e),h<p&&(p=h,s&&s.copy(n),a&&a.copy(e))}return this.closestPointToPoint(o,n),h=o.distanceToSquared(n),h<p&&(p=h,s&&s.copy(n),a&&a.copy(o)),this.closestPointToPoint(c,n),h=c.distanceToSquared(n),h<p&&(p=h,s&&s.copy(n),a&&a.copy(c)),Math.sqrt(p)}})();jl.prototype.intersectsTriangle=(function(){const n=new jl,e=new Array(3),t=new Array(3),i=new Vu,r=new Vu,s=new J,a=new J,o=new J,c=new J,u=new J,h=new Zo,p=new Zo,g=new Zo,y=new J;function x(M,b,S){const T=M.points;let A=0,w=-1;for(let D=0;D<3;D++){const{start:O,end:P}=h;O.copy(T[D]),P.copy(T[(D+1)%3]),h.delta(a);const B=yT(b.distanceToPoint(O));if(yT(b.normal.dot(a))&&B){S.copy(h),A=2;break}const I=b.intersectLine(h,y);if(!I&&B&&y.copy(O),(I||B)&&!yT(y.distanceTo(P))){if(A<=1)(A===1?S.start:S.end).copy(y),B&&(w=A);else if(A>=2){(w===1?S.start:S.end).copy(y),A=2;break}if(A++,A===2&&w===-1)break}}return A}return function(b,S=null,T=!1){this.needsUpdate&&this.update(),b.isExtendedTriangle?b.needsUpdate&&b.update():(n.copy(b),n.update(),b=n);const A=this.plane,w=b.plane;if(Math.abs(A.normal.dot(w.normal))>1-1e-10){const D=this.satBounds,O=this.satAxes;t[0]=b.a,t[1]=b.b,t[2]=b.c;for(let I=0;I<4;I++){const z=D[I],k=O[I];if(i.setFromPoints(k,t),z.isSeparated(i))return!1}const P=b.satBounds,B=b.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let I=0;I<4;I++){const z=P[I],k=B[I];if(i.setFromPoints(k,e),z.isSeparated(i))return!1}for(let I=0;I<4;I++){const z=O[I];for(let k=0;k<4;k++){const V=B[k];if(s.crossVectors(z,V),i.setFromPoints(s,e),r.setFromPoints(s,t),i.isSeparated(r))return!1}}return S&&(T||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),S.start.set(0,0,0),S.end.set(0,0,0)),!0}else{const D=x(this,w,p);if(D===1&&b.containsPoint(p.end))return S&&(S.start.copy(p.end),S.end.copy(p.end)),!0;if(D!==2)return!1;const O=x(b,A,g);if(O===1&&this.containsPoint(g.end))return S&&(S.start.copy(g.end),S.end.copy(g.end)),!0;if(O!==2)return!1;if(p.delta(o),g.delta(c),o.dot(c)<0){let j=g.start;g.start=g.end,g.end=j}const P=p.start.dot(o),B=p.end.dot(o),I=g.start.dot(o),z=g.end.dot(o),k=B<I,V=P<z;return P!==z&&I!==B&&k===V?!1:(S&&(u.subVectors(p.start,g.start),u.dot(o)>0?S.start.copy(p.start):S.start.copy(g.start),u.subVectors(p.end,g.end),u.dot(o)<0?S.end.copy(p.end):S.end.copy(g.end)),!0)}}})();jl.prototype.distanceToPoint=(function(){const n=new J;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}})();jl.prototype.distanceToTriangle=(function(){const n=new J,e=new J,t=["a","b","c"],i=new Zo,r=new Zo;return function(a,o=null,c=null){const u=o||c?i:null;if(this.intersectsTriangle(a,u))return(o||c)&&(o&&u.getCenter(o),c&&u.getCenter(c)),0;let h=1/0;for(let p=0;p<3;p++){let g;const y=t[p],x=a[y];this.closestPointToPoint(x,n),g=x.distanceToSquared(n),g<h&&(h=g,o&&o.copy(n),c&&c.copy(x));const M=this[y];a.closestPointToPoint(M,n),g=M.distanceToSquared(n),g<h&&(h=g,o&&o.copy(M),c&&c.copy(n))}for(let p=0;p<3;p++){const g=t[p],y=t[(p+1)%3];i.set(this[g],this[y]);for(let x=0;x<3;x++){const M=t[x],b=t[(x+1)%3];r.set(a[M],a[b]),RC(i,r,n,e);const S=n.distanceToSquared(e);S<h&&(h=S,o&&o.copy(n),c&&c.copy(e))}}return Math.sqrt(h)}})();class va{constructor(e,t,i){this.isOrientedBox=!0,this.min=new J,this.max=new J,this.matrix=new Ut,this.invMatrix=new Ut,this.points=new Array(8).fill().map(()=>new J),this.satAxes=new Array(3).fill().map(()=>new J),this.satBounds=new Array(3).fill().map(()=>new Vu),this.alignedSatBounds=new Array(3).fill().map(()=>new Vu),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),i&&this.matrix.copy(i)}set(e,t,i){this.min.copy(e),this.max.copy(t),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}va.prototype.update=(function(){return function(){const e=this.matrix,t=this.min,i=this.max,r=this.points;for(let u=0;u<=1;u++)for(let h=0;h<=1;h++)for(let p=0;p<=1;p++){const g=1*u|2*h|4*p,y=r[g];y.x=u?i.x:t.x,y.y=h?i.y:t.y,y.z=p?i.z:t.z,y.applyMatrix4(e)}const s=this.satBounds,a=this.satAxes,o=r[0];for(let u=0;u<3;u++){const h=a[u],p=s[u],g=1<<u,y=r[g];h.subVectors(o,y),p.setFromPoints(h,r)}const c=this.alignedSatBounds;c[0].setFromPointsField(r,"x"),c[1].setFromPointsField(r,"y"),c[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}})();va.prototype.intersectsBox=(function(){const n=new Vu;return function(t){this.needsUpdate&&this.update();const i=t.min,r=t.max,s=this.satBounds,a=this.satAxes,o=this.alignedSatBounds;if(n.min=i.x,n.max=r.x,o[0].isSeparated(n)||(n.min=i.y,n.max=r.y,o[1].isSeparated(n))||(n.min=i.z,n.max=r.z,o[2].isSeparated(n)))return!1;for(let c=0;c<3;c++){const u=a[c],h=s[c];if(n.setFromBox(u,t),h.isSeparated(n))return!1}return!0}})();va.prototype.intersectsTriangle=(function(){const n=new jl,e=new Array(3),t=new Vu,i=new Vu,r=new J;return function(a){this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(n.copy(a),n.update(),a=n);const o=this.satBounds,c=this.satAxes;e[0]=a.a,e[1]=a.b,e[2]=a.c;for(let g=0;g<3;g++){const y=o[g],x=c[g];if(t.setFromPoints(x,e),y.isSeparated(t))return!1}const u=a.satBounds,h=a.satAxes,p=this.points;for(let g=0;g<3;g++){const y=u[g],x=h[g];if(t.setFromPoints(x,p),y.isSeparated(t))return!1}for(let g=0;g<3;g++){const y=c[g];for(let x=0;x<4;x++){const M=h[x];if(r.crossVectors(y,M),t.setFromPoints(r,e),i.setFromPoints(r,p),t.isSeparated(i))return!1}}return!0}})();va.prototype.closestPointToPoint=(function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}})();va.prototype.distanceToPoint=(function(){const n=new J;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}})();va.prototype.distanceToBox=(function(){const n=["x","y","z"],e=new Array(12).fill().map(()=>new Zo),t=new Array(12).fill().map(()=>new Zo),i=new J,r=new J;return function(a,o=0,c=null,u=null){if(this.needsUpdate&&this.update(),this.intersectsBox(a))return(c||u)&&(a.getCenter(r),this.closestPointToPoint(r,i),a.closestPointToPoint(i,r),c&&c.copy(i),u&&u.copy(r)),0;const h=o*o,p=a.min,g=a.max,y=this.points;let x=1/0;for(let b=0;b<8;b++){const S=y[b];r.copy(S).clamp(p,g);const T=S.distanceToSquared(r);if(T<x&&(x=T,c&&c.copy(S),u&&u.copy(r),T<h))return Math.sqrt(T)}let M=0;for(let b=0;b<3;b++)for(let S=0;S<=1;S++)for(let T=0;T<=1;T++){const A=(b+1)%3,w=(b+2)%3,D=S<<A|T<<w,O=1<<b|S<<A|T<<w,P=y[D],B=y[O];e[M].set(P,B);const z=n[b],k=n[A],V=n[w],j=t[M],W=j.start,te=j.end;W[z]=p[z],W[k]=S?p[k]:g[k],W[V]=T?p[V]:g[k],te[z]=g[z],te[k]=S?p[k]:g[k],te[V]=T?p[V]:g[k],M++}for(let b=0;b<=1;b++)for(let S=0;S<=1;S++)for(let T=0;T<=1;T++){r.x=b?g.x:p.x,r.y=S?g.y:p.y,r.z=T?g.z:p.z,this.closestPointToPoint(r,i);const A=r.distanceToSquared(i);if(A<x&&(x=A,c&&c.copy(i),u&&u.copy(r),A<h))return Math.sqrt(A)}for(let b=0;b<12;b++){const S=e[b];for(let T=0;T<12;T++){const A=t[T];RC(S,A,i,r);const w=i.distanceToSquared(r);if(w<x&&(x=w,c&&c.copy(i),u&&u.copy(r),w<h))return Math.sqrt(w)}}return Math.sqrt(x)}})();class OC{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class qne extends OC{constructor(){super(()=>new jl)}}const qo=new qne;class Yne{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let t=null;this.setBuffer=i=>{t&&e.push(t),t=i,this.float32Array=new Float32Array(i),this.uint16Array=new Uint16Array(i),this.uint32Array=new Uint32Array(i)},this.clearBuffer=()=>{t=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,e.length!==0&&this.setBuffer(e.pop())}}}const ki=new Yne;let $f,$m;const Fm=[],Dx=new OC(()=>new Kn);function Zne(n,e,t,i,r,s){$f=Dx.getPrimitive(),$m=Dx.getPrimitive(),Fm.push($f,$m),ki.setBuffer(n._roots[e]);const a=VA(0,n.geometry,t,i,r,s);ki.clearBuffer(),Dx.releasePrimitive($f),Dx.releasePrimitive($m),Fm.pop(),Fm.pop();const o=Fm.length;return o>0&&($m=Fm[o-1],$f=Fm[o-2]),a}function VA(n,e,t,i,r=null,s=0,a=0){const{float32Array:o,uint16Array:c,uint32Array:u}=ki;let h=n*2;if(ka(h,c)){const x=uo(n,u),M=jo(h,c);return dr(n,o,$f),i(x,M,!1,a,s+n,$f)}else{let V=function(W){const{uint16Array:te,uint32Array:H}=ki;let Q=W*2;for(;!ka(Q,te);)W=Wo(W),Q=W*2;return uo(W,H)},j=function(W){const{uint16Array:te,uint32Array:H}=ki;let Q=W*2;for(;!ka(Q,te);)W=Xo(W,H),Q=W*2;return uo(W,H)+jo(Q,te)};var g=V,y=j;const x=Wo(n),M=Xo(n,u);let b=x,S=M,T,A,w,D;if(r&&(w=$f,D=$m,dr(b,o,w),dr(S,o,D),T=r(w),A=r(D),A<T)){b=M,S=x;const W=T;T=A,A=W,w=D}w||(w=$f,dr(b,o,w));const O=ka(b*2,c),P=t(w,O,T,a+1,s+b);let B;if(P===T5){const W=V(b),H=j(b)-W;B=i(W,H,!0,a+1,s+b,w)}else B=P&&VA(b,e,t,i,r,s,a+1);if(B)return!0;D=$m,dr(S,o,D);const I=ka(S*2,c),z=t(D,I,A,a+1,s+S);let k;if(z===T5){const W=V(S),H=j(S)-W;k=i(W,H,!0,a+1,s+S,D)}else k=z&&VA(S,e,t,i,r,s,a+1);return!!k}}const _v=new J,_T=new J;function Kne(n,e,t={},i=0,r=1/0){const s=i*i,a=r*r;let o=1/0,c=null;if(n.shapecast({boundsTraverseOrder:h=>(_v.copy(e).clamp(h.min,h.max),_v.distanceToSquared(e)),intersectsBounds:(h,p,g)=>g<o&&g<a,intersectsTriangle:(h,p)=>{h.closestPointToPoint(e,_v);const g=e.distanceToSquared(_v);return g<o&&(_T.copy(_v),o=g,c=p),g<s}}),o===1/0)return null;const u=Math.sqrt(o);return t.point?t.point.copy(_T):t.point=_T.clone(),t.distance=u,t.faceIndex=c,t}const $ne=parseInt(xg)>=169,xd=new J,bd=new J,Sd=new J,Ux=new ft,Lx=new ft,Nx=new ft,O5=new J,D5=new J,U5=new J,xv=new J;function Qne(n,e,t,i,r,s,a,o){let c;if(s===Fs?c=n.intersectTriangle(i,t,e,!0,r):c=n.intersectTriangle(e,t,i,s!==mr,r),c===null)return null;const u=n.origin.distanceTo(r);return u<a||u>o?null:{distance:u,point:r.clone()}}function Jne(n,e,t,i,r,s,a,o,c,u,h){xd.fromBufferAttribute(e,s),bd.fromBufferAttribute(e,a),Sd.fromBufferAttribute(e,o);const p=Qne(n,xd,bd,Sd,xv,c,u,h);if(p){const g=new J;Nr.getBarycoord(xv,xd,bd,Sd,g),i&&(Ux.fromBufferAttribute(i,s),Lx.fromBufferAttribute(i,a),Nx.fromBufferAttribute(i,o),p.uv=Nr.getInterpolation(xv,xd,bd,Sd,Ux,Lx,Nx,new ft)),r&&(Ux.fromBufferAttribute(r,s),Lx.fromBufferAttribute(r,a),Nx.fromBufferAttribute(r,o),p.uv1=Nr.getInterpolation(xv,xd,bd,Sd,Ux,Lx,Nx,new ft)),t&&(O5.fromBufferAttribute(t,s),D5.fromBufferAttribute(t,a),U5.fromBufferAttribute(t,o),p.normal=Nr.getInterpolation(xv,xd,bd,Sd,O5,D5,U5,new J),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const y={a:s,b:a,c:o,normal:new J,materialIndex:0};Nr.getNormal(xd,bd,Sd,y.normal),p.face=y,p.faceIndex=s,$ne&&(p.barycoord=g)}return p}function yE(n,e,t,i,r,s,a){const o=i*3;let c=o+0,u=o+1,h=o+2;const p=n.index;n.index&&(c=p.getX(c),u=p.getX(u),h=p.getX(h));const{position:g,normal:y,uv:x,uv1:M}=n.attributes,b=Jne(t,g,y,x,M,c,u,h,e,s,a);return b?(b.faceIndex=i,r&&r.push(b),b):null}function Pr(n,e,t,i){const r=n.a,s=n.b,a=n.c;let o=e,c=e+1,u=e+2;t&&(o=t.getX(o),c=t.getX(c),u=t.getX(u)),r.x=i.getX(o),r.y=i.getY(o),r.z=i.getZ(o),s.x=i.getX(c),s.y=i.getY(c),s.z=i.getZ(c),a.x=i.getX(u),a.y=i.getY(u),a.z=i.getZ(u)}function eie(n,e,t,i,r,s,a,o){const{geometry:c,_indirectBuffer:u}=n;for(let h=i,p=i+r;h<p;h++)yE(c,e,t,h,s,a,o)}function tie(n,e,t,i,r,s,a){const{geometry:o,_indirectBuffer:c}=n;let u=1/0,h=null;for(let p=i,g=i+r;p<g;p++){let y;y=yE(o,e,t,p,null,s,a),y&&y.distance<u&&(h=y,u=y.distance)}return h}function nie(n,e,t,i,r,s,a){const{geometry:o}=t,{index:c}=o,u=o.attributes.position;for(let h=n,p=e+n;h<p;h++){let g;if(g=h,Pr(a,g*3,c,u),a.needsUpdate=!0,i(a,g,r,s))return!0}return!1}function iie(n,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=n.geometry,i=t.index?t.index.array:null,r=t.attributes.position;let s,a,o,c,u=0;const h=n._roots;for(let g=0,y=h.length;g<y;g++)s=h[g],a=new Uint32Array(s),o=new Uint16Array(s),c=new Float32Array(s),p(0,u),u+=s.byteLength;function p(g,y,x=!1){const M=g*2;if(o[M+15]===vE){const S=a[g+6],T=o[M+14];let A=1/0,w=1/0,D=1/0,O=-1/0,P=-1/0,B=-1/0;for(let I=3*S,z=3*(S+T);I<z;I++){let k=i[I];const V=r.getX(k),j=r.getY(k),W=r.getZ(k);V<A&&(A=V),V>O&&(O=V),j<w&&(w=j),j>P&&(P=j),W<D&&(D=W),W>B&&(B=W)}return c[g+0]!==A||c[g+1]!==w||c[g+2]!==D||c[g+3]!==O||c[g+4]!==P||c[g+5]!==B?(c[g+0]=A,c[g+1]=w,c[g+2]=D,c[g+3]=O,c[g+4]=P,c[g+5]=B,!0):!1}else{const S=g+8,T=a[g+6],A=S+y,w=T+y;let D=x,O=!1,P=!1;e?D||(O=e.has(A),P=e.has(w),D=!O&&!P):(O=!0,P=!0);const B=D||O,I=D||P;let z=!1;B&&(z=p(S,y,D));let k=!1;I&&(k=p(T,y,D));const V=z||k;if(V)for(let j=0;j<3;j++){const W=S+j,te=T+j,H=c[W],Q=c[W+3],ne=c[te],re=c[te+3];c[g+j]=H<ne?H:ne,c[g+j+3]=Q>re?Q:re}return V}}}function uh(n,e,t,i,r){let s,a,o,c,u,h;const p=1/t.direction.x,g=1/t.direction.y,y=1/t.direction.z,x=t.origin.x,M=t.origin.y,b=t.origin.z;let S=e[n],T=e[n+3],A=e[n+1],w=e[n+3+1],D=e[n+2],O=e[n+3+2];return p>=0?(s=(S-x)*p,a=(T-x)*p):(s=(T-x)*p,a=(S-x)*p),g>=0?(o=(A-M)*g,c=(w-M)*g):(o=(w-M)*g,c=(A-M)*g),s>c||o>a||((o>s||isNaN(s))&&(s=o),(c<a||isNaN(a))&&(a=c),y>=0?(u=(D-b)*y,h=(O-b)*y):(u=(O-b)*y,h=(D-b)*y),s>h||u>a)?!1:((u>s||s!==s)&&(s=u),(h<a||a!==a)&&(a=h),s<=r&&a>=i)}function rie(n,e,t,i,r,s,a,o){const{geometry:c,_indirectBuffer:u}=n;for(let h=i,p=i+r;h<p;h++){let g=u?u[h]:h;yE(c,e,t,g,s,a,o)}}function sie(n,e,t,i,r,s,a){const{geometry:o,_indirectBuffer:c}=n;let u=1/0,h=null;for(let p=i,g=i+r;p<g;p++){let y;y=yE(o,e,t,c?c[p]:p,null,s,a),y&&y.distance<u&&(h=y,u=y.distance)}return h}function aie(n,e,t,i,r,s,a){const{geometry:o}=t,{index:c}=o,u=o.attributes.position;for(let h=n,p=e+n;h<p;h++){let g;if(g=t.resolveTriangleIndex(h),Pr(a,g*3,c,u),a.needsUpdate=!0,i(a,g,r,s))return!0}return!1}function oie(n,e,t,i,r,s,a){ki.setBuffer(n._roots[e]),jA(0,n,t,i,r,s,a),ki.clearBuffer()}function jA(n,e,t,i,r,s,a){const{float32Array:o,uint16Array:c,uint32Array:u}=ki,h=n*2;if(ka(h,c)){const g=uo(n,u),y=jo(h,c);eie(e,t,i,g,y,r,s,a)}else{const g=Wo(n);uh(g,o,i,s,a)&&jA(g,e,t,i,r,s,a);const y=Xo(n,u);uh(y,o,i,s,a)&&jA(y,e,t,i,r,s,a)}}const lie=["x","y","z"];function cie(n,e,t,i,r,s){ki.setBuffer(n._roots[e]);const a=WA(0,n,t,i,r,s);return ki.clearBuffer(),a}function WA(n,e,t,i,r,s){const{float32Array:a,uint16Array:o,uint32Array:c}=ki;let u=n*2;if(ka(u,o)){const p=uo(n,c),g=jo(u,o);return tie(e,t,i,p,g,r,s)}else{const p=dI(n,c),g=lie[p],x=i.direction[g]>=0;let M,b;x?(M=Wo(n),b=Xo(n,c)):(M=Xo(n,c),b=Wo(n));const T=uh(M,a,i,r,s)?WA(M,e,t,i,r,s):null;if(T){const D=T.point[g];if(x?D<=a[b+p]:D>=a[b+p+3])return T}const w=uh(b,a,i,r,s)?WA(b,e,t,i,r,s):null;return T&&w?T.distance<=w.distance?T:w:T||w||null}}const Px=new Kn,Hm=new jl,km=new jl,bv=new Ut,L5=new va,Ix=new va;function uie(n,e,t,i){ki.setBuffer(n._roots[e]);const r=XA(0,n,t,i);return ki.clearBuffer(),r}function XA(n,e,t,i,r=null){const{float32Array:s,uint16Array:a,uint32Array:o}=ki;let c=n*2;if(r===null&&(t.boundingBox||t.computeBoundingBox(),L5.set(t.boundingBox.min,t.boundingBox.max,i),r=L5),ka(c,a)){const h=e.geometry,p=h.index,g=h.attributes.position,y=t.index,x=t.attributes.position,M=uo(n,o),b=jo(c,a);if(bv.copy(i).invert(),t.boundsTree)return dr(n,s,Ix),Ix.matrix.copy(bv),Ix.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:T=>Ix.intersectsBox(T),intersectsTriangle:T=>{T.a.applyMatrix4(i),T.b.applyMatrix4(i),T.c.applyMatrix4(i),T.needsUpdate=!0;for(let A=M*3,w=(b+M)*3;A<w;A+=3)if(Pr(km,A,p,g),km.needsUpdate=!0,T.intersectsTriangle(km))return!0;return!1}});for(let S=M*3,T=(b+M)*3;S<T;S+=3){Pr(Hm,S,p,g),Hm.a.applyMatrix4(bv),Hm.b.applyMatrix4(bv),Hm.c.applyMatrix4(bv),Hm.needsUpdate=!0;for(let A=0,w=y.count;A<w;A+=3)if(Pr(km,A,y,x),km.needsUpdate=!0,Hm.intersectsTriangle(km))return!0}}else{const h=n+8,p=o[n+6];return dr(h,s,Px),!!(r.intersectsBox(Px)&&XA(h,e,t,i,r)||(dr(p,s,Px),r.intersectsBox(Px)&&XA(p,e,t,i,r)))}}const Bx=new Ut,xT=new va,Sv=new va,fie=new J,hie=new J,die=new J,pie=new J;function mie(n,e,t,i={},r={},s=0,a=1/0){e.boundingBox||e.computeBoundingBox(),xT.set(e.boundingBox.min,e.boundingBox.max,t),xT.needsUpdate=!0;const o=n.geometry,c=o.attributes.position,u=o.index,h=e.attributes.position,p=e.index,g=qo.getPrimitive(),y=qo.getPrimitive();let x=fie,M=hie,b=null,S=null;r&&(b=die,S=pie);let T=1/0,A=null,w=null;return Bx.copy(t).invert(),Sv.matrix.copy(Bx),n.shapecast({boundsTraverseOrder:D=>xT.distanceToBox(D),intersectsBounds:(D,O,P)=>P<T&&P<a?(O&&(Sv.min.copy(D.min),Sv.max.copy(D.max),Sv.needsUpdate=!0),!0):!1,intersectsRange:(D,O)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:B=>Sv.distanceToBox(B),intersectsBounds:(B,I,z)=>z<T&&z<a,intersectsRange:(B,I)=>{for(let z=B,k=B+I;z<k;z++){Pr(y,3*z,p,h),y.a.applyMatrix4(t),y.b.applyMatrix4(t),y.c.applyMatrix4(t),y.needsUpdate=!0;for(let V=D,j=D+O;V<j;V++){Pr(g,3*V,u,c),g.needsUpdate=!0;const W=g.distanceToTriangle(y,x,b);if(W<T&&(M.copy(x),S&&S.copy(b),T=W,A=V,w=z),W<s)return!0}}}});{const P=Pg(e);for(let B=0,I=P;B<I;B++){Pr(y,3*B,p,h),y.a.applyMatrix4(t),y.b.applyMatrix4(t),y.c.applyMatrix4(t),y.needsUpdate=!0;for(let z=D,k=D+O;z<k;z++){Pr(g,3*z,u,c),g.needsUpdate=!0;const V=g.distanceToTriangle(y,x,b);if(V<T&&(M.copy(x),S&&S.copy(b),T=V,A=z,w=B),V<s)return!0}}}}}),qo.releasePrimitive(g),qo.releasePrimitive(y),T===1/0?null:(i.point?i.point.copy(M):i.point=M.clone(),i.distance=T,i.faceIndex=A,r&&(r.point?r.point.copy(S):r.point=S.clone(),r.point.applyMatrix4(Bx),M.applyMatrix4(Bx),r.distance=M.sub(r.point).length(),r.faceIndex=w),i)}function gie(n,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=n.geometry,i=t.index?t.index.array:null,r=t.attributes.position;let s,a,o,c,u=0;const h=n._roots;for(let g=0,y=h.length;g<y;g++)s=h[g],a=new Uint32Array(s),o=new Uint16Array(s),c=new Float32Array(s),p(0,u),u+=s.byteLength;function p(g,y,x=!1){const M=g*2;if(o[M+15]===vE){const S=a[g+6],T=o[M+14];let A=1/0,w=1/0,D=1/0,O=-1/0,P=-1/0,B=-1/0;for(let I=S,z=S+T;I<z;I++){const k=3*n.resolveTriangleIndex(I);for(let V=0;V<3;V++){let j=k+V;j=i?i[j]:j;const W=r.getX(j),te=r.getY(j),H=r.getZ(j);W<A&&(A=W),W>O&&(O=W),te<w&&(w=te),te>P&&(P=te),H<D&&(D=H),H>B&&(B=H)}}return c[g+0]!==A||c[g+1]!==w||c[g+2]!==D||c[g+3]!==O||c[g+4]!==P||c[g+5]!==B?(c[g+0]=A,c[g+1]=w,c[g+2]=D,c[g+3]=O,c[g+4]=P,c[g+5]=B,!0):!1}else{const S=g+8,T=a[g+6],A=S+y,w=T+y;let D=x,O=!1,P=!1;e?D||(O=e.has(A),P=e.has(w),D=!O&&!P):(O=!0,P=!0);const B=D||O,I=D||P;let z=!1;B&&(z=p(S,y,D));let k=!1;I&&(k=p(T,y,D));const V=z||k;if(V)for(let j=0;j<3;j++){const W=S+j,te=T+j,H=c[W],Q=c[W+3],ne=c[te],re=c[te+3];c[g+j]=H<ne?H:ne,c[g+j+3]=Q>re?Q:re}return V}}}function vie(n,e,t,i,r,s,a){ki.setBuffer(n._roots[e]),qA(0,n,t,i,r,s,a),ki.clearBuffer()}function qA(n,e,t,i,r,s,a){const{float32Array:o,uint16Array:c,uint32Array:u}=ki,h=n*2;if(ka(h,c)){const g=uo(n,u),y=jo(h,c);rie(e,t,i,g,y,r,s,a)}else{const g=Wo(n);uh(g,o,i,s,a)&&qA(g,e,t,i,r,s,a);const y=Xo(n,u);uh(y,o,i,s,a)&&qA(y,e,t,i,r,s,a)}}const yie=["x","y","z"];function _ie(n,e,t,i,r,s){ki.setBuffer(n._roots[e]);const a=YA(0,n,t,i,r,s);return ki.clearBuffer(),a}function YA(n,e,t,i,r,s){const{float32Array:a,uint16Array:o,uint32Array:c}=ki;let u=n*2;if(ka(u,o)){const p=uo(n,c),g=jo(u,o);return sie(e,t,i,p,g,r,s)}else{const p=dI(n,c),g=yie[p],x=i.direction[g]>=0;let M,b;x?(M=Wo(n),b=Xo(n,c)):(M=Xo(n,c),b=Wo(n));const T=uh(M,a,i,r,s)?YA(M,e,t,i,r,s):null;if(T){const D=T.point[g];if(x?D<=a[b+p]:D>=a[b+p+3])return T}const w=uh(b,a,i,r,s)?YA(b,e,t,i,r,s):null;return T&&w?T.distance<=w.distance?T:w:T||w||null}}const zx=new Kn,Gm=new jl,Vm=new jl,Ev=new Ut,N5=new va,Fx=new va;function xie(n,e,t,i){ki.setBuffer(n._roots[e]);const r=ZA(0,n,t,i);return ki.clearBuffer(),r}function ZA(n,e,t,i,r=null){const{float32Array:s,uint16Array:a,uint32Array:o}=ki;let c=n*2;if(r===null&&(t.boundingBox||t.computeBoundingBox(),N5.set(t.boundingBox.min,t.boundingBox.max,i),r=N5),ka(c,a)){const h=e.geometry,p=h.index,g=h.attributes.position,y=t.index,x=t.attributes.position,M=uo(n,o),b=jo(c,a);if(Ev.copy(i).invert(),t.boundsTree)return dr(n,s,Fx),Fx.matrix.copy(Ev),Fx.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:T=>Fx.intersectsBox(T),intersectsTriangle:T=>{T.a.applyMatrix4(i),T.b.applyMatrix4(i),T.c.applyMatrix4(i),T.needsUpdate=!0;for(let A=M,w=b+M;A<w;A++)if(Pr(Vm,3*e.resolveTriangleIndex(A),p,g),Vm.needsUpdate=!0,T.intersectsTriangle(Vm))return!0;return!1}});for(let S=M,T=b+M;S<T;S++){const A=e.resolveTriangleIndex(S);Pr(Gm,3*A,p,g),Gm.a.applyMatrix4(Ev),Gm.b.applyMatrix4(Ev),Gm.c.applyMatrix4(Ev),Gm.needsUpdate=!0;for(let w=0,D=y.count;w<D;w+=3)if(Pr(Vm,w,y,x),Vm.needsUpdate=!0,Gm.intersectsTriangle(Vm))return!0}}else{const h=n+8,p=o[n+6];return dr(h,s,zx),!!(r.intersectsBox(zx)&&ZA(h,e,t,i,r)||(dr(p,s,zx),r.intersectsBox(zx)&&ZA(p,e,t,i,r)))}}const Hx=new Ut,bT=new va,Mv=new va,bie=new J,Sie=new J,Eie=new J,Mie=new J;function Tie(n,e,t,i={},r={},s=0,a=1/0){e.boundingBox||e.computeBoundingBox(),bT.set(e.boundingBox.min,e.boundingBox.max,t),bT.needsUpdate=!0;const o=n.geometry,c=o.attributes.position,u=o.index,h=e.attributes.position,p=e.index,g=qo.getPrimitive(),y=qo.getPrimitive();let x=bie,M=Sie,b=null,S=null;r&&(b=Eie,S=Mie);let T=1/0,A=null,w=null;return Hx.copy(t).invert(),Mv.matrix.copy(Hx),n.shapecast({boundsTraverseOrder:D=>bT.distanceToBox(D),intersectsBounds:(D,O,P)=>P<T&&P<a?(O&&(Mv.min.copy(D.min),Mv.max.copy(D.max),Mv.needsUpdate=!0),!0):!1,intersectsRange:(D,O)=>{if(e.boundsTree){const P=e.boundsTree;return P.shapecast({boundsTraverseOrder:B=>Mv.distanceToBox(B),intersectsBounds:(B,I,z)=>z<T&&z<a,intersectsRange:(B,I)=>{for(let z=B,k=B+I;z<k;z++){const V=P.resolveTriangleIndex(z);Pr(y,3*V,p,h),y.a.applyMatrix4(t),y.b.applyMatrix4(t),y.c.applyMatrix4(t),y.needsUpdate=!0;for(let j=D,W=D+O;j<W;j++){const te=n.resolveTriangleIndex(j);Pr(g,3*te,u,c),g.needsUpdate=!0;const H=g.distanceToTriangle(y,x,b);if(H<T&&(M.copy(x),S&&S.copy(b),T=H,A=j,w=z),H<s)return!0}}}})}else{const P=Pg(e);for(let B=0,I=P;B<I;B++){Pr(y,3*B,p,h),y.a.applyMatrix4(t),y.b.applyMatrix4(t),y.c.applyMatrix4(t),y.needsUpdate=!0;for(let z=D,k=D+O;z<k;z++){const V=n.resolveTriangleIndex(z);Pr(g,3*V,u,c),g.needsUpdate=!0;const j=g.distanceToTriangle(y,x,b);if(j<T&&(M.copy(x),S&&S.copy(b),T=j,A=z,w=B),j<s)return!0}}}}}),qo.releasePrimitive(g),qo.releasePrimitive(y),T===1/0?null:(i.point?i.point.copy(M):i.point=M.clone(),i.distance=T,i.faceIndex=A,r&&(r.point?r.point.copy(S):r.point=S.clone(),r.point.applyMatrix4(Hx),M.applyMatrix4(Hx),r.distance=M.sub(r.point).length(),r.faceIndex=w),i)}function Aie(){return typeof SharedArrayBuffer<"u"}const $v=new ki.constructor,pS=new ki.constructor,qf=new OC(()=>new Kn),jm=new Kn,Wm=new Kn,ST=new Kn,ET=new Kn;let MT=!1;function wie(n,e,t,i){if(MT)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");MT=!0;const r=n._roots,s=e._roots;let a,o=0,c=0;const u=new Ut().copy(t).invert();for(let h=0,p=r.length;h<p;h++){$v.setBuffer(r[h]),c=0;const g=qf.getPrimitive();dr(0,$v.float32Array,g),g.applyMatrix4(u);for(let y=0,x=s.length;y<x&&(pS.setBuffer(s[y]),a=Fl(0,0,t,u,i,o,c,0,0,g),pS.clearBuffer(),c+=s[y].length,!a);y++);if(qf.releasePrimitive(g),$v.clearBuffer(),o+=r[h].length,a)break}return MT=!1,a}function Fl(n,e,t,i,r,s=0,a=0,o=0,c=0,u=null,h=!1){let p,g;h?(p=pS,g=$v):(p=$v,g=pS);const y=p.float32Array,x=p.uint32Array,M=p.uint16Array,b=g.float32Array,S=g.uint32Array,T=g.uint16Array,A=n*2,w=e*2,D=ka(A,M),O=ka(w,T);let P=!1;if(O&&D)h?P=r(uo(e,S),jo(e*2,T),uo(n,x),jo(n*2,M),c,a+e,o,s+n):P=r(uo(n,x),jo(n*2,M),uo(e,S),jo(e*2,T),o,s+n,c,a+e);else if(O){const B=qf.getPrimitive();dr(e,b,B),B.applyMatrix4(t);const I=Wo(n),z=Xo(n,x);dr(I,y,jm),dr(z,y,Wm);const k=B.intersectsBox(jm),V=B.intersectsBox(Wm);P=k&&Fl(e,I,i,t,r,a,s,c,o+1,B,!h)||V&&Fl(e,z,i,t,r,a,s,c,o+1,B,!h),qf.releasePrimitive(B)}else{const B=Wo(e),I=Xo(e,S);dr(B,b,ST),dr(I,b,ET);const z=u.intersectsBox(ST),k=u.intersectsBox(ET);if(z&&k)P=Fl(n,B,t,i,r,s,a,o,c+1,u,h)||Fl(n,I,t,i,r,s,a,o,c+1,u,h);else if(z)if(D)P=Fl(n,B,t,i,r,s,a,o,c+1,u,h);else{const V=qf.getPrimitive();V.copy(ST).applyMatrix4(t);const j=Wo(n),W=Xo(n,x);dr(j,y,jm),dr(W,y,Wm);const te=V.intersectsBox(jm),H=V.intersectsBox(Wm);P=te&&Fl(B,j,i,t,r,a,s,c,o+1,V,!h)||H&&Fl(B,W,i,t,r,a,s,c,o+1,V,!h),qf.releasePrimitive(V)}else if(k)if(D)P=Fl(n,I,t,i,r,s,a,o,c+1,u,h);else{const V=qf.getPrimitive();V.copy(ET).applyMatrix4(t);const j=Wo(n),W=Xo(n,x);dr(j,y,jm),dr(W,y,Wm);const te=V.intersectsBox(jm),H=V.intersectsBox(Wm);P=te&&Fl(I,j,i,t,r,a,s,c,o+1,V,!h)||H&&Fl(I,W,i,t,r,a,s,c,o+1,V,!h),qf.releasePrimitive(V)}}return P}const kx=new va,P5=new Kn,Cie={strategy:CC,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0,range:null};class _E{static serialize(e,t={}){t={cloneBuffers:!0,...t};const i=e.geometry,r=e._roots,s=e._indirectBuffer,a=i.getIndex();let o;return t.cloneBuffers?o={roots:r.map(c=>c.slice()),index:a?a.array.slice():null,indirectBuffer:s?s.slice():null}:o={roots:r,index:a?a.array:null,indirectBuffer:s},o}static deserialize(e,t,i={}){i={setIndex:!0,indirect:!!e.indirectBuffer,...i};const{index:r,roots:s,indirectBuffer:a}=e,o=new _E(t,{...i,[mT]:!0});if(o._roots=s,o._indirectBuffer=a||null,i.setIndex){const c=t.getIndex();if(c===null){const u=new Jn(e.index,1,!1);t.setIndex(u)}else c.array!==r&&(c.array.set(r),c.needsUpdate=!0)}return o}get indirect(){return!!this._indirectBuffer}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({...Cie,[mT]:!1},t),t.useSharedArrayBuffer&&!Aie())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,t[mT]||(Vne(this,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Kn))),this.resolveTriangleIndex=t.indirect?i=>this._indirectBuffer[i]:i=>i}refit(e=null){return(this.indirect?gie:iie)(this,e)}traverse(e,t=0){const i=this._roots[t],r=new Uint32Array(i),s=new Uint16Array(i);a(0);function a(o,c=0){const u=o*2,h=s[u+15]===vE;if(h){const p=r[o+6],g=s[u+14];e(c,h,new Float32Array(i,o*4,6),p,g)}else{const p=o+Kv/4,g=r[o+6],y=r[o+7];e(c,h,new Float32Array(i,o*4,6),y)||(a(p,c+1),a(g,c+1))}}}raycast(e,t=$o,i=0,r=1/0){const s=this._roots,a=this.geometry,o=[],c=t.isMaterial,u=Array.isArray(t),h=a.groups,p=c?t.side:t,g=this.indirect?vie:oie;for(let y=0,x=s.length;y<x;y++){const M=u?t[h[y].materialIndex].side:p,b=o.length;if(g(this,y,M,e,o,i,r),u){const S=h[y].materialIndex;for(let T=b,A=o.length;T<A;T++)o[T].face.materialIndex=S}}return o}raycastFirst(e,t=$o,i=0,r=1/0){const s=this._roots,a=this.geometry,o=t.isMaterial,c=Array.isArray(t);let u=null;const h=a.groups,p=o?t.side:t,g=this.indirect?_ie:cie;for(let y=0,x=s.length;y<x;y++){const M=c?t[h[y].materialIndex].side:p,b=g(this,y,M,e,i,r);b!=null&&(u==null||b.distance<u.distance)&&(u=b,c&&(b.face.materialIndex=h[y].materialIndex))}return u}intersectsGeometry(e,t){let i=!1;const r=this._roots,s=this.indirect?xie:uie;for(let a=0,o=r.length;a<o&&(i=s(this,a,e,t),!i);a++);return i}shapecast(e){const t=qo.getPrimitive(),i=this.indirect?aie:nie;let{boundsTraverseOrder:r,intersectsBounds:s,intersectsRange:a,intersectsTriangle:o}=e;if(a&&o){const p=a;a=(g,y,x,M,b)=>p(g,y,x,M,b)?!0:i(g,y,this,o,x,M,t)}else a||(o?a=(p,g,y,x)=>i(p,g,this,o,y,x,t):a=(p,g,y)=>y);let c=!1,u=0;const h=this._roots;for(let p=0,g=h.length;p<g;p++){const y=h[p];if(c=Zne(this,p,s,a,r,u),c)break;u+=y.byteLength}return qo.releasePrimitive(t),c}bvhcast(e,t,i){let{intersectsRanges:r,intersectsTriangles:s}=i;const a=qo.getPrimitive(),o=this.geometry.index,c=this.geometry.attributes.position,u=this.indirect?x=>{const M=this.resolveTriangleIndex(x);Pr(a,M*3,o,c)}:x=>{Pr(a,x*3,o,c)},h=qo.getPrimitive(),p=e.geometry.index,g=e.geometry.attributes.position,y=e.indirect?x=>{const M=e.resolveTriangleIndex(x);Pr(h,M*3,p,g)}:x=>{Pr(h,x*3,p,g)};if(s){const x=(M,b,S,T,A,w,D,O)=>{for(let P=S,B=S+T;P<B;P++){y(P),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let I=M,z=M+b;I<z;I++)if(u(I),a.needsUpdate=!0,s(a,h,I,P,A,w,D,O))return!0}return!1};if(r){const M=r;r=function(b,S,T,A,w,D,O,P){return M(b,S,T,A,w,D,O,P)?!0:x(b,S,T,A,w,D,O,P)}}else r=x}return wie(this,e,t,r)}intersectsBox(e,t){return kx.set(e.min,e.max,t),kx.needsUpdate=!0,this.shapecast({intersectsBounds:i=>kx.intersectsBox(i),intersectsTriangle:i=>kx.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,i={},r={},s=0,a=1/0){return(this.indirect?Tie:mie)(this,e,t,i,r,s,a)}closestPointToPoint(e,t={},i=0,r=1/0){return Kne(this,e,t,i,r)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(i=>{dr(0,new Float32Array(i),P5),e.union(P5)}),e}}function Rie(n,e,t,i){const r=n.prev,s=n,a=n.next;if(ar(r,s,a)>=0)return!1;const o=r.x,c=s.x,u=a.x,h=r.y,p=s.y,g=a.y,y=Math.min(o,c,u),x=Math.min(h,p,g),M=Math.max(o,c,u),b=Math.max(h,p,g),S=KA(y,x,e,t,i),T=KA(M,b,e,t,i);let A=n.prevZ,w=n.nextZ;for(;A&&A.z>=S&&w&&w.z<=T;){if(A.x>=y&&A.x<=M&&A.y>=x&&A.y<=b&&A!==r&&A!==a&&Uv(o,h,c,p,u,g,A.x,A.y)&&ar(A.prev,A,A.next)>=0||(A=A.prevZ,w.x>=y&&w.x<=M&&w.y>=x&&w.y<=b&&w!==r&&w!==a&&Uv(o,h,c,p,u,g,w.x,w.y)&&ar(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;A&&A.z>=S;){if(A.x>=y&&A.x<=M&&A.y>=x&&A.y<=b&&A!==r&&A!==a&&Uv(o,h,c,p,u,g,A.x,A.y)&&ar(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;w&&w.z<=T;){if(w.x>=y&&w.x<=M&&w.y>=x&&w.y<=b&&w!==r&&w!==a&&Uv(o,h,c,p,u,g,w.x,w.y)&&ar(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Oie(n,e){let t=n;do{const i=t.prev,r=t.next.next;!yg(i,r)&&vI(i,t,t.next,r)&&gy(i,r)&&gy(r,i)&&(e.push(i.i,t.i,r.i),vy(t),vy(t.next),t=n=r),t=t.next}while(t!==n);return tp(t)}function Die(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Hie(a,o)){let c=yI(a,o);a=tp(a,a.next),c=tp(c,c.next),yy(a,e,t,i,r,s,0),yy(c,e,t,i,r,s,0);return}o=o.next}a=a.next}while(a!==n)}function Uie(n,e,t,i){const r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*i,c=s<a-1?e[s+1]*i:n.length,u=_I(n,o,c,i,!1);u===u.next&&(u.steiner=!0),r.push(Fie(u))}r.sort(Lie);for(let s=0;s<r.length;s++)t=Nie(r[s],t);return t}function Lie(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function Nie(n,e){const t=Pie(n,e);if(!t)return e;const i=yI(t,n);return tp(i,i.next),tp(t,t.next)}function Pie(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,a;if(yg(n,t))return t;do{if(yg(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=i&&p>s&&(s=p,a=t.x<t.next.x?t:t.next,p===i))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,c=a.x,u=a.y;let h=1/0;t=a;do{if(i>=t.x&&t.x>=c&&i!==t.x&&gI(r<u?i:s,r,c,u,r<u?s:i,r,t.x,t.y)){const p=Math.abs(r-t.y)/(i-t.x);gy(t,n)&&(p<h||p===h&&(t.x>a.x||t.x===a.x&&Iie(a,t)))&&(a=t,h=p)}t=t.next}while(t!==o);return a}function Iie(n,e){return ar(n.prev,n,e.prev)<0&&ar(e.next,n,n.next)<0}function Bie(n,e,t,i){let r=n;do r.z===0&&(r.z=KA(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,zie(r)}function zie(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let a=i,o=0;for(let u=0;u<t&&(o++,a=a.nextZ,!!a);u++);let c=t;for(;o>0||c>0&&a;)o!==0&&(c===0||!a||i.z<=a.z)?(r=i,i=i.nextZ,o--):(r=a,a=a.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=a}s.nextZ=null,t*=2}while(e>1);return n}function KA(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Fie(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function gI(n,e,t,i,r,s,a,o){return(r-a)*(e-o)>=(n-a)*(s-o)&&(n-a)*(i-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(i-o)}function Uv(n,e,t,i,r,s,a,o){return!(n===a&&e===o)&&gI(n,e,t,i,r,s,a,o)}function Hie(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!kie(n,e)&&(gy(n,e)&&gy(e,n)&&Gie(n,e)&&(ar(n.prev,n,e.prev)||ar(n,e.prev,e))||yg(n,e)&&ar(n.prev,n,n.next)>0&&ar(e.prev,e,e.next)>0)}function ar(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function yg(n,e){return n.x===e.x&&n.y===e.y}function vI(n,e,t,i){const r=Vx(ar(n,e,t)),s=Vx(ar(n,e,i)),a=Vx(ar(t,i,n)),o=Vx(ar(t,i,e));return!!(r!==s&&a!==o||r===0&&Gx(n,t,e)||s===0&&Gx(n,i,e)||a===0&&Gx(t,n,i)||o===0&&Gx(t,e,i))}function Gx(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Vx(n){return n>0?1:n<0?-1:0}function kie(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&vI(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function gy(n,e){return ar(n.prev,n,n.next)<0?ar(n,e,n.next)>=0&&ar(n,n.prev,e)>=0:ar(n,e,n.prev)<0||ar(n,n.next,e)<0}function Gie(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function yI(n,e){const t=$A(n.i,n.x,n.y),i=$A(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function I5(n,e,t,i){const r=$A(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function vy(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function $A(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Vie(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}function jie(n,e,t=2){const i=!!e,r=i?e[0]*t:n.length;let s=_I(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,c,u;if(i&&(s=Uie(n,e,s,t)),n.length>80*t){o=1/0,c=1/0;let h=-1/0,p=-1/0;for(let g=t;g<r;g+=t){const y=n[g],x=n[g+1];y<o&&(o=y),x<c&&(c=x),y>h&&(h=y),x>p&&(p=x)}u=Math.max(h-o,p-c),u=u!==0?32767/u:0}return yy(s,a,t,o,c,u,0),a}function _I(n,e,t,i,r){let s=null;if(r===Vie(n,e,t,i)>0)for(let a=e;a<t;a+=i)s=I5(a/i|0,n[a],n[a+1],s);else for(let a=t-i;a>=e;a-=i)s=I5(a/i|0,n[a],n[a+1],s);return s&&yg(s,s.next)&&(vy(s),s=s.next),s}function tp(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(yg(t,t.next)||ar(t.prev,t,t.next)===0)){if(vy(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function yy(n,e,t,i,r,s,a){if(!n)return;!a&&s&&Bie(n,i,r,s);let o=n;for(;n.prev!==n.next;){const c=n.prev,u=n.next;if(s?Rie(n,i,r,s):Wie(n)){e.push(c.i,n.i,u.i),vy(n),n=u.next,o=u.next;continue}if(n=u,n===o){a?a===1?(n=Oie(tp(n),e),yy(n,e,t,i,r,s,2)):a===2&&Die(n,e,t,i,r,s):yy(tp(n),e,t,i,r,s,1);break}}}function Wie(n){const e=n.prev,t=n,i=n.next;if(ar(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,o=e.y,c=t.y,u=i.y,h=Math.min(r,s,a),p=Math.min(o,c,u),g=Math.max(r,s,a),y=Math.max(o,c,u);let x=i.next;for(;x!==e;){if(x.x>=h&&x.x<=g&&x.y>=p&&x.y<=y&&Uv(r,o,s,c,a,u,x.x,x.y)&&ar(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}class Xie{grid;cellSize;constructor(e){this.grid=new Map,this.cellSize=e}getKey(e,t){const i=Math.floor(e/this.cellSize),r=Math.floor(t/this.cellSize);return`${i},${r}`}insert(e,t,i){const r=this.getKey(t,i);this.grid.has(r)||this.grid.set(r,[]),this.grid.get(r).push(e)}getNeighbors(e,t){const i=[],r=Math.floor(e/this.cellSize),s=Math.floor(t/this.cellSize);for(let a=-1;a<=1;a++)for(let o=-1;o<=1;o++){const c=`${r+a},${s+o}`,u=this.grid.get(c);u&&i.push(...u)}return i}}const qie=(n,e)=>{const t=(o,c)=>o.x*c.x+o.y*c.y+o.z*c.z,i=(o,c)=>new J(o.x-c.x,o.y-c.y,o.z-c.z),r=(o,c)=>new J(o.x*c,o.y*c,o.z*c),s=(o,c,u)=>{const h=i(o,u),p=t(h,c),g=i(o,r(c,p));return new J(o.x,o.y,g.z)};return n.map(o=>{const c=s(o,e,n[0]);return new ft(c.x,c.y)})},Yie=n=>{const e=[];n.forEach(r=>{e.push(r.x,r.y)});const t=jie(e),i=[];for(let r=0;r<t.length;r+=3)i.push([n[t[r]],n[t[r+1]],n[t[r+2]]]);return i},Zie=(n,e)=>{if(n.length<2)return[];const t=new Map,i=[],r=new Map,s=new Xie(e),a=x=>{const M=b=>Math.round(b/e)*e;return`${M(x.x)},${M(x.y)}`},o=new Map;for(let x=0;x<n.length;x++){const M=n[x],b=a(M);o.has(b)||o.set(b,{sumX:0,sumY:0,count:0});const S=o.get(b);S.sumX+=M.x,S.sumY+=M.y,S.count++}o.forEach((x,M)=>{const b=x.sumX/x.count,S=x.sumY/x.count,T=new ft(b,S),A=i.length;i.push(T),r.set(M,A),s.insert(A,b,S)});for(let x=0;x<n.length;x+=2){const M=n[x],b=n[x+1],S=a(M),T=a(b),A=r.get(S),w=r.get(T);t.has(A)||t.set(A,[]),t.has(w)||t.set(w,[]),t.get(A).push(w),t.get(w).push(A)}const c=new Set,u=[],h=[],p=(x,M)=>{c.add(x),h.push({node:x,parent:M});for(const b of t.get(x)||[])if(b!==M)if(c.has(b)){const S=h.findIndex(T=>T.node===b);if(S!==-1){const T=h.slice(S).map(A=>A.node);u.push(T)}}else p(b,x);h.pop()};for(const x of t.keys())c.has(x)||p(x,null);const g=new Set,y=[];for(const x of u){const M=[...x].sort((b,S)=>b-S).join(",");if(!g.has(M)){g.add(M);const b=x.map(S=>i[S]);b.length>=3&&y.push(b)}}return y},Kie=()=>{const{scene:n}=on();return{clip:(t,i,r=1e-6)=>{const s=new xs({color:16776960}),a=[],o=new J;t.getWorldDirection(o);const c=new _E(t.geometry);t.geometry.boundsTree=c;const u=[];return n.traverse(h=>{if(i(h)){const p=new Zo,g=[],y=[];c.bvhcast(h.geometry.boundsTree,new Ut().copy(t.matrixWorld).invert().multiply(h.matrixWorld),{intersectsTriangles(b,S){if(b.intersectsTriangle(S,p)){const{start:T,end:A}=p;g.push(T.clone(),A.clone());const w=new An;w.setAttribute("position",new Jn(new Float32Array([T.x,T.y,T.z,A.x,A.y,A.z]),3));const D=new Jo(w,s);D.applyMatrix4(t.matrixWorld),D.renderOrder=20,y.push(D)}return!1}}),a.push(y);const x=qie(g,o);Zie(x,r).forEach(b=>{Yie(b).filter(T=>T.length>2).forEach(T=>{const A=T.map(O=>new J(O.x,O.y,0)),w=new An;w.setFromPoints(A),w.computeBoundingBox(),h.material.side=mr;const D=new fi(w,h.material);D.userData.isClipResult=!0,D.applyMatrix4(t.matrixWorld),D.renderOrder=20,u.push(D)})})}}),{lines:a,meshList:u}}}},$ie=()=>{const{scene:n}=on();return{buildBvh:t=>{n.traverse(i=>{if(t(i)){const r=new _E(i.geometry,{maxDepth:40,strategy:CC});i.geometry.boundsTree=r}})}}},Qie=()=>{const n=$d(Y6),e=L.useRef(null),{clip:t}=Kie(),{buildBvh:i}=$ie(),[r,s]=L.useState([]),[a,o]=L.useState([]),c=Kb(Z6),u=$d(K6),h=()=>{if(c(0),e.current){const b=performance.now();i(D=>D.userData.canClip);const{lines:S,meshList:T}=t(e.current,D=>D.userData.canClip,u),w=performance.now()-b;c(w),s(S),o(T)}},p=()=>{s([]),o([])},{showClipPlane:g,showClipResultLines:y,showClipResultMeshes:x,clipResultMeshesWireframe:M}=X6({showClipPlane:{label:"",value:!1},:OA(()=>h()),showClipResultLines:{label:"",value:!1},showClipResultMeshes:{label:"",value:!0},clipResultMeshesWireframe:{label:"",value:!1},:OA(()=>p())},[h,e,p]);return ge.jsxs(ge.Fragment,{children:[g&&ge.jsx(ge.Fragment,{children:ge.jsx(QX,{scale:n/2,children:ge.jsxs("mesh",{ref:e,children:[ge.jsx("planeGeometry",{args:[n,n]}),ge.jsx("meshStandardMaterial",{color:16711680,side:mr,flatShading:!0,roughness:.98,transparent:!0,opacity:.5})]})})}),y&&r.length&&ge.jsx(zX,{children:r.flat().map(b=>ge.jsx("primitive",{object:b},b.uuid))}),x&&r.length&&ge.jsx("group",{children:a.map(b=>ge.jsx("mesh",{geometry:b.geometry,material:b.material,rotation:b.rotation,position:b.position,scale:b.scale,children:M&&ge.jsx(IX,{})},b.uuid))})]})},{useDebugValue:Jie}=de,{useSyncExternalStoreWithSelector:ere}=HL,tre=n=>n;function nre(n,e=tre,t){const i=ere(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return Jie(i),i}const B5=(n,e)=>{const t=VX(n),i=(r,s=e)=>nre(t,r,s);return Object.assign(i,t),i},ire=(n,e)=>n?B5(n,e):B5;function rre(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[i,r]of n)if(!Object.is(r,e.get(i)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const i of t)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(n[i],e[i]))return!1;return!0}const DC=ire((n,e)=>{function t(){var i;const{accumulated:r,startTime:s,infos:a}=e(),o=(i=e().log)==null?void 0:i.maxMemory,{totalFrames:c,log:u,gl:h,max:p}=r,g={calls:h.calls/c,triangles:h.triangles/c,points:h.points/c,lines:h.lines/c},y={gpu:u.gpu/c,cpu:u.cpu/c,mem:u.mem/c,fps:u.fps/c};return{sessionTime:(window.performance.now()-s)/1e3,infos:a,log:y,gl:g,max:p,maxMemory:o,totalFrames:c}}return{log:null,paused:!1,triggerProgramsUpdate:0,startTime:0,customData:0,fpsLimit:60,overclockingFps:!1,accumulated:{totalFrames:0,gl:{calls:0,triangles:0,points:0,lines:0,counts:0},log:{gpu:0,cpu:0,mem:0,fps:0},max:{gl:{calls:0,triangles:0,points:0,lines:0,counts:0},log:{gpu:0,cpu:0,mem:0,fps:0}}},chart:{data:{fps:[],cpu:[],gpu:[],mem:[]},circularId:0},gl:void 0,objectWithMaterials:null,scene:void 0,programs:new Map,sceneLength:void 0,tab:"infos",getReport:t}}),Qo=n=>DC(n,rre);Object.assign(Qo,DC);const{getState:Yo,setState:co}=DC,Io={value:0,fpsLimit:60,isOverLimit:0},Tv=n=>n?.reduce((e,t)=>e+t,0)/n.length;class sre{constructor(e={}){this.names=[""],this.finished=[],this.paused=!1,this.overClock=!1,this.queryHasResult=!1,this.queryCreated=!1,this.isWebGL2=!0,this.memAccums=[],this.gpuAccums=[],this.activeAccums=[],this.logsAccums={mem:[],gpu:[],cpu:[],fps:[],fpsFixed:[]},this.fpsChart=[],this.gpuChart=[],this.cpuChart=[],this.memChart=[],this.paramLogger=()=>{},this.glFinish=()=>{},this.chartLogger=()=>{},this.chartLen=60,this.logsPerSecond=10,this.maxMemory=1500,this.chartHz=10,this.startCpuProfiling=!1,this.lastCalculateFixed=0,this.chartFrame=0,this.gpuTimeProcess=0,this.chartTime=0,this.activeQueries=0,this.circularId=0,this.detected=0,this.frameId=0,this.rafId=0,this.idleCbId=0,this.checkQueryId=0,this.uuid=void 0,this.currentCpu=0,this.currentMem=0,this.paramFrame=0,this.paramTime=0,this.now=()=>{},this.t0=0,window.GLPerf=window.GLPerf||{},Object.assign(this,e),this.fpsChart=new Array(this.chartLen).fill(0),this.gpuChart=new Array(this.chartLen).fill(0),this.cpuChart=new Array(this.chartLen).fill(0),this.memChart=new Array(this.chartLen).fill(0),this.now=()=>window.performance&&window.performance.now?window.performance.now():Date.now(),this.initGpu(),this.is120hz()}initGpu(){this.uuid=np.generateUUID(),this.gl&&(this.isWebGL2=!0,this.extension||(this.extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")),this.extension===null&&(this.isWebGL2=!1))}is120hz(){let e=0;const t=i=>{++e<20?this.rafId=window.requestAnimationFrame(t):(this.detected=Math.ceil(1e3*e/(i-this.t0)/70),window.cancelAnimationFrame(this.rafId)),this.t0||(this.t0=i)};this.rafId=window.requestAnimationFrame(t)}addUI(e){this.names.indexOf(e)===-1&&(this.names.push(e),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFps(e){const t=16.666666666666668,i=t-e.timeRemaining(),r=t*Io.fpsLimit/10/i;r<0||(Io.value=r,Io.isOverLimit<25?Io.isOverLimit++:co({overclockingFps:!0}))}nextFrame(e){this.frameId++;const t=e||this.now();let i=t-this.paramTime,r=0;if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=t;else if(t>=this.paramTime){this.maxMemory=window.performance.memory?window.performance.memory.jsHeapSizeLimit/1048576:0;const s=this.frameId-this.paramFrame,a=s*1e3/i,o=Yo().overclockingFps?Io.value:a;if(r=this.isWebGL2?this.gpuAccums[0]:this.gpuAccums[0]/i,this.isWebGL2?this.gpuAccums[0]=0:Promise.all(this.finished).then(()=>{this.gpuAccums[0]=0,this.finished=[]}),this.currentMem=Math.round(window.performance&&window.performance.memory?window.performance.memory.usedJSHeapSize/1048576:0),window.performance&&this.startCpuProfiling){window.performance.mark("cpu-finished");const c=performance.measure("cpu-duration","cpu-started","cpu-finished");this.currentCpu=c?.duration||0,this.logsAccums.cpu.push(this.currentCpu),this.startCpuProfiling=!1}this.logsAccums.mem.push(this.currentMem),this.logsAccums.fpsFixed.push(a),this.logsAccums.fps.push(o),this.logsAccums.gpu.push(r),this.overClock&&typeof window.requestIdleCallback<"u"&&(Io.isOverLimit>0&&o>a?Io.isOverLimit--:Yo().overclockingFps&&co({overclockingFps:!1})),t>=this.paramTime+1e3/this.logsPerSecond&&(this.paramLogger({cpu:Tv(this.logsAccums.cpu),gpu:Tv(this.logsAccums.gpu),mem:Tv(this.logsAccums.mem),fps:Tv(this.logsAccums.fps),duration:Math.round(i),maxMemory:this.maxMemory,frameCount:s}),this.logsAccums.mem=[],this.logsAccums.fps=[],this.logsAccums.gpu=[],this.logsAccums.cpu=[],this.paramFrame=this.frameId,this.paramTime=t),this.overClock&&t-this.lastCalculateFixed>=2*1e3&&(this.lastCalculateFixed=e,Io.fpsLimit=Math.round(Tv(this.logsAccums.fpsFixed)/10)*100,co({fpsLimit:Io.fpsLimit/10}),this.logsAccums.fpsFixed=[],this.paramFrame=this.frameId,this.paramTime=t)}if(!this.detected||!this.chartFrame)this.chartFrame=this.frameId,this.chartTime=t,this.circularId=0;else{const s=t-this.chartTime;let a=this.chartHz*s/1e3;for(;--a>0&&this.detected;){const c=(this.frameId-this.chartFrame)/s*1e3,u=Yo().overclockingFps?Io.value:c;this.fpsChart[this.circularId%this.chartLen]=u;const h=1e3/this.currentMem,p=this.currentCpu,g=(this.isWebGL2?this.gpuAccums[1]*2:Math.round(this.gpuAccums[1]/i*100))+4;g>0&&(this.gpuChart[this.circularId%this.chartLen]=g),p>0&&(this.cpuChart[this.circularId%this.chartLen]=p),h>0&&(this.memChart[this.circularId%this.chartLen]=h);for(let y=0;y<this.names.length;y++)this.chartLogger({i:y,data:{fps:this.fpsChart,gpu:this.gpuChart,cpu:this.cpuChart,mem:this.memChart},circularId:this.circularId});this.circularId++,this.chartFrame=this.frameId,this.chartTime=t}}}startGpu(){const e=this.gl,t=this.extension;if(!(!e||!t)&&this.isWebGL2){let i=!1,r,s;if(this.query){this.queryHasResult=!1;let a=this.query;if(i=e.getQueryParameter(a,e.QUERY_RESULT_AVAILABLE),r=e.getParameter(t.GPU_DISJOINT_EXT),i&&!r){s=e.getQueryParameter(this.query,e.QUERY_RESULT);const o=s*1e-6;(i||r)&&(e.deleteQuery(this.query),a=null),i&&o>0&&(r||this.activeAccums.forEach((c,u)=>{this.gpuAccums[u]=o}))}}(i||!this.query)&&(this.queryCreated=!0,this.query=e.createQuery(),e.beginQuery(t.TIME_ELAPSED_EXT,this.query))}}endGpu(){const e=this.extension,t=this.gl;this.isWebGL2&&this.queryCreated&&t.getQuery(e.TIME_ELAPSED_EXT,t.CURRENT_QUERY)&&t.endQuery(e.TIME_ELAPSED_EXT)}begin(e){this.startGpu(),this.updateAccums(e)}end(e){this.endGpu(),this.updateAccums(e)}updateAccums(e){let t=this.names.indexOf(e);t===-1&&(t=this.names.length,this.addUI(e));const i=this.now();this.activeAccums[t]=!this.activeAccums[t],this.t0=i}}const are=n=>{n.forEach((e,t)=>{const{meshes:i}=e;if(!i)return;let r={total:0,type:"Triangle",data:[]};Object.keys(i).forEach(s=>{const a=i[s],{geometry:o,material:c}=a;let u=o.index;const h=o.attributes.position;if(!h)return;let p=1;c.wireframe===!0&&(p=0);const g=u!==null?u.count:h.count,y=o.drawRange.start*p,x=o.drawRange.count*p,M=y,b=Math.min(g,y+x)-1;let S=1;const T=a.count||1;let A="Triangle",w=0;a.isMesh?c.wireframe===!0?(A="Line",S=S/2):(A="Triangle",S=S/3):a.isLine?(A="Line",a.isLineSegments?S=S/2:a.isLineLoop?S=S:S=S-1):a.isPoints?(A="Point",S=S):a.isSprite&&(A="Triangle",S=S/3);const D=Math.round(Math.max(0,b-M+1)*(S*T));D>w&&(w=D,r.type=A),r.total+=D,r.data.push({drawCount:D,type:A}),a.userData.drawCount={type:A,count:D}}),e.drawCounts=r})};var TT={exports:{}},z5;function ore(){return z5||(z5=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(c,u,h){this.fn=c,this.context=u,this.once=h||!1}function s(c,u,h,p,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new r(h,p||c,g),x=t?t+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],y]:c._events[x].push(y):(c._events[x]=y,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new i:delete c._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],h,p;if(this._eventsCount===0)return u;for(p in h=this._events)e.call(h,p)&&u.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},o.prototype.listeners=function(u){var h=t?t+u:u,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,y=p.length,x=new Array(y);g<y;g++)x[g]=p[g].fn;return x},o.prototype.listenerCount=function(u){var h=t?t+u:u,p=this._events[h];return p?p.fn?1:p.length:0},o.prototype.emit=function(u,h,p,g,y,x){var M=t?t+u:u;if(!this._events[M])return!1;var b=this._events[M],S=arguments.length,T,A;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),S){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,p),!0;case 4:return b.fn.call(b.context,h,p,g),!0;case 5:return b.fn.call(b.context,h,p,g,y),!0;case 6:return b.fn.call(b.context,h,p,g,y,x),!0}for(A=1,T=new Array(S-1);A<S;A++)T[A-1]=arguments[A];b.fn.apply(b.context,T)}else{var w=b.length,D;for(A=0;A<w;A++)switch(b[A].once&&this.removeListener(u,b[A].fn,void 0,!0),S){case 1:b[A].fn.call(b[A].context);break;case 2:b[A].fn.call(b[A].context,h);break;case 3:b[A].fn.call(b[A].context,h,p);break;case 4:b[A].fn.call(b[A].context,h,p,g);break;default:if(!T)for(D=1,T=new Array(S-1);D<S;D++)T[D-1]=arguments[D];b[A].fn.apply(b[A].context,T)}}return!0},o.prototype.on=function(u,h,p){return s(this,u,h,p,!1)},o.prototype.once=function(u,h,p){return s(this,u,h,p,!0)},o.prototype.removeListener=function(u,h,p,g){var y=t?t+u:u;if(!this._events[y])return this;if(!h)return a(this,y),this;var x=this._events[y];if(x.fn)x.fn===h&&(!g||x.once)&&(!p||x.context===p)&&a(this,y);else{for(var M=0,b=[],S=x.length;M<S;M++)(x[M].fn!==h||g&&!x[M].once||p&&x[M].context!==p)&&b.push(x[M]);b.length?this._events[y]=b.length===1?b[0]:b:a(this,y)}return this},o.prototype.removeAllListeners=function(u){var h;return u?(h=t?t+u:u,this._events[h]&&a(this,h)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o})(TT)),TT.exports}var lre=ore();const cre=fh(lre),UC=new cre;function ure(n,e,t){return UC.on(n,e)}function fre(n,e,t){var i;UC.removeListener(n,e,(i=t?.context)!=null?i:null,t?.once)}function hre(n,e){UC.emit(n,e)}function dre(n,e,t=[],i){const r=L.useRef(e);L.useEffect(()=>void(r.current=e),[e]),L.useEffect(()=>{const s=o=>{var c;return(c=r.current)==null?void 0:c.call(r,o)},a=ure(n,s);return()=>fre(n,s,{...i,context:a})},[n,void 0,...t])}const pre=Cn.prototype.updateMatrixWorld,mre=Cn.prototype.updateWorldMatrix,F5=Cn.prototype.updateMatrix,H5=["calls","triangles","points","lines"],k5=["gpu","cpu","mem","fps"];let Qm={value:0},fo={value:0};const gre=n=>{let e=""+n;return e=e.match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"),e!==null},G5=(n,e)=>{n.defines||(n.defines={}),n.defines&&!n.defines.muiPerf&&(n.defines=Object.assign(n.defines||{},{muiPerf:n.uuid}));const t=n.uuid;return e[t]||(e[t]={meshes:{},material:n},n.needsUpdate=!0),n.needsUpdate=!1,t},vre=n=>n==="muiPerf",yre=({overClock:n,logsPerSecond:e,chart:t,deepAnalyze:i,matrixUpdate:r})=>{const{gl:s,scene:a}=on();co({gl:s,scene:a});const o=L.useMemo(()=>{const c=new sre({trackGPU:!0,overClock:n,chartLen:t?t.length:120,chartHz:t?t.hz:60,logsPerSecond:e||10,gl:s.getContext(),chartLogger:b=>{co({chart:b})},paramLogger:b=>{const S={maxMemory:b.maxMemory,gpu:b.gpu,cpu:b.cpu,mem:b.mem,fps:b.fps,totalTime:b.duration,frameCount:b.frameCount};co({log:S});const{accumulated:T}=Yo(),A=s.info.render;T.totalFrames++,T.gl.calls+=A.calls,T.gl.triangles+=A.triangles,T.gl.points+=A.points,T.gl.lines+=A.lines,T.log.gpu+=b.gpu,T.log.cpu+=b.cpu,T.log.mem+=b.mem,T.log.fps+=b.fps;for(let w=0;w<H5.length;w++){const D=H5[w],O=A[D];O>T.max.gl[D]&&(T.max.gl[D]=O)}for(let w=0;w<k5.length;w++){const D=k5[w],O=b[D];O>T.max.log[D]&&(T.max.log[D]=O)}co({accumulated:T}),hre("log",[S,s])}}),u=s.getContext();let h=null,p=null;const g=u.getExtension("WEBGL_debug_renderer_info"),y=u.getParameter(u.VERSION);g!=null&&(h=u.getParameter(g.UNMASKED_RENDERER_WEBGL),p=u.getParameter(g.UNMASKED_VENDOR_WEBGL)),p||(p="Unknown vendor"),h||(h=u.getParameter(u.RENDERER)),co({startTime:window.performance.now(),infos:{version:y,renderer:h,vendor:p}});const x=new Map,M=new Map;return Object.defineProperty(sh.prototype,"onBeforeRender",{get(){return(...b)=>{var S;c&&c.begin("profiler"),(S=x.get(this))==null||S(...b)}},set(b){x.set(this,b)},configurable:!0}),Object.defineProperty(sh.prototype,"onAfterRender",{get(){return(...b)=>{var S;c&&c.end("profiler"),(S=M.get(this))==null||S(...b)}},set(b){M.set(this,b)},configurable:!0}),c},[]);return L.useEffect(()=>{o&&(o.overClock=n||!1,n===!1&&(co({overclockingFps:!1}),Io.value=0,Io.isOverLimit=0),o.chartHz=t?.hz||60,o.chartLen=t?.length||120)},[n,o,t?.length,t?.hz]),L.useEffect(()=>{r&&(Cn.prototype.updateMatrixWorld=function(){(this.matrixWorldNeedsUpdate||arguments[0])&&Qm.value++,pre.apply(this,arguments)},Cn.prototype.updateWorldMatrix=function(){Qm.value++,mre.apply(this,arguments)},Cn.prototype.updateMatrix=function(){fo.value++,F5.apply(this,arguments)}),s.info.autoReset=!1;let c=null,u=null;if(s.info)return c=gV(function(){Yo().paused&&co({paused:!1}),window.performance&&(window.performance.mark("cpu-started"),o.startCpuProfiling=!0),fo.value-=1,Qm.value=0,fo.value=0,s.info&&s.info.reset()}),u=vV(function(){var p,g;if(o&&!o.paused&&(o.nextFrame(window.performance.now()),n&&typeof window.requestIdleCallback<"u"&&(o.idleCbId=requestIdleCallback(o.nextFps))),i){const y={},x=new Map;a.traverse(function(b){if((b instanceof fi||b instanceof DS)&&b.material){let S=b.material.uuid;Array.isArray(b.material)&&b.material.length>1?S=G5(b.material[1],y):S=G5(b.material,y),y[S].meshes[b.uuid]=b}}),(g=(p=s?.info)==null?void 0:p.programs)==null||g.forEach(M=>{const b=M.cacheKey.split(","),S=b[b.findIndex(vre)+1];if(gre(S)&&y[S]){const{material:T,meshes:A}=y[S];x.set(S,{program:M,material:T,meshes:A,drawCounts:{total:0,type:"triangle",data:[]},expand:!1,visible:!0})}}),x.size!==Yo().programs.size&&(are(x),co({programs:x,triggerProgramsUpdate:Yo().triggerProgramsUpdate++}))}}),()=>{o&&(typeof window.cancelIdleCallback<"u"&&window.cancelIdleCallback(o.idleCbId),window.cancelAnimationFrame(o.rafId),window.cancelAnimationFrame(o.checkQueryId)),r&&(Cn.prototype.updateMatrixWorld=F5),c(),u()}},[o,s,t,r]),L.useEffect(()=>{const c=yV(function(){return o&&(o.paused=!0,fo.value=0,Qm.value=0,co({paused:!0,log:{maxMemory:0,gpu:0,mem:0,cpu:0,fps:0,totalTime:0,frameCount:0}})),!1});return()=>{c()}},[]),null},_re=$r("div",{position:"fixed",top:0,right:0,zIndex:9999,fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif`,backgroundColor:"rgba(36, 36, 36, .9)",color:"#fff",margin:0,minHeight:"100px",padding:"4px 0","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",userSelect:"none","&.top-left":{right:"initial",left:0},"&.bottom-left":{right:"initial",top:"initial",bottom:0,left:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.bottom-right":{top:"initial",bottom:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.minimal":{backgroundColor:"rgba(36, 36, 36, .75)"},"*":{margin:"0",padding:"0",border:"0",fontSize:"100%",lineHeight:"1",verticalAlign:"baseline"}}),AT=$r("small",{position:"absolute",right:0,fontSize:"10px"}),Is=$r("div",{display:"inline-flex",fontStyle:"normal",padding:0,lineHeight:"13px",fontSize:"14px",width:"62px",position:"relative",pointerEvents:"auto",cursor:"default",fontWeight:500,letterSpacing:"0px",textAlign:"left",height:"29px",whiteSpace:"nowrap",justifyContent:"space-evenly",fontVariantNumeric:"tabular-nums",small:{paddingLeft:"12px"},svg:{padding:0,color:"rgba(145, 145, 145, 0.3)",fontSize:"40px",position:"absolute",zIndex:1,maxHeight:"20px",left:" 50%",marginLeft:"-23px",top:"4px"}}),Ha=$r("span",{verticalAlign:"bottom",position:"absolute",bottom:"5px",color:"rgba(101, 197, 188, 1)",textAlign:"right",letterSpacing:"1px",fontSize:"8px",fontWeight:"500",width:"60px"}),xre=$r("div",{display:"flex"}),bre=$r("div",{backgroundColor:"#404040",padding:"6px",display:"block",fontSize:"12px",marginBottom:"6px",cursor:"pointer","*":{cursor:"pointer !important"},"> span":{},small:{fontSize:"9px"},"> b":{marginRight:"4px",cursor:"pointer"}}),Sre=$r("div",{height:"66px",overflow:"hidden",position:"absolute",pointerEvents:"none",display:"flex",top:"0px",justifyContent:"center",width:"100%",minWidth:"310px",margin:"0 auto",canvas:{background:"transparent !important",position:"absolute !important"}}),Ere=$r("div",{textAlign:"center",fontWeight:700,fontSize:"12px",lineHeight:"12px",display:"flex",justifyContent:"center",alignItems:"center",verticalAlign:"middle",color:"#f1f1f1",padding:"7px",width:"100%",backgroundColor:"rgba(36, 36, 37, 0.8)",zIndex:1,position:"absolute",height:"100%"}),LC=$r("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),Mre=$r("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",float:"right",backgroundColor:"rgb(41, 43, 45)",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),Tre=$r("div",{padding:"4px 6px",fontSize:"12px",pointerEvents:"auto"}),Are=$r("span",{fontWeight:"bold",letterSpacing:"0.08em",maxWidth:"145px",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"middle",fontSize:"11px",marginRight:"10px"}),wre=$r("div",{maxHeight:"50vh",overflowY:"auto",marginTop:"38px"}),Cre=$r("div",{marginTop:"0"}),V5=$r("div",{display:"flex",position:"relative",fontWeight:"bold",color:"#fff",lineHeight:"14px",svg:{marginRight:"4px",display:"inline-block"}}),xI=$r("ul",{display:"block",position:"relative",paddingLeft:"10px",margin:"6px 6px",img:{maxHeight:"60px",maxWidth:"100%",margin:"6px auto",display:"block"},"&:after":{content:"",position:"absolute",left:"0px",top:"0px",width:"1px",height:"100%",backgroundColor:"grey",transform:"translateX(-50%)",maxHeight:"50vh",overflowY:"auto"},li:{borderBottom:"1px solid #313131",display:"block",padding:"4px",margin:0,lineHeight:1,verticalAlign:"middle",height:"24px"},b:{fontWeight:"bold"},small:{textAlign:"revert",letterSpacing:"1px",fontSize:"10px",fontWeight:"500",marginLeft:"2px",color:"rgb(101, 197, 188)"}}),bI=$r("button",{fontWeight:"bold",letterSpacing:"0.02em",backgroundColor:"rgb(41, 43, 45)",color:"rgb(211, 211, 211)",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",display:"block",verticalAlign:"middle",fontSize:"11px",padding:"5px",margin:"4px auto"}),Rre=$r("div",{display:"flex",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0 auto",color:"rgba(145, 145, 145, 1)",textAlign:"center",position:"absolute",right:0,bottom:" -20px",svg:{width:"12px",height:"12px",float:"left"}}),Ore=$r("li",{display:"flex !important",height:"auto !important",span:{height:"40px",display:"block",position:"relative"},b:{paddingLeft:"12px"}});function wr(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var Dre=["color"],SI=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,Dre);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M0 1.5C0 1.22386 0.223858 1 0.5 1H2.5C2.77614 1 3 1.22386 3 1.5C3 1.77614 2.77614 2 2.5 2H0.5C0.223858 2 0 1.77614 0 1.5ZM4 1.5C4 1.22386 4.22386 1 4.5 1H14.5C14.7761 1 15 1.22386 15 1.5C15 1.77614 14.7761 2 14.5 2H4.5C4.22386 2 4 1.77614 4 1.5ZM4 4.5C4 4.22386 4.22386 4 4.5 4H11.5C11.7761 4 12 4.22386 12 4.5C12 4.77614 11.7761 5 11.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM0 7.5C0 7.22386 0.223858 7 0.5 7H2.5C2.77614 7 3 7.22386 3 7.5C3 7.77614 2.77614 8 2.5 8H0.5C0.223858 8 0 7.77614 0 7.5ZM4 7.5C4 7.22386 4.22386 7 4.5 7H14.5C14.7761 7 15 7.22386 15 7.5C15 7.77614 14.7761 8 14.5 8H4.5C4.22386 8 4 7.77614 4 7.5ZM4 10.5C4 10.2239 4.22386 10 4.5 10H11.5C11.7761 10 12 10.2239 12 10.5C12 10.7761 11.7761 11 11.5 11H4.5C4.22386 11 4 10.7761 4 10.5ZM0 13.5C0 13.2239 0.223858 13 0.5 13H2.5C2.77614 13 3 13.2239 3 13.5C3 13.7761 2.77614 14 2.5 14H0.5C0.223858 14 0 13.7761 0 13.5ZM4 13.5C4 13.2239 4.22386 13 4.5 13H14.5C14.7761 13 15 13.2239 15 13.5C15 13.7761 14.7761 14 14.5 14H4.5C4.22386 14 4 13.7761 4 13.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Ure=["color"],Lre=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,Ure);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M11.5 1C11.7761 1 12 1.22386 12 1.5V13.5C12 13.7761 11.7761 14 11.5 14C11.2239 14 11 13.7761 11 13.5V1.5C11 1.22386 11.2239 1 11.5 1ZM9.5 3C9.77614 3 10 3.22386 10 3.5V13.5C10 13.7761 9.77614 14 9.5 14C9.22386 14 9 13.7761 9 13.5V3.5C9 3.22386 9.22386 3 9.5 3ZM13.5 3C13.7761 3 14 3.22386 14 3.5V13.5C14 13.7761 13.7761 14 13.5 14C13.2239 14 13 13.7761 13 13.5V3.5C13 3.22386 13.2239 3 13.5 3ZM5.5 4C5.77614 4 6 4.22386 6 4.5V13.5C6 13.7761 5.77614 14 5.5 14C5.22386 14 5 13.7761 5 13.5V4.5C5 4.22386 5.22386 4 5.5 4ZM1.5 5C1.77614 5 2 5.22386 2 5.5V13.5C2 13.7761 1.77614 14 1.5 14C1.22386 14 1 13.7761 1 13.5V5.5C1 5.22386 1.22386 5 1.5 5ZM7.5 5C7.77614 5 8 5.22386 8 5.5V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.5C7 5.22386 7.22386 5 7.5 5ZM3.5 7C3.77614 7 4 7.22386 4 7.5V13.5C4 13.7761 3.77614 14 3.5 14C3.22386 14 3 13.7761 3 13.5V7.5C3 7.22386 3.22386 7 3.5 7Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Nre=["color"],Pre=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,Nre);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M2 5H13C13.5523 5 14 5.44772 14 6V9C14 9.55228 13.5523 10 13 10H2C1.44772 10 1 9.55228 1 9V6C1 5.44772 1.44772 5 2 5ZM0 6C0 4.89543 0.895431 4 2 4H13C14.1046 4 15 4.89543 15 6V9C15 10.1046 14.1046 11 13 11H2C0.89543 11 0 10.1046 0 9V6ZM4.5 6.75C4.08579 6.75 3.75 7.08579 3.75 7.5C3.75 7.91421 4.08579 8.25 4.5 8.25C4.91421 8.25 5.25 7.91421 5.25 7.5C5.25 7.08579 4.91421 6.75 4.5 6.75ZM6.75 7.5C6.75 7.08579 7.08579 6.75 7.5 6.75C7.91421 6.75 8.25 7.08579 8.25 7.5C8.25 7.91421 7.91421 8.25 7.5 8.25C7.08579 8.25 6.75 7.91421 6.75 7.5ZM10.5 6.75C10.0858 6.75 9.75 7.08579 9.75 7.5C9.75 7.91421 10.0858 8.25 10.5 8.25C10.9142 8.25 11.25 7.91421 11.25 7.5C11.25 7.08579 10.9142 6.75 10.5 6.75Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Ire=["color"],Bre=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,Ire);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M7.28856 0.796908C7.42258 0.734364 7.57742 0.734364 7.71144 0.796908L13.7114 3.59691C13.8875 3.67906 14 3.85574 14 4.05V10.95C14 11.1443 13.8875 11.3209 13.7114 11.4031L7.71144 14.2031C7.57742 14.2656 7.42258 14.2656 7.28856 14.2031L1.28856 11.4031C1.11252 11.3209 1 11.1443 1 10.95V4.05C1 3.85574 1.11252 3.67906 1.28856 3.59691L7.28856 0.796908ZM2 4.80578L7 6.93078V12.9649L2 10.6316V4.80578ZM8 12.9649L13 10.6316V4.80578L8 6.93078V12.9649ZM7.5 6.05672L12.2719 4.02866L7.5 1.80176L2.72809 4.02866L7.5 6.05672Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),zre=["color"],Fre=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,zre);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M7.5 9.125C8.39746 9.125 9.125 8.39746 9.125 7.5C9.125 6.60254 8.39746 5.875 7.5 5.875C6.60254 5.875 5.875 6.60254 5.875 7.5C5.875 8.39746 6.60254 9.125 7.5 9.125ZM7.5 10.125C8.94975 10.125 10.125 8.94975 10.125 7.5C10.125 6.05025 8.94975 4.875 7.5 4.875C6.05025 4.875 4.875 6.05025 4.875 7.5C4.875 8.94975 6.05025 10.125 7.5 10.125Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Hre=["color"],kre=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,Hre);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M7.49999 3.09998C7.27907 3.09998 7.09999 3.27906 7.09999 3.49998C7.09999 3.72089 7.27907 3.89998 7.49999 3.89998H14.5C14.7209 3.89998 14.9 3.72089 14.9 3.49998C14.9 3.27906 14.7209 3.09998 14.5 3.09998H7.49999ZM7.49998 5.1C7.27907 5.1 7.09998 5.27908 7.09998 5.5C7.09998 5.72091 7.27907 5.9 7.49998 5.9H14.5C14.7209 5.9 14.9 5.72091 14.9 5.5C14.9 5.27908 14.7209 5.1 14.5 5.1H7.49998ZM7.1 7.5C7.1 7.27908 7.27909 7.1 7.5 7.1H14.5C14.7209 7.1 14.9 7.27908 14.9 7.5C14.9 7.72091 14.7209 7.9 14.5 7.9H7.5C7.27909 7.9 7.1 7.72091 7.1 7.5ZM7.49998 9.1C7.27907 9.1 7.09998 9.27908 7.09998 9.5C7.09998 9.72091 7.27907 9.9 7.49998 9.9H14.5C14.7209 9.9 14.9 9.72091 14.9 9.5C14.9 9.27908 14.7209 9.1 14.5 9.1H7.49998ZM7.09998 11.5C7.09998 11.2791 7.27907 11.1 7.49998 11.1H14.5C14.7209 11.1 14.9 11.2791 14.9 11.5C14.9 11.7209 14.7209 11.9 14.5 11.9H7.49998C7.27907 11.9 7.09998 11.7209 7.09998 11.5ZM2.5 9.25003L5 6.00003H0L2.5 9.25003Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Gre=["color"],Vre=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,Gre);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),jre=["color"],Wre=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,jre);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Xre=["color"],QA=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,Xre);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),qre=["color"],Yre=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,qre);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M5.49998 0.5C5.49998 0.223858 5.72383 0 5.99998 0H7.49998H8.99998C9.27612 0 9.49998 0.223858 9.49998 0.5C9.49998 0.776142 9.27612 1 8.99998 1H7.99998V2.11922C9.09832 2.20409 10.119 2.56622 10.992 3.13572C11.0116 3.10851 11.0336 3.08252 11.058 3.05806L12.058 2.05806C12.3021 1.81398 12.6978 1.81398 12.9419 2.05806C13.186 2.30214 13.186 2.69786 12.9419 2.94194L11.967 3.91682C13.1595 5.07925 13.9 6.70314 13.9 8.49998C13.9 12.0346 11.0346 14.9 7.49998 14.9C3.96535 14.9 1.09998 12.0346 1.09998 8.49998C1.09998 5.13361 3.69904 2.3743 6.99998 2.11922V1H5.99998C5.72383 1 5.49998 0.776142 5.49998 0.5ZM2.09998 8.49998C2.09998 5.51764 4.51764 3.09998 7.49998 3.09998C10.4823 3.09998 12.9 5.51764 12.9 8.49998C12.9 11.4823 10.4823 13.9 7.49998 13.9C4.51764 13.9 2.09998 11.4823 2.09998 8.49998ZM7.49998 8.49998V4.09998C5.06992 4.09998 3.09998 6.06992 3.09998 8.49998C3.09998 10.93 5.06992 12.9 7.49998 12.9C8.715 12.9 9.815 12.4075 10.6112 11.6112L7.49998 8.49998Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Zre=["color"],Kre=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,Zre);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M7.75432 0.819537C7.59742 0.726821 7.4025 0.726821 7.24559 0.819537L1.74559 4.06954C1.59336 4.15949 1.49996 4.32317 1.49996 4.5C1.49996 4.67683 1.59336 4.84051 1.74559 4.93046L7.24559 8.18046C7.4025 8.27318 7.59742 8.27318 7.75432 8.18046L13.2543 4.93046C13.4066 4.84051 13.5 4.67683 13.5 4.5C13.5 4.32317 13.4066 4.15949 13.2543 4.06954L7.75432 0.819537ZM7.49996 7.16923L2.9828 4.5L7.49996 1.83077L12.0171 4.5L7.49996 7.16923ZM1.5695 7.49564C1.70998 7.2579 2.01659 7.17906 2.25432 7.31954L7.49996 10.4192L12.7456 7.31954C12.9833 7.17906 13.2899 7.2579 13.4304 7.49564C13.5709 7.73337 13.4921 8.03998 13.2543 8.18046L7.75432 11.4305C7.59742 11.5232 7.4025 11.5232 7.24559 11.4305L1.74559 8.18046C1.50786 8.03998 1.42901 7.73337 1.5695 7.49564ZM1.56949 10.4956C1.70998 10.2579 2.01658 10.1791 2.25432 10.3195L7.49996 13.4192L12.7456 10.3195C12.9833 10.1791 13.2899 10.2579 13.4304 10.4956C13.5709 10.7334 13.4921 11.04 13.2543 11.1805L7.75432 14.4305C7.59742 14.5232 7.4025 14.5232 7.24559 14.4305L1.74559 11.1805C1.50785 11.04 1.42901 10.7334 1.56949 10.4956Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),$re=["color"],Qre=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,$re);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Jre=["color"],ese=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,Jre);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M1.49988 2.00012C1.77602 2.00012 1.99988 1.77626 1.99988 1.50012C1.99988 1.22398 1.77602 1.00012 1.49988 1.00012C1.22374 1.00012 0.999878 1.22398 0.999878 1.50012C0.999878 1.77626 1.22374 2.00012 1.49988 2.00012ZM4.49988 2.00012C4.77602 2.00012 4.99988 1.77626 4.99988 1.50012C4.99988 1.22398 4.77602 1.00012 4.49988 1.00012C4.22374 1.00012 3.99988 1.22398 3.99988 1.50012C3.99988 1.77626 4.22374 2.00012 4.49988 2.00012ZM7.99988 1.50012C7.99988 1.77626 7.77602 2.00012 7.49988 2.00012C7.22374 2.00012 6.99988 1.77626 6.99988 1.50012C6.99988 1.22398 7.22374 1.00012 7.49988 1.00012C7.77602 1.00012 7.99988 1.22398 7.99988 1.50012ZM10.4999 2.00012C10.776 2.00012 10.9999 1.77626 10.9999 1.50012C10.9999 1.22398 10.776 1.00012 10.4999 1.00012C10.2237 1.00012 9.99988 1.22398 9.99988 1.50012C9.99988 1.77626 10.2237 2.00012 10.4999 2.00012ZM13.9999 1.50012C13.9999 1.77626 13.776 2.00012 13.4999 2.00012C13.2237 2.00012 12.9999 1.77626 12.9999 1.50012C12.9999 1.22398 13.2237 1.00012 13.4999 1.00012C13.776 1.00012 13.9999 1.22398 13.9999 1.50012ZM1.49988 14.0001C1.77602 14.0001 1.99988 13.7763 1.99988 13.5001C1.99988 13.224 1.77602 13.0001 1.49988 13.0001C1.22374 13.0001 0.999878 13.224 0.999878 13.5001C0.999878 13.7763 1.22374 14.0001 1.49988 14.0001ZM1.99988 10.5001C1.99988 10.7763 1.77602 11.0001 1.49988 11.0001C1.22374 11.0001 0.999878 10.7763 0.999878 10.5001C0.999878 10.224 1.22374 10.0001 1.49988 10.0001C1.77602 10.0001 1.99988 10.224 1.99988 10.5001ZM1.49988 8.00012C1.77602 8.00012 1.99988 7.77626 1.99988 7.50012C1.99988 7.22398 1.77602 7.00012 1.49988 7.00012C1.22374 7.00012 0.999878 7.22398 0.999878 7.50012C0.999878 7.77626 1.22374 8.00012 1.49988 8.00012ZM1.99988 4.50012C1.99988 4.77626 1.77602 5.00012 1.49988 5.00012C1.22374 5.00012 0.999878 4.77626 0.999878 4.50012C0.999878 4.22398 1.22374 4.00012 1.49988 4.00012C1.77602 4.00012 1.99988 4.22398 1.99988 4.50012ZM13.4999 11.0001C13.776 11.0001 13.9999 10.7763 13.9999 10.5001C13.9999 10.224 13.776 10.0001 13.4999 10.0001C13.2237 10.0001 12.9999 10.224 12.9999 10.5001C12.9999 10.7763 13.2237 11.0001 13.4999 11.0001ZM13.9999 7.50012C13.9999 7.77626 13.776 8.00012 13.4999 8.00012C13.2237 8.00012 12.9999 7.77626 12.9999 7.50012C12.9999 7.22398 13.2237 7.00012 13.4999 7.00012C13.776 7.00012 13.9999 7.22398 13.9999 7.50012ZM13.4999 5.00012C13.776 5.00012 13.9999 4.77626 13.9999 4.50012C13.9999 4.22398 13.776 4.00012 13.4999 4.00012C13.2237 4.00012 12.9999 4.22398 12.9999 4.50012C12.9999 4.77626 13.2237 5.00012 13.4999 5.00012ZM4.99988 13.5001C4.99988 13.7763 4.77602 14.0001 4.49988 14.0001C4.22374 14.0001 3.99988 13.7763 3.99988 13.5001C3.99988 13.224 4.22374 13.0001 4.49988 13.0001C4.77602 13.0001 4.99988 13.224 4.99988 13.5001ZM7.49988 14.0001C7.77602 14.0001 7.99988 13.7763 7.99988 13.5001C7.99988 13.224 7.77602 13.0001 7.49988 13.0001C7.22374 13.0001 6.99988 13.224 6.99988 13.5001C6.99988 13.7763 7.22374 14.0001 7.49988 14.0001ZM10.9999 13.5001C10.9999 13.7763 10.776 14.0001 10.4999 14.0001C10.2237 14.0001 9.99988 13.7763 9.99988 13.5001C9.99988 13.224 10.2237 13.0001 10.4999 13.0001C10.776 13.0001 10.9999 13.224 10.9999 13.5001ZM13.4999 14.0001C13.776 14.0001 13.9999 13.7763 13.9999 13.5001C13.9999 13.224 13.776 13.0001 13.4999 13.0001C13.2237 13.0001 12.9999 13.224 12.9999 13.5001C12.9999 13.7763 13.2237 14.0001 13.4999 14.0001ZM3.99988 5.00012C3.99988 4.44784 4.44759 4.00012 4.99988 4.00012H9.99988C10.5522 4.00012 10.9999 4.44784 10.9999 5.00012V10.0001C10.9999 10.5524 10.5522 11.0001 9.99988 11.0001H4.99988C4.44759 11.0001 3.99988 10.5524 3.99988 10.0001V5.00012ZM4.99988 5.00012H9.99988V10.0001H4.99988V5.00012Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),tse=["color"],nse=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,tse);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M2.25 7.5C2.25 7.22386 2.47386 7 2.75 7H12.25C12.5261 7 12.75 7.22386 12.75 7.5C12.75 7.77614 12.5261 8 12.25 8H2.75C2.47386 8 2.25 7.77614 2.25 7.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),ise=["color"],rse=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,ise);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),sse=["color"],ase=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,sse);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),ose=["color"],lse=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,ose);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M0.5 4C0.223858 4 0 4.22386 0 4.5V10.5C0 10.7761 0.223858 11 0.5 11H14.5C14.7761 11 15 10.7761 15 10.5V4.5C15 4.22386 14.7761 4 14.5 4H0.5ZM1 10V5H2.075V7.5C2.075 7.73472 2.26528 7.925 2.5 7.925C2.73472 7.925 2.925 7.73472 2.925 7.5V5H4.075V6.5C4.075 6.73472 4.26528 6.925 4.5 6.925C4.73472 6.925 4.925 6.73472 4.925 6.5V5H6.075V6.5C6.075 6.73472 6.26528 6.925 6.5 6.925C6.73472 6.925 6.925 6.73472 6.925 6.5V5H8.075V7.5C8.075 7.73472 8.26528 7.925 8.5 7.925C8.73472 7.925 8.925 7.73472 8.925 7.5V5H10.075V6.5C10.075 6.73472 10.2653 6.925 10.5 6.925C10.7347 6.925 10.925 6.73472 10.925 6.5V5H12.075V6.5C12.075 6.73472 12.2653 6.925 12.5 6.925C12.7347 6.925 12.925 6.73472 12.925 6.5V5H14V10H1Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),cse=["color"],use=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,cse);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M2.5 4C2.22386 4 2 4.22386 2 4.5C2 4.77614 2.22386 5 2.5 5H12.5C12.7761 5 13 4.77614 13 4.5C13 4.22386 12.7761 4 12.5 4H2.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),fse=["color"],EI=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,fse);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M4 6H11L7.5 10.5L4 6Z",fill:i}))}),hse=["color"],MI=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,hse);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M4 9H11L7.5 4.5L4 9Z",fill:i}))}),dse=["color"],TI=L.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,r=wr(n,dse);return L.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),L.createElement("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))});const j5=L.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:i,fontSize:r=1,children:s,characters:a,onSync:o,...c},u)=>{const h=on(({invalidate:x})=>x),[p]=L.useState(()=>new jN),[g,y]=L.useMemo(()=>{const x=[];let M="";return L.Children.forEach(s,b=>{typeof b=="string"||typeof b=="number"?M+=b:x.push(b)}),[x,M]},[s]);return jL(()=>new Promise(x=>OW({font:i,characters:a},x)),["troika-text",i,a]),L.useLayoutEffect(()=>void p.sync(()=>{h(),o&&o(p)})),L.useEffect(()=>()=>p.dispose(),[p]),L.createElement("primitive",Gn({object:p,ref:u,font:i,text:y,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:n},c),g)}),W5="data:font/woff;base64,d09GRk9UVE8AAC6gAA0AAAAAQzgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAAFIAAAIfMAAChRZFKn5EZGVE0AAC1EAAAAHAAAAByCRgjeR0RFRgAAJxQAAAArAAAANACwACRHUE9TAAAn9AAABU8AAA+MgotnaUdTVUIAACdAAAAAsQAAAWRlFnIQT1MvMgAAAZAAAABUAAAAYJf2spxjbWFwAAAEcAAAAJkAAAFCnGFvpGhlYWQAAAEwAAAANgAAADYNzYU0aGhlYQAAAWgAAAAgAAAAJA8QBSlobXR4AAAtYAAAAT8AAAGAjJsgS21heHAAAAGIAAAABgAAAAYAYFAAbmFtZQAAAeQAAAKJAAAFH4LLI15wb3N0AAAFDAAAABMAAAAg/20AZAABAAAAAiMSbAClT18PPPUACwgAAAAAAMTwES4AAAAA4yMHK/+1/jEG5QabAAAACAACAAAAAAAAeJxjYGRg4Cj+u5aBgV3j/9b/n9meMgBFUEACAKj9B0gAAFAAAGAAAHicY2BmUWT8wsDKwMI6i9WYgYFRHkIzX2RIY2JgYABhCHjAwPQ/gEEhGshUAPHd/f3dGRyA7Do2hn9APkcxU7ACA+N8kByLFesGoIwCAxMAY8AM0niclZS/TttQFMY/O5CIkiAQZUFVdSdUIWKTMEQCtWoUIYQEDKHqhKoa+5JYGN/IdojoC3Tt0k4dO1V9gj5Cxy59g459gg797BxCoHRoLF//7vlzz/E5xwHw2IphYfxz8VrYQg1fhG1U8E24RPkv4RmsWE+EZ7FsnQmXUbM+CFegrJ/CcyjbK8LzeGA3hatYtrVwDY79Q3gB66UT4UWUS++Fl8ifmYk1M8fdqyKrnC2s4p2wTe+vwiXKvwvPYB2/hWexZj0TLmPVeiNcwXPrk/AcqnZFeB4P7UfCVazZT4VrOLGvhBfwolQWXkS19FZ4ifwRHRgMcIUEIXroI4NCE5to8FLYo9ZQHkFzt48YPhxSm5KIz+7EKy12mk/Nsy65BrRExwyukrDXz1Rzs9FQe8b0Iq32Y99R7ShS3VyVqq5OdXKpAzp0Ge+Ud8Zb4bA4J8QQF1SZU5MZdaiDcJhvqetRE8FjRHR1bxh5yf+d8C9L9dfp055qEutl8bYpvQxrk1fOYd220MLOpI4tmukkDU2smk5jq7WTl6J1O3r9vjzr9+cZFrX2eGeM7dFL0yfP8pwyg7M7fXMm2Yep8lSWeIG+8JJzZc6kH7SYdsBYijun+OSLa6XjG3KHrU+KhDKuXlGCcbJ5WfKhyMuCTj8J0yz0YsVEdJKlhsIDevi0i4uRCeg5JAeFZ/5q/WLk2hxOj3bj3W2fDUrua8AmDw99Hac6UMM40InK+lq1B57Ph2g21E1PaJ9PcMZQ2/y/cTEqLoeBb4I7DJCwFi6rMZ1ESskBv4wOdnGEY6716yT6WTbYdt3RaOR4RXDHJD03GieQugf7nd2j4916kcB0i6VduD0TMgx/AIq26g8AAAB4nGNgYGBmgGAZBkYGELAB8hjBfBYGBSDNAoQgft3//0BS4f///w+hKhkY2RhgTJyAkYmZhZWNnYOTi5uHl49fQFBIWERUTFxCUkpaRlZOXkFRSVlFVU1dQ1NLW0dXT9/A0MjYxNTM3MLSytrG1s7ewdHJ2cXVzd3D08vbx9fPPyAwKDgkNCw8IjIqOiY2Lp6A7bQHAPlYGQAAAAB4nGNgZgCD/1kMKQxYAAAqHwHRAHiclXoHXFRX0/ddYXcvllVYF42uig07dkWpoiIWkKYodekKKEhbrPjkMWKcmKDJEyxBsSIgRUS6xqgIYsOuiA01diOJZu7uWfi+uWie8v7e7/u973KWPew9Zc7/zPxn5hwknLExJ5FIFJ6xIbGJsaNcw8OWJi3jJB04Ceci9OYEtUTo00HoayT0MGb+nY1+62zctyNnvGloP4B/VjrLHQ2hatkztWyXVM1d6armuG5qybemas5KPeShGWcsjtaZs+HcuYBxVmPHT7axGDdm7OTpsXEr45dGLkkU/xprMSs2NjIm3GL28lAri2kxMRae4qMEC8/whPD45PAwq08SWnySkL6OTIoJjv+PLzl6SbgOnBFnzEk5GSfnlnAmXEeuE03ehVNwXblunClnxim57pyKM+d6cD25L7heXG9OzfXh+nL9OAuuPzeAG8gN4gZzltwQbig3jBvOjeBGcqM4K240N4Yby43jxnMTuIncJG4yZ81N4abSwmw5O86ec+AcuTWcEzedm8HN5Jy5WZwLN5ubw83l5nGunBs3nwDw4Dw5L86bW8At5Hy4Rdxizpfz4/y5AC6QC+I0IlKDaOKvuArJqA5Ko+HGQ4znGVdLR0lXSfdKG6UtMmOZWlYmeyjX8GP5BBMTk59NnnZ83Wl/p986L+m8uXNe58tdtnX9ouv8rn9222FqZupgGmlmYjbVzNss1+yZ0li5WLmlu3P3fNUKVbN5hfnDHtY9gnvs6XG9p1HPET0Deqb0PNSzrufdnvjFuV6Ler3tnaruro7oM6LPyj63+wb23dm3pJ9jv20WIyxO9p/ff+sAvwE5AyUDBw8MGvj9wAeD5IO0g7YO5gdvYaHQoqtrkbS0CIYWoxZzXZ3+h9Y6WUublUpXJxha6+SK1nBFq/1a3KE2rtCa4UA8zDZjuPIR1eQqiMhYtj9+f3x+ahmUQX7G/gP7D2TkQBGvbICjqXnxB+IPRGVoQANRqfHxfHx8ajSE89vUUjvVvrYMDIf9+gypwnBBv0nIMnuPTswJ++GkT5/KrPf6TSrsB1LlKYuOyk34iyHr05/pFh0Vu7OSBSsch5dwvDBBK3ktWKlwNTgYrNAWbtOTxPa6TXv9OwAcx1ZADbX+kurjWRhI7woTmA3YGSawJPhX/SAAG49p4MEusR0gFaaZi50Sxb+lilW4SH9fGG/2G6ax+ZiGxjRSP5yA3TFN+eo3Yb4KWM+C/tdsrtm0+GPPNTxbiOPRR45dt78uabjacLXgV0Ap1H7588ryleUrjkXlR+WH5Pge8j3kcnhSLj8p1y0/soBX3oosWFUBNXAxs7qwoLDgxE8X4CKcSDjqd9RvtwtM5nGjDLBH9Md59+fdH1vF+J94jGMT2HI5k68brXGZ4TJj6RhgRsAm32XdcLR1ZfzF2IfLHi6rjSqMKIzIDABPHtxS/EIjQiM8VjqAPbjtC67gla+CK5IvwkNegQe1OEjogZa0wYMFc7SUvEN7zEW7B+0f9kbv9M9UYHXYsca7xvtW3DN4Dreyz9Ar+zo089fl8GvsTa8zXmccDlvBaJi23NPL0yt2Oozn0d5edVMOlRnFBw4fOJy/4zgchyNrDy4/uHx7BATwTnLwXRceHxsfu3RNCARD1M4V2Suy1xVBBX+xbbgKTafr/NTG8cz0upRtbtujgjHZTme9znrdjn0BLz6LcEgU4ZocXi6/5XHa47RT9hgYC9NiPbw9vJc7wTgSwU4UoXp78cHsg9lHdpRAiShC7MFYEsGfd5TD4nXhCbEJsVFrNRACS3auOLziMIlQzivuanEhG5WslkrQx+wxaUBXTMFajKzASGXpY6EPbX7XsiGPHR47oDwcB4FYuhX/cZdXLr8/HAuAReFW6UOUH8chgLN4FimDYdpxITY8y8dH765Lr548cTKXfnaehjp4vvTOrPOzzk/M6w/MBEYtdZ7tPHvJWGAyHvwz/PYu3ru42O3sDMbZT58V4cVHeK10BRdeWYpp36vg7rGGe3V87l68ZugkneFtHzcFnMAjS3Oc1xxPOg2XeaXVB52fCqp3HMvOy847uquSLLdw7eG4w3E7yDrBM9k/JIKPiWdGDlLnR0uvwhle0WaiTxe2m91HV+aK45VZ9/XpKhwvWuZBoTegKXMFMuMdZAkrjLC78JTAmJLFRpSwvlTqmOIe60Dlkf3TIL4Ke0sHPbDBLp44jkosugAG8t88lqajxxG0qUFLKrexw8trvB8OkI4LmuRgwyRU3JhpCOtLJZlZArPiFYatggRTjI6xJlUV6y19Vvq48QFKqdShaQn2pbIHBwAO5TfflW7EfgnYW4PmVNywo80Hmw/WNyeV8H5MnRsrfTX6Out6ko2kcoDZAXPlE+XANMvZHA82nooN6zjEnlewRrW0SGsmSHEWs8ZhyqxD+nIV1oxnoewAWg5GZ8xDF1aCgz8yf9yN9U8WoCM7weQE0078nc0ivLJ2sjfsNJpIFWOF2xgvERbieqMrwm2VYGaYieuFmUI3jDd0E4ax9YZhBjOZonUvaxJqJWiOy42y2bcq7GEnPV1Rfq7gWsG1zKvfXOO/wekslljLQ7rZf0PA2sC1gXE+YW6EzhkhExdJrgl7ja4JmSphLy4y7KXxhqzHPRLsjYVG9KuLqn9HhWGKuCzJFmaqQi8Qrqplo5gX7ScpvP45+kg+4EZhCaYZfRBeqLawoBI26t7AewOxow+OBZwA2OmXux/vfjyG4wDDeUyXf41BoTjKrsWuhXU+ycYDmwiss4/dALsBYYx0mNpsZPtU+EC+BbvveVlUW1R7LrcRmqA2pmhu0dzdQ4D14dl9+desh3Z4hGuEq8cyO5gK84+EXw6/nPIeUM0rssgOj2sltKiNRmirz1OhDhWgZrG4EYAexYDhIguXKoCWcJ2W0IRpQhgtoUn0KGkyeLD3UmlVaVXd/ka4BKeSizXFmt1e4AwL1/oso5/Fs2fa8YaVhoPAbPSR5DEWtloDCoKp9MX7K89K7pXc23MbbpDeh7ybcm3KNWZUwPrDMJigdQxzDPP0Dp3Bh85ItiG+ETEUlqG34Eak0UhCBBFxrMCNyg+NQi8ykm7lQ586PnVEeQRaAFoCmhQ/u/PsTvkfxPDQlHw1+FzwufmlNof4S4d/KTtewyuF4zV76sgfoHnIe+sb1jeYvIgNhvFgs3LG0hlLvf1C3ULdUmaBIy+usi6r6vjR40d/2X0RbsHplMLwwvDd3rTK6cneQeFB4e4pjpt5NpR540DZU7iSXB7CKz+Uh+xzJ5/gkOShCdWEztc6iuSxR3NMcyz5Z7ggIo930Edvp5XoZhCgPwsxqm1sqM6ENPAO+U2gp7Pptw+j33o79h1IDSZtdir8P8KNzDwwfGhXK+EBLsJSjJCgClOFWBoHVcSg21i3qqFPHJ44YIdw/AJwGOFR9ujJoyelaEJ2DDg8DDvZP7V/alHG+gE/CRxSXML4Y/heuENTRrTuA9vWeFzoJy3MP7I3NyM3o2hrGelV/YoKnwqffc4wDkYnOwUvDF7oGecIvAssyAw5GnJ0xS9fXhM3apHwlKQ6iQESNKGdisevjNBEqKVdcipn/Z9ZPLPATgtwMGB/QFlF8/Pm52XYqV2sgRFoMu3Xab8OLmcq4FkXGBJiN2UnflH9e9ONphsoKUL1Fj4HA+JlbC2wWdNZNzZYfM9j/sC+p61iJuSVsk4cOVaWU5ZTvfMUXIMzsaXepd5Z5DdhfPKM4AXBCzzjpgM/HdzzAi8EXkh8BMi124HxW9LvBvpQ6b4Cw101U+L3IBBTEXq92776ZMdCHPoILqSDf9BkEbS6oWSDkRS2/P6H0J9WqCwd3OzY7Ih8uLhA8lzyouZbzbdKWwC7w53kqyF1IXUe1Q4FfH3eibKiM7zyTdGZzHoSE7uFvrW5YXODcYWsDzA1MC7SxsnGKXQYKTfM2D2v0Isv9KoOqo92jPLwC3HlQ1yTZ4Idr/wd0zJUcCOr5njZ8bKze6+JS04qDSoN2usO02Ga1iOEXh7JTsA7gWdWcCkfXJp8Fq7RzEd0A1RwOfNUYXFhcfWe83AeqrVFIUUhmQthHrisXBgZFhm2WOsKvCss3hNZzEcWrzxFXk/xFQbgUfQU/iRWfIEbhEjijhd6f1q95VHW8fbY22Nbgmi1KIFXpU2Pv2QWmoH2LvYurMNSNvBrfgkLOCzD1C048yp2wr7i+xz6A+7ir8gB52pwyESUUGH8aTYERoF10gzNDI23W5hdmF3KBBjB44ZtKniSdeN4zfGa09lX4SqcjSqbUzZn7wSw4EfKE32jwjSxmtjAtb4wE7yyg88En0m+Cb/yitYZxNhCo8ja5iJrm7eztu6ZMYRtj6H4Or4gtRTKoWD7AXpl5MJRKE7NjT8Yf3DJ9kDgA2HpuvgV8StSYyCMxlqjo4HMUIKFbBMuV2ZV/E9cCv/ZpyhP1auNz6r+F/Pyf03MPPXNWkm9kK/S3TWQMacZmjFRaMYUqrbeNfBSxSQUaIMSMFCCg1FQ6X7HgNbfZZhgTLVAqinYFHEICjGmqHQfBB5wQav4wf4utDGtoY2tkSpYairu0H1MRhcMMqvFtBzMZj+iluJ15Z+1+rvt1H86s6wgryCv4qezUAvlq3OjcqN2+ZHm+K8LigtZFRcSNGceP2dekEfSwqSF62eKMaNW9s3rfTfKTvDYFbtI3384+aeoJKiIeOV4xfHKgHzWC5g5DFhq68zbOodabWYdeaUeD7aFUXb043+bHf17asRTpLsuPoGPT6DciJAS3hoW40iy4gAMwQHMAq11zjiaNHeYWQtOV0vVOEb5XYsQrdrAFh1itvWsfx1T/zoQu0wXi+UStANeOf8qNPzQsKth1+mskkNk1H2kmsRFK93W8cpCt3XuG7yA9QXG54yoG1E3/WkA8lRSsO/3OHErjjuC/c9hNypNL99f5N9fRPkRcka4lHz9nI+sB5Uq5r6ebU5jfOLIIKcgJ6/IWUSt4Ze2Y0/+Z6FW6lG26LBmh2aH7zYvch4zE+b4zfFb6BI8IXhC3LD1TJLKeu2xOGHDK/udsLkZ+gaqoXJ7+YHyA8eO5p8k+UoG3VuEXQCV8Fv1zdc3X5dgj+/R5nuctwInumMfKuP+YJ1viGVgEZtKfGsNbEgo6z6ViiUznsYseXqHMOu/s7m8rqOvajuqD7dUXq28WltwE3LhyFdH1vGBhr9Jtd4rgqKjSY7o6KVrImEBhO2Pr4yv/PuVH8jqsCd5uueo0Q/WSjLNcRdgR3wu1FG0w57jT2CoopiJaUE6rG2wCiOF9xhpeC9V0PNAwQ/dhFGoMcOhuFVIw3S2DNOVH3CouZAtw8mAZkVPbjy5UfoBsA88SLqmOac5N/+YbVbD4VPHC0+Riy88lVkLlykC0LydeGniJWZ6hE0B3pAmw61q1ktF45+W03ijN92hUHUEzEzyDgwLDHPV2hIW+TqViibfLG+G+tUltDihJDrLhxh1TtKioMigSNdV1ErxUUsLu47BkhbcpuuH6UYtur4U2vU6wDpWWVZZNtg+8X7i3RKHZGRTAb8o/a35t+azqNiJo3mWLls3MHra4sDFgY5JQ4FJwLrE64HXg1jsDDiWR5X8Gxydgx3P3Tt371EJdoBXcD2xOqA6IMchYwBFh7LVON4Tuw1rHtbMVGViaNgJ+seO8Rzj6WzjO8B3QAK5T4r/FGRjgfoC1EjaUbyN24xEACfLRFXks1vOtpxtvHf6w+kPh0Rd6cvfIBJWx2EX7w/eH+zvDzk75CyTHha9scHpM2w02Ew59X4X3GDdYJ0vTjOOnyrfzEZHss4zrGdYDw5hXxA2TuIWeqO/YPl5cnFi/TzioPmCt/AK/Q2vBEudC2raZsoU/bOShVZqP/Pf2pK4rRTgBBoeCDN1E6jdWJkCJ2uplQkFgvswSPKRULcg1D/qhhHqfQ6xLicHnRx03fal90tv5GIpkqXA4mPmi4IXBTd+PtXAC6cN1RSlnWJH5d7uo5fTslhHGF06u3l281Ls2g67MQXT43Kx07n75+4/LkEp4HRoGZ/NpvP4jSwFR3igfOS9kfeY6hibRMROFuM6gHWjspA5AIsjfU/MStb1xiDhd237StrVon01ut66fq29MV1U+HTD7639hN/ZVkok+otBOOUNOFlsOdn8cwuZYhStVW2s10rKMV3wooflwngSuU9J/wf2D+zRJBxHUsxEMUZJ8/3m+6VoBNiP129l6W3pcrDVuoYGhgZ6J84i7vDaHV4cXpxyDu7witq/pvsXzL4ynILThTmtJngKDA26n4Wjui/YOTDYG7YxCzYNdA5sKwVAjDAiiX79V2e9Je3nMPpKXIlw7tPQosGms3TU6oE+tahVPhLnSRcSZcob8TqVMK3tIwW3gpP+T6myLr7VHAyJmE5J3Q1x4ffkhslt7w3W+vesiebEhH+Tl8D87pPM+kyZrk9bJm4V05QiCo+hbW9rP/3edjlxrhbD9PUUF7dQH08StUVnr/qG9TvAup6wOGFxfcpzj+ceH2Oxo6ggH7Kf1zyvuXa/GjkqB9CUQOWb5JtxQDx2W/zn4j9n3h99dvTZAYfJwqgMiB3tMdpjpvViJqGygpkCI3vcOk31kCx2bB52Of/4/ONHx0XPZgzNmrqJdRNzKIRjE3kHyoWtY5jp/EnzJ03UMGPxcGlCmWuza3MMdiOvwCvukhkcJd1J/8te736yV6odxV9k5JKwx7GXjS8bK8TNpq3v54fGIx6NeMS6H2eTyUipzdZWfxUNcEH+cPOlhCr/Kv/988AWbBLc/IP9g52TxpJp/guf1+34bDN6/d/jYwKVUPpdyQ881rOv0RqHsm/RR9p4rq6p7H3Z+ywxbO/7H1DN+AuqzqJp/T+hekRQjfkM1cO/oAqum1Q3KVeEyvq/QiUVoZpY5vrU9WnMJ0NVVBJUNQTVmr+gOvxPda7BAhmWG2pwP8B2dk/4Q/qw4NLJykuVl/Y1wRvCLQAlY26NucXMjzJiccMPImguKhpqj/zJ5ktJZZoyzb75YAeOCe5+Gj+NS/IkAi1di/76Rgw0u4lbWRhNk49blS9uCvNUMOaATbVztXPDgidhT8LepJBDGk/eqfDF9RfXK18DEeut1Reiz/DRZxZXO5c6l44pZtJ8KlPyfQt55R3fwvgyOAX1e09UFFQUXMh8AGISWaWpEoVwEKkeHibeDmwIbJj3i22RbdGY3ZbARlFaED7CYYSD/3DxZIv1usQk+IU136B5GYomS6jcX1JOP3t9YS64JwaIPmv2yvEwGOz2eZfzyhfe5XEX4AGvyBBTn6cEovB3sq1yqquEhWqmxu+oKviiRs3WyhR//EVFaEp23CQSlamQQmQ0rpp1fTvu7TjsGYg2gFNIQSvePXv37IRIvqN5fTCxka+cBQ8fxHz6jgCng74nfU/G34I3vD6EpcsVLz9bdyb9Vgm71Xp3/BqELNGmc8EgU7Mthg5q4wSpQrjyuaUYMKjwqdgyDbBQX4U5bVW4EeirdiJgiW1NLFvfxJYAy21rZMn6Rqni4ufOJeZYCXhZyMVLhlysAsNCXbwwTxfByoGdM+xj54R9VBVcWyOkip8+9xE2kIFsa5dvbdtIMBzBbQDCEWGNfiQ7AuxJqzN7onOWKrb85WnvmesbiBZ3y3Qb9Y1k123HKAfQ6NZD61dtN6SK1nGU4XuoZT7oaYY9hZGGkRRWP8Ke7I5KGIkeMmUDm0JPZfTdFPQ0jJQpDJ3aBdnTLsMHte46bgDDB7Vs1H8OliFYsTRxrAzWW8U8BCu1/JrBinnKlQ1oo9blUOgvtA90SrdMhSGAzkIwzjIEYzCwk7pocmBE8bXMC70k35ozL/0w9JIrDFfUxlfxjKRaiDGqVss4Fe5jZzAQmA+eET2CFn2YVTIRzij8AV3NnlFObEkyVD/DM2QY+fYNrg2uT2I+mfirY3eaeOWa7/1/iPoxmRzqT7K4mrV3SReENfKvUR721PGC4wXLPKYEa3BYM2v5rOULQ8J8wny03uDefhBTmllQkF2QXbH9NFyAqlW5S3OX7goCL34GGyYXD8i6xkx05Se6BlNVTh0OqODsvvLy3PLcK7ueAY89mEaWHBYdHZzIK6uDEwNS/cAHQrbHZMdkry6CSl5hp0VfNjZZ3xv9BGfyY90oy0/DOGE1rSgZu5ljHGSgiVRZeW3M2wCKrCkM+uPErXe33hVhL0BbfgdFTzMoS3B86/h2YDXrKfqLUSEzrSnyYGlyTFMzB5XgKS99frPiAzRC7fIS9xL3LJLWhI+hCEqeNCnEM8TTPdYB+oNjpeYl5XvjtbhQtwJ9JOKpVwiuNGoUcsjuppWx3k+HPR2GnX1xBNyFGz9dzr+c/0tlcU1xTVb9t5d5tlK2ySc5KHRJ6JLFK93ABtyyg2uCa5KeAJrwxcS/fFZz6dnSs7XZjVAHJ7THQo+FZi361pXHlbI0VAS/m3pr6q0BRWKMNBJYZ9/xQ8cPDRJXNIVXOP4nTJ8kS2NxGKesbBQqqMv0Ytbv7uC7g39fJKLUBd6U3XjCK1dlMGOCUKoUFYmlGU7KZ9wbfYzJxbRv4CJ7S97eMoxiR2ZDe5esAjTNelV6vvR8bW4jvIPrmvIJvCFEHjDOKWgokfP8nODzweeTHgN2IJh6EkxYis6YSVDpCnGD0QPhHyTIxEqmej389XA09UUreAZNmdcLrxeeqy69yLMeaCqdOXZMIPkWW5h90Odnn59jrm14yut83soAHUPwC5uXNi+ZrJINASuYnODo7+jv4RI8KXhS8ghgHI9b3ql+fHDwYkllSeUv+y5TqnEq+Wjw0eC9bulT+ZVkOluykvW9KIfORn8JRmCaUbm+lwqntPXCNPo+Dl1Y3GsZdqqpRb5vAeRuOrSR34qeUr+MwK0awhysolzmuMyJsqI6P5RNkStmGuzRG6PQV7cU/bRas/u4UVhKyMdirLLpfjvyzsdYv3uW9yz/WCwibwIviq/eFa+EJiXO8w/yD5qXNFXMNUaXOT7lmZxZSosX1mhuR92OurOKqGo4YOeSJ/ef3C8ja8UBvLJRn89i5ZRsSpVvZjweXkoRIOsBAxbbDuFth4Sx3sBsedwo7lXXvS/L6svq6/PuwVu4HlIxhTfEyf0nOwUPI3Bd84LOB51PekT5Pq8YlfWX5kiwC6nOKPHYsos5pul2yKqab5S+gXqoXJ0Xkxfzkw848q1u9MRHvgl3MRMiydVAGYdlgO1oXmggm1K0LqLhLmtxGv5oRs4pm20nW32Ppmqp16djg4T9Cfnr2o8Ntu+nV/uxQVFqbsKBhANLM4KAD4KlqQnxfEL8+hiIIMe4U63PV9EGXWZpFJyHGGajv1o65PMEMppgG03wwpGlqJi3vGR96Vfl8BGaDp+uOV1ziBZoxKuNdzKy9AD51+NDgiivjobl38Zv5Uko4unJn256Sagj/3+hoj4JlSoKpWCT2hcpLG93wASXKcGFH2XIoRHeNIRhPhg8dJ0ES8FH9GQ/s2cOI0HfkaURo4sAkblRTwuxpwX1bLc+iterPu2E9hPTibwtvrurlU0i16XpDshKGhuOvRHPEC7O/ZYp+VZ/TJNv1q2S7qjaf7QgpyCnYudpaIATq3Oic6J3LgZnvtWb+vlRRKha9sbjkselsUfEqHkgsA7etsxoIRoNPc0GA/HIwCCHccTCG1DKVpKUo/8lymedUN75pBQ/yqqe3ih7S9ZVtTonKidq5yJxGg96EiRPwx+ZHFUsqf3gyM9mOK8s34Cm7SPO+XfizMSNRJyFZB925Uz9fPDzwahYjKPgN3i673bF7YpzF0seljzc8wr+5DeflW7A0YvRdMzLMS9Zx0pmCUNhQpJDgEOA+5zPxt//L4La97KyvpKUXrx2qY+unFs5d/8E0b5Y18RRAXMD5s6LngL8FJibG1AfUJ/4RFQPhZ2hX7JgQcIt+yf05GQShWTcqHyF3QwTSPuEf8iu2b0KEwPs7tBy4vZvt387Kp7k2/A7ycVMj0B1u4s5IRJyVxiumTGBV976G3ZgicSurzCtdZ9KSJSX3r9e8g7uwfno0nml87ImEmkBUyaNCnINcp0fbQ/8EJh+POghr5j1l0iEl/YToQeTVDEYo2xqFCpFWhEJ3fKu5R+LUCVevj8vunaLN6STOigb1dJGFiNfayFyxKORx8UTgZ7EEfZDefuh7Rxh9xmu7ntflZ0vO38+9w68gqthlba8Yb3cf8qMkBFgD/Nzg+qD6pOa2zEyfE9ZtIDrPuNDAUy7QqbIih/dEhPdfDiyKW8j/w2mSBN/iE1fAgNhqr/7KF5Z9BV2YWvEQMZJi3N0m3GO2S1cz/zxb4IS/658cQtfqmDO7vnFXsVevwQ1RDdEN65+KvrxDzlNtU21x+5RglCztnpFCb+iJLRgweEFhx32j8wamTU3KyaLYvWYrNWHyVRLdh3JP5B/oCzjFJyFijUFMQUxP4WBf3uM0hL6wOaCzYWBeaLr7AJDYmzn2c4LsyMPwozqJmEX99NxDUkPVvEPVp3TFiYWJv4UBRoIWxUVlRCV4Js6F2bDwp2huUREoblJ5ZvOEhaVWgzQhaOLBIkKjb4XfYizQSdjIS8G4fy+J+GX70/v5NFdvnxD7KZYCIblP6zOXJ35ZS6U8MJ79CI340XkmcZ2MWe5wuqz775MyHaifbYidMuxk2BK0prnDq11rnV+ulS8JuoBLcevPeSVKVv740oAkQ8BWjOlyvKQSTbBlN3xTObZgH366dxEHmbL2ylKsld/WSUo2i5jJAidqBMF5Ctbd7I1up2Ul5d9anOE2mA1tfEHTNGtxjWtq8VqFTX/GzDH1lSWpEtlc4HFt2rZdJ2WdjPgU89cc9wHGC3IMMYgwyxgr4QKfCjksH3AQpjAAlFgWYAPDDnUZx1xd5BaOkgryRCF6tZ2fomVdOXChIiYpJgk/1Q34AO+BeYuLU0t/qoAxGtX418v4RxecFIbP2AZwOJa49lKXbw4PZBxuOAiyX1zfQdcaLghE37WxQNatT6h2H6RUAiGitZoqcJQIhxEZwluoUDtjHBQhaoLjmx4P7ZUns5SsTMbjqmz+SrsL2XyovktaWTPuJQMeoTHn0xeh/K6Gsodh/MYI/8ObWpbUF7E+6GFlJlEjV0wf9r8aTHDv6ZQgC2RsxFzHZmqr6I1+NPZiBPaGKGTeBtso5adZDayf0oSiilGh1isqor1l2KX/Gdnam/X3j78G3EXj4vlOPziLVT1RWc5U825hcP7oT+J03XZe/fb7rfHnGZd8nk/ZiFFk/Dagd8ye56FUrA2ps4Cu3iyLp5u/cX/H2Bh8k3Mfv5AZhLOK9Bc6IFB+8TbBxNcoFuH7uLln50KF8jgTEb5wYKDBQU/lcMBOPDV3vV71xfFnQw4GVAZfTzleEr5l9XAv4LGovqb9Tfz3ohxKnOXgdda/9iI2IjIlEBYAfFbk35M+jEy26/MrywgL2hP0B6/H3yBHwq2kW5Obk7LRon/2qFQG3/TXW18RaXdo7+8B//cUwsyg/0/5NC5IwZ2RJ9tnTtjGun+Pzp3UXNWSq6DRNLZoUDoAdiHOYG003+5l8lov5fJa7+XyWu/l8n4dC+T2n4fJF42dPq/PLzfuwB4nGNgZGBi4GNgYJAAYgUgmxEI44GYBchnAmJGMMkDxAJANojPAAAadADVAHicY2BkYGDgYmhjWMDA4uLmE8IglVxZlMOgkV6Ums1glpNYksfgwsACVMPw/z8DE5BixMvTY2B3jHJVYNBzDgoBkm5BjkDS198HSPo5hgHJIH9fIBkS5A0kkfQxJSfnFjDwpRUlJjOIgEUYwCRQhoGNQQKIGYBYisGIwYshgaGMoQcswsgwgYEZTPMBsQhUhxdYN6a4N5q4ENQeaokyAt0JEgcBJiBLEOhesBwAlTAg4wAAAHicpVfrT1xFFP/dZSmw7MKyVrSIL6zYilYsAVo0jUGkmDQVRQrFplqxagqpiEbTpGn8oA3xo/+AJNpgYqQmpTE+SGmCjxZF2liF2IrQAgssIG35Zvb4m7l7dy+wy+7G2ZyzM+fMecyZM+fOwADgwj68A2dV9a7nkdd8pL0Vm15rP9iCstYDbx9GFZycAxE4+GckMXI0t73VhqyWg+2HsV5ToDE5WIcsPTbg07MdKHZUcORCKjaihmMne6nkpPFnIAd5pBXgMbhhGIPaUj4qObMGu+n/y2jDMXTgPIbwOy5jHv8aLiPf2GLUGnuMl4wPjU6j2+gxviH0U1+pKNyITKSgnN5tQyEqkEuaV9JJu0dOol4W0CijHLlkEjvkJvaT4sBOmSd9Bl54gvPIJhTIEyiSYpRSU6X8hSqZxVOEakINoZbwHKGOevZQskH8aCLQAzmr8c/E9YyJk56NolyuYZsEUCFXaL1UBkmZ42iII4Oe18kZylzgbBct7mB06mQc+3GLpmST4iZllpQspCONPDUvU34lx0f/Z8gd5vpmtIyyP8F1FXFdZQQXrXgp5w1p93E9fq7Hz/X4uR4/1+LXkqnkBMgJkBMgJ0BOgNI7KVePrYxvDrXX0r5Bmoc2PPI+sgnKWoDWAuTkE1JoL4MWC7j7hXgAD+FhPEoNJYxpOXengjv/OHXsQh01N1BzE3fd4T6qMiHTndlPqfthbz6rI1cZTavlYHnLsdPkGuOwqjGOVu9zucR9MPszhGnbrDE5Tryk6Ks1yJDclCXdX5JBWZAOOaRZbk1bJHQQRqRfftT+0Hs5pXnnmA/q/0oUvYu2/j/h3mcRj+305Jt8mcCcORPzZJjjSaL1MebG9MWK6jLa4moaqQvxfVolsxRNK/PCHr/rCWm6EZWagKwpaVqMvjLdsm0Se+WPODqX5Zp91xNrMiljxBNmHssUa0LisvsIn4RHZxjNYeIROSRnZUAC0sk89vHE/CDj3HdPaN60ym4VC9mg91Ll+eshXmf06K7hwwyrldkLROF28Tx3STG96pBG+Vq6SfSyvp+UHp6zyHk5paIuizIQDMoxZqJXvguSK0cJm1bvVbTdjtintb4Y3g5bJ+D/nMmwtll10ojnVGwZb6tyeZLWNClTWpPOH2bBWBwBq2ZmcfYrhAtrar+arD9aSsczmXyMqcmsT5c1Hoftu7CseW0SdTE03bCw7NYVJXRW5b3Q/y+WndD4jWCrdK3QUZOE50vx53BWn8bX+TUmlg/ELyXBaTUK8XlCgn+rsypfSW+YunWZDtYZ+V5n0Qn1JeJ9w8791Nb/MwGPAhGcaIu+02Ym8ss6x+/uqMpSmFk3EFPPm+Fef1ybE3Iu7hx/uBeqTfKbzoCLrC2niUesXZKemDo2h3vNa1hKunqvoet0VOqRWDbWPqPysXyxgtK3MnLyk8ZTya4jmEB1kHrpJbzK2lwiL3J8AOarANIixyPVhzeqVP3/UbBMsvUcBO/i2J2MR+GWRB2NdiexfRF65NsYcpcIvTIt3epkygm+Oczm09/Fi1FlzgfftfTJdkTuoOoOvRcbwhMjvXtDEL85eBdX74HUMMXFF9LtIf25IVoWqXfiDvroXnGfXseY38b/dD1yhulO/lLUfuDWECUD6paobvym35EbY6SXh7sJibR12ndrDardZ1uTCV6uRPmdS5/dkfqoWxrMd6n5Io20FP6U54ZeNRiXDL2GDNZ+g68U9WrxsF9Aexv5/ijEZjyIIv162YJHUMw3TCnK9Atmu37DVOJJvqir8TRfrc+gFs/yPdPA9Tfhhf8AO0d8HwAAAAABAAAAANoy8IQAAAAAxPARLgAAAADjIwcreJwdzs0rxFEUxvHv79xzjcwskGyGNAs11IgiLyklUiyYIUkp5SUvKzSJTKGJRKR+CwsLZcOGlX/A0grJxkYie8USh8Wnp3vvc++5CgTfINUcyBFT+sK47jHpn5nwlQwHo2TkhnW5J+l2iGuWruCaCjmhR9rZdrWI9WfNmUmbftNoNkzWdJsZMyZVbAbv1GkJHbrKoday7l5pjyRt3iClPkboW5n2bYS6ZaZsvcicvySUTk51gZSP2v4QYSSwswuzZf3K/xzXbzt7oFefrNdMzqcojRRR74up0WcieseANJB3I5RZxtw8Te4YJyEN9uaobrCm9fb/vOljUB5J6Q4Zm7siUXIS/FxpyjLKXsGXdZdY0X3r/t3bpV9uLRP0yTmFusiy+6Tcf5DQAqrcGzHLjFzSIsKFZdynyf4CCpdPRgA=",Po=L.memo(({isPerf:n,color:e,colorBlind:t,customData:i,isMemory:r,isShadersInfo:s,metric:a,fontSize:o,offsetY:c=0,offsetX:u,round:h,hasInstance:p})=>{const{width:g,height:y}=on(b=>b.viewport),x=L.useRef(null),M=L.useRef(null);return dre("log",function([S,T]){var A;if(!S||!x.current||(i&&(x.current.text=(Math.round(Yo().customData*Math.pow(10,h))/Math.pow(10,h)).toFixed(h)),!a))return;let w=S[a];if(s?w=(A=T.info.programs)==null?void 0:A.length:a==="matriceCount"?w=fo.value:!n&&T.info.render&&(w=(r?T.info.memory:T.info.render)[a]),a==="fps"&&(x.current.color=Yo().overclockingFps?Bs(t).overClock.toString():`rgb(${Bs(t).fps.toString()})`),x.current.text=(Math.round(w*Math.pow(10,h))/Math.pow(10,h)).toFixed(h),p){const D=T.info.instance;if(typeof D>"u"&&a!=="matriceCount")return;let O;a==="matriceCount"?O=Qm.value:O=D[a],O>0?(x.current.fontSize=o/1.15,M.current.fontSize=w>0?o/1.4:o,x.current.position.y=y/2-c-o/1.9,M.current.text=" 	"+(Math.round(O*Math.pow(10,h))/Math.pow(10,h)).toFixed(h)):(M.current.text&&(M.current.text=""),x.current.position.y=y/2-c-o,x.current.fontSize=o)}fo.value-=1,x.current.updateMatrix(),x.current.matrixWorld.copy(x.current.matrix)}),ge.jsxs(L.Suspense,{fallback:null,children:[ge.jsxs(j5,{textAlign:"justify",matrixAutoUpdate:!1,ref:x,font:W5,fontSize:o,position:[-g/2+u+o,y/2-c-o,0],color:e,characters:"0123456789",onUpdate:b=>{b.updateMatrix(),fo.value-=1,b.matrixWorld.copy(b.matrix)},children:[ge.jsx("meshBasicMaterial",{blending:Iu}),"0"]}),p&&ge.jsx(j5,{textAlign:"justify",matrixAutoUpdate:!1,ref:M,font:W5,fontSize:8,position:[-g/2+u+o,y/2-c-o*1.15,0],color:"lightgrey",characters:"0123456789",onUpdate:b=>{b.updateMatrix(),fo.value-=1,b.matrixWorld.copy(b.matrix)},children:ge.jsx("meshBasicMaterial",{blending:Iu})})]})}),pse=({colorBlind:n,customData:e,minimal:t,matrixUpdate:i})=>ge.jsxs(ge.Fragment,{children:[ge.jsx(Po,{colorBlind:n,color:`rgb(${Bs(n).fps.toString()})`,isPerf:!0,metric:"fps",fontSize:14,offsetX:140,round:0}),ge.jsx(Po,{color:`rgb(${Bs(n).cpu.toString()})`,isPerf:!0,metric:"cpu",fontSize:14,offsetX:72,round:3}),ge.jsx(Po,{color:`rgb(${Bs(n).gpu.toString()})`,isPerf:!0,metric:"gpu",fontSize:14,offsetX:10,round:3}),t?null:ge.jsxs(ge.Fragment,{children:[ge.jsx(Po,{metric:"calls",fontSize:14,offsetX:200,round:0,hasInstance:!0}),ge.jsx(Po,{metric:"triangles",fontSize:14,offsetX:260,round:0,hasInstance:!0}),ge.jsx(Po,{isMemory:!0,metric:"geometries",fontSize:14,offsetY:30,offsetX:0,round:0}),ge.jsx(Po,{isMemory:!0,metric:"textures",fontSize:14,offsetY:30,offsetX:80,round:0}),ge.jsx(Po,{isShadersInfo:!0,metric:"programs",fontSize:14,offsetY:30,offsetX:140,round:0}),ge.jsx(Po,{metric:"lines",fontSize:14,offsetY:30,offsetX:200,round:0,hasInstance:!0}),ge.jsx(Po,{metric:"points",fontSize:14,offsetY:30,offsetX:260,round:0,hasInstance:!0}),i&&ge.jsx(Po,{isPerf:!0,metric:"matriceCount",fontSize:14,offsetY:30,offsetX:320,round:0,hasInstance:!0})]}),e&&ge.jsx(Po,{color:`rgb(${Bs(n).custom.toString()})`,customData:e,fontSize:14,offsetY:0,offsetX:t?200:320,round:e.round||2})]}),mse=({colorBlind:n,minimal:e,chart:t={length:120,hz:60}})=>{const i=L.useMemo(()=>({fps:new Float32Array(t.length*3),cpu:new Float32Array(t.length*3),gpu:new Float32Array(t.length*3)}),[t]),r=L.useRef(null),s=L.useRef(null),a=L.useRef(null),o=L.useRef(null),c=L.useMemo(()=>new J(0,0,0),[]),u=(h,p=1,g,y)=>{let x=0;const{width:M,height:b}=y,S=Yo().chart.data[h];if(!S||S.length===0)return;const T=e?2:6,A=e?12:50;let w=S.length;for(let D=0;D<w;D++){let O=(Yo().chart.circularId+D+1)%w;S[O]!==void 0&&(S[O]>x&&(x=S[O]*p),c.set(T+D/(w-1)*(M-T*2)-M/2,Math.min(100,S[O])*p/100*(b-T*2-A)-b/2,0),c.toArray(g.attributes.position.array,D*3))}g.attributes.position.needsUpdate=!0};return Yl(function({viewport:p}){u("fps",1,r.current,p),s.current&&s.current.color.set(Yo().overclockingFps?Bs(n).overClock.toString():`rgb(${Bs(n).fps.toString()})`),u("gpu",5,a.current,p),u("cpu",5,o.current,p)}),ge.jsxs(ge.Fragment,{children:[ge.jsxs("line",{onUpdate:h=>{h.updateMatrix(),fo.value-=1,h.matrixWorld.copy(h.matrix)},children:[ge.jsx("bufferGeometry",{ref:r,children:ge.jsx("bufferAttribute",{attach:"attributes-position",count:t.length,array:i.fps,itemSize:3,usage:Xx,needsUpdate:!0})}),ge.jsx("lineBasicMaterial",{ref:s,color:`rgb(${Bs(n).fps.toString()})`,transparent:!0,opacity:.5})]}),ge.jsxs("line",{onUpdate:h=>{h.updateMatrix(),fo.value-=1,h.matrixWorld.copy(h.matrix)},children:[ge.jsx("bufferGeometry",{ref:a,children:ge.jsx("bufferAttribute",{attach:"attributes-position",count:t.length,array:i.gpu,itemSize:3,usage:Xx,needsUpdate:!0})}),ge.jsx("lineBasicMaterial",{color:`rgb(${Bs(n).gpu.toString()})`,transparent:!0,opacity:.5})]}),ge.jsxs("line",{onUpdate:h=>{h.updateMatrix(),fo.value-=1,h.matrixWorld.copy(h.matrix)},children:[ge.jsx("bufferGeometry",{ref:o,children:ge.jsx("bufferAttribute",{attach:"attributes-position",count:t.length,array:i.cpu,itemSize:3,usage:Xx,needsUpdate:!0})}),ge.jsx("lineBasicMaterial",{color:`rgb(${Bs(n).cpu.toString()})`,transparent:!0,opacity:.5})]})]})},gse=({colorBlind:n,chart:e,customData:t,matrixUpdate:i,showGraph:r=!0,antialias:s=!0,minimal:a})=>{const o=L.useRef(void 0),c=Qo(u=>u.paused);return ge.jsxs(Sre,{style:{display:"flex",position:"absolute",height:`${a?37:r?100:60}px`,minWidth:`${a?"100px":t?"370px":"310px"}`},children:[ge.jsx(dN,{ref:o,orthographic:!0,camera:{rotation:[0,0,0]},dpr:s?[1,2]:1,gl:{antialias:!0,alpha:!0,stencil:!1,depth:!1},onCreated:({scene:u})=>{u.traverse(h=>{h.matrixWorldAutoUpdate=!1,h.matrixAutoUpdate=!1})},flat:!0,style:{marginBottom:"-42px",position:"relative",pointerEvents:"none",background:"transparent !important",height:`${a?37:r?100:60}px`},children:c?null:ge.jsxs(ge.Fragment,{children:[ge.jsx(vse,{}),ge.jsx(pse,{customData:t,minimal:a,matrixUpdate:i}),r&&ge.jsx(mse,{colorBlind:n,minimal:a,chart:e})]})}),c&&ge.jsxs(Ere,{children:[ge.jsx(rse,{})," PAUSED"]})]})},vse=()=>(Yl(function({gl:e,scene:t,camera:i}){i.updateMatrix(),fo.value-=1,i.matrixWorld.copy(i.matrix),i.matrixWorldInverse.copy(i.matrixWorld).invert(),e.render(t,i),Qm.value=0,fo.value=0},1/0),null),yse=L.forwardRef(({portal:n,className:e,children:t,name:i,...r},s)=>{const a=on(h=>h.gl),o=L.useRef(null),c=L.useRef(null),u=n?.current!=null?n.current:a.domElement.parentNode;return L.useLayoutEffect(()=>{if(!o.current||!u)return;const h=document.createElement("div"),p=c.current=mS.createRoot(h);return u.appendChild(h),()=>{p.unmount(),c.current=null,u.removeChild(h)}},[u]),L.useLayoutEffect(()=>{const h=c.current;h&&h.render(ge.jsx("div",{ref:s,className:e,children:t}))}),ge.jsx("group",{name:i,...r,ref:o})});function _se(n){let e=0;for(let i in n.attributes){const r=n.getAttribute(i);e+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}const t=n.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}const X5=(n,e)=>{const t=r=>{switch(r){case 1e3:return"RepeatWrapping";case 1001:return"ClampToEdgeWrapping";case 1002:return"MirroredRepeatWrapping";default:return"ClampToEdgeWrapping"}},i=r=>{switch(r){case 3e3:return"LinearEncoding";case 3001:return"sRGBEncoding";case 3002:return"RGBEEncoding";case 3003:return"LogLuvEncoding";case 3004:return"RGBM7Encoding";case 3005:return"RGBM16Encoding";case 3006:return"RGBDEncoding";case 3007:return"GammaEncoding";default:return"ClampToEdgeWrapping"}};return{name:n,url:e.image.currentSrc,encoding:i(e.encoding),wrapT:t(e.wrapT),flipY:e.flipY.toString()}},xse=({program:n,material:e,setTexNumber:t})=>{const i=Qo(a=>a.gl),[r,s]=L.useState(null);return L.useEffect(()=>{if(i){const a=n?.getUniforms();let o=0;const c=new Map;a.seq.forEach(u=>{if(!u.id.includes("uTroika")&&u.id!=="isOrthographic"&&u.id!=="uvTransform"&&u.id!=="lightProbe"&&u.id!=="projectionMatrix"&&u.id!=="viewMatrix"&&u.id!=="normalMatrix"&&u.id!=="modelMatrix"&&u.id!=="modelViewMatrix"){let h=[],p={name:u.id};u.cache&&(u.cache.forEach(g=>{typeof g<"u"&&h.push(g.toString().substring(0,4))}),p.value=h.join(),e[u.id]&&e[u.id].image&&e[u.id].image&&(o++,p.value=X5(u.id,e[u.id])),p.value||(p.value="empty"),c.set(u.id,p))}}),e.uniforms&&Object.keys(e.uniforms).forEach(u=>{const h=e.uniforms[u];if(h.value){const{value:p}=h;let g={name:u};if(u.includes("uTroika"))return;if(p.isTexture)o++,g.value=X5(u,p);else{let y=JSON.stringify(p);try{y=JSON.stringify(p)}catch{y=p.toString()}g.value=y}c.set(u,g)}}),o>0&&t(o),s(c)}},[]),ge.jsx(xI,{children:r&&Array.from(r.values()).map(a=>ge.jsx("span",{children:typeof a.value=="string"?ge.jsx("li",{children:ge.jsxs("span",{children:[a.name," :"," ",ge.jsxs("b",{children:[a.value.substring(0,30),a.value.length>30?"...":""]})]})}):ge.jsxs(ge.Fragment,{children:[ge.jsx("li",{children:ge.jsxs("b",{children:[a.value.name,":"]})}),ge.jsxs("div",{children:[Object.keys(a.value).map(o=>o!=="name"?ge.jsx("div",{children:o==="url"?ge.jsx("a",{href:a.value[o],target:"_blank",children:ge.jsx("img",{src:a.value[o]})}):ge.jsxs("li",{children:[o,": ",ge.jsx("b",{children:a.value[o]})]})},o):null),ge.jsxs(bI,{onClick:()=>{var o;console.info(e[a.value.name]||((o=e?.uniforms[a.value.name])==null?void 0:o.value))},children:["console.info(",a.value.name,");"]})]})]})},a.name))})},bse=({el:n})=>{Qo(i=>i.log);const e=Qo(i=>i.gl),t=i=>{if(!e)return 0;const r=Math.round(i.drawCounts.total/(e.info.render.triangles+e.info.render.lines+e.info.render.points)*100*10)/10;return isFinite(r)&&r||0};return ge.jsx(ge.Fragment,{children:n.drawCounts.total>0&&ge.jsxs(Is,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[n.drawCounts.type==="Triangle"?ge.jsx(TI,{style:{top:"-1px"}}):ge.jsx(SI,{style:{top:"-1px"}}),n.drawCounts.total,ge.jsxs("small",{children:[n.drawCounts.type,"s"]}),e&&ge.jsxs(Ha,{style:{bottom:"-10px",width:"40px",fontWeight:"bold"},children:[n.visible&&!n.material.wireframe?t(n):0,"%"]})]})})},Sse=({el:n})=>{const[e,t]=L.useState(n.visible),[i,r]=L.useState(n.expand),[s,a]=L.useState(0),{meshes:o,program:c,material:u}=n;return ge.jsxs(Tre,{children:[ge.jsxs(bre,{onClick:()=>{n.expand=!i,Object.keys(o).forEach(h=>{const p=o[h];p.material.wireframe=!1}),r(!i)},children:[ge.jsx(LC,{style:{marginRight:"6px"},children:i?ge.jsx("span",{children:ge.jsx(EI,{})}):ge.jsx("span",{children:ge.jsx(MI,{})})}),c&&ge.jsxs("span",{children:[ge.jsx(Are,{children:c.name}),ge.jsxs(Is,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[ge.jsx(Kre,{style:{top:"-1px"}}),Object.keys(o).length,ge.jsx("small",{children:Object.keys(o).length>1?"users":"user"})]}),s>0&&ge.jsxs(Is,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[s>1?ge.jsx(QA,{style:{top:"-1px"}}):ge.jsx(QA,{style:{top:"-1px"}}),s,ge.jsx("small",{children:"tex"})]}),ge.jsx(bse,{el:n}),u.glslVersion==="300 es"&&ge.jsxs(Is,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[ge.jsx(ase,{style:{top:"-1px"}}),"300",ge.jsx("small",{children:"es"}),ge.jsx(Ha,{style:{bottom:"-10px",width:"40px"},children:"glsl"})]})]}),ge.jsx(Mre,{onPointerEnter:()=>{Object.keys(o).forEach(h=>{const p=o[h];p.material.wireframe=!0})},onPointerLeave:()=>{Object.keys(o).forEach(h=>{const p=o[h];p.material.wireframe=!1})},onClick:h=>{h.stopPropagation(),Object.keys(o).forEach(p=>{const g=o[p],y=!e;g.visible=y,n.visible=y,t(y)})},children:e?ge.jsx(Wre,{}):ge.jsx(Vre,{})})]}),ge.jsxs("div",{style:{maxHeight:i?"9999px":0,overflow:"hidden"},children:[ge.jsxs(V5,{children:[ge.jsx(Pre,{})," Uniforms:"]}),ge.jsx(xse,{program:c,material:u,setTexNumber:a}),ge.jsxs(V5,{children:[ge.jsx(Bre,{})," Geometries:"]}),ge.jsx(xI,{children:o&&Object.keys(o).map(h=>o[h]&&o[h].geometry&&ge.jsxs(Ore,{children:[ge.jsxs("span",{children:[o[h].geometry.type,": "]}),o[h].userData&&o[h].userData.drawCount&&ge.jsxs("b",{children:[ge.jsxs("div",{children:[o[h].userData.drawCount.count,ge.jsxs("small",{children:[" ",o[h].userData.drawCount.type,"s"]})]}),ge.jsx("br",{}),ge.jsxs("div",{children:[Math.round(_se(o[h].geometry)/1024*1e3)/1e3,"Kb",ge.jsx("small",{children:" memory used"})]})]})]},h))}),ge.jsxs(bI,{onClick:()=>{console.info(u)},children:["console.info(",u.type,")"]})]})]})},Ese=()=>{Qo(e=>e.triggerProgramsUpdate);const n=Qo(e=>e.programs);return ge.jsx(Cre,{children:n&&Array.from(n.values()).map(e=>e&&e?ge.jsx(Sse,{el:e},e.material.uuid):null)})},Bs=n=>({overClock:"#ff6eff",fps:n?"100, 143, 255":"238,38,110",cpu:n?"254, 254, 98":"66,226,46",gpu:n?"254,254,254":"253,151,31",custom:n?"86,180,233":"40,255,255"}),Mse=({showGraph:n,colorBlind:e})=>{const t=Qo(r=>r.overclockingFps),i=Qo(r=>r.fpsLimit);return ge.jsxs(Ha,{style:n?{color:t?Bs(e).overClock.toString():`rgb(${Bs(e).fps})`}:{},children:["FPS ",t?`${i}`:""]})},Tse=({showGraph:n,colorBlind:e,customData:t,minimal:i})=>{const r=Qo(s=>s.gl);return r?ge.jsxs(xre,{children:[ge.jsxs(Is,{children:[ge.jsx(Qre,{}),ge.jsx(Ha,{style:n?{color:`rgb(${Bs(e).gpu.toString()})`}:{},children:"GPU"}),ge.jsx(AT,{children:"ms"})]}),ge.jsxs(Is,{children:[ge.jsx(lse,{}),ge.jsx(Ha,{style:n?{color:`rgb(${Bs(e).cpu.toString()})`}:{},children:"CPU"}),ge.jsx(AT,{children:"ms"})]}),ge.jsxs(Is,{children:[ge.jsx(Yre,{}),ge.jsx(Mse,{showGraph:n,colorBlind:e})]}),!i&&r&&ge.jsxs(Is,{children:[ge.jsx(use,{}),ge.jsx(Ha,{children:r.info.render.calls===1?"call":"calls"})]}),!i&&r&&ge.jsxs(Is,{children:[ge.jsx(TI,{}),ge.jsx(Ha,{children:"Triangles"})]}),t&&ge.jsxs(Is,{children:[ge.jsx(Lre,{}),ge.jsx(Ha,{style:n?{color:`rgb(${Bs(e).custom})`}:{},children:t.name}),t.info&&ge.jsx(AT,{children:t.info})]})]}):null},Ase=({showGraph:n,colorBlind:e,deepAnalyze:t,customData:i,matrixUpdate:r,openByDefault:s,minimal:a})=>ge.jsxs(ge.Fragment,{children:[ge.jsx(Tse,{showGraph:n,colorBlind:e,customData:i,minimal:a}),!a&&ge.jsx(Cse,{matrixUpdate:r,openByDefault:s,deepAnalyze:t,showGraph:n})]}),wse=({matrixUpdate:n})=>ge.jsxs("div",{children:[ge.jsxs(Is,{children:[ge.jsx(ese,{}),ge.jsx(Ha,{children:"Geometries"})]}),ge.jsxs(Is,{children:[ge.jsx(QA,{}),ge.jsx(Ha,{children:"Textures"})]}),ge.jsxs(Is,{children:[ge.jsx(SI,{}),ge.jsx(Ha,{children:"shaders"})]}),ge.jsxs(Is,{children:[ge.jsx(nse,{}),ge.jsx(Ha,{children:"Lines"})]}),ge.jsxs(Is,{children:[ge.jsx(Fre,{}),ge.jsx(Ha,{children:"Points"})]}),n&&ge.jsxs(Is,{children:[ge.jsx(kre,{}),ge.jsx(Ha,{children:"Matrices"})]})]}),q5=({tab:n,title:e,set:t})=>{const i=Qo(r=>r.tab);return ge.jsx(LC,{className:`${i===n?" __perf_toggle_tab_active":""}`,onClick:()=>{t(!0),co({tab:n})},children:ge.jsx("span",{children:e})})},Cse=({openByDefault:n,showGraph:e,deepAnalyze:t,matrixUpdate:i})=>{const[r,s]=de.useState(n);return ge.jsxs("span",{children:[ge.jsx(Rse,{show:r,showGraph:e,matrixUpdate:i}),n&&!t?null:ge.jsxs(Rre,{className:"__perf_toggle",children:[t&&ge.jsx(q5,{tab:"programs",title:"Programs",set:s}),t&&ge.jsx(q5,{tab:"infos",title:"Infos",set:s}),ge.jsx(LC,{onClick:()=>{s(!r)},children:r?ge.jsxs("span",{children:[ge.jsx(EI,{})," Minimize"]}):ge.jsxs("span",{children:[ge.jsx(MI,{})," More"]})})]})]})},Rse=({show:n,showGraph:e,matrixUpdate:t})=>{const i=Qo(r=>r.tab);return ge.jsxs(ge.Fragment,{children:[ge.jsx(wse,{matrixUpdate:t}),n&&ge.jsx("div",{children:ge.jsx(wre,{style:{marginTop:e?"38px":0},children:i==="programs"&&ge.jsx(Ese,{})})})]})},Ose=({showGraph:n=!0,colorBlind:e=!1,openByDefault:t=!0,className:i,overClock:r=!1,style:s,position:a="top-right",chart:o,logsPerSecond:c,deepAnalyze:u=!1,antialias:h=!0,customData:p,matrixUpdate:g,minimal:y})=>{const x=L.useRef(null);return ge.jsxs(ge.Fragment,{children:[ge.jsx(yre,{logsPerSecond:c,chart:o,overClock:r,deepAnalyze:u,matrixUpdate:g}),ge.jsx(yse,{name:"r3f-perf",children:ge.jsxs(_re,{className:(i?" ".concat(i):" ")+` ${a||""} ${y?"minimal":""}`,style:{minHeight:y?"37px":n?"100px":"60px",...s},ref:x,children:[ge.jsx(gse,{perfContainerRef:x,colorBlind:e,chart:o,showGraph:n,antialias:h,customData:p,minimal:y,matrixUpdate:g}),ge.jsx(Ase,{colorBlind:e,showGraph:n,deepAnalyze:u,openByDefault:t,customData:p,matrixUpdate:g,minimal:y})]})})]})},Dse=()=>{const n=$d(Z6);return ge.jsx(ge.Fragment,{children:!!n&&ge.jsx("div",{className:"flex items-center",children:ge.jsxs("span",{className:"badge font-mono text-xs",children:["",n.toFixed(2),"ms"]})})})};function Use(){return ge.jsxs("div",{className:"w-screen h-screen",children:[ge.jsxs(dN,{gl:{localClippingEnabled:!0,antialias:!0},children:[ge.jsx(HX,{pixelated:!0}),ge.jsx(kX,{}),ge.jsx(Uee,{}),ge.jsx(TX,{preset:"park",background:!0,blur:.9}),ge.jsx($W,{makeDefault:!0,position:[0,0,1],near:2,far:88888}),ge.jsx(nX,{makeDefault:!0}),ge.jsx(Qie,{}),ge.jsx(lX,{children:ge.jsx(cX,{})}),ge.jsx(Ose,{position:"bottom-left"})]}),ge.jsx("div",{className:"fixed left-4 top-4",children:ge.jsx(Mne,{})}),ge.jsx("div",{className:"fixed left-4 top-62 w-[294px]",children:ge.jsx(W6,{fill:!0,titleBar:{drag:!1,filter:!1}})}),ge.jsx("div",{className:"fixed right-4 top-4",children:ge.jsx(Tne,{})}),ge.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2",children:ge.jsx(Dse,{})})]})}const Lse=new tte;mS.createRoot(document.getElementById("root")).render(ge.jsx(L.StrictMode,{children:ge.jsxs(nte,{client:Lse,children:[ge.jsx(Use,{}),ge.jsx(Gte,{})]})}));</script>
    <style rel="stylesheet" crossorigin>/*! tailwindcss v4.1.13 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-border-style:solid;--tw-ordinal:initial;--tw-slashed-zero:initial;--tw-numeric-figure:initial;--tw-numeric-spacing:initial;--tw-numeric-fraction:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-ease:initial}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-black:#000;--spacing:.25rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--ease-out:cubic-bezier(0,0,.2,1);--ease-in-out:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}:where(:root),:root:has(input.theme-controller[value=light]:checked),[data-theme=light]{color-scheme:light;--color-base-100:oklch(100% 0 0);--color-base-200:oklch(98% 0 0);--color-base-300:oklch(95% 0 0);--color-base-content:oklch(21% .006 285.885);--color-primary:oklch(45% .24 277.023);--color-primary-content:oklch(93% .034 272.788);--color-secondary:oklch(65% .241 354.308);--color-secondary-content:oklch(94% .028 342.258);--color-accent:oklch(77% .152 181.912);--color-accent-content:oklch(38% .063 188.416);--color-neutral:oklch(14% .005 285.823);--color-neutral-content:oklch(92% .004 286.32);--color-info:oklch(74% .16 232.661);--color-info-content:oklch(29% .066 243.157);--color-success:oklch(76% .177 163.223);--color-success-content:oklch(37% .077 168.94);--color-warning:oklch(82% .189 84.429);--color-warning-content:oklch(41% .112 45.904);--color-error:oklch(71% .194 13.428);--color-error-content:oklch(27% .105 12.094);--radius-selector:.5rem;--radius-field:.25rem;--radius-box:.5rem;--size-selector:.25rem;--size-field:.25rem;--border:1px;--depth:1;--noise:0}@media (prefers-color-scheme:dark){:root:not([data-theme]){color-scheme:dark;--color-base-100:oklch(25.33% .016 252.42);--color-base-200:oklch(23.26% .014 253.1);--color-base-300:oklch(21.15% .012 254.09);--color-base-content:oklch(97.807% .029 256.847);--color-primary:oklch(58% .233 277.117);--color-primary-content:oklch(96% .018 272.314);--color-secondary:oklch(65% .241 354.308);--color-secondary-content:oklch(94% .028 342.258);--color-accent:oklch(77% .152 181.912);--color-accent-content:oklch(38% .063 188.416);--color-neutral:oklch(14% .005 285.823);--color-neutral-content:oklch(92% .004 286.32);--color-info:oklch(74% .16 232.661);--color-info-content:oklch(29% .066 243.157);--color-success:oklch(76% .177 163.223);--color-success-content:oklch(37% .077 168.94);--color-warning:oklch(82% .189 84.429);--color-warning-content:oklch(41% .112 45.904);--color-error:oklch(71% .194 13.428);--color-error-content:oklch(27% .105 12.094);--radius-selector:.5rem;--radius-field:.25rem;--radius-box:.5rem;--size-selector:.25rem;--size-field:.25rem;--border:1px;--depth:1;--noise:0}}:root:has(input.theme-controller[value=light]:checked),[data-theme=light]{color-scheme:light;--color-base-100:oklch(100% 0 0);--color-base-200:oklch(98% 0 0);--color-base-300:oklch(95% 0 0);--color-base-content:oklch(21% .006 285.885);--color-primary:oklch(45% .24 277.023);--color-primary-content:oklch(93% .034 272.788);--color-secondary:oklch(65% .241 354.308);--color-secondary-content:oklch(94% .028 342.258);--color-accent:oklch(77% .152 181.912);--color-accent-content:oklch(38% .063 188.416);--color-neutral:oklch(14% .005 285.823);--color-neutral-content:oklch(92% .004 286.32);--color-info:oklch(74% .16 232.661);--color-info-content:oklch(29% .066 243.157);--color-success:oklch(76% .177 163.223);--color-success-content:oklch(37% .077 168.94);--color-warning:oklch(82% .189 84.429);--color-warning-content:oklch(41% .112 45.904);--color-error:oklch(71% .194 13.428);--color-error-content:oklch(27% .105 12.094);--radius-selector:.5rem;--radius-field:.25rem;--radius-box:.5rem;--size-selector:.25rem;--size-field:.25rem;--border:1px;--depth:1;--noise:0}:root:has(input.theme-controller[value=dark]:checked),[data-theme=dark]{color-scheme:dark;--color-base-100:oklch(25.33% .016 252.42);--color-base-200:oklch(23.26% .014 253.1);--color-base-300:oklch(21.15% .012 254.09);--color-base-content:oklch(97.807% .029 256.847);--color-primary:oklch(58% .233 277.117);--color-primary-content:oklch(96% .018 272.314);--color-secondary:oklch(65% .241 354.308);--color-secondary-content:oklch(94% .028 342.258);--color-accent:oklch(77% .152 181.912);--color-accent-content:oklch(38% .063 188.416);--color-neutral:oklch(14% .005 285.823);--color-neutral-content:oklch(92% .004 286.32);--color-info:oklch(74% .16 232.661);--color-info-content:oklch(29% .066 243.157);--color-success:oklch(76% .177 163.223);--color-success-content:oklch(37% .077 168.94);--color-warning:oklch(82% .189 84.429);--color-warning-content:oklch(41% .112 45.904);--color-error:oklch(71% .194 13.428);--color-error-content:oklch(27% .105 12.094);--radius-selector:.5rem;--radius-field:.25rem;--radius-box:.5rem;--size-selector:.25rem;--size-field:.25rem;--border:1px;--depth:1;--noise:0}:where(:root:has(.modal-open,.modal[open],.modal:target,.modal-toggle:checked,.drawer:not(.drawer-open)>.drawer-toggle:checked)){scrollbar-gutter:stable;background-image:linear-gradient(var(--color-base-100),var(--color-base-100));--root-bg:var(--color-base-100)}@supports (color:color-mix(in lab,red,red)){:where(:root:has(.modal-open,.modal[open],.modal:target,.modal-toggle:checked,.drawer:not(.drawer-open)>.drawer-toggle:checked)){--root-bg:color-mix(in srgb,var(--color-base-100),oklch(0% 0 0) 40%)}}:where(.modal[open],.modal-open,.modal-toggle:checked+.modal):not(.modal-start,.modal-end){scrollbar-gutter:stable}@property --radialprogress{syntax: "<percentage>"; inherits: true; initial-value: 0%;}:root{--fx-noise:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cfilter id='a'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.34' numOctaves='4' stitchTiles='stitch'%3E%3C/feTurbulence%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23a)' opacity='0.2'%3E%3C/rect%3E%3C/svg%3E")}:root,[data-theme]{background-color:var(--root-bg,var(--color-base-100));color:var(--color-base-content)}:root{scrollbar-color:currentColor #0000}@supports (color:color-mix(in lab,red,red)){:root{scrollbar-color:color-mix(in oklch,currentColor 35%,#0000)#0000}}:root:has(.modal-open,.modal[open],.modal:target,.modal-toggle:checked,.drawer:not([class*=drawer-open])>.drawer-toggle:checked){overflow:hidden}}@layer components;@layer utilities{.fab{pointer-events:none;z-index:999;font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height));white-space:nowrap;inset-inline-end:1rem;flex-direction:column-reverse;align-items:flex-end;gap:.5rem;display:flex;position:fixed;bottom:1rem}.fab>*{pointer-events:auto;align-items:center;gap:.5rem;display:flex}.fab>:hover,.fab>:has(:focus-visible){z-index:1}.fab>[tabindex]:first-child{transition-property:opacity,visibility,rotate;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);display:grid;position:relative}.fab .fab-close,.fab .fab-main-action{inset-inline-end:0;position:absolute;bottom:0}:is(.fab:focus-within:has(.fab-close),.fab:focus-within:has(.fab-main-action))>[tabindex]{opacity:0;rotate:90deg}.fab:focus-within>[tabindex]:first-child{pointer-events:none}.fab:focus-within>:nth-child(n+2){visibility:visible;--tw-scale-x:100%;--tw-scale-y:100%;--tw-scale-z:100%;scale:var(--tw-scale-x)var(--tw-scale-y);opacity:1}.fab>:nth-child(n+2){visibility:hidden;--tw-scale-x:80%;--tw-scale-y:80%;--tw-scale-z:80%;scale:var(--tw-scale-x)var(--tw-scale-y);opacity:0;transition-property:opacity,scale,visibility;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.fab>:nth-child(n+2).fab-main-action,.fab>:nth-child(n+2).fab-close{--tw-scale-x:100%;--tw-scale-y:100%;--tw-scale-z:100%;scale:var(--tw-scale-x)var(--tw-scale-y)}.fab>:nth-child(3){transition-delay:30ms}.fab>:nth-child(4){transition-delay:60ms}.fab>:nth-child(5){transition-delay:90ms}.fab>:nth-child(6){transition-delay:.12s}.fab>:nth-child(7){display:none}.tooltip{--tt-bg:var(--color-neutral);--tt-off: calc(100% + .5rem) ;--tt-tail: calc(100% + 1px + .25rem) ;display:inline-block;position:relative}.tooltip>:where(.tooltip-content),.tooltip:where([data-tip]):before{border-radius:var(--radius-field);text-align:center;white-space:normal;max-width:20rem;color:var(--color-neutral-content);opacity:0;background-color:var(--tt-bg);pointer-events:none;z-index:2;--tw-content:attr(data-tip);content:var(--tw-content);width:max-content;padding-block:.25rem;padding-inline:.5rem;font-size:.875rem;line-height:1.25;position:absolute}@media (prefers-reduced-motion:no-preference){.tooltip>:where(.tooltip-content),.tooltip:where([data-tip]):before,.tooltip:after{transition:opacity .2s cubic-bezier(.4,0,.2,1) 75ms,transform .2s cubic-bezier(.4,0,.2,1) 75ms}}.tooltip:after{opacity:0;background-color:var(--tt-bg);content:"";pointer-events:none;--mask-tooltip:url("data:image/svg+xml,%3Csvg width='10' height='4' viewBox='0 0 8 4' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0.500009 1C3.5 1 3.00001 4 5.00001 4C7 4 6.5 1 9.5 1C10 1 10 0.499897 10 0H0C-1.99338e-08 0.5 0 1 0.500009 1Z' fill='black'/%3E%3C/svg%3E%0A");width:.625rem;height:.25rem;-webkit-mask-position:-1px 0;mask-position:-1px 0;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-image:var(--mask-tooltip);mask-image:var(--mask-tooltip);display:block;position:absolute}:is(.tooltip.tooltip-open,.tooltip[data-tip]:not([data-tip=""]):hover,.tooltip:not(:has(.tooltip-content:empty)):has(.tooltip-content):hover,.tooltip:has(:focus-visible))>.tooltip-content,:is(.tooltip.tooltip-open,.tooltip[data-tip]:not([data-tip=""]):hover,.tooltip:not(:has(.tooltip-content:empty)):has(.tooltip-content):hover,.tooltip:has(:focus-visible))[data-tip]:before,:is(.tooltip.tooltip-open,.tooltip[data-tip]:not([data-tip=""]):hover,.tooltip:not(:has(.tooltip-content:empty)):has(.tooltip-content):hover,.tooltip:has(:focus-visible)):after{opacity:1;--tt-pos:0rem}@media (prefers-reduced-motion:no-preference){:is(.tooltip.tooltip-open,.tooltip[data-tip]:not([data-tip=""]):hover,.tooltip:not(:has(.tooltip-content:empty)):has(.tooltip-content):hover,.tooltip:has(:focus-visible))>.tooltip-content,:is(.tooltip.tooltip-open,.tooltip[data-tip]:not([data-tip=""]):hover,.tooltip:not(:has(.tooltip-content:empty)):has(.tooltip-content):hover,.tooltip:has(:focus-visible))[data-tip]:before,:is(.tooltip.tooltip-open,.tooltip[data-tip]:not([data-tip=""]):hover,.tooltip:not(:has(.tooltip-content:empty)):has(.tooltip-content):hover,.tooltip:has(:focus-visible)):after{transition:opacity .2s cubic-bezier(.4,0,.2,1),transform .2s cubic-bezier(.4,0,.2,1)}}.tooltip>.tooltip-content,.tooltip[data-tip]:before{transform:translate(-50%)translateY(var(--tt-pos,.25rem));inset:auto auto var(--tt-off)50%}.tooltip:after{transform:translate(-50%)translateY(var(--tt-pos,.25rem));inset:auto auto var(--tt-tail)50%}.tab{cursor:pointer;appearance:none;text-align:center;webkit-user-select:none;-webkit-user-select:none;user-select:none;flex-wrap:wrap;justify-content:center;align-items:center;display:inline-flex;position:relative}@media (hover:hover){.tab:hover{color:var(--color-base-content)}}.tab{--tab-p:1rem;--tab-bg:var(--color-base-100);--tab-border-color:var(--color-base-300);--tab-radius-ss:0;--tab-radius-se:0;--tab-radius-es:0;--tab-radius-ee:0;--tab-order:0;--tab-radius-min:calc(.75rem - var(--border));order:var(--tab-order);height:var(--tab-height);border-color:#0000;padding-inline-start:var(--tab-p);padding-inline-end:var(--tab-p);font-size:.875rem}.tab:is(input[type=radio]){min-width:fit-content}.tab:is(input[type=radio]):after{content:attr(aria-label)}.tab:is(label){position:relative}.tab:is(label) input{cursor:pointer;appearance:none;opacity:0;position:absolute;inset:0}:is(.tab:checked,.tab:is(label:has(:checked)),.tab:is(.tab-active,[aria-selected=true],[aria-current=true],[aria-current=page]))+.tab-content{height:calc(100% - var(--tab-height) + var(--border));display:block}.tab:not(:checked,label:has(:checked),:hover,.tab-active,[aria-selected=true],[aria-current=true],[aria-current=page]){color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.tab:not(:checked,label:has(:checked),:hover,.tab-active,[aria-selected=true],[aria-current=true],[aria-current=page]){color:color-mix(in oklab,var(--color-base-content)50%,transparent)}}.tab:not(input):empty{cursor:default;flex-grow:1}.tab:focus{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.tab:focus{outline-offset:2px;outline:2px solid #0000}}.tab:focus-visible,.tab:is(label:has(:checked:focus-visible)){outline-offset:-5px;outline:2px solid}.tab[disabled]{pointer-events:none;opacity:.4}.dropdown{position-area:var(--anchor-v,bottom)var(--anchor-h,span-right);display:inline-block;position:relative}.dropdown>:not(summary):focus{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.dropdown>:not(summary):focus{outline-offset:2px;outline:2px solid #0000}}.dropdown .dropdown-content{position:absolute}.dropdown:not(details,.dropdown-open,.dropdown-hover:hover,:focus-within) .dropdown-content{transform-origin:top;opacity:0;display:none;scale:95%}.dropdown[popover],.dropdown .dropdown-content{z-index:999}@media (prefers-reduced-motion:no-preference){.dropdown[popover],.dropdown .dropdown-content{transition-behavior:allow-discrete;transition-property:opacity,scale,display;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);animation:.2s dropdown}}@starting-style{.dropdown[popover],.dropdown .dropdown-content{opacity:0;scale:95%}}:is(.dropdown.dropdown-open,.dropdown:not(.dropdown-hover):focus,.dropdown:focus-within)>[tabindex]:first-child{pointer-events:none}:is(.dropdown.dropdown-open,.dropdown:not(.dropdown-hover):focus,.dropdown:focus-within) .dropdown-content{opacity:1}.dropdown.dropdown-hover:hover .dropdown-content{opacity:1;scale:100%}.dropdown:is(details) summary::-webkit-details-marker{display:none}:is(.dropdown.dropdown-open,.dropdown:focus,.dropdown:focus-within) .dropdown-content{scale:100%}.dropdown:where([popover]){background:0 0}.dropdown[popover]{color:inherit;position:fixed}@supports not (position-area:bottom){.dropdown[popover]{margin:auto}.dropdown[popover].dropdown-open:not(:popover-open){transform-origin:top;opacity:0;display:none;scale:95%}.dropdown[popover]::backdrop{background-color:oklab(0% none none/.3)}}.dropdown[popover]:not(.dropdown-open,:popover-open){transform-origin:top;opacity:0;display:none;scale:95%}.loading{pointer-events:none;aspect-ratio:1;vertical-align:middle;width:calc(var(--size-selector,.25rem)*6);background-color:currentColor;display:inline-block;-webkit-mask-image:url("data:image/svg+xml,%3Csvg width='24' height='24' stroke='black' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg transform-origin='center'%3E%3Ccircle cx='12' cy='12' r='9.5' fill='none' stroke-width='3' stroke-linecap='round'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 12 12' to='360 12 12' dur='2s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dasharray' values='0,150;42,150;42,150' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dashoffset' values='0;-16;-59' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3C/circle%3E%3C/g%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg width='24' height='24' stroke='black' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg transform-origin='center'%3E%3Ccircle cx='12' cy='12' r='9.5' fill='none' stroke-width='3' stroke-linecap='round'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 12 12' to='360 12 12' dur='2s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dasharray' values='0,150;42,150;42,150' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dashoffset' values='0;-16;-59' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3C/circle%3E%3C/g%3E%3C/svg%3E");-webkit-mask-position:50%;mask-position:50%;-webkit-mask-size:100%;mask-size:100%;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat}.loading\!{pointer-events:none!important;aspect-ratio:1!important;vertical-align:middle!important;width:calc(var(--size-selector,.25rem)*6)!important;background-color:currentColor!important;display:inline-block!important;-webkit-mask-image:url("data:image/svg+xml,%3Csvg width='24' height='24' stroke='black' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg transform-origin='center'%3E%3Ccircle cx='12' cy='12' r='9.5' fill='none' stroke-width='3' stroke-linecap='round'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 12 12' to='360 12 12' dur='2s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dasharray' values='0,150;42,150;42,150' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dashoffset' values='0;-16;-59' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3C/circle%3E%3C/g%3E%3C/svg%3E")!important;mask-image:url("data:image/svg+xml,%3Csvg width='24' height='24' stroke='black' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg transform-origin='center'%3E%3Ccircle cx='12' cy='12' r='9.5' fill='none' stroke-width='3' stroke-linecap='round'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 12 12' to='360 12 12' dur='2s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dasharray' values='0,150;42,150;42,150' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dashoffset' values='0;-16;-59' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3C/circle%3E%3C/g%3E%3C/svg%3E")!important;-webkit-mask-position:50%!important;mask-position:50%!important;-webkit-mask-size:100%!important;mask-size:100%!important;-webkit-mask-repeat:no-repeat!important;mask-repeat:no-repeat!important}.visible{visibility:visible}.visible\!{visibility:visible!important}.list{flex-direction:column;font-size:.875rem;display:flex}.list :where(.list-row){--list-grid-cols:minmax(0,auto)1fr;border-radius:var(--radius-box);word-break:break-word;grid-auto-flow:column;grid-template-columns:var(--list-grid-cols);gap:1rem;padding:1rem;display:grid;position:relative}.list :where(.list-row):has(.list-col-grow:first-child){--list-grid-cols:1fr}.list :where(.list-row):has(.list-col-grow:nth-child(2)){--list-grid-cols:minmax(0,auto)1fr}.list :where(.list-row):has(.list-col-grow:nth-child(3)){--list-grid-cols:minmax(0,auto)minmax(0,auto)1fr}.list :where(.list-row):has(.list-col-grow:nth-child(4)){--list-grid-cols:minmax(0,auto)minmax(0,auto)minmax(0,auto)1fr}.list :where(.list-row):has(.list-col-grow:nth-child(5)){--list-grid-cols:minmax(0,auto)minmax(0,auto)minmax(0,auto)minmax(0,auto)1fr}.list :where(.list-row):has(.list-col-grow:nth-child(6)){--list-grid-cols:minmax(0,auto)minmax(0,auto)minmax(0,auto)minmax(0,auto)minmax(0,auto)1fr}.list :where(.list-row) :not(.list-col-wrap){grid-row-start:1}:is(.list>:not(:last-child).list-row,.list>:not(:last-child) .list-row):after{content:"";border-bottom:var(--border)solid;inset-inline:var(--radius-box);border-color:var(--color-base-content);position:absolute;bottom:0}@supports (color:color-mix(in lab,red,red)){:is(.list>:not(:last-child).list-row,.list>:not(:last-child) .list-row):after{border-color:color-mix(in oklab,var(--color-base-content)5%,transparent)}}.toast{translate:var(--toast-x,0)var(--toast-y,0);inset-inline:auto 1rem;background-color:#0000;flex-direction:column;gap:.5rem;width:max-content;max-width:calc(100vw - 2rem);display:flex;position:fixed;top:auto;bottom:1rem}@media (prefers-reduced-motion:no-preference){.toast>*{animation:.25s ease-out toast}}.toast:where(.toast-start){--toast-x:0;inset-inline:1rem auto}.toast:where(.toast-center){--toast-x:-50%;inset-inline:50%}.toast:where(.toast-end){--toast-x:0;inset-inline:auto 1rem}.toast:where(.toast-bottom){--toast-y:0;top:auto;bottom:1rem}.toast:where(.toast-middle){--toast-y:-50%;top:50%;bottom:auto}.toast:where(.toast-top){--toast-y:0;top:1rem;bottom:auto}.toggle{border:var(--border)solid currentColor;color:var(--input-color);cursor:pointer;appearance:none;vertical-align:middle;webkit-user-select:none;-webkit-user-select:none;user-select:none;--radius-selector-max:calc(var(--radius-selector) + var(--radius-selector) + var(--radius-selector));border-radius:calc(var(--radius-selector) + min(var(--toggle-p),var(--radius-selector-max)) + min(var(--border),var(--radius-selector-max)));padding:var(--toggle-p);flex-shrink:0;grid-template-columns:0fr 1fr 1fr;place-content:center;display:inline-grid;position:relative;box-shadow:inset 0 1px}@supports (color:color-mix(in lab,red,red)){.toggle{box-shadow:0 1px color-mix(in oklab,currentColor calc(var(--depth)*10%),#0000) inset}}.toggle{--input-color:var(--color-base-content);transition:color .3s,grid-template-columns .2s}@supports (color:color-mix(in lab,red,red)){.toggle{--input-color:color-mix(in oklab,var(--color-base-content)50%,#0000)}}.toggle{--toggle-p:calc(var(--size)*.125);--size:calc(var(--size-selector,.25rem)*6);width:calc((var(--size)*2) - (var(--border) + var(--toggle-p))*2);height:var(--size)}.toggle>*{z-index:1;cursor:pointer;appearance:none;background-color:#0000;border:none;grid-column:2/span 1;grid-row-start:1;height:100%;padding:.125rem;transition:opacity .2s,rotate .4s}.toggle>:focus{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.toggle>:focus{outline-offset:2px;outline:2px solid #0000}}.toggle>:nth-child(2){color:var(--color-base-100);rotate:none}.toggle>:nth-child(3){color:var(--color-base-100);opacity:0;rotate:-15deg}.toggle:has(:checked)>:nth-child(2){opacity:0;rotate:15deg}.toggle:has(:checked)>:nth-child(3){opacity:1;rotate:none}.toggle:before{aspect-ratio:1;border-radius:var(--radius-selector);--tw-content:"";content:var(--tw-content);height:100%;box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px currentColor;background-color:currentColor;grid-row-start:1;grid-column-start:2;transition:background-color .1s,translate .2s,inset-inline-start .2s;position:relative;inset-inline-start:0;translate:0}@supports (color:color-mix(in lab,red,red)){.toggle:before{box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px color-mix(in oklab,currentColor calc(var(--depth)*10%),#0000)}}.toggle:before{background-size:auto,calc(var(--noise)*100%);background-image:none,var(--fx-noise)}@media (forced-colors:active){.toggle:before{outline-style:var(--tw-outline-style);outline-offset:-1px;outline-width:1px}}@media print{.toggle:before{outline-offset:-1rem;outline:.25rem solid}}.toggle:focus-visible,.toggle:has(:focus-visible){outline-offset:2px;outline:2px solid}.toggle:checked,.toggle[aria-checked=true],.toggle:has(>input:checked){background-color:var(--color-base-100);--input-color:var(--color-base-content);grid-template-columns:1fr 1fr 0fr}:is(.toggle:checked,.toggle[aria-checked=true],.toggle:has(>input:checked)):before{background-color:currentColor}@starting-style{:is(.toggle:checked,.toggle[aria-checked=true],.toggle:has(>input:checked)):before{opacity:0}}.toggle:indeterminate{grid-template-columns:.5fr 1fr .5fr}.toggle:disabled{cursor:not-allowed;opacity:.3}.toggle:disabled:before{border:var(--border)solid currentColor;background-color:#0000}.input{cursor:text;border:var(--border)solid #0000;appearance:none;background-color:var(--color-base-100);vertical-align:middle;white-space:nowrap;width:clamp(3rem,20rem,100%);height:var(--size);touch-action:manipulation;border-color:var(--input-color);box-shadow:0 1px var(--input-color) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset;border-start-start-radius:var(--join-ss,var(--radius-field));border-start-end-radius:var(--join-se,var(--radius-field));border-end-end-radius:var(--join-ee,var(--radius-field));border-end-start-radius:var(--join-es,var(--radius-field));flex-shrink:1;align-items:center;gap:.5rem;padding-inline:.75rem;font-size:.875rem;display:inline-flex;position:relative}@supports (color:color-mix(in lab,red,red)){.input{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset}}.input{--size:calc(var(--size-field,.25rem)*10);--input-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.input{--input-color:color-mix(in oklab,var(--color-base-content)20%,#0000)}}.input:where(input){display:inline-flex}.input :where(input){appearance:none;background-color:#0000;border:none;width:100%;height:100%;display:inline-flex}.input :where(input):focus,.input :where(input):focus-within{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.input :where(input):focus,.input :where(input):focus-within{outline-offset:2px;outline:2px solid #0000}}.input :where(input[type=url]),.input :where(input[type=email]){direction:ltr}.input :where(input[type=date]){display:inline-flex}.input:focus,.input:focus-within{--input-color:var(--color-base-content);box-shadow:0 1px var(--input-color)}@supports (color:color-mix(in lab,red,red)){.input:focus,.input:focus-within{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000)}}.input:focus,.input:focus-within{outline:2px solid var(--input-color);outline-offset:2px;isolation:isolate;z-index:1}.input:has(>input[disabled]),.input:is(:disabled,[disabled]),fieldset:disabled .input{cursor:not-allowed;border-color:var(--color-base-200);background-color:var(--color-base-200);color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.input:has(>input[disabled]),.input:is(:disabled,[disabled]),fieldset:disabled .input{color:color-mix(in oklab,var(--color-base-content)40%,transparent)}}:is(.input:has(>input[disabled]),.input:is(:disabled,[disabled]),fieldset:disabled .input)::placeholder{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){:is(.input:has(>input[disabled]),.input:is(:disabled,[disabled]),fieldset:disabled .input)::placeholder{color:color-mix(in oklab,var(--color-base-content)20%,transparent)}}.input:has(>input[disabled]),.input:is(:disabled,[disabled]),fieldset:disabled .input{box-shadow:none}.input:has(>input[disabled])>input[disabled]{cursor:not-allowed}.input::-webkit-date-and-time-value{text-align:inherit}.input[type=number]::-webkit-inner-spin-button{margin-block:-.75rem;margin-inline-end:-.75rem}.input::-webkit-calendar-picker-indicator{position:absolute;inset-inline-end:.75em}.input:has(>input[type=date]) :where(input[type=date]){webkit-appearance:none;appearance:none;display:inline-flex}.input:has(>input[type=date]) input[type=date]::-webkit-calendar-picker-indicator{cursor:pointer;width:1em;height:1em;position:absolute;inset-inline-end:.75em}.table{border-radius:var(--radius-box);text-align:left;width:100%;font-size:.875rem;position:relative}.table:where(:dir(rtl),[dir=rtl],[dir=rtl] *){text-align:right}@media (hover:hover){:is(.table tr.row-hover,.table tr.row-hover:nth-child(2n)):hover{background-color:var(--color-base-200)}}.table :where(th,td){vertical-align:middle;padding-block:.75rem;padding-inline:1rem}.table :where(thead,tfoot){white-space:nowrap;color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.table :where(thead,tfoot){color:color-mix(in oklab,var(--color-base-content)60%,transparent)}}.table :where(thead,tfoot){font-size:.875rem;font-weight:600}.table :where(tfoot){border-top:var(--border)solid var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.table :where(tfoot){border-top:var(--border)solid color-mix(in oklch,var(--color-base-content)5%,#0000)}}.table :where(.table-pin-rows thead tr){z-index:1;background-color:var(--color-base-100);position:sticky;top:0}.table :where(.table-pin-rows tfoot tr){z-index:1;background-color:var(--color-base-100);position:sticky;bottom:0}.table :where(.table-pin-cols tr th){background-color:var(--color-base-100);position:sticky;left:0;right:0}.table :where(thead tr,tbody tr:not(:last-child)){border-bottom:var(--border)solid var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.table :where(thead tr,tbody tr:not(:last-child)){border-bottom:var(--border)solid color-mix(in oklch,var(--color-base-content)5%,#0000)}}.steps{counter-reset:step;grid-auto-columns:1fr;grid-auto-flow:column;display:inline-grid;overflow:auto hidden}.steps .step{text-align:center;--step-bg:var(--color-base-300);--step-fg:var(--color-base-content);grid-template-rows:40px 1fr;grid-template-columns:auto;place-items:center;min-width:4rem;display:grid}.steps .step:before{width:100%;height:.5rem;color:var(--step-bg);background-color:var(--step-bg);--tw-content:"";content:var(--tw-content);border:1px solid;grid-row-start:1;grid-column-start:1;margin-inline-start:-100%;top:0}.steps .step>.step-icon,.steps .step:not(:has(.step-icon)):after{content:counter(step);counter-increment:step;z-index:1;color:var(--step-fg);background-color:var(--step-bg);border:1px solid var(--step-bg);border-radius:3.40282e38px;grid-row-start:1;grid-column-start:1;place-self:center;place-items:center;width:2rem;height:2rem;display:grid;position:relative}.steps .step:first-child:before{content:none}.steps .step[data-content]:after{content:attr(data-content)}.steps .step-neutral+.step-neutral:before,.steps .step-neutral:after,.steps .step-neutral>.step-icon{--step-bg:var(--color-neutral);--step-fg:var(--color-neutral-content)}.steps .step-primary+.step-primary:before,.steps .step-primary:after,.steps .step-primary>.step-icon{--step-bg:var(--color-primary);--step-fg:var(--color-primary-content)}.steps .step-secondary+.step-secondary:before,.steps .step-secondary:after,.steps .step-secondary>.step-icon{--step-bg:var(--color-secondary);--step-fg:var(--color-secondary-content)}.steps .step-accent+.step-accent:before,.steps .step-accent:after,.steps .step-accent>.step-icon{--step-bg:var(--color-accent);--step-fg:var(--color-accent-content)}.steps .step-info+.step-info:before,.steps .step-info:after,.steps .step-info>.step-icon{--step-bg:var(--color-info);--step-fg:var(--color-info-content)}.steps .step-success+.step-success:before,.steps .step-success:after,.steps .step-success>.step-icon{--step-bg:var(--color-success);--step-fg:var(--color-success-content)}.steps .step-warning+.step-warning:before,.steps .step-warning:after,.steps .step-warning>.step-icon{--step-bg:var(--color-warning);--step-fg:var(--color-warning-content)}.steps .step-error+.step-error:before,.steps .step-error:after,.steps .step-error>.step-icon{--step-bg:var(--color-error);--step-fg:var(--color-error-content)}.steps\!{counter-reset:step!important;grid-auto-columns:1fr!important;grid-auto-flow:column!important;display:inline-grid!important;overflow:auto hidden!important}.steps\! .step{text-align:center!important;--step-bg:var(--color-base-300)!important;--step-fg:var(--color-base-content)!important;grid-template-rows:40px 1fr!important;grid-template-columns:auto!important;place-items:center!important;min-width:4rem!important;display:grid!important}.steps\! .step:before{width:100%!important;height:.5rem!important;color:var(--step-bg)!important;background-color:var(--step-bg)!important;--tw-content:""!important;content:var(--tw-content)!important;border:1px solid!important;grid-row-start:1!important;grid-column-start:1!important;margin-inline-start:-100%!important;top:0!important}.steps\! .step>.step-icon,.steps\! .step:not(:has(.step-icon)):after{content:counter(step)!important;counter-increment:step!important;z-index:1!important;color:var(--step-fg)!important;background-color:var(--step-bg)!important;border:1px solid var(--step-bg)!important;border-radius:3.40282e38px!important;grid-row-start:1!important;grid-column-start:1!important;place-self:center!important;place-items:center!important;width:2rem!important;height:2rem!important;display:grid!important;position:relative!important}.steps\! .step:first-child:before{content:none!important}.steps\! .step[data-content]:after{content:attr(data-content)!important}.steps\! .step-neutral+.step-neutral:before,.steps\! .step-neutral:after,.steps\! .step-neutral>.step-icon{--step-bg:var(--color-neutral)!important;--step-fg:var(--color-neutral-content)!important}.steps\! .step-primary+.step-primary:before,.steps\! .step-primary:after,.steps\! .step-primary>.step-icon{--step-bg:var(--color-primary)!important;--step-fg:var(--color-primary-content)!important}.steps\! .step-secondary+.step-secondary:before,.steps\! .step-secondary:after,.steps\! .step-secondary>.step-icon{--step-bg:var(--color-secondary)!important;--step-fg:var(--color-secondary-content)!important}.steps\! .step-accent+.step-accent:before,.steps\! .step-accent:after,.steps\! .step-accent>.step-icon{--step-bg:var(--color-accent)!important;--step-fg:var(--color-accent-content)!important}.steps\! .step-info+.step-info:before,.steps\! .step-info:after,.steps\! .step-info>.step-icon{--step-bg:var(--color-info)!important;--step-fg:var(--color-info-content)!important}.steps\! .step-success+.step-success:before,.steps\! .step-success:after,.steps\! .step-success>.step-icon{--step-bg:var(--color-success)!important;--step-fg:var(--color-success-content)!important}.steps\! .step-warning+.step-warning:before,.steps\! .step-warning:after,.steps\! .step-warning>.step-icon{--step-bg:var(--color-warning)!important;--step-fg:var(--color-warning-content)!important}.steps\! .step-error+.step-error:before,.steps\! .step-error:after,.steps\! .step-error>.step-icon{--step-bg:var(--color-error)!important;--step-fg:var(--color-error-content)!important}.range{appearance:none;webkit-appearance:none;--range-thumb:var(--color-base-100);--range-thumb-size:calc(var(--size-selector,.25rem)*6);--range-progress:currentColor;--range-fill:1;--range-p:.25rem;--range-bg:currentColor}@supports (color:color-mix(in lab,red,red)){.range{--range-bg:color-mix(in oklab,currentColor 10%,#0000)}}.range{cursor:pointer;vertical-align:middle;--radius-selector-max:calc(var(--radius-selector) + var(--radius-selector) + var(--radius-selector));border-radius:calc(var(--radius-selector) + min(var(--range-p),var(--radius-selector-max)));width:clamp(3rem,20rem,100%);height:var(--range-thumb-size);background-color:#0000;border:none;overflow:hidden}[dir=rtl] .range{--range-dir:-1}.range:focus{outline:none}.range:focus-visible{outline-offset:2px;outline:2px solid}.range::-webkit-slider-runnable-track{background-color:var(--range-bg);border-radius:var(--radius-selector);width:100%;height:calc(var(--range-thumb-size)*.5)}@media (forced-colors:active){.range::-webkit-slider-runnable-track{border:1px solid}.range::-moz-range-track{border:1px solid}}.range::-webkit-slider-thumb{box-sizing:border-box;border-radius:calc(var(--radius-selector) + min(var(--range-p),var(--radius-selector-max)));height:var(--range-thumb-size);width:var(--range-thumb-size);border:var(--range-p)solid;appearance:none;webkit-appearance:none;color:var(--range-progress);box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px currentColor,0 0 0 2rem var(--range-thumb) inset,calc((var(--range-dir,1)*-100rem) - (var(--range-dir,1)*var(--range-thumb-size)/2)) 0 0 calc(100rem*var(--range-fill));background-color:currentColor;position:relative;top:50%;transform:translateY(-50%)}@supports (color:color-mix(in lab,red,red)){.range::-webkit-slider-thumb{box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px color-mix(in oklab,currentColor calc(var(--depth)*10%),#0000),0 0 0 2rem var(--range-thumb) inset,calc((var(--range-dir,1)*-100rem) - (var(--range-dir,1)*var(--range-thumb-size)/2)) 0 0 calc(100rem*var(--range-fill))}}.range::-moz-range-track{background-color:var(--range-bg);border-radius:var(--radius-selector);width:100%;height:calc(var(--range-thumb-size)*.5)}.range::-moz-range-thumb{box-sizing:border-box;border-radius:calc(var(--radius-selector) + min(var(--range-p),var(--radius-selector-max)));height:var(--range-thumb-size);width:var(--range-thumb-size);border:var(--range-p)solid;color:var(--range-progress);box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px currentColor,0 0 0 2rem var(--range-thumb) inset,calc((var(--range-dir,1)*-100rem) - (var(--range-dir,1)*var(--range-thumb-size)/2)) 0 0 calc(100rem*var(--range-fill));background-color:currentColor;position:relative;top:50%}@supports (color:color-mix(in lab,red,red)){.range::-moz-range-thumb{box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px color-mix(in oklab,currentColor calc(var(--depth)*10%),#0000),0 0 0 2rem var(--range-thumb) inset,calc((var(--range-dir,1)*-100rem) - (var(--range-dir,1)*var(--range-thumb-size)/2)) 0 0 calc(100rem*var(--range-fill))}}.range:disabled{cursor:not-allowed;opacity:.3}.range\!{appearance:none!important;webkit-appearance:none!important;--range-thumb:var(--color-base-100)!important;--range-thumb-size:calc(var(--size-selector,.25rem)*6)!important;--range-progress:currentColor!important;--range-fill:1!important;--range-p:.25rem!important;--range-bg:currentColor!important}@supports (color:color-mix(in lab,red,red)){.range\!{--range-bg:color-mix(in oklab,currentColor 10%,#0000)!important}}.range\!{cursor:pointer!important;vertical-align:middle!important;--radius-selector-max:calc(var(--radius-selector) + var(--radius-selector) + var(--radius-selector))!important;border-radius:calc(var(--radius-selector) + min(var(--range-p),var(--radius-selector-max)))!important;width:clamp(3rem,20rem,100%)!important;height:var(--range-thumb-size)!important;background-color:#0000!important;border:none!important;overflow:hidden!important}[dir=rtl] .range\!{--range-dir:-1!important}.range\!:focus{outline:none!important}.range\!:focus-visible{outline-offset:2px!important;outline:2px solid!important}.range\!::-webkit-slider-runnable-track{background-color:var(--range-bg)!important;border-radius:var(--radius-selector)!important;width:100%!important;height:calc(var(--range-thumb-size)*.5)!important}@media (forced-colors:active){.range\!::-webkit-slider-runnable-track{border:1px solid!important}.range\!::-moz-range-track{border:1px solid!important}}.range\!::-webkit-slider-thumb{box-sizing:border-box!important;border-radius:calc(var(--radius-selector) + min(var(--range-p),var(--radius-selector-max)))!important;height:var(--range-thumb-size)!important;width:var(--range-thumb-size)!important;border:var(--range-p)solid!important;appearance:none!important;webkit-appearance:none!important;color:var(--range-progress)!important;box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px currentColor,0 0 0 2rem var(--range-thumb) inset,calc((var(--range-dir,1)*-100rem) - (var(--range-dir,1)*var(--range-thumb-size)/2)) 0 0 calc(100rem*var(--range-fill))!important;background-color:currentColor!important;position:relative!important;top:50%!important;transform:translateY(-50%)!important}@supports (color:color-mix(in lab,red,red)){.range\!::-webkit-slider-thumb{box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px color-mix(in oklab,currentColor calc(var(--depth)*10%),#0000),0 0 0 2rem var(--range-thumb) inset,calc((var(--range-dir,1)*-100rem) - (var(--range-dir,1)*var(--range-thumb-size)/2)) 0 0 calc(100rem*var(--range-fill))!important}}.range\!::-moz-range-track{background-color:var(--range-bg)!important;border-radius:var(--radius-selector)!important;width:100%!important;height:calc(var(--range-thumb-size)*.5)!important}.range\!::-moz-range-thumb{box-sizing:border-box!important;border-radius:calc(var(--radius-selector) + min(var(--range-p),var(--radius-selector-max)))!important;height:var(--range-thumb-size)!important;width:var(--range-thumb-size)!important;border:var(--range-p)solid!important;color:var(--range-progress)!important;box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px currentColor,0 0 0 2rem var(--range-thumb) inset,calc((var(--range-dir,1)*-100rem) - (var(--range-dir,1)*var(--range-thumb-size)/2)) 0 0 calc(100rem*var(--range-fill))!important;background-color:currentColor!important;position:relative!important;top:50%!important}@supports (color:color-mix(in lab,red,red)){.range\!::-moz-range-thumb{box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px color-mix(in oklab,currentColor calc(var(--depth)*10%),#0000),0 0 0 2rem var(--range-thumb) inset,calc((var(--range-dir,1)*-100rem) - (var(--range-dir,1)*var(--range-thumb-size)/2)) 0 0 calc(100rem*var(--range-fill))!important}}.range\!:disabled{cursor:not-allowed!important;opacity:.3!important}.select{border:var(--border)solid #0000;appearance:none;background-color:var(--color-base-100);vertical-align:middle;width:clamp(3rem,20rem,100%);height:var(--size);touch-action:manipulation;text-overflow:ellipsis;box-shadow:0 1px var(--input-color) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset;background-image:linear-gradient(45deg,#0000 50%,currentColor 50%),linear-gradient(135deg,currentColor 50%,#0000 50%);background-position:calc(100% - 20px) calc(1px + 50%),calc(100% - 16.1px) calc(1px + 50%);background-repeat:no-repeat;background-size:4px 4px,4px 4px;border-start-start-radius:var(--join-ss,var(--radius-field));border-start-end-radius:var(--join-se,var(--radius-field));border-end-end-radius:var(--join-ee,var(--radius-field));border-end-start-radius:var(--join-es,var(--radius-field));flex-shrink:1;align-items:center;gap:.375rem;padding-inline:.75rem 1.75rem;font-size:.875rem;display:inline-flex;position:relative}@supports (color:color-mix(in lab,red,red)){.select{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset}}.select{border-color:var(--input-color);--input-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.select{--input-color:color-mix(in oklab,var(--color-base-content)20%,#0000)}}.select{--size:calc(var(--size-field,.25rem)*10)}[dir=rtl] .select{background-position:12px calc(1px + 50%),16px calc(1px + 50%)}.select select{appearance:none;width:calc(100% + 2.75rem);height:calc(100% - calc(var(--border)*2));background:inherit;border-radius:inherit;border-style:none;align-items:center;margin-inline:-.75rem -1.75rem;padding-inline:.75rem 1.75rem}.select select:focus,.select select:focus-within{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.select select:focus,.select select:focus-within{outline-offset:2px;outline:2px solid #0000}}.select select:not(:last-child){background-image:none;margin-inline-end:-1.375rem}.select:focus,.select:focus-within{--input-color:var(--color-base-content);box-shadow:0 1px var(--input-color)}@supports (color:color-mix(in lab,red,red)){.select:focus,.select:focus-within{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000)}}.select:focus,.select:focus-within{outline:2px solid var(--input-color);outline-offset:2px;isolation:isolate;z-index:1}.select:has(>select[disabled]),.select:is(:disabled,[disabled]),fieldset:disabled .select{cursor:not-allowed;border-color:var(--color-base-200);background-color:var(--color-base-200);color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.select:has(>select[disabled]),.select:is(:disabled,[disabled]),fieldset:disabled .select{color:color-mix(in oklab,var(--color-base-content)40%,transparent)}}:is(.select:has(>select[disabled]),.select:is(:disabled,[disabled]),fieldset:disabled .select)::placeholder{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){:is(.select:has(>select[disabled]),.select:is(:disabled,[disabled]),fieldset:disabled .select)::placeholder{color:color-mix(in oklab,var(--color-base-content)20%,transparent)}}.select:has(>select[disabled])>select[disabled]{cursor:not-allowed}@supports (appearance:base-select){.select,.select select{appearance:base-select}:is(.select,.select select)::picker(select){appearance:base-select}}:is(.select,.select select)::picker(select){color:inherit;border:var(--border)solid var(--color-base-200);border-radius:var(--radius-box);background-color:inherit;max-height:min(24rem,70dvh);box-shadow:0 2px calc(var(--depth)*3px) -2px #0003;box-shadow:0 20px 25px -5px rgb(0 0 0/calc(var(--depth)*.1)),0 8px 10px -6px rgb(0 0 0/calc(var(--depth)*.1));margin-block:.5rem;padding:.5rem}:is(.select,.select select)::picker-icon{display:none}:is(.select,.select select) optgroup{padding-top:.5em}:is(.select,.select select) optgroup option:first-child{margin-top:.5em}:is(.select,.select select) option{border-radius:var(--radius-field);padding-block:.375rem;padding-inline:.75rem;transition-property:color,background-color;transition-duration:.2s;transition-timing-function:cubic-bezier(0,0,.2,1)}:is(.select,.select select) option:not(:disabled):hover,:is(.select,.select select) option:not(:disabled):focus-visible{cursor:pointer;background-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){:is(.select,.select select) option:not(:disabled):hover,:is(.select,.select select) option:not(:disabled):focus-visible{background-color:color-mix(in oklab,var(--color-base-content)10%,transparent)}}:is(.select,.select select) option:not(:disabled):hover,:is(.select,.select select) option:not(:disabled):focus-visible{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){:is(.select,.select select) option:not(:disabled):hover,:is(.select,.select select) option:not(:disabled):focus-visible{outline-offset:2px;outline:2px solid #0000}}:is(.select,.select select) option:not(:disabled):active{background-color:var(--color-neutral);color:var(--color-neutral-content);box-shadow:0 2px calc(var(--depth)*3px) -2px var(--color-neutral)}.checkbox{border:var(--border)solid var(--input-color,var(--color-base-content))}@supports (color:color-mix(in lab,red,red)){.checkbox{border:var(--border)solid var(--input-color,color-mix(in oklab,var(--color-base-content)20%,#0000))}}.checkbox{cursor:pointer;appearance:none;border-radius:var(--radius-selector);vertical-align:middle;color:var(--color-base-content);box-shadow:0 1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 0 #0000 inset,0 0 #0000;--size:calc(var(--size-selector,.25rem)*6);width:var(--size);height:var(--size);background-size:auto,calc(var(--noise)*100%);background-image:none,var(--fx-noise);flex-shrink:0;padding:.25rem;transition:background-color .2s,box-shadow .2s;display:inline-block;position:relative}.checkbox:before{--tw-content:"";content:var(--tw-content);opacity:0;clip-path:polygon(20% 100%,20% 80%,50% 80%,50% 80%,70% 80%,70% 100%);width:100%;height:100%;box-shadow:0 3px oklch(100% 0 0/calc(var(--depth)*.1)) inset;background-color:currentColor;font-size:1rem;line-height:.75;transition:clip-path .3s .1s,opacity .1s .1s,rotate .3s .1s,translate .3s .1s;display:block;rotate:45deg}.checkbox:focus-visible{outline:2px solid var(--input-color,currentColor);outline-offset:2px}.checkbox:checked,.checkbox[aria-checked=true]{background-color:var(--input-color,#0000);box-shadow:0 0 #0000 inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px oklch(0% 0 0/calc(var(--depth)*.1))}:is(.checkbox:checked,.checkbox[aria-checked=true]):before{clip-path:polygon(20% 100%,20% 80%,50% 80%,50% 0%,70% 0%,70% 100%);opacity:1}@media (forced-colors:active){:is(.checkbox:checked,.checkbox[aria-checked=true]):before{--tw-content:"";clip-path:none;background-color:#0000;rotate:none}}@media print{:is(.checkbox:checked,.checkbox[aria-checked=true]):before{--tw-content:"";clip-path:none;background-color:#0000;rotate:none}}.checkbox:indeterminate{background-color:var(--input-color,var(--color-base-content))}@supports (color:color-mix(in lab,red,red)){.checkbox:indeterminate{background-color:var(--input-color,color-mix(in oklab,var(--color-base-content)20%,#0000))}}.checkbox:indeterminate:before{opacity:1;clip-path:polygon(20% 100%,20% 80%,50% 80%,50% 80%,80% 80%,80% 100%);translate:0 -35%;rotate:none}.checkbox:disabled{cursor:not-allowed;opacity:.2}.radio{cursor:pointer;appearance:none;vertical-align:middle;border:var(--border)solid var(--input-color,currentColor);border-radius:3.40282e38px;flex-shrink:0;padding:.25rem;display:inline-block;position:relative}@supports (color:color-mix(in lab,red,red)){.radio{border:var(--border)solid var(--input-color,color-mix(in srgb,currentColor 20%,#0000))}}.radio{box-shadow:0 1px oklch(0% 0 0/calc(var(--depth)*.1)) inset;--size:calc(var(--size-selector,.25rem)*6);width:var(--size);height:var(--size);color:var(--input-color,currentColor)}.radio:before{--tw-content:"";content:var(--tw-content);background-size:auto,calc(var(--noise)*100%);background-image:none,var(--fx-noise);border-radius:3.40282e38px;width:100%;height:100%;display:block}.radio:focus-visible{outline:2px solid}.radio:checked,.radio[aria-checked=true]{background-color:var(--color-base-100);border-color:currentColor}@media (prefers-reduced-motion:no-preference){.radio:checked,.radio[aria-checked=true]{animation:.2s ease-out radio}}:is(.radio:checked,.radio[aria-checked=true]):before{box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px oklch(0% 0 0/calc(var(--depth)*.1));background-color:currentColor}@media (forced-colors:active){:is(.radio:checked,.radio[aria-checked=true]):before{outline-style:var(--tw-outline-style);outline-offset:-1px;outline-width:1px}}@media print{:is(.radio:checked,.radio[aria-checked=true]):before{outline-offset:-1rem;outline:.25rem solid}}.radio:disabled{cursor:not-allowed;opacity:.2}.rating{vertical-align:middle;display:inline-flex;position:relative}.rating input{appearance:none;border:none}.rating :where(*){background-color:var(--color-base-content);opacity:.2;border-radius:0;width:1.5rem;height:1.5rem}@media (prefers-reduced-motion:no-preference){.rating :where(*){animation:.25s ease-out rating}}.rating :where(*):is(input){cursor:pointer}.rating .rating-hidden{background-color:#0000;width:.5rem}.rating input[type=radio]:checked{background-image:none}.rating :checked,.rating [aria-checked=true],.rating [aria-current=true],.rating :has(~:checked,~[aria-checked=true],~[aria-current=true]){opacity:1}.rating :focus-visible{scale:1.1}@media (prefers-reduced-motion:no-preference){.rating :focus-visible{transition:scale .2s ease-out}}.rating :active:focus{animation:none;scale:1.1}.rating.rating-xs :where(:not(.rating-hidden)){width:1rem;height:1rem}.rating.rating-sm :where(:not(.rating-hidden)){width:1.25rem;height:1.25rem}.rating.rating-md :where(:not(.rating-hidden)){width:1.5rem;height:1.5rem}.rating.rating-lg :where(:not(.rating-hidden)){width:1.75rem;height:1.75rem}.rating.rating-xl :where(:not(.rating-hidden)){width:2rem;height:2rem}.stats{border-radius:var(--radius-box);grid-auto-flow:column;display:inline-grid;position:relative;overflow-x:auto}.progress{appearance:none;border-radius:var(--radius-box);background-color:currentColor;width:100%;height:.5rem;position:relative;overflow:hidden}@supports (color:color-mix(in lab,red,red)){.progress{background-color:color-mix(in oklab,currentColor 20%,transparent)}}.progress{color:var(--color-base-content)}.progress:indeterminate{background-image:repeating-linear-gradient(90deg,currentColor -1% 10%,#0000 10% 90%);background-position-x:15%;background-size:200%}@media (prefers-reduced-motion:no-preference){.progress:indeterminate{animation:5s ease-in-out infinite progress}}@supports ((-moz-appearance:none)){.progress:indeterminate::-moz-progress-bar{background-color:#0000}@media (prefers-reduced-motion:no-preference){.progress:indeterminate::-moz-progress-bar{background-image:repeating-linear-gradient(90deg,currentColor -1% 10%,#0000 10% 90%);background-position-x:15%;background-size:200%;animation:5s ease-in-out infinite progress}}.progress::-moz-progress-bar{border-radius:var(--radius-box);background-color:currentColor}}@supports ((-webkit-appearance:none)){.progress::-webkit-progress-bar{border-radius:var(--radius-box);background-color:#0000}.progress::-webkit-progress-value{border-radius:var(--radius-box);background-color:currentColor}}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.tooltip-bottom>.tooltip-content,.tooltip-bottom[data-tip]:before{transform:translate(-50%)translateY(var(--tt-pos,-.25rem));inset:var(--tt-off)auto auto 50%}.tooltip-bottom:after{transform:translate(-50%)translateY(var(--tt-pos,-.25rem))rotate(180deg);inset:var(--tt-tail)auto auto 50%}.top-4{top:calc(var(--spacing)*4)}.top-48{top:calc(var(--spacing)*48)}.top-62{top:calc(var(--spacing)*62)}.right-4{right:calc(var(--spacing)*4)}.bottom-4{bottom:calc(var(--spacing)*4)}.left-1{left:calc(var(--spacing)*1)}.left-1\/2{left:50%}.left-4{left:calc(var(--spacing)*4)}.file-input{cursor:pointer;border:var(--border)solid #0000;appearance:none;background-color:var(--color-base-100);vertical-align:middle;webkit-user-select:none;-webkit-user-select:none;user-select:none;width:clamp(3rem,20rem,100%);height:var(--size);border-color:var(--input-color);box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset;--size:calc(var(--size-field,.25rem)*10);--input-color:color-mix(in oklab,var(--color-base-content)20%,#0000);border-start-start-radius:var(--join-ss,var(--radius-field));border-start-end-radius:var(--join-se,var(--radius-field));border-end-end-radius:var(--join-ee,var(--radius-field));border-end-start-radius:var(--join-es,var(--radius-field));align-items:center;padding-inline-end:.75rem;font-size:.875rem;line-height:2;display:inline-flex}.file-input::file-selector-button{cursor:pointer;webkit-user-select:none;-webkit-user-select:none;user-select:none;height:calc(100% + var(--border)*2);margin-inline-end:1rem;margin-block:calc(var(--border)*-1);color:var(--btn-fg);border-width:var(--border);border-style:solid;border-color:var(--btn-border);background-color:var(--btn-bg);background-size:calc(var(--noise)*100%);background-image:var(--btn-noise);text-shadow:0 .5px oklch(1 0 0/calc(var(--depth)*.15));box-shadow:0 .5px 0 .5px #fff inset,var(--btn-shadow);border-start-start-radius:calc(var(--join-ss,var(--radius-field) - var(--border)));border-end-start-radius:calc(var(--join-es,var(--radius-field) - var(--border)));margin-inline-start:calc(var(--border)*-1);padding-inline:1rem;font-size:.875rem;font-weight:600}@supports (color:color-mix(in lab,red,red)){.file-input::file-selector-button{box-shadow:0 .5px 0 .5px color-mix(in oklab,color-mix(in oklab,white 30%,var(--btn-bg))calc(var(--depth)*20%),#0000) inset,var(--btn-shadow)}}.file-input::file-selector-button{--size:calc(var(--size-field,.25rem)*10);--btn-bg:var(--btn-color,var(--color-base-200));--btn-fg:var(--color-base-content);--btn-border:var(--btn-bg)}@supports (color:color-mix(in lab,red,red)){.file-input::file-selector-button{--btn-border:color-mix(in oklab,var(--btn-bg),#000 5%)}}.file-input::file-selector-button{--btn-shadow:0 3px 2px -2px var(--btn-bg),0 4px 3px -2px var(--btn-bg)}@supports (color:color-mix(in lab,red,red)){.file-input::file-selector-button{--btn-shadow:0 3px 2px -2px color-mix(in oklab,var(--btn-bg)30%,#0000),0 4px 3px -2px color-mix(in oklab,var(--btn-bg)30%,#0000)}}.file-input::file-selector-button{--btn-noise:var(--fx-noise)}.file-input:focus{--input-color:var(--color-base-content);box-shadow:0 1px var(--input-color)}@supports (color:color-mix(in lab,red,red)){.file-input:focus{box-shadow:0 1px color-mix(in oklab,var(--input-color)10%,#0000)}}.file-input:focus{outline:2px solid var(--input-color);outline-offset:2px;isolation:isolate}.file-input:has(>input[disabled]),.file-input:is(:disabled,[disabled]){cursor:not-allowed;border-color:var(--color-base-200);background-color:var(--color-base-200)}:is(.file-input:has(>input[disabled]),.file-input:is(:disabled,[disabled]))::placeholder{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){:is(.file-input:has(>input[disabled]),.file-input:is(:disabled,[disabled]))::placeholder{color:color-mix(in oklab,var(--color-base-content)20%,transparent)}}.file-input:has(>input[disabled]),.file-input:is(:disabled,[disabled]){box-shadow:none;color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.file-input:has(>input[disabled]),.file-input:is(:disabled,[disabled]){color:color-mix(in oklch,var(--color-base-content)20%,#0000)}}:is(.file-input:has(>input[disabled]),.file-input:is(:disabled,[disabled]))::file-selector-button{cursor:not-allowed;border-color:var(--color-base-200);background-color:var(--color-base-200);--btn-border:#0000;--btn-noise:none;--btn-fg:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){:is(.file-input:has(>input[disabled]),.file-input:is(:disabled,[disabled]))::file-selector-button{--btn-fg:color-mix(in oklch,var(--color-base-content)20%,#0000)}}.textarea{border:var(--border)solid #0000;appearance:none;border-radius:var(--radius-field);background-color:var(--color-base-100);vertical-align:middle;touch-action:manipulation;border-color:var(--input-color);width:clamp(3rem,20rem,100%);min-height:5rem;box-shadow:0 1px var(--input-color) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset;flex-shrink:1;padding-block:.5rem;padding-inline:.75rem;font-size:.875rem}@supports (color:color-mix(in lab,red,red)){.textarea{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset}}.textarea{--input-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.textarea{--input-color:color-mix(in oklab,var(--color-base-content)20%,#0000)}}.textarea textarea{appearance:none;background-color:#0000;border:none}.textarea textarea:focus,.textarea textarea:focus-within{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.textarea textarea:focus,.textarea textarea:focus-within{outline-offset:2px;outline:2px solid #0000}}.textarea:focus,.textarea:focus-within{--input-color:var(--color-base-content);box-shadow:0 1px var(--input-color)}@supports (color:color-mix(in lab,red,red)){.textarea:focus,.textarea:focus-within{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000)}}.textarea:focus,.textarea:focus-within{outline:2px solid var(--input-color);outline-offset:2px;isolation:isolate}.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]){cursor:not-allowed;border-color:var(--color-base-200);background-color:var(--color-base-200);color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]){color:color-mix(in oklab,var(--color-base-content)40%,transparent)}}:is(.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]))::placeholder{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){:is(.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]))::placeholder{color:color-mix(in oklab,var(--color-base-content)20%,transparent)}}.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]){box-shadow:none}.textarea:has(>textarea[disabled])>textarea[disabled]{cursor:not-allowed}.stack{grid-template-rows:3px 4px 1fr 4px 3px;grid-template-columns:3px 4px 1fr 4px 3px;display:inline-grid}.stack>*{width:100%;height:100%}.stack>:nth-child(n+2){opacity:.7;width:100%}.stack>:nth-child(2){z-index:2;opacity:.9}.stack>:first-child{z-index:3;width:100%}:is(.stack,.stack.stack-bottom)>*{grid-area:3/3/6/4}:is(.stack,.stack.stack-bottom)>:nth-child(2){grid-area:2/2/5/5}:is(.stack,.stack.stack-bottom)>:first-child{grid-area:1/1/4/6}.stack.stack-top>*{grid-area:1/3/4/4}.stack.stack-top>:nth-child(2){grid-area:2/2/5/5}.stack.stack-top>:first-child{grid-area:3/1/6/6}.stack.stack-start>*{grid-area:3/1/4/4}.stack.stack-start>:nth-child(2){grid-area:2/2/5/5}.stack.stack-start>:first-child{grid-area:1/3/6/6}.stack.stack-end>*{grid-area:3/3/4/6}.stack.stack-end>:nth-child(2){grid-area:2/2/5/5}.stack.stack-end>:first-child{grid-area:1/1/6/4}.tab-content{order:var(--tabcontent-order);--tabcontent-radius-ss:0;--tabcontent-radius-se:0;--tabcontent-radius-es:0;--tabcontent-radius-ee:0;--tabcontent-order:1;width:100%;margin:var(--tabcontent-margin);border-color:#0000;border-width:var(--border);border-start-start-radius:var(--tabcontent-radius-ss);border-start-end-radius:var(--tabcontent-radius-se);border-end-end-radius:var(--tabcontent-radius-ee);border-end-start-radius:var(--tabcontent-radius-es);display:none}.filter{flex-wrap:wrap;display:flex}.filter input[type=radio]{width:auto}.filter input{opacity:1;transition:margin .1s,opacity .3s,padding .3s,border-width .1s;overflow:hidden;scale:1}.filter input:not(:last-child){margin-inline-end:.25rem}.filter input.filter-reset{aspect-ratio:1}.filter input.filter-reset:after{content:""}.filter:not(:has(input:checked:not(.filter-reset))) .filter-reset,.filter:not(:has(input:checked:not(.filter-reset))) input[type=reset],.filter:has(input:checked:not(.filter-reset)) input:not(:checked,.filter-reset,input[type=reset]){opacity:0;border-width:0;width:0;margin-inline:0;padding-inline:0;scale:0}.filter\!{flex-wrap:wrap!important;display:flex!important}.filter\! input[type=radio]{width:auto!important}.filter\! input{opacity:1!important;transition:margin .1s,opacity .3s,padding .3s,border-width .1s!important;overflow:hidden!important;scale:1!important}.filter\! input:not(:last-child){margin-inline-end:.25rem!important}.filter\! input.filter-reset{aspect-ratio:1!important}.filter\! input.filter-reset:after{content:""!important}.filter\!:not(:has(input:checked:not(.filter-reset))) .filter-reset,.filter\!:not(:has(input:checked:not(.filter-reset))) input[type=reset],.filter\!:has(input:checked:not(.filter-reset)) input:not(:checked,.filter-reset,input[type=reset]){opacity:0!important;border-width:0!important;width:0!important;margin-inline:0!important;padding-inline:0!important;scale:0!important}.label{white-space:nowrap;color:currentColor;align-items:center;gap:.375rem;display:inline-flex}@supports (color:color-mix(in lab,red,red)){.label{color:color-mix(in oklab,currentColor 60%,transparent)}}.label:has(input){cursor:pointer}.label:is(.input>*,.select>*){white-space:nowrap;height:calc(100% - .5rem);font-size:inherit;align-items:center;padding-inline:.75rem;display:flex}.label:is(.input>*,.select>*):first-child{border-inline-end:var(--border)solid currentColor;margin-inline:-.75rem .75rem}@supports (color:color-mix(in lab,red,red)){.label:is(.input>*,.select>*):first-child{border-inline-end:var(--border)solid color-mix(in oklab,currentColor 10%,#0000)}}.label:is(.input>*,.select>*):last-child{border-inline-start:var(--border)solid currentColor;margin-inline:.75rem -.75rem}@supports (color:color-mix(in lab,red,red)){.label:is(.input>*,.select>*):last-child{border-inline-start:var(--border)solid color-mix(in oklab,currentColor 10%,#0000)}}.label\!{white-space:nowrap!important;color:currentColor!important;align-items:center!important;gap:.375rem!important;display:inline-flex!important}@supports (color:color-mix(in lab,red,red)){.label\!{color:color-mix(in oklab,currentColor 60%,transparent)!important}}.label\!:has(input){cursor:pointer!important}.label\!:is(.input>*,.select>*){white-space:nowrap!important;height:calc(100% - .5rem)!important;font-size:inherit!important;align-items:center!important;padding-inline:.75rem!important;display:flex!important}.label\!:is(.input>*,.select>*):first-child{border-inline-end:var(--border)solid currentColor!important;margin-inline:-.75rem .75rem!important}@supports (color:color-mix(in lab,red,red)){.label\!:is(.input>*,.select>*):first-child{border-inline-end:var(--border)solid color-mix(in oklab,currentColor 10%,#0000)!important}}.label\!:is(.input>*,.select>*):last-child{border-inline-start:var(--border)solid currentColor!important;margin-inline:.75rem -.75rem!important}@supports (color:color-mix(in lab,red,red)){.label\!:is(.input>*,.select>*):last-child{border-inline-start:var(--border)solid color-mix(in oklab,currentColor 10%,#0000)!important}}.status{aspect-ratio:1;border-radius:var(--radius-selector);background-color:var(--color-base-content);width:.5rem;height:.5rem;display:inline-block}@supports (color:color-mix(in lab,red,red)){.status{background-color:color-mix(in oklab,var(--color-base-content)20%,transparent)}}.status{vertical-align:middle;color:#0000004d;background-position:50%;background-repeat:no-repeat}@supports (color:color-mix(in lab,red,red)){.status{color:#0000004d}@supports (color:color-mix(in lab,red,red)){.status{color:color-mix(in oklab,var(--color-black)30%,transparent)}}}.status{background-image:radial-gradient(circle at 35% 30%,oklch(1 0 0/calc(var(--depth)*.5)),#0000);box-shadow:0 2px 3px -1px}@supports (color:color-mix(in lab,red,red)){.status{box-shadow:0 2px 3px -1px color-mix(in oklab,currentColor calc(var(--depth)*100%),#0000)}}.status\!{aspect-ratio:1!important;border-radius:var(--radius-selector)!important;background-color:var(--color-base-content)!important;width:.5rem!important;height:.5rem!important;display:inline-block!important}@supports (color:color-mix(in lab,red,red)){.status\!{background-color:color-mix(in oklab,var(--color-base-content)20%,transparent)!important}}.status\!{vertical-align:middle!important;color:#0000004d!important;background-position:50%!important;background-repeat:no-repeat!important}@supports (color:color-mix(in lab,red,red)){.status\!{color:#0000004d!important}@supports (color:color-mix(in lab,red,red)){.status\!{color:color-mix(in oklab,var(--color-black)30%,transparent)!important}}}.status\!{background-image:radial-gradient(circle at 35% 30%,oklch(1 0 0/calc(var(--depth)*.5)),#0000)!important;box-shadow:0 2px 3px -1px!important}@supports (color:color-mix(in lab,red,red)){.status\!{box-shadow:0 2px 3px -1px color-mix(in oklab,currentColor calc(var(--depth)*100%),#0000)!important}}.badge{border-radius:var(--radius-selector);vertical-align:middle;color:var(--badge-fg);border:var(--border)solid var(--badge-color,var(--color-base-200));width:fit-content;padding-inline:calc(.25rem*3 - var(--border));background-size:auto,calc(var(--noise)*100%);background-image:none,var(--fx-noise);background-color:var(--badge-bg);--badge-bg:var(--badge-color,var(--color-base-100));--badge-fg:var(--color-base-content);--size:calc(var(--size-selector,.25rem)*6);height:var(--size);justify-content:center;align-items:center;gap:.5rem;font-size:.875rem;display:inline-flex}.alert{border-radius:var(--radius-box);color:var(--color-base-content);background-color:var(--alert-color,var(--color-base-200));text-align:start;border:var(--border)solid var(--color-base-200);background-size:auto,calc(var(--noise)*100%);background-image:none,var(--fx-noise);box-shadow:0 3px 0 -2px oklch(100% 0 0/calc(var(--depth)*.08)) inset,0 1px #000,0 4px 3px -2px oklch(0% 0 0/calc(var(--depth)*.08));grid-template-columns:auto;grid-auto-flow:column;justify-content:start;place-items:center start;gap:1rem;padding-block:.75rem;padding-inline:1rem;font-size:.875rem;line-height:1.25rem;display:grid}@supports (color:color-mix(in lab,red,red)){.alert{box-shadow:0 3px 0 -2px oklch(100% 0 0/calc(var(--depth)*.08)) inset,0 1px color-mix(in oklab,color-mix(in oklab,#000 20%,var(--alert-color,var(--color-base-200)))calc(var(--depth)*20%),#0000),0 4px 3px -2px oklch(0% 0 0/calc(var(--depth)*.08))}}.alert:has(:nth-child(2)){grid-template-columns:auto minmax(auto,1fr)}.alert.alert-outline{color:var(--alert-color);box-shadow:none;background-color:#0000;background-image:none}.alert.alert-dash{color:var(--alert-color);box-shadow:none;background-color:#0000;background-image:none;border-style:dashed}.alert.alert-soft{color:var(--alert-color,var(--color-base-content));background:var(--alert-color,var(--color-base-content))}@supports (color:color-mix(in lab,red,red)){.alert.alert-soft{background:color-mix(in oklab,var(--alert-color,var(--color-base-content))8%,var(--color-base-100))}}.alert.alert-soft{border-color:var(--alert-color,var(--color-base-content))}@supports (color:color-mix(in lab,red,red)){.alert.alert-soft{border-color:color-mix(in oklab,var(--alert-color,var(--color-base-content))10%,var(--color-base-100))}}.alert.alert-soft{box-shadow:none;background-image:none}.line-clamp-1{-webkit-line-clamp:1;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}.mask{vertical-align:middle;display:inline-block;-webkit-mask-position:50%;mask-position:50%;-webkit-mask-size:contain;mask-size:contain;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat}.block{display:block}.contents{display:contents}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.h-4{height:calc(var(--spacing)*4)}.h-6{height:calc(var(--spacing)*6)}.h-screen{height:100vh}.max-h-96{max-height:calc(var(--spacing)*96)}.w-4{width:calc(var(--spacing)*4)}.w-6{width:calc(var(--spacing)*6)}.w-72{width:calc(var(--spacing)*72)}.w-\[294px\]{width:294px}.w-full{width:100%}.w-screen{width:100vw}.flex-1{flex:1}.shrink{flex-shrink:1}.shrink-0{flex-shrink:0}.-translate-x-1{--tw-translate-x:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-1\/2{--tw-translate-x: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.transform\!{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)!important}.skeleton{border-radius:var(--radius-box);background-color:var(--color-base-300)}@media (prefers-reduced-motion:reduce){.skeleton{transition-duration:15s}}.skeleton{will-change:background-position;background-image:linear-gradient(105deg,#0000 0% 40%,var(--color-base-100)50%,#0000 60% 100%);background-position-x:-50%;background-repeat:no-repeat;background-size:200%}@media (prefers-reduced-motion:no-preference){.skeleton{animation:1.8s ease-in-out infinite skeleton}}.skeleton\!{border-radius:var(--radius-box)!important;background-color:var(--color-base-300)!important}@media (prefers-reduced-motion:reduce){.skeleton\!{transition-duration:15s!important}}.skeleton\!{will-change:background-position!important;background-image:linear-gradient(105deg,#0000 0% 40%,var(--color-base-100)50%,#0000 60% 100%)!important;background-position-x:-50%!important;background-repeat:no-repeat!important;background-size:200%!important}@media (prefers-reduced-motion:no-preference){.skeleton\!{animation:1.8s ease-in-out infinite skeleton!important}}.link{cursor:pointer;text-decoration-line:underline}.link:focus{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.link:focus{outline-offset:2px;outline:2px solid #0000}}.link:focus-visible{outline-offset:2px;outline:2px solid}.resize{resize:both}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.gap-2{gap:calc(var(--spacing)*2)}.gap-4{gap:calc(var(--spacing)*4)}.overflow-y-auto{overflow-y:auto}.rounded-full{border-radius:3.40282e38px}.border{border-style:var(--tw-border-style);border-width:1px}.alert-warning{border-color:var(--color-warning);color:var(--color-warning-content);--alert-color:var(--color-warning)}.stroke-current{stroke:currentColor}.pb-16{padding-bottom:calc(var(--spacing)*16)}.font-mono{font-family:var(--font-mono)}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.whitespace-nowrap{white-space:nowrap}.uppercase{text-transform:uppercase}.italic{font-style:italic}.tabular-nums{--tw-numeric-spacing:tabular-nums;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow\!{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a)!important;box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)!important}.ring{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.blur{--tw-blur:blur(8px);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.grayscale{--tw-grayscale:grayscale(100%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.invert{--tw-invert:invert(100%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.filter\!{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)!important}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}}@keyframes dropdown{0%{opacity:0}}@keyframes radio{0%{padding:5px}50%{padding:3px}}@keyframes toast{0%{opacity:0;scale:.9}to{opacity:1;scale:1}}@keyframes rating{0%,40%{filter:brightness(1.05)contrast(1.05);scale:1.1}}@keyframes skeleton{0%{background-position:150%}to{background-position:-50%}}@keyframes progress{50%{background-position-x:-115%}}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-ordinal{syntax:"*";inherits:false}@property --tw-slashed-zero{syntax:"*";inherits:false}@property --tw-numeric-figure{syntax:"*";inherits:false}@property --tw-numeric-spacing{syntax:"*";inherits:false}@property --tw-numeric-fraction{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
